{"/home/travis/build/npmtest/node-npmtest-nodemailer/test.js":{"path":"/home/travis/build/npmtest/node-npmtest-nodemailer/test.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":1,"9":2,"10":2,"11":1,"12":1,"13":1,"14":1,"15":2,"16":2,"17":2,"18":2,"19":1,"20":1,"21":2,"22":2,"23":2,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":2,"37":2,"38":1,"39":2,"40":2,"41":1,"42":2,"43":2,"44":1,"45":1,"46":1,"47":1,"48":1},"b":{"1":[2,1,1,1],"2":[1,1,1,1],"3":[1,1],"4":[1,1],"5":[1,1],"6":[1,1],"7":[1,1],"8":[1,1],"9":[1,1,1],"10":[1,1],"11":[1,1],"12":[1,1],"13":[1,1],"14":[1,1],"15":[1,1]},"f":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":1,"7":1,"8":2,"9":2,"10":2,"11":1},"fnMap":{"1":{"name":"(anonymous_1)","line":12,"loc":{"start":{"line":12,"column":1},"end":{"line":12,"column":13}}},"2":{"name":"(anonymous_2)","line":19,"loc":{"start":{"line":19,"column":5},"end":{"line":19,"column":17}}},"3":{"name":"(anonymous_3)","line":23,"loc":{"start":{"line":23,"column":24},"end":{"line":23,"column":36}}},"4":{"name":"(anonymous_4)","line":61,"loc":{"start":{"line":61,"column":5},"end":{"line":61,"column":17}}},"5":{"name":"(anonymous_5)","line":82,"loc":{"start":{"line":82,"column":5},"end":{"line":82,"column":17}}},"6":{"name":"(anonymous_6)","line":102,"loc":{"start":{"line":102,"column":83},"end":{"line":105,"column":10}},"skip":true},"7":{"name":"(anonymous_7)","line":113,"loc":{"start":{"line":113,"column":77},"end":{"line":116,"column":10}},"skip":true},"8":{"name":"(anonymous_8)","line":127,"loc":{"start":{"line":127,"column":77},"end":{"line":130,"column":10}},"skip":true},"9":{"name":"(anonymous_9)","line":138,"loc":{"start":{"line":138,"column":83},"end":{"line":141,"column":10}},"skip":true},"10":{"name":"(anonymous_10)","line":149,"loc":{"start":{"line":149,"column":79},"end":{"line":152,"column":10}},"skip":true},"11":{"name":"(anonymous_11)","line":160,"loc":{"start":{"line":160,"column":75},"end":{"line":163,"column":10}},"skip":true}},"statementMap":{"1":{"start":{"line":12,"column":0},"end":{"line":175,"column":5}},"2":{"start":{"line":14,"column":4},"end":{"line":14,"column":14}},"3":{"start":{"line":19,"column":4},"end":{"line":56,"column":9}},"4":{"start":{"line":21,"column":8},"end":{"line":21,"column":19}},"5":{"start":{"line":23,"column":8},"end":{"line":35,"column":13}},"6":{"start":{"line":24,"column":12},"end":{"line":34,"column":13}},"7":{"start":{"line":25,"column":16},"end":{"line":28,"column":30}},"8":{"start":{"line":30,"column":16},"end":{"line":33,"column":27}},"9":{"start":{"line":37,"column":8},"end":{"line":39,"column":21}},"10":{"start":{"line":40,"column":8},"end":{"line":53,"column":9}},"11":{"start":{"line":43,"column":12},"end":{"line":46,"column":14}},"12":{"start":{"line":47,"column":12},"end":{"line":47,"column":18}},"13":{"start":{"line":50,"column":12},"end":{"line":51,"column":46}},"14":{"start":{"line":52,"column":12},"end":{"line":52,"column":18}},"15":{"start":{"line":55,"column":8},"end":{"line":55,"column":35}},"16":{"start":{"line":61,"column":4},"end":{"line":63,"column":9}},"17":{"start":{"line":62,"column":8},"end":{"line":62,"column":15}},"18":{"start":{"line":64,"column":4},"end":{"line":77,"column":5}},"19":{"start":{"line":70,"column":8},"end":{"line":70,"column":14}},"20":{"start":{"line":76,"column":8},"end":{"line":76,"column":14}},"21":{"start":{"line":82,"column":4},"end":{"line":84,"column":9}},"22":{"start":{"line":83,"column":8},"end":{"line":83,"column":15}},"23":{"start":{"line":85,"column":4},"end":{"line":174,"column":5}},"24":{"start":{"line":92,"column":8},"end":{"line":94,"column":63}},"25":{"start":{"line":95,"column":8},"end":{"line":95,"column":14}},"26":{"start":{"line":102,"column":8},"end":{"line":111,"column":10},"skip":true},"27":{"start":{"line":109,"column":12},"end":{"line":109,"column":55},"skip":true},"28":{"start":{"line":110,"column":12},"end":{"line":110,"column":48},"skip":true},"29":{"start":{"line":113,"column":8},"end":{"line":125,"column":10},"skip":true},"30":{"start":{"line":120,"column":12},"end":{"line":120,"column":76},"skip":true},"31":{"start":{"line":121,"column":12},"end":{"line":121,"column":73},"skip":true},"32":{"start":{"line":122,"column":12},"end":{"line":122,"column":74},"skip":true},"33":{"start":{"line":123,"column":12},"end":{"line":123,"column":25},"skip":true},"34":{"start":{"line":124,"column":12},"end":{"line":124,"column":45},"skip":true},"35":{"start":{"line":127,"column":8},"end":{"line":136,"column":10},"skip":true},"36":{"start":{"line":134,"column":12},"end":{"line":134,"column":25},"skip":true},"37":{"start":{"line":135,"column":12},"end":{"line":135,"column":45},"skip":true},"38":{"start":{"line":138,"column":8},"end":{"line":147,"column":10},"skip":true},"39":{"start":{"line":145,"column":12},"end":{"line":145,"column":25},"skip":true},"40":{"start":{"line":146,"column":12},"end":{"line":146,"column":48},"skip":true},"41":{"start":{"line":149,"column":8},"end":{"line":158,"column":10},"skip":true},"42":{"start":{"line":156,"column":12},"end":{"line":156,"column":25},"skip":true},"43":{"start":{"line":157,"column":12},"end":{"line":157,"column":46},"skip":true},"44":{"start":{"line":160,"column":8},"end":{"line":169,"column":10},"skip":true},"45":{"start":{"line":167,"column":12},"end":{"line":167,"column":94},"skip":true},"46":{"start":{"line":168,"column":12},"end":{"line":168,"column":48},"skip":true},"47":{"start":{"line":172,"column":8},"end":{"line":172,"column":35},"skip":true},"48":{"start":{"line":173,"column":8},"end":{"line":173,"column":14},"skip":true}},"branchMap":{"1":{"line":25,"type":"binary-expr","locations":[{"start":{"line":25,"column":23},"end":{"line":25,"column":62}},{"start":{"line":26,"column":20},"end":{"line":26,"column":70}},{"start":{"line":27,"column":20},"end":{"line":27,"column":71}},{"start":{"line":28,"column":20},"end":{"line":28,"column":29}}]},"2":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":23},"end":{"line":30,"column":37}},{"start":{"line":31,"column":20},"end":{"line":31,"column":61}},{"start":{"line":32,"column":20},"end":{"line":32,"column":70}},{"start":{"line":33,"column":20},"end":{"line":33,"column":26}}]},"3":{"line":37,"type":"cond-expr","locations":[{"start":{"line":38,"column":14},"end":{"line":38,"column":20}},{"start":{"line":39,"column":14},"end":{"line":39,"column":20}}]},"4":{"line":40,"type":"switch","locations":[{"start":{"line":42,"column":8},"end":{"line":47,"column":18}},{"start":{"line":49,"column":8},"end":{"line":52,"column":18}}]},"5":{"line":44,"type":"binary-expr","locations":[{"start":{"line":44,"column":16},"end":{"line":44,"column":44}},{"start":{"line":44,"column":48},"end":{"line":44,"column":66}}]},"6":{"line":50,"type":"binary-expr","locations":[{"start":{"line":50,"column":21},"end":{"line":50,"column":49}},{"start":{"line":50,"column":53},"end":{"line":50,"column":72}}]},"7":{"line":64,"type":"switch","locations":[{"start":{"line":69,"column":4},"end":{"line":70,"column":14}},{"start":{"line":75,"column":4},"end":{"line":76,"column":14}}]},"8":{"line":85,"type":"switch","locations":[{"start":{"line":90,"column":4},"end":{"line":95,"column":14}},{"start":{"line":101,"column":4},"end":{"line":173,"column":14},"skip":true}]},"9":{"line":92,"type":"binary-expr","locations":[{"start":{"line":92,"column":18},"end":{"line":92,"column":32}},{"start":{"line":93,"column":12},"end":{"line":93,"column":53}},{"start":{"line":94,"column":12},"end":{"line":94,"column":61}}]},"10":{"line":102,"type":"binary-expr","locations":[{"start":{"line":102,"column":45},"end":{"line":102,"column":79},"skip":true},{"start":{"line":102,"column":83},"end":{"line":111,"column":9},"skip":true}]},"11":{"line":113,"type":"binary-expr","locations":[{"start":{"line":113,"column":42},"end":{"line":113,"column":73},"skip":true},{"start":{"line":113,"column":77},"end":{"line":125,"column":9},"skip":true}]},"12":{"line":127,"type":"binary-expr","locations":[{"start":{"line":127,"column":42},"end":{"line":127,"column":73},"skip":true},{"start":{"line":127,"column":77},"end":{"line":136,"column":9},"skip":true}]},"13":{"line":138,"type":"binary-expr","locations":[{"start":{"line":138,"column":45},"end":{"line":138,"column":79},"skip":true},{"start":{"line":138,"column":83},"end":{"line":147,"column":9},"skip":true}]},"14":{"line":149,"type":"binary-expr","locations":[{"start":{"line":149,"column":43},"end":{"line":149,"column":75},"skip":true},{"start":{"line":149,"column":79},"end":{"line":158,"column":9},"skip":true}]},"15":{"line":160,"type":"binary-expr","locations":[{"start":{"line":160,"column":41},"end":{"line":160,"column":71},"skip":true},{"start":{"line":160,"column":75},"end":{"line":169,"column":9},"skip":true}]}},"code":["/* istanbul instrument in package npmtest_nodemailer */","/*jslint","    bitwise: true,","    browser: true,","    maxerr: 8,","    maxlen: 96,","    node: true,","    nomen: true,","    regexp: true,","    stupid: true","*/","(function () {","    'use strict';","    var local;","","","","    // run shared js-env code - pre-init","    (function () {","        // init local","        local = {};","        // init modeJs","        local.modeJs = (function () {","            try {","                return typeof navigator.userAgent === 'string' &&","                    typeof document.querySelector('body') === 'object' &&","                    typeof XMLHttpRequest.prototype.open === 'function' &&","                    'browser';","            } catch (errorCaughtBrowser) {","                return module.exports &&","                    typeof process.versions.node === 'string' &&","                    typeof require('http').createServer === 'function' &&","                    'node';","            }","        }());","        // init global","        local.global = local.modeJs === 'browser'","            ? window","            : global;","        switch (local.modeJs) {","        // re-init local from window.local","        case 'browser':","            local = local.global.utility2.objectSetDefault(","                local.global.utility2_rollup || local.global.local,","                local.global.utility2","            );","            break;","        // re-init local from example.js","        case 'node':","            local = (local.global.utility2_rollup || require('utility2'))","                .requireExampleJsFromReadme();","            break;","        }","        // export local","        local.global.local = local;","    }());","","","","    // run shared js-env code - function","    (function () {","        return;","    }());","    switch (local.modeJs) {","","","","    // run browser js-env code - function","    case 'browser':","        break;","","","","    // run node js-env code - function","    case 'node':","        break;","    }","","","","    // run shared js-env code - post-init","    (function () {","        return;","    }());","    switch (local.modeJs) {","","","","    // run browser js-env code - post-init","    case 'browser':","        // run tests","        local.nop(local.modeTest &&","            document.querySelector('#testRunButton1') &&","            document.querySelector('#testRunButton1').click());","        break;","","","","    // run node js-env code - post-init","    /* istanbul ignore next */","    case 'node':","        local.testCase_buildApidoc_default = local.testCase_buildApidoc_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildApidoc's default handling-behavior-behavior","         */","            options = { modulePathList: module.paths };","            local.buildApidoc(options, onError);","        };","","        local.testCase_buildApp_default = local.testCase_buildApp_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildApp's default handling-behavior-behavior","         */","            local.testCase_buildReadme_default(options, local.onErrorThrow);","            local.testCase_buildLib_default(options, local.onErrorThrow);","            local.testCase_buildTest_default(options, local.onErrorThrow);","            options = [];","            local.buildApp(options, onError);","        };","","        local.testCase_buildLib_default = local.testCase_buildLib_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildLib's default handling-behavior","         */","            options = {};","            local.buildLib(options, onError);","        };","","        local.testCase_buildReadme_default = local.testCase_buildReadme_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildReadme's default handling-behavior-behavior","         */","            options = {};","            local.buildReadme(options, onError);","        };","","        local.testCase_buildTest_default = local.testCase_buildTest_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildTest's default handling-behavior","         */","            options = {};","            local.buildTest(options, onError);","        };","","        local.testCase_webpage_default = local.testCase_webpage_default || function (","            options,","            onError","        ) {","        /*","         * this function will test webpage's default handling-behavior","         */","            options = { modeCoverageMerge: true, url: local.serverLocalHost + '?modeTest=1' };","            local.browserTest(options, onError);","        };","","        // run test-server","        local.testRunServer(local);","        break;","    }","}());",""],"l":{"12":2,"14":2,"19":2,"21":2,"23":2,"24":2,"25":2,"30":1,"37":2,"40":2,"43":1,"47":1,"50":1,"52":1,"55":2,"61":2,"62":2,"64":2,"70":1,"76":1,"82":2,"83":2,"85":2,"92":1,"95":1,"102":1,"109":1,"110":1,"113":1,"120":1,"121":1,"122":1,"123":1,"124":1,"127":1,"134":2,"135":2,"138":1,"145":2,"146":2,"149":1,"156":2,"157":2,"160":1,"167":1,"168":1,"172":1,"173":1}},"/home/travis/build/npmtest/node-npmtest-nodemailer/lib.npmtest_nodemailer.js":{"path":"/home/travis/build/npmtest/node-npmtest-nodemailer/lib.npmtest_nodemailer.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":1,"9":2,"10":2,"11":2,"12":2,"13":1,"14":1,"15":1,"16":1},"b":{"1":[2,1,1,1],"2":[1,1,1,1],"3":[1,1],"4":[2,2],"5":[1,1]},"f":{"1":2,"2":2,"3":2},"fnMap":{"1":{"name":"(anonymous_1)","line":12,"loc":{"start":{"line":12,"column":1},"end":{"line":12,"column":13}}},"2":{"name":"(anonymous_2)","line":19,"loc":{"start":{"line":19,"column":5},"end":{"line":19,"column":17}}},"3":{"name":"(anonymous_3)","line":23,"loc":{"start":{"line":23,"column":24},"end":{"line":23,"column":36}}}},"statementMap":{"1":{"start":{"line":12,"column":0},"end":{"line":53,"column":5}},"2":{"start":{"line":14,"column":4},"end":{"line":14,"column":14}},"3":{"start":{"line":19,"column":4},"end":{"line":52,"column":9}},"4":{"start":{"line":21,"column":8},"end":{"line":21,"column":19}},"5":{"start":{"line":23,"column":8},"end":{"line":35,"column":13}},"6":{"start":{"line":24,"column":12},"end":{"line":34,"column":13}},"7":{"start":{"line":25,"column":16},"end":{"line":28,"column":30}},"8":{"start":{"line":30,"column":16},"end":{"line":33,"column":27}},"9":{"start":{"line":37,"column":8},"end":{"line":39,"column":21}},"10":{"start":{"line":41,"column":8},"end":{"line":41,"column":54}},"11":{"start":{"line":43,"column":8},"end":{"line":43,"column":55}},"12":{"start":{"line":45,"column":8},"end":{"line":51,"column":9}},"13":{"start":{"line":46,"column":12},"end":{"line":46,"column":61}},"14":{"start":{"line":48,"column":12},"end":{"line":48,"column":35}},"15":{"start":{"line":49,"column":12},"end":{"line":49,"column":49}},"16":{"start":{"line":50,"column":12},"end":{"line":50,"column":43}}},"branchMap":{"1":{"line":25,"type":"binary-expr","locations":[{"start":{"line":25,"column":23},"end":{"line":25,"column":62}},{"start":{"line":26,"column":20},"end":{"line":26,"column":70}},{"start":{"line":27,"column":20},"end":{"line":27,"column":71}},{"start":{"line":28,"column":20},"end":{"line":28,"column":29}}]},"2":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":23},"end":{"line":30,"column":37}},{"start":{"line":31,"column":20},"end":{"line":31,"column":61}},{"start":{"line":32,"column":20},"end":{"line":32,"column":70}},{"start":{"line":33,"column":20},"end":{"line":33,"column":26}}]},"3":{"line":37,"type":"cond-expr","locations":[{"start":{"line":38,"column":14},"end":{"line":38,"column":20}},{"start":{"line":39,"column":14},"end":{"line":39,"column":20}}]},"4":{"line":41,"type":"binary-expr","locations":[{"start":{"line":41,"column":16},"end":{"line":41,"column":44}},{"start":{"line":41,"column":48},"end":{"line":41,"column":53}}]},"5":{"line":45,"type":"if","locations":[{"start":{"line":45,"column":8},"end":{"line":45,"column":8}},{"start":{"line":45,"column":8},"end":{"line":45,"column":8}}]}},"code":["/* istanbul instrument in package npmtest_nodemailer */","/*jslint","    bitwise: true,","    browser: true,","    maxerr: 8,","    maxlen: 96,","    node: true,","    nomen: true,","    regexp: true,","    stupid: true","*/","(function () {","    'use strict';","    var local;","","","","    // run shared js-env code - pre-init","    (function () {","        // init local","        local = {};","        // init modeJs","        local.modeJs = (function () {","            try {","                return typeof navigator.userAgent === 'string' &&","                    typeof document.querySelector('body') === 'object' &&","                    typeof XMLHttpRequest.prototype.open === 'function' &&","                    'browser';","            } catch (errorCaughtBrowser) {","                return module.exports &&","                    typeof process.versions.node === 'string' &&","                    typeof require('http').createServer === 'function' &&","                    'node';","            }","        }());","        // init global","        local.global = local.modeJs === 'browser'","            ? window","            : global;","        // init utility2_rollup","        local = local.global.utility2_rollup || local;","        // init lib","        local.local = local.npmtest_nodemailer = local;","        // init exports","        if (local.modeJs === 'browser') {","            local.global.utility2_npmtest_nodemailer = local;","        } else {","            module.exports = local;","            module.exports.__dirname = __dirname;","            module.exports.module = module;","        }","    }());","}());",""],"l":{"12":2,"14":2,"19":2,"21":2,"23":2,"24":2,"25":2,"30":1,"37":2,"41":2,"43":2,"45":2,"46":1,"48":1,"49":1,"50":1}},"/home/travis/build/npmtest/node-npmtest-nodemailer/example.js":{"path":"/home/travis/build/npmtest/node-npmtest-nodemailer/example.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":1,"9":2,"10":2,"11":2,"12":2,"13":1,"14":2,"15":2,"16":2,"17":2,"18":2,"19":0,"20":2,"21":1,"22":1,"23":1,"24":1,"25":1,"26":0,"27":0,"28":1,"29":1,"30":2,"31":0,"32":0,"33":0,"34":1,"35":2,"36":2,"37":2,"38":2,"39":2,"40":2,"41":0,"42":2,"43":2,"44":2,"45":1,"46":3,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":0,"58":1,"59":6,"60":6,"61":1,"62":2,"63":0,"64":2,"65":1,"66":1,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0},"b":{"1":[2,1,1,1],"2":[1,1,1,1],"3":[1,1],"4":[2,2],"5":[1,1],"6":[1,1],"7":[2,0],"8":[2,1,1,1,1,1],"9":[0,2,0],"10":[1,1],"11":[2,1,1],"12":[1,0],"13":[0,2],"14":[2,0,0,0,0,0,0],"15":[0,2],"16":[2,0],"17":[1,1],"18":[0,1],"19":[1,2,0,2],"20":[1,0],"21":[1,1],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0]},"f":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":2,"9":3,"10":1,"11":6,"12":0},"fnMap":{"1":{"name":"(anonymous_1)","line":26,"loc":{"start":{"line":26,"column":1},"end":{"line":26,"column":13}}},"2":{"name":"(anonymous_2)","line":33,"loc":{"start":{"line":33,"column":5},"end":{"line":33,"column":17}}},"3":{"name":"(anonymous_3)","line":37,"loc":{"start":{"line":37,"column":24},"end":{"line":37,"column":36}}},"4":{"name":"(anonymous_4)","line":69,"loc":{"start":{"line":69,"column":31},"end":{"line":69,"column":48}},"skip":true},"5":{"name":"(anonymous_5)","line":78,"loc":{"start":{"line":78,"column":26},"end":{"line":78,"column":45}},"skip":true},"6":{"name":"(anonymous_6)","line":123,"loc":{"start":{"line":123,"column":33},"end":{"line":123,"column":48}},"skip":true},"7":{"name":"(anonymous_7)","line":125,"loc":{"start":{"line":125,"column":27},"end":{"line":125,"column":39}},"skip":true},"8":{"name":"(anonymous_8)","line":133,"loc":{"start":{"line":133,"column":59},"end":{"line":133,"column":74}},"skip":true},"9":{"name":"(anonymous_9)","line":143,"loc":{"start":{"line":143,"column":45},"end":{"line":143,"column":62}},"skip":true},"10":{"name":"(anonymous_10)","line":144,"loc":{"start":{"line":144,"column":73},"end":{"line":144,"column":92}},"skip":true},"11":{"name":"(anonymous_11)","line":272,"loc":{"start":{"line":272,"column":51},"end":{"line":272,"column":77}},"skip":true},"12":{"name":"(anonymous_12)","line":314,"loc":{"start":{"line":314,"column":32},"end":{"line":314,"column":61}},"skip":true}},"statementMap":{"1":{"start":{"line":26,"column":0},"end":{"line":325,"column":5}},"2":{"start":{"line":28,"column":4},"end":{"line":28,"column":14}},"3":{"start":{"line":33,"column":4},"end":{"line":60,"column":9}},"4":{"start":{"line":35,"column":8},"end":{"line":35,"column":19}},"5":{"start":{"line":37,"column":8},"end":{"line":49,"column":13}},"6":{"start":{"line":38,"column":12},"end":{"line":48,"column":13}},"7":{"start":{"line":39,"column":16},"end":{"line":42,"column":30}},"8":{"start":{"line":44,"column":16},"end":{"line":47,"column":27}},"9":{"start":{"line":51,"column":8},"end":{"line":53,"column":21}},"10":{"start":{"line":55,"column":8},"end":{"line":57,"column":45}},"11":{"start":{"line":59,"column":8},"end":{"line":59,"column":35}},"12":{"start":{"line":61,"column":4},"end":{"line":324,"column":5}},"13":{"start":{"line":69,"column":8},"end":{"line":121,"column":10},"skip":true},"14":{"start":{"line":70,"column":12},"end":{"line":88,"column":13},"skip":true},"15":{"start":{"line":76,"column":16},"end":{"line":87,"column":19},"skip":true},"16":{"start":{"line":79,"column":20},"end":{"line":86,"column":21},"skip":true},"17":{"start":{"line":82,"column":24},"end":{"line":82,"column":43},"skip":true},"18":{"start":{"line":83,"column":24},"end":{"line":83,"column":30},"skip":true},"19":{"start":{"line":85,"column":24},"end":{"line":85,"column":49},"skip":true},"20":{"start":{"line":89,"column":12},"end":{"line":107,"column":13},"skip":true},"21":{"start":{"line":92,"column":16},"end":{"line":102,"column":17},"skip":true},"22":{"start":{"line":93,"column":20},"end":{"line":93,"column":86},"skip":true},"23":{"start":{"line":94,"column":20},"end":{"line":95,"column":45},"skip":true},"24":{"start":{"line":96,"column":20},"end":{"line":96,"column":42},"skip":true},"25":{"start":{"line":97,"column":20},"end":{"line":97,"column":48},"skip":true},"26":{"start":{"line":100,"column":20},"end":{"line":100,"column":85},"skip":true},"27":{"start":{"line":101,"column":20},"end":{"line":101,"column":96},"skip":true},"28":{"start":{"line":103,"column":16},"end":{"line":103,"column":22},"skip":true},"29":{"start":{"line":106,"column":16},"end":{"line":106,"column":22},"skip":true},"30":{"start":{"line":108,"column":12},"end":{"line":120,"column":13},"skip":true},"31":{"start":{"line":114,"column":16},"end":{"line":119,"column":17},"skip":true},"32":{"start":{"line":116,"column":20},"end":{"line":116,"column":78},"skip":true},"33":{"start":{"line":118,"column":20},"end":{"line":118,"column":53},"skip":true},"34":{"start":{"line":123,"column":8},"end":{"line":141,"column":11},"skip":true},"35":{"start":{"line":124,"column":12},"end":{"line":124,"column":54},"skip":true},"36":{"start":{"line":125,"column":12},"end":{"line":140,"column":14},"skip":true},"37":{"start":{"line":126,"column":16},"end":{"line":126,"column":28},"skip":true},"38":{"start":{"line":127,"column":16},"end":{"line":127,"column":69},"skip":true},"39":{"start":{"line":128,"column":16},"end":{"line":128,"column":75},"skip":true},"40":{"start":{"line":129,"column":16},"end":{"line":131,"column":17},"skip":true},"41":{"start":{"line":130,"column":20},"end":{"line":130,"column":27},"skip":true},"42":{"start":{"line":133,"column":16},"end":{"line":137,"column":36},"skip":true},"43":{"start":{"line":134,"column":20},"end":{"line":136,"column":55},"skip":true},"44":{"start":{"line":139,"column":16},"end":{"line":139,"column":57},"skip":true},"45":{"start":{"line":143,"column":8},"end":{"line":147,"column":11},"skip":true},"46":{"start":{"line":144,"column":12},"end":{"line":146,"column":15},"skip":true},"47":{"start":{"line":145,"column":16},"end":{"line":145,"column":70},"skip":true},"48":{"start":{"line":149,"column":8},"end":{"line":149,"column":31},"skip":true},"49":{"start":{"line":150,"column":8},"end":{"line":150,"column":14},"skip":true},"50":{"start":{"line":158,"column":8},"end":{"line":158,"column":31},"skip":true},"51":{"start":{"line":160,"column":8},"end":{"line":160,"column":33},"skip":true},"52":{"start":{"line":161,"column":8},"end":{"line":161,"column":37},"skip":true},"53":{"start":{"line":162,"column":8},"end":{"line":162,"column":35},"skip":true},"54":{"start":{"line":164,"column":8},"end":{"line":164,"column":50},"skip":true},"55":{"start":{"line":166,"column":8},"end":{"line":256,"column":2},"skip":true},"56":{"start":{"line":258,"column":8},"end":{"line":286,"column":9},"skip":true},"57":{"start":{"line":259,"column":12},"end":{"line":269,"column":14},"skip":true},"58":{"start":{"line":271,"column":12},"end":{"line":285,"column":19},"skip":true},"59":{"start":{"line":274,"column":20},"end":{"line":274,"column":35},"skip":true},"60":{"start":{"line":275,"column":20},"end":{"line":284,"column":21},"skip":true},"61":{"start":{"line":277,"column":24},"end":{"line":277,"column":64},"skip":true},"62":{"start":{"line":279,"column":24},"end":{"line":279,"column":40},"skip":true},"63":{"start":{"line":281,"column":24},"end":{"line":281,"column":40},"skip":true},"64":{"start":{"line":283,"column":24},"end":{"line":283,"column":39},"skip":true},"65":{"start":{"line":288,"column":8},"end":{"line":290,"column":9},"skip":true},"66":{"start":{"line":289,"column":12},"end":{"line":289,"column":18},"skip":true},"67":{"start":{"line":291,"column":8},"end":{"line":293,"column":54},"skip":true},"68":{"start":{"line":294,"column":8},"end":{"line":301,"column":37},"skip":true},"69":{"start":{"line":302,"column":8},"end":{"line":302,"column":82},"skip":true},"70":{"start":{"line":305,"column":8},"end":{"line":307,"column":9},"skip":true},"71":{"start":{"line":306,"column":12},"end":{"line":306,"column":82},"skip":true},"72":{"start":{"line":309,"column":8},"end":{"line":311,"column":9},"skip":true},"73":{"start":{"line":310,"column":12},"end":{"line":310,"column":18},"skip":true},"74":{"start":{"line":312,"column":8},"end":{"line":312,"column":54},"skip":true},"75":{"start":{"line":313,"column":8},"end":{"line":313,"column":69},"skip":true},"76":{"start":{"line":314,"column":8},"end":{"line":322,"column":36},"skip":true},"77":{"start":{"line":315,"column":12},"end":{"line":315,"column":61},"skip":true},"78":{"start":{"line":316,"column":12},"end":{"line":319,"column":13},"skip":true},"79":{"start":{"line":317,"column":16},"end":{"line":317,"column":75},"skip":true},"80":{"start":{"line":318,"column":16},"end":{"line":318,"column":23},"skip":true},"81":{"start":{"line":320,"column":12},"end":{"line":320,"column":38},"skip":true},"82":{"start":{"line":321,"column":12},"end":{"line":321,"column":27},"skip":true},"83":{"start":{"line":323,"column":8},"end":{"line":323,"column":14},"skip":true}},"branchMap":{"1":{"line":39,"type":"binary-expr","locations":[{"start":{"line":39,"column":23},"end":{"line":39,"column":62}},{"start":{"line":40,"column":20},"end":{"line":40,"column":70}},{"start":{"line":41,"column":20},"end":{"line":41,"column":71}},{"start":{"line":42,"column":20},"end":{"line":42,"column":29}}]},"2":{"line":44,"type":"binary-expr","locations":[{"start":{"line":44,"column":23},"end":{"line":44,"column":37}},{"start":{"line":45,"column":20},"end":{"line":45,"column":61}},{"start":{"line":46,"column":20},"end":{"line":46,"column":70}},{"start":{"line":47,"column":20},"end":{"line":47,"column":26}}]},"3":{"line":51,"type":"cond-expr","locations":[{"start":{"line":52,"column":14},"end":{"line":52,"column":20}},{"start":{"line":53,"column":14},"end":{"line":53,"column":20}}]},"4":{"line":55,"type":"binary-expr","locations":[{"start":{"line":55,"column":16},"end":{"line":55,"column":44}},{"start":{"line":55,"column":49},"end":{"line":57,"column":43}}]},"5":{"line":55,"type":"cond-expr","locations":[{"start":{"line":56,"column":14},"end":{"line":56,"column":54}},{"start":{"line":57,"column":14},"end":{"line":57,"column":43}}]},"6":{"line":61,"type":"switch","locations":[{"start":{"line":68,"column":4},"end":{"line":150,"column":14},"skip":true},{"start":{"line":156,"column":4},"end":{"line":323,"column":14},"skip":true}]},"7":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":12},"end":{"line":70,"column":12},"skip":true},{"start":{"line":70,"column":12},"end":{"line":70,"column":12},"skip":true}]},"8":{"line":70,"type":"binary-expr","locations":[{"start":{"line":70,"column":16},"end":{"line":70,"column":22},"skip":true},{"start":{"line":70,"column":27},"end":{"line":70,"column":32},"skip":true},{"start":{"line":71,"column":20},"end":{"line":71,"column":39},"skip":true},{"start":{"line":72,"column":20},"end":{"line":72,"column":49},"skip":true},{"start":{"line":73,"column":20},"end":{"line":73,"column":58},"skip":true},{"start":{"line":74,"column":20},"end":{"line":74,"column":69},"skip":true}]},"9":{"line":79,"type":"switch","locations":[{"start":{"line":80,"column":20},"end":{"line":80,"column":33},"skip":true},{"start":{"line":81,"column":20},"end":{"line":83,"column":30},"skip":true},{"start":{"line":84,"column":20},"end":{"line":85,"column":49},"skip":true}]},"10":{"line":89,"type":"switch","locations":[{"start":{"line":90,"column":12},"end":{"line":103,"column":22},"skip":true},{"start":{"line":105,"column":12},"end":{"line":106,"column":22},"skip":true}]},"11":{"line":89,"type":"binary-expr","locations":[{"start":{"line":89,"column":20},"end":{"line":89,"column":25},"skip":true},{"start":{"line":89,"column":29},"end":{"line":89,"column":48},"skip":true},{"start":{"line":89,"column":52},"end":{"line":89,"column":74},"skip":true}]},"12":{"line":92,"type":"if","locations":[{"start":{"line":92,"column":16},"end":{"line":92,"column":16},"skip":true},{"start":{"line":92,"column":16},"end":{"line":92,"column":16},"skip":true}]},"13":{"line":108,"type":"if","locations":[{"start":{"line":108,"column":12},"end":{"line":108,"column":12},"skip":true},{"start":{"line":108,"column":12},"end":{"line":108,"column":12},"skip":true}]},"14":{"line":108,"type":"binary-expr","locations":[{"start":{"line":108,"column":16},"end":{"line":108,"column":61},"skip":true},{"start":{"line":108,"column":66},"end":{"line":108,"column":72},"skip":true},{"start":{"line":108,"column":77},"end":{"line":108,"column":82},"skip":true},{"start":{"line":109,"column":20},"end":{"line":109,"column":39},"skip":true},{"start":{"line":110,"column":20},"end":{"line":110,"column":49},"skip":true},{"start":{"line":111,"column":20},"end":{"line":111,"column":58},"skip":true},{"start":{"line":112,"column":20},"end":{"line":112,"column":68},"skip":true}]},"15":{"line":129,"type":"if","locations":[{"start":{"line":129,"column":16},"end":{"line":129,"column":16},"skip":true},{"start":{"line":129,"column":16},"end":{"line":129,"column":16},"skip":true}]},"16":{"line":134,"type":"cond-expr","locations":[{"start":{"line":135,"column":26},"end":{"line":135,"column":29},"skip":true},{"start":{"line":136,"column":26},"end":{"line":136,"column":54},"skip":true}]},"17":{"line":164,"type":"binary-expr","locations":[{"start":{"line":164,"column":27},"end":{"line":164,"column":43},"skip":true},{"start":{"line":164,"column":47},"end":{"line":164,"column":49},"skip":true}]},"18":{"line":258,"type":"if","locations":[{"start":{"line":258,"column":8},"end":{"line":258,"column":8},"skip":true},{"start":{"line":258,"column":8},"end":{"line":258,"column":8},"skip":true}]},"19":{"line":275,"type":"switch","locations":[{"start":{"line":276,"column":20},"end":{"line":277,"column":64},"skip":true},{"start":{"line":278,"column":20},"end":{"line":279,"column":40},"skip":true},{"start":{"line":280,"column":20},"end":{"line":281,"column":40},"skip":true},{"start":{"line":282,"column":20},"end":{"line":283,"column":39},"skip":true}]},"20":{"line":288,"type":"if","locations":[{"start":{"line":288,"column":8},"end":{"line":288,"column":8},"skip":true},{"start":{"line":288,"column":8},"end":{"line":288,"column":8},"skip":true}]},"21":{"line":288,"type":"binary-expr","locations":[{"start":{"line":288,"column":12},"end":{"line":288,"column":40},"skip":true},{"start":{"line":288,"column":44},"end":{"line":288,"column":67},"skip":true}]},"22":{"line":292,"type":"binary-expr","locations":[{"start":{"line":292,"column":12},"end":{"line":292,"column":50},"skip":true},{"start":{"line":293,"column":12},"end":{"line":293,"column":53},"skip":true}]},"23":{"line":295,"type":"binary-expr","locations":[{"start":{"line":295,"column":12},"end":{"line":295,"column":68},"skip":true},{"start":{"line":296,"column":12},"end":{"line":301,"column":36},"skip":true}]},"24":{"line":302,"type":"binary-expr","locations":[{"start":{"line":302,"column":43},"end":{"line":302,"column":75},"skip":true},{"start":{"line":302,"column":79},"end":{"line":302,"column":81},"skip":true}]},"25":{"line":305,"type":"if","locations":[{"start":{"line":305,"column":8},"end":{"line":305,"column":8},"skip":true},{"start":{"line":305,"column":8},"end":{"line":305,"column":8},"skip":true}]},"26":{"line":309,"type":"if","locations":[{"start":{"line":309,"column":8},"end":{"line":309,"column":8},"skip":true},{"start":{"line":309,"column":8},"end":{"line":309,"column":8},"skip":true}]},"27":{"line":312,"type":"binary-expr","locations":[{"start":{"line":312,"column":27},"end":{"line":312,"column":43},"skip":true},{"start":{"line":312,"column":47},"end":{"line":312,"column":53},"skip":true}]},"28":{"line":316,"type":"if","locations":[{"start":{"line":316,"column":12},"end":{"line":316,"column":12},"skip":true},{"start":{"line":316,"column":12},"end":{"line":316,"column":12},"skip":true}]}},"code":["/*","example.js","","quickstart example","","instruction","    1. save this script as example.js","    2. run the shell command:","        $ npm install npmtest-nodemailer && PORT=8081 node example.js","    3. play with the browser-demo on http://127.0.0.1:8081","*/","","","","/* istanbul instrument in package npmtest_nodemailer */","/*jslint","    bitwise: true,","    browser: true,","    maxerr: 8,","    maxlen: 96,","    node: true,","    nomen: true,","    regexp: true,","    stupid: true","*/","(function () {","    'use strict';","    var local;","","","","    // run shared js-env code - pre-init","    (function () {","        // init local","        local = {};","        // init modeJs","        local.modeJs = (function () {","            try {","                return typeof navigator.userAgent === 'string' &&","                    typeof document.querySelector('body') === 'object' &&","                    typeof XMLHttpRequest.prototype.open === 'function' &&","                    'browser';","            } catch (errorCaughtBrowser) {","                return module.exports &&","                    typeof process.versions.node === 'string' &&","                    typeof require('http').createServer === 'function' &&","                    'node';","            }","        }());","        // init global","        local.global = local.modeJs === 'browser'","            ? window","            : global;","        // init utility2_rollup","        local = local.global.utility2_rollup || (local.modeJs === 'browser'","            ? local.global.utility2_npmtest_nodemailer","            : global.utility2_moduleExports);","        // export local","        local.global.local = local;","    }());","    switch (local.modeJs) {","","","","    // post-init","    // run browser js-env code - post-init","    /* istanbul ignore next */","    case 'browser':","        local.testRunBrowser = function (event) {","            if (!event || (event &&","                    event.currentTarget &&","                    event.currentTarget.className &&","                    event.currentTarget.className.includes &&","                    event.currentTarget.className.includes('onreset'))) {","                // reset output","                Array.from(","                    document.querySelectorAll('body > .resettable')","                ).forEach(function (element) {","                    switch (element.tagName) {","                    case 'INPUT':","                    case 'TEXTAREA':","                        element.value = '';","                        break;","                    default:","                        element.textContent = '';","                    }","                });","            }","            switch (event && event.currentTarget && event.currentTarget.id) {","            case 'testRunButton1':","                // show tests","                if (document.querySelector('#testReportDiv1').style.display === 'none') {","                    document.querySelector('#testReportDiv1').style.display = 'block';","                    document.querySelector('#testRunButton1').textContent =","                        'hide internal test';","                    local.modeTest = true;","                    local.testRunDefault(local);","                // hide tests","                } else {","                    document.querySelector('#testReportDiv1').style.display = 'none';","                    document.querySelector('#testRunButton1').textContent = 'run internal test';","                }","                break;","            // custom-case","            default:","                break;","            }","            if (document.querySelector('#inputTextareaEval1') && (!event || (event &&","                    event.currentTarget &&","                    event.currentTarget.className &&","                    event.currentTarget.className.includes &&","                    event.currentTarget.className.includes('oneval')))) {","                // try to eval input-code","                try {","                    /*jslint evil: true*/","                    eval(document.querySelector('#inputTextareaEval1').value);","                } catch (errorCaught) {","                    console.error(errorCaught.stack);","                }","            }","        };","        // log stderr and stdout to #outputTextareaStdout1","        ['error', 'log'].forEach(function (key) {","            console[key + '_original'] = console[key];","            console[key] = function () {","                var element;","                console[key + '_original'].apply(console, arguments);","                element = document.querySelector('#outputTextareaStdout1');","                if (!element) {","                    return;","                }","                // append text to #outputTextareaStdout1","                element.value += Array.from(arguments).map(function (arg) {","                    return typeof arg === 'string'","                        ? arg","                        : JSON.stringify(arg, null, 4);","                }).join(' ') + '\\n';","                // scroll textarea to bottom","                element.scrollTop = element.scrollHeight;","            };","        });","        // init event-handling","        ['change', 'click', 'keyup'].forEach(function (event) {","            Array.from(document.querySelectorAll('.on' + event)).forEach(function (element) {","                element.addEventListener(event, local.testRunBrowser);","            });","        });","        // run tests","        local.testRunBrowser();","        break;","","","","    // run node js-env code - post-init","    /* istanbul ignore next */","    case 'node':","        // export local","        module.exports = local;","        // require modules","        local.fs = require('fs');","        local.http = require('http');","        local.url = require('url');","        // init assets","        local.assetsDict = local.assetsDict || {};","        /* jslint-ignore-begin */","        local.assetsDict['/assets.index.template.html'] = '\\","<!doctype html>\\n\\","<html lang=\"en\">\\n\\","<head>\\n\\","<meta charset=\"UTF-8\">\\n\\","<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\\n\\","<title>{{env.npm_package_name}} (v{{env.npm_package_version}})</title>\\n\\","<style>\\n\\","/*csslint\\n\\","    box-sizing: false,\\n\\","    universal-selector: false\\n\\","*/\\n\\","* {\\n\\","    box-sizing: border-box;\\n\\","}\\n\\","body {\\n\\","    background: #dde;\\n\\","    font-family: Arial, Helvetica, sans-serif;\\n\\","    margin: 2rem;\\n\\","}\\n\\","body > * {\\n\\","    margin-bottom: 1rem;\\n\\","}\\n\\",".utility2FooterDiv {\\n\\","    margin-top: 20px;\\n\\","    text-align: center;\\n\\","}\\n\\","</style>\\n\\","<style>\\n\\","/*csslint\\n\\","*/\\n\\","textarea {\\n\\","    font-family: monospace;\\n\\","    height: 10rem;\\n\\","    width: 100%;\\n\\","}\\n\\","textarea[readonly] {\\n\\","    background: #ddd;\\n\\","}\\n\\","</style>\\n\\","</head>\\n\\","<body>\\n\\","<!-- utility2-comment\\n\\","<div id=\"ajaxProgressDiv1\" style=\"background: #d00; height: 2px; left: 0; margin: 0; padding: 0; position: fixed; top: 0; transition: background 0.5s, width 1.5s; width: 25%;\"></div>\\n\\","utility2-comment -->\\n\\","<h1>\\n\\","<!-- utility2-comment\\n\\","    <a\\n\\","        {{#if env.npm_package_homepage}}\\n\\","        href=\"{{env.npm_package_homepage}}\"\\n\\","        {{/if env.npm_package_homepage}}\\n\\","        target=\"_blank\"\\n\\","    >\\n\\","utility2-comment -->\\n\\","        {{env.npm_package_name}} (v{{env.npm_package_version}})\\n\\","<!-- utility2-comment\\n\\","    </a>\\n\\","utility2-comment -->\\n\\","</h1>\\n\\","<h3>{{env.npm_package_description}}</h3>\\n\\","<!-- utility2-comment\\n\\","<h4><a download href=\"assets.app.js\">download standalone app</a></h4>\\n\\","<button class=\"onclick onreset\" id=\"testRunButton1\">run internal test</button><br>\\n\\","<div id=\"testReportDiv1\" style=\"display: none;\"></div>\\n\\","utility2-comment -->\\n\\","\\n\\","\\n\\","\\n\\","<label>stderr and stdout</label>\\n\\","<textarea class=\"resettable\" id=\"outputTextareaStdout1\" readonly></textarea>\\n\\","<!-- utility2-comment\\n\\","{{#if isRollup}}\\n\\","<script src=\"assets.app.js\"></script>\\n\\","{{#unless isRollup}}\\n\\","utility2-comment -->\\n\\","<script src=\"assets.utility2.rollup.js\"></script>\\n\\","<script src=\"jsonp.utility2._stateInit?callback=window.utility2._stateInit\"></script>\\n\\","<script src=\"assets.npmtest_nodemailer.rollup.js\"></script>\\n\\","<script src=\"assets.example.js\"></script>\\n\\","<script src=\"assets.test.js\"></script>\\n\\","<!-- utility2-comment\\n\\","{{/if isRollup}}\\n\\","utility2-comment -->\\n\\","<div class=\"utility2FooterDiv\">\\n\\","    [ this app was created with\\n\\","    <a href=\"https://github.com/kaizhu256/node-utility2\" target=\"_blank\">utility2</a>\\n\\","    ]\\n\\","</div>\\n\\","</body>\\n\\","</html>\\n\\","';","        /* jslint-ignore-end */","        if (local.templateRender) {","            local.assetsDict['/'] = local.templateRender(","                local.assetsDict['/assets.index.template.html'],","                {","                    env: local.objectSetDefault(local.env, {","                        npm_package_description: 'the greatest app in the world!',","                        npm_package_name: 'my-app',","                        npm_package_nameAlias: 'my_app',","                        npm_package_version: '0.0.1'","                    })","                }","            );","        } else {","            local.assetsDict['/'] = local.assetsDict['/assets.index.template.html']","                .replace((/\\{\\{env\\.(\\w+?)\\}\\}/g), function (match0, match1) {","                    // jslint-hack","                    String(match0);","                    switch (match1) {","                    case 'npm_package_description':","                        return 'the greatest app in the world!';","                    case 'npm_package_name':","                        return 'my-app';","                    case 'npm_package_nameAlias':","                        return 'my_app';","                    case 'npm_package_version':","                        return '0.0.1';","                    }","                });","        }","        // run the cli","        if (local.global.utility2_rollup || module !== require.main) {","            break;","        }","        local.assetsDict['/assets.example.js'] =","            local.assetsDict['/assets.example.js'] ||","            local.fs.readFileSync(__filename, 'utf8');","        local.assetsDict['/assets.npmtest_nodemailer.rollup.js'] =","            local.assetsDict['/assets.npmtest_nodemailer.rollup.js'] ||","            local.fs.readFileSync(","                // buildCustomOrg-hack","                local.npmtest_nodemailer.__dirname +","                    '/lib.npmtest_nodemailer.js',","                'utf8'","            ).replace((/^#!/), '//');","        local.assetsDict['/favicon.ico'] = local.assetsDict['/favicon.ico'] || '';","        // if $npm_config_timeout_exit exists,","        // then exit this process after $npm_config_timeout_exit ms","        if (Number(process.env.npm_config_timeout_exit)) {","            setTimeout(process.exit, Number(process.env.npm_config_timeout_exit));","        }","        // start server","        if (local.global.utility2_serverHttp1) {","            break;","        }","        process.env.PORT = process.env.PORT || '8081';","        console.error('server starting on port ' + process.env.PORT);","        local.http.createServer(function (request, response) {","            request.urlParsed = local.url.parse(request.url);","            if (local.assetsDict[request.urlParsed.pathname] !== undefined) {","                response.end(local.assetsDict[request.urlParsed.pathname]);","                return;","            }","            response.statusCode = 404;","            response.end();","        }).listen(process.env.PORT);","        break;","    }","}());",""],"l":{"26":2,"28":2,"33":2,"35":2,"37":2,"38":2,"39":2,"44":1,"51":2,"55":2,"59":2,"61":2,"69":1,"70":2,"76":2,"79":2,"82":2,"83":2,"85":1,"89":2,"92":1,"93":1,"94":1,"96":1,"97":1,"100":1,"101":1,"103":1,"106":1,"108":2,"114":1,"116":1,"118":1,"123":1,"124":2,"125":2,"126":2,"127":2,"128":2,"129":2,"130":1,"133":2,"134":2,"139":2,"143":1,"144":3,"145":1,"149":1,"150":1,"158":1,"160":1,"161":1,"162":1,"164":1,"166":1,"258":1,"259":1,"271":1,"274":6,"275":6,"277":1,"279":2,"281":1,"283":2,"288":1,"289":1,"291":1,"294":1,"302":1,"305":1,"306":1,"309":1,"310":1,"312":1,"313":1,"314":1,"315":1,"316":1,"317":1,"318":1,"320":1,"321":1,"323":1}},"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/nodemailer.js":{"path":"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/nodemailer.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0},"b":{"1":[0,0],"2":[0,0,0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0]},"f":{"1":0},"fnMap":{"1":{"name":"(anonymous_1)","line":12,"loc":{"start":{"line":12,"column":33},"end":{"line":12,"column":66}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":35}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":35}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":40}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":50}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":58}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":54}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":50}},"8":{"start":{"line":10,"column":0},"end":{"line":10,"column":48}},"9":{"start":{"line":12,"column":0},"end":{"line":49,"column":2}},"10":{"start":{"line":13,"column":4},"end":{"line":13,"column":18}},"11":{"start":{"line":14,"column":4},"end":{"line":14,"column":16}},"12":{"start":{"line":15,"column":4},"end":{"line":15,"column":15}},"13":{"start":{"line":17,"column":4},"end":{"line":44,"column":5}},"14":{"start":{"line":24,"column":8},"end":{"line":29,"column":9}},"15":{"start":{"line":26,"column":12},"end":{"line":26,"column":59}},"16":{"start":{"line":28,"column":12},"end":{"line":28,"column":34}},"17":{"start":{"line":31,"column":8},"end":{"line":43,"column":9}},"18":{"start":{"line":32,"column":12},"end":{"line":32,"column":48}},"19":{"start":{"line":33,"column":15},"end":{"line":43,"column":9}},"20":{"start":{"line":34,"column":12},"end":{"line":34,"column":57}},"21":{"start":{"line":35,"column":15},"end":{"line":43,"column":9}},"22":{"start":{"line":36,"column":12},"end":{"line":36,"column":55}},"23":{"start":{"line":37,"column":15},"end":{"line":43,"column":9}},"24":{"start":{"line":38,"column":12},"end":{"line":38,"column":53}},"25":{"start":{"line":39,"column":15},"end":{"line":43,"column":9}},"26":{"start":{"line":40,"column":12},"end":{"line":40,"column":52}},"27":{"start":{"line":42,"column":12},"end":{"line":42,"column":53}},"28":{"start":{"line":46,"column":4},"end":{"line":46,"column":56}},"29":{"start":{"line":48,"column":4},"end":{"line":48,"column":18}}},"branchMap":{"1":{"line":17,"type":"if","locations":[{"start":{"line":17,"column":4},"end":{"line":17,"column":4}},{"start":{"line":17,"column":4},"end":{"line":17,"column":4}}]},"2":{"line":19,"type":"binary-expr","locations":[{"start":{"line":19,"column":9},"end":{"line":19,"column":40}},{"start":{"line":19,"column":44},"end":{"line":19,"column":82}},{"start":{"line":21,"column":9},"end":{"line":21,"column":40}},{"start":{"line":21,"column":44},"end":{"line":21,"column":82}}]},"3":{"line":24,"type":"if","locations":[{"start":{"line":24,"column":8},"end":{"line":24,"column":8}},{"start":{"line":24,"column":8},"end":{"line":24,"column":8}}]},"4":{"line":24,"type":"cond-expr","locations":[{"start":{"line":24,"column":59},"end":{"line":24,"column":70}},{"start":{"line":24,"column":73},"end":{"line":24,"column":88}}]},"5":{"line":31,"type":"if","locations":[{"start":{"line":31,"column":8},"end":{"line":31,"column":8}},{"start":{"line":31,"column":8},"end":{"line":31,"column":8}}]},"6":{"line":33,"type":"if","locations":[{"start":{"line":33,"column":15},"end":{"line":33,"column":15}},{"start":{"line":33,"column":15},"end":{"line":33,"column":15}}]},"7":{"line":35,"type":"if","locations":[{"start":{"line":35,"column":15},"end":{"line":35,"column":15}},{"start":{"line":35,"column":15},"end":{"line":35,"column":15}}]},"8":{"line":37,"type":"if","locations":[{"start":{"line":37,"column":15},"end":{"line":37,"column":15}},{"start":{"line":37,"column":15},"end":{"line":37,"column":15}}]},"9":{"line":39,"type":"if","locations":[{"start":{"line":39,"column":15},"end":{"line":39,"column":15}},{"start":{"line":39,"column":15},"end":{"line":39,"column":15}}]}},"code":["'use strict';","","const Mailer = require('./mailer');","const shared = require('./shared');","const SMTPPool = require('./smtp-pool');","const SMTPTransport = require('./smtp-transport');","const SendmailTransport = require('./sendmail-transport');","const StreamTransport = require('./stream-transport');","const JSONTransport = require('./json-transport');","const SESTransport = require('./ses-transport');","","module.exports.createTransport = function (transporter, defaults) {","    let urlConfig;","    let options;","    let mailer;","","    if (","        // provided transporter is a configuration object, not transporter plugin","        (typeof transporter === 'object' && typeof transporter.send !== 'function') ||","        // provided transporter looks like a connection url","        (typeof transporter === 'string' && /^(smtps?|direct):/i.test(transporter))","    ) {","","        if ((urlConfig = typeof transporter === 'string' ? transporter : transporter.url)) {","            // parse a configuration URL into configuration options","            options = shared.parseConnectionUrl(urlConfig);","        } else {","            options = transporter;","        }","","        if (options.pool) {","            transporter = new SMTPPool(options);","        } else if (options.sendmail) {","            transporter = new SendmailTransport(options);","        } else if (options.streamTransport) {","            transporter = new StreamTransport(options);","        } else if (options.jsonTransport) {","            transporter = new JSONTransport(options);","        } else if (options.SES) {","            transporter = new SESTransport(options);","        } else {","            transporter = new SMTPTransport(options);","        }","    }","","    mailer = new Mailer(transporter, options, defaults);","","    return mailer;","};",""],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"12":1,"13":0,"14":0,"15":0,"17":0,"24":0,"26":0,"28":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"42":0,"46":0,"48":0}},"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/mailer/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/mailer/index.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0,0,0,0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"fnMap":{"1":{"name":"(anonymous_1)","line":24,"loc":{"start":{"line":24,"column":15},"end":{"line":24,"column":48}}},"2":{"name":"(anonymous_2)","line":103,"loc":{"start":{"line":103,"column":7},"end":{"line":103,"column":22}}},"3":{"name":"(anonymous_3)","line":118,"loc":{"start":{"line":118,"column":12},"end":{"line":118,"column":29}}},"4":{"name":"(anonymous_4)","line":195,"loc":{"start":{"line":195,"column":20},"end":{"line":195,"column":23}}},"5":{"name":"(anonymous_5)","line":206,"loc":{"start":{"line":206,"column":19},"end":{"line":206,"column":42}}},"6":{"name":"(anonymous_6)","line":258,"loc":{"start":{"line":258,"column":14},"end":{"line":258,"column":25}}},"7":{"name":"(anonymous_7)","line":333,"loc":{"start":{"line":333,"column":22},"end":{"line":333,"column":39}}},"8":{"name":"(anonymous_8)","line":362,"loc":{"start":{"line":362,"column":7},"end":{"line":362,"column":20}}},"9":{"name":"(anonymous_9)","line":366,"loc":{"start":{"line":366,"column":7},"end":{"line":366,"column":13}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":39}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":54}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":49}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":32}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":72}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":29}},"8":{"start":{"line":10,"column":0},"end":{"line":10,"column":30}},"9":{"start":{"line":11,"column":0},"end":{"line":11,"column":50}},"10":{"start":{"line":12,"column":0},"end":{"line":12,"column":46}},"11":{"start":{"line":13,"column":0},"end":{"line":13,"column":27}},"12":{"start":{"line":14,"column":0},"end":{"line":14,"column":27}},"13":{"start":{"line":15,"column":0},"end":{"line":15,"column":33}},"14":{"start":{"line":25,"column":8},"end":{"line":25,"column":16}},"15":{"start":{"line":27,"column":8},"end":{"line":27,"column":37}},"16":{"start":{"line":28,"column":8},"end":{"line":28,"column":40}},"17":{"start":{"line":30,"column":8},"end":{"line":33,"column":10}},"18":{"start":{"line":31,"column":35},"end":{"line":31,"column":67}},"19":{"start":{"line":35,"column":8},"end":{"line":38,"column":10}},"20":{"start":{"line":40,"column":8},"end":{"line":40,"column":30}},"21":{"start":{"line":42,"column":8},"end":{"line":42,"column":76}},"22":{"start":{"line":44,"column":8},"end":{"line":44,"column":39}},"23":{"start":{"line":45,"column":8},"end":{"line":45,"column":39}},"24":{"start":{"line":47,"column":8},"end":{"line":49,"column":11}},"25":{"start":{"line":51,"column":8},"end":{"line":53,"column":62}},"26":{"start":{"line":56,"column":8},"end":{"line":78,"column":9}},"27":{"start":{"line":59,"column":12},"end":{"line":63,"column":15}},"28":{"start":{"line":60,"column":16},"end":{"line":62,"column":52}},"29":{"start":{"line":66,"column":12},"end":{"line":72,"column":15}},"30":{"start":{"line":67,"column":16},"end":{"line":70,"column":55}},"31":{"start":{"line":71,"column":16},"end":{"line":71,"column":40}},"32":{"start":{"line":75,"column":12},"end":{"line":77,"column":15}},"33":{"start":{"line":76,"column":16},"end":{"line":76,"column":43}},"34":{"start":{"line":83,"column":8},"end":{"line":95,"column":11}},"35":{"start":{"line":84,"column":12},"end":{"line":94,"column":14}},"36":{"start":{"line":85,"column":16},"end":{"line":93,"column":17}},"37":{"start":{"line":86,"column":20},"end":{"line":86,"column":61}},"38":{"start":{"line":88,"column":20},"end":{"line":91,"column":78}},"39":{"start":{"line":92,"column":20},"end":{"line":92,"column":33}},"40":{"start":{"line":98,"column":8},"end":{"line":100,"column":9}},"41":{"start":{"line":99,"column":12},"end":{"line":99,"column":48}},"42":{"start":{"line":104,"column":8},"end":{"line":104,"column":39}},"43":{"start":{"line":105,"column":8},"end":{"line":109,"column":9}},"44":{"start":{"line":106,"column":12},"end":{"line":106,"column":47}},"45":{"start":{"line":108,"column":12},"end":{"line":108,"column":49}},"46":{"start":{"line":119,"column":8},"end":{"line":119,"column":20}},"47":{"start":{"line":121,"column":8},"end":{"line":125,"column":9}},"48":{"start":{"line":122,"column":12},"end":{"line":124,"column":15}},"49":{"start":{"line":123,"column":16},"end":{"line":123,"column":67}},"50":{"start":{"line":127,"column":8},"end":{"line":130,"column":9}},"51":{"start":{"line":128,"column":12},"end":{"line":128,"column":56}},"52":{"start":{"line":129,"column":12},"end":{"line":129,"column":35}},"53":{"start":{"line":132,"column":8},"end":{"line":132,"column":47}},"54":{"start":{"line":134,"column":8},"end":{"line":139,"column":88}},"55":{"start":{"line":141,"column":8},"end":{"line":190,"column":11}},"56":{"start":{"line":142,"column":12},"end":{"line":149,"column":13}},"57":{"start":{"line":143,"column":16},"end":{"line":147,"column":59}},"58":{"start":{"line":148,"column":16},"end":{"line":148,"column":37}},"59":{"start":{"line":151,"column":12},"end":{"line":151,"column":65}},"60":{"start":{"line":153,"column":12},"end":{"line":153,"column":35}},"61":{"start":{"line":154,"column":12},"end":{"line":154,"column":38}},"62":{"start":{"line":155,"column":12},"end":{"line":155,"column":34}},"63":{"start":{"line":157,"column":12},"end":{"line":189,"column":15}},"64":{"start":{"line":158,"column":16},"end":{"line":165,"column":17}},"65":{"start":{"line":159,"column":20},"end":{"line":163,"column":62}},"66":{"start":{"line":164,"column":20},"end":{"line":164,"column":41}},"67":{"start":{"line":167,"column":16},"end":{"line":177,"column":17}},"68":{"start":{"line":168,"column":20},"end":{"line":176,"column":23}},"69":{"start":{"line":169,"column":24},"end":{"line":169,"column":89}},"70":{"start":{"line":170,"column":24},"end":{"line":174,"column":86}},"71":{"start":{"line":173,"column":62},"end":{"line":173,"column":100}},"72":{"start":{"line":175,"column":24},"end":{"line":175,"column":65}},"73":{"start":{"line":179,"column":16},"end":{"line":188,"column":19}},"74":{"start":{"line":180,"column":20},"end":{"line":186,"column":21}},"75":{"start":{"line":181,"column":24},"end":{"line":185,"column":62}},"76":{"start":{"line":187,"column":20},"end":{"line":187,"column":38}},"77":{"start":{"line":192,"column":8},"end":{"line":192,"column":23}},"78":{"start":{"line":196,"column":8},"end":{"line":203,"column":10}},"79":{"start":{"line":207,"column":8},"end":{"line":207,"column":39}},"80":{"start":{"line":209,"column":8},"end":{"line":211,"column":9}},"81":{"start":{"line":210,"column":12},"end":{"line":210,"column":30}},"82":{"start":{"line":213,"column":8},"end":{"line":213,"column":56}},"83":{"start":{"line":214,"column":8},"end":{"line":214,"column":62}},"84":{"start":{"line":216,"column":8},"end":{"line":222,"column":9}},"85":{"start":{"line":217,"column":12},"end":{"line":221,"column":68}},"86":{"start":{"line":224,"column":8},"end":{"line":226,"column":9}},"87":{"start":{"line":225,"column":12},"end":{"line":225,"column":30}},"88":{"start":{"line":228,"column":8},"end":{"line":228,"column":20}},"89":{"start":{"line":229,"column":8},"end":{"line":229,"column":30}},"90":{"start":{"line":230,"column":8},"end":{"line":248,"column":10}},"91":{"start":{"line":231,"column":12},"end":{"line":231,"column":80}},"92":{"start":{"line":232,"column":12},"end":{"line":240,"column":13}},"93":{"start":{"line":233,"column":16},"end":{"line":239,"column":17}},"94":{"start":{"line":234,"column":20},"end":{"line":234,"column":35}},"95":{"start":{"line":235,"column":20},"end":{"line":235,"column":28}},"96":{"start":{"line":236,"column":20},"end":{"line":236,"column":45}},"97":{"start":{"line":238,"column":20},"end":{"line":238,"column":38}},"98":{"start":{"line":241,"column":12},"end":{"line":241,"column":43}},"99":{"start":{"line":242,"column":12},"end":{"line":247,"column":15}},"100":{"start":{"line":243,"column":16},"end":{"line":245,"column":17}},"101":{"start":{"line":244,"column":20},"end":{"line":244,"column":41}},"102":{"start":{"line":246,"column":16},"end":{"line":246,"column":33}},"103":{"start":{"line":250,"column":8},"end":{"line":250,"column":25}},"104":{"start":{"line":259,"column":8},"end":{"line":259,"column":43}},"105":{"start":{"line":262,"column":8},"end":{"line":330,"column":10}},"106":{"start":{"line":263,"column":12},"end":{"line":263,"column":74}},"107":{"start":{"line":265,"column":12},"end":{"line":267,"column":13}},"108":{"start":{"line":266,"column":16},"end":{"line":266,"column":92}},"109":{"start":{"line":269,"column":12},"end":{"line":328,"column":13}},"110":{"start":{"line":273,"column":20},"end":{"line":280,"column":23}},"111":{"start":{"line":274,"column":24},"end":{"line":276,"column":25}},"112":{"start":{"line":275,"column":28},"end":{"line":275,"column":49}},"113":{"start":{"line":277,"column":24},"end":{"line":279,"column":27}},"114":{"start":{"line":281,"column":20},"end":{"line":281,"column":27}},"115":{"start":{"line":287,"column":24},"end":{"line":289,"column":25}},"116":{"start":{"line":288,"column":28},"end":{"line":288,"column":82}},"117":{"start":{"line":291,"column":24},"end":{"line":315,"column":26}},"118":{"start":{"line":292,"column":28},"end":{"line":314,"column":31}},"119":{"start":{"line":308,"column":32},"end":{"line":310,"column":33}},"120":{"start":{"line":309,"column":36},"end":{"line":309,"column":57}},"121":{"start":{"line":311,"column":32},"end":{"line":313,"column":35}},"122":{"start":{"line":317,"column":24},"end":{"line":319,"column":25}},"123":{"start":{"line":318,"column":28},"end":{"line":318,"column":59}},"124":{"start":{"line":321,"column":24},"end":{"line":326,"column":27}},"125":{"start":{"line":322,"column":28},"end":{"line":324,"column":29}},"126":{"start":{"line":323,"column":32},"end":{"line":323,"column":53}},"127":{"start":{"line":325,"column":28},"end":{"line":325,"column":45}},"128":{"start":{"line":329,"column":12},"end":{"line":329,"column":63}},"129":{"start":{"line":334,"column":8},"end":{"line":336,"column":9}},"130":{"start":{"line":335,"column":12},"end":{"line":335,"column":30}},"131":{"start":{"line":337,"column":8},"end":{"line":359,"column":11}},"132":{"start":{"line":338,"column":12},"end":{"line":340,"column":13}},"133":{"start":{"line":339,"column":16},"end":{"line":339,"column":37}},"134":{"start":{"line":341,"column":12},"end":{"line":341,"column":31}},"135":{"start":{"line":342,"column":12},"end":{"line":356,"column":15}},"136":{"start":{"line":343,"column":16},"end":{"line":343,"column":80}},"137":{"start":{"line":344,"column":16},"end":{"line":346,"column":17}},"138":{"start":{"line":345,"column":20},"end":{"line":345,"column":47}},"139":{"start":{"line":347,"column":16},"end":{"line":349,"column":17}},"140":{"start":{"line":348,"column":20},"end":{"line":348,"column":83}},"141":{"start":{"line":350,"column":16},"end":{"line":354,"column":19}},"142":{"start":{"line":355,"column":16},"end":{"line":355,"column":45}},"143":{"start":{"line":357,"column":12},"end":{"line":357,"column":34}},"144":{"start":{"line":358,"column":12},"end":{"line":358,"column":23}},"145":{"start":{"line":363,"column":8},"end":{"line":363,"column":41}},"146":{"start":{"line":367,"column":8},"end":{"line":367,"column":34}},"147":{"start":{"line":371,"column":0},"end":{"line":371,"column":22}}},"branchMap":{"1":{"line":27,"type":"binary-expr","locations":[{"start":{"line":27,"column":23},"end":{"line":27,"column":30}},{"start":{"line":27,"column":34},"end":{"line":27,"column":36}}]},"2":{"line":28,"type":"binary-expr","locations":[{"start":{"line":28,"column":25},"end":{"line":28,"column":33}},{"start":{"line":28,"column":37},"end":{"line":28,"column":39}}]},"3":{"line":42,"type":"cond-expr","locations":[{"start":{"line":42,"column":40},"end":{"line":42,"column":67}},{"start":{"line":42,"column":70},"end":{"line":42,"column":75}}]},"4":{"line":48,"type":"binary-expr","locations":[{"start":{"line":48,"column":23},"end":{"line":48,"column":45}},{"start":{"line":48,"column":49},"end":{"line":48,"column":55}}]},"5":{"line":56,"type":"if","locations":[{"start":{"line":56,"column":8},"end":{"line":56,"column":8}},{"start":{"line":56,"column":8},"end":{"line":56,"column":8}}]},"6":{"line":85,"type":"if","locations":[{"start":{"line":85,"column":16},"end":{"line":85,"column":16}},{"start":{"line":85,"column":16},"end":{"line":85,"column":16}}]},"7":{"line":98,"type":"if","locations":[{"start":{"line":98,"column":8},"end":{"line":98,"column":8}},{"start":{"line":98,"column":8},"end":{"line":98,"column":8}}]},"8":{"line":98,"type":"binary-expr","locations":[{"start":{"line":98,"column":12},"end":{"line":98,"column":30}},{"start":{"line":98,"column":34},"end":{"line":98,"column":72}}]},"9":{"line":104,"type":"binary-expr","locations":[{"start":{"line":104,"column":16},"end":{"line":104,"column":20}},{"start":{"line":104,"column":24},"end":{"line":104,"column":26}}]},"10":{"line":105,"type":"if","locations":[{"start":{"line":105,"column":8},"end":{"line":105,"column":8}},{"start":{"line":105,"column":8},"end":{"line":105,"column":8}}]},"11":{"line":121,"type":"if","locations":[{"start":{"line":121,"column":8},"end":{"line":121,"column":8}},{"start":{"line":121,"column":8},"end":{"line":121,"column":8}}]},"12":{"line":121,"type":"binary-expr","locations":[{"start":{"line":121,"column":12},"end":{"line":121,"column":21}},{"start":{"line":121,"column":25},"end":{"line":121,"column":54}}]},"13":{"line":127,"type":"if","locations":[{"start":{"line":127,"column":8},"end":{"line":127,"column":8}},{"start":{"line":127,"column":8},"end":{"line":127,"column":8}}]},"14":{"line":142,"type":"if","locations":[{"start":{"line":142,"column":12},"end":{"line":142,"column":12}},{"start":{"line":142,"column":12},"end":{"line":142,"column":12}}]},"15":{"line":158,"type":"if","locations":[{"start":{"line":158,"column":16},"end":{"line":158,"column":16}},{"start":{"line":158,"column":16},"end":{"line":158,"column":16}}]},"16":{"line":167,"type":"if","locations":[{"start":{"line":167,"column":16},"end":{"line":167,"column":16}},{"start":{"line":167,"column":16},"end":{"line":167,"column":16}}]},"17":{"line":167,"type":"binary-expr","locations":[{"start":{"line":167,"column":20},"end":{"line":167,"column":34}},{"start":{"line":167,"column":38},"end":{"line":167,"column":47}}]},"18":{"line":169,"type":"cond-expr","locations":[{"start":{"line":169,"column":52},"end":{"line":169,"column":76}},{"start":{"line":169,"column":79},"end":{"line":169,"column":88}}]},"19":{"line":180,"type":"if","locations":[{"start":{"line":180,"column":20},"end":{"line":180,"column":20}},{"start":{"line":180,"column":20},"end":{"line":180,"column":20}}]},"20":{"line":207,"type":"binary-expr","locations":[{"start":{"line":207,"column":16},"end":{"line":207,"column":20}},{"start":{"line":207,"column":24},"end":{"line":207,"column":26}}]},"21":{"line":209,"type":"if","locations":[{"start":{"line":209,"column":8},"end":{"line":209,"column":8}},{"start":{"line":209,"column":8},"end":{"line":209,"column":8}}]},"22":{"line":213,"type":"binary-expr","locations":[{"start":{"line":213,"column":26},"end":{"line":213,"column":49}},{"start":{"line":213,"column":53},"end":{"line":213,"column":55}}]},"23":{"line":214,"type":"binary-expr","locations":[{"start":{"line":214,"column":29},"end":{"line":214,"column":55}},{"start":{"line":214,"column":59},"end":{"line":214,"column":61}}]},"24":{"line":216,"type":"if","locations":[{"start":{"line":216,"column":8},"end":{"line":216,"column":8}},{"start":{"line":216,"column":8},"end":{"line":216,"column":8}}]},"25":{"line":224,"type":"if","locations":[{"start":{"line":224,"column":8},"end":{"line":224,"column":8}},{"start":{"line":224,"column":8},"end":{"line":224,"column":8}}]},"26":{"line":231,"type":"cond-expr","locations":[{"start":{"line":231,"column":51},"end":{"line":231,"column":65}},{"start":{"line":231,"column":68},"end":{"line":231,"column":79}}]},"27":{"line":232,"type":"if","locations":[{"start":{"line":232,"column":12},"end":{"line":232,"column":12}},{"start":{"line":232,"column":12},"end":{"line":232,"column":12}}]},"28":{"line":233,"type":"if","locations":[{"start":{"line":233,"column":16},"end":{"line":233,"column":16}},{"start":{"line":233,"column":16},"end":{"line":233,"column":16}}]},"29":{"line":233,"type":"binary-expr","locations":[{"start":{"line":233,"column":20},"end":{"line":233,"column":39}},{"start":{"line":233,"column":43},"end":{"line":233,"column":61}}]},"30":{"line":243,"type":"if","locations":[{"start":{"line":243,"column":16},"end":{"line":243,"column":16}},{"start":{"line":243,"column":16},"end":{"line":243,"column":16}}]},"31":{"line":265,"type":"if","locations":[{"start":{"line":265,"column":12},"end":{"line":265,"column":12}},{"start":{"line":265,"column":12},"end":{"line":265,"column":12}}]},"32":{"line":269,"type":"switch","locations":[{"start":{"line":271,"column":16},"end":{"line":271,"column":28}},{"start":{"line":272,"column":16},"end":{"line":281,"column":27}},{"start":{"line":282,"column":16},"end":{"line":282,"column":29}},{"start":{"line":283,"column":16},"end":{"line":283,"column":30}},{"start":{"line":284,"column":16},"end":{"line":284,"column":30}},{"start":{"line":285,"column":16},"end":{"line":327,"column":21}}]},"33":{"line":274,"type":"if","locations":[{"start":{"line":274,"column":24},"end":{"line":274,"column":24}},{"start":{"line":274,"column":24},"end":{"line":274,"column":24}}]},"34":{"line":287,"type":"if","locations":[{"start":{"line":287,"column":24},"end":{"line":287,"column":24}},{"start":{"line":287,"column":24},"end":{"line":287,"column":24}}]},"35":{"line":296,"type":"binary-expr","locations":[{"start":{"line":296,"column":42},"end":{"line":296,"column":83}},{"start":{"line":296,"column":87},"end":{"line":296,"column":88}}]},"36":{"line":303,"type":"cond-expr","locations":[{"start":{"line":303,"column":62},"end":{"line":303,"column":67}},{"start":{"line":303,"column":70},"end":{"line":306,"column":33}}]},"37":{"line":308,"type":"if","locations":[{"start":{"line":308,"column":32},"end":{"line":308,"column":32}},{"start":{"line":308,"column":32},"end":{"line":308,"column":32}}]},"38":{"line":317,"type":"if","locations":[{"start":{"line":317,"column":24},"end":{"line":317,"column":24}},{"start":{"line":317,"column":24},"end":{"line":317,"column":24}}]},"39":{"line":322,"type":"if","locations":[{"start":{"line":322,"column":28},"end":{"line":322,"column":28}},{"start":{"line":322,"column":28},"end":{"line":322,"column":28}}]},"40":{"line":334,"type":"if","locations":[{"start":{"line":334,"column":8},"end":{"line":334,"column":8}},{"start":{"line":334,"column":8},"end":{"line":334,"column":8}}]},"41":{"line":334,"type":"binary-expr","locations":[{"start":{"line":334,"column":12},"end":{"line":334,"column":40}},{"start":{"line":334,"column":44},"end":{"line":334,"column":69}},{"start":{"line":334,"column":73},"end":{"line":334,"column":88}}]},"42":{"line":338,"type":"if","locations":[{"start":{"line":338,"column":12},"end":{"line":338,"column":12}},{"start":{"line":338,"column":12},"end":{"line":338,"column":12}}]},"43":{"line":342,"type":"binary-expr","locations":[{"start":{"line":342,"column":20},"end":{"line":342,"column":24}},{"start":{"line":342,"column":28},"end":{"line":342,"column":30}}]},"44":{"line":344,"type":"if","locations":[{"start":{"line":344,"column":16},"end":{"line":344,"column":16}},{"start":{"line":344,"column":16},"end":{"line":344,"column":16}}]},"45":{"line":347,"type":"if","locations":[{"start":{"line":347,"column":16},"end":{"line":347,"column":16}},{"start":{"line":347,"column":16},"end":{"line":347,"column":16}}]},"46":{"line":348,"type":"binary-expr","locations":[{"start":{"line":348,"column":54},"end":{"line":348,"column":75}},{"start":{"line":348,"column":79},"end":{"line":348,"column":81}}]}},"code":["'use strict';","","const EventEmitter = require('events');","const shared = require('../shared');","const mimeTypes = require('../mime-funcs/mime-types');","const MailComposer = require('../mail-composer');","const DKIM = require('../dkim');","const httpProxyClient = require('../smtp-connection/http-proxy-client');","const util = require('util');","const urllib = require('url');","const packageData = require('../../package.json');","const MailMessage = require('./mail-message');","const net = require('net');","const dns = require('dns');","const crypto = require('crypto');","","/**"," * Creates an object for exposing the Mail API"," *"," * @constructor"," * @param {Object} transporter Transport object instance to pass the mails to"," */","class Mail extends EventEmitter {","    constructor(transporter, options, defaults) {","        super();","","        this.options = options || {};","        this._defaults = defaults || {};","","        this._defaultPlugins = {","            compile: [(...args) => this._convertDataImages(...args)],","            stream: []","        };","","        this._userPlugins = {","            compile: [],","            stream: []","        };","","        this.meta = new Map();","","        this.dkim = this.options.dkim ? new DKIM(this.options.dkim) : false;","","        this.transporter = transporter;","        this.transporter.mailer = this;","","        this.logger = shared.getLogger(this.options, {","            component: this.options.component || 'mail'","        });","","        this.logger.debug({","            tnx: 'create'","        }, 'Creating transport: %s', this.getVersionString());","","        // setup emit handlers for the transporter","        if (typeof transporter.on === 'function') {","","            // deprecated log interface","            this.transporter.on('log', log => {","                this.logger.debug({","                    tnx: 'transport'","                }, '%s: %s', log.type, log.message);","            });","","            // transporter errors","            this.transporter.on('error', err => {","                this.logger.error({","                    err,","                    tnx: 'transport'","                }, 'Transport Error: %s', err.message);","                this.emit('error', err);","            });","","            // indicates if the sender has became idle","            this.transporter.on('idle', (...args) => {","                this.emit('idle', ...args);","            });","        }","","        /**","         * Optional methods passed to the underlying transport object","         */","        ['close', 'isIdle', 'verify'].forEach(method => {","            this[method] = (...args) => {","                if (typeof this.transporter[method] === 'function') {","                    return this.transporter[method](...args);","                } else {","                    this.logger.warn({","                        tnx: 'transport',","                        methodName: method","                    }, 'Non existing method %s called for transport', method);","                    return false;","                }","            };","        });","","        // setup proxy handling","        if (this.options.proxy && typeof this.options.proxy === 'string') {","            this.setupProxy(this.options.proxy);","        }","    }","","    use(step, plugin) {","        step = (step || '').toString();","        if (!this._userPlugins.hasOwnProperty(step)) {","            this._userPlugins[step] = [plugin];","        } else {","            this._userPlugins[step].push(plugin);","        }","    }","","    /**","     * Sends an email using the preselected transport object","     *","     * @param {Object} data E-data description","     * @param {Function} callback Callback to run once the sending succeeded or failed","     */","    sendMail(data, callback) {","        let promise;","","        if (!callback && typeof Promise === 'function') {","            promise = new Promise((resolve, reject) => {","                callback = shared.callbackPromise(resolve, reject);","            });","        }","","        if (typeof this.getSocket === 'function') {","            this.transporter.getSocket = this.getSocket;","            this.getSocket = false;","        }","","        let mail = new MailMessage(this, data);","","        this.logger.debug({","            tnx: 'transport',","            name: this.transporter.name,","            version: this.transporter.version,","            action: 'send'","        }, 'Sending mail using %s/%s', this.transporter.name, this.transporter.version);","","        this._processPlugins('compile', mail, err => {","            if (err) {","                this.logger.error({","                    err,","                    tnx: 'plugin',","                    action: 'compile'","                }, 'PluginCompile Error: %s', err.message);","                return callback(err);","            }","","            mail.message = new MailComposer(mail.data).compile();","","            mail.setMailerHeader();","            mail.setPriorityHeaders();","            mail.setListHeaders();","","            this._processPlugins('stream', mail, err => {","                if (err) {","                    this.logger.error({","                        err,","                        tnx: 'plugin',","                        action: 'stream'","                    }, 'PluginStream Error: %s', err.message);","                    return callback(err);","                }","","                if (mail.data.dkim || this.dkim) {","                    mail.message.processFunc(input => {","                        let dkim = mail.data.dkim ? new DKIM(mail.data.dkim) : this.dkim;","                        this.logger.debug({","                            tnx: 'DKIM',","                            messageId: mail.message.messageId(),","                            dkimDomains: dkim.keys.map(key => key.keySelector + '.' + key.domainName).join(', ')","                        }, 'Signing outgoing message with %s keys', dkim.keys.length);","                        return dkim.sign(input, mail.data._dkim);","                    });","                }","","                this.transporter.send(mail, (...args) => {","                    if (args[0]) {","                        this.logger.error({","                            err: args[0],","                            tnx: 'transport',","                            action: 'send'","                        }, 'Send Error: %s', args[0].message);","                    }","                    callback(...args);","                });","            });","        });","","        return promise;","    }","","    getVersionString() {","        return util.format(","            '%s (%s; +%s; %s/%s)',","            packageData.name,","            packageData.version,","            packageData.homepage,","            this.transporter.name,","            this.transporter.version","        );","    }","","    _processPlugins(step, mail, callback) {","        step = (step || '').toString();","","        if (!this._userPlugins.hasOwnProperty(step)) {","            return callback();","        }","","        let userPlugins = this._userPlugins[step] || [];","        let defaultPlugins = this._defaultPlugins[step] || [];","","        if (userPlugins.length) {","            this.logger.debug({","                tnx: 'transaction',","                pluginCount: userPlugins.length,","                step","            }, 'Using %s plugins for %s', userPlugins.length, step);","        }","","        if (userPlugins.length + defaultPlugins.length === 0) {","            return callback();","        }","","        let pos = 0;","        let block = 'default';","        let processPlugins = () => {","            let curplugins = block === 'default' ? defaultPlugins : userPlugins;","            if (pos >= curplugins.length) {","                if (block === 'default' && userPlugins.length) {","                    block = 'user';","                    pos = 0;","                    curplugins = userPlugins;","                } else {","                    return callback();","                }","            }","            let plugin = curplugins[pos++];","            plugin(mail, err => {","                if (err) {","                    return callback(err);","                }","                processPlugins();","            });","        };","","        processPlugins();","    }","","    /**","     * Sets up proxy handler for a Nodemailer object","     *","     * @param {String} proxyUrl Proxy configuration url","     */","    setupProxy(proxyUrl) {","        let proxy = urllib.parse(proxyUrl);","","        // setup socket handler for the mailer object","        this.getSocket = (options, callback) => {","            let protocol = proxy.protocol.replace(/:$/, '').toLowerCase();","","            if (this.meta.has('proxy_handler_' + protocol)) {","                return this.meta.get('proxy_handler_' + protocol)(proxy, options, callback);","            }","","            switch (protocol) {","                // Connect using a HTTP CONNECT method","                case 'http':","                case 'https':","                    httpProxyClient(proxy.href, options.port, options.host, (err, socket) => {","                        if (err) {","                            return callback(err);","                        }","                        return callback(null, {","                            connection: socket","                        });","                    });","                    return;","                case 'socks':","                case 'socks5':","                case 'socks4':","                case 'socks4a':","                    {","                        if (!this.meta.has('proxy_socks_module')) {","                            return callback(new Error('Socks module not loaded'));","                        }","","                        let connect = ipaddress => {","                            this.meta.get('proxy_socks_module').createConnection({","                                proxy: {","                                    ipaddress,","                                    port: proxy.port,","                                    type: Number(proxy.protocol.replace(/\\D/g, '')) || 5","                                },","                                target: {","                                    host: options.host,","                                    port: options.port","                                },","                                command: 'connect',","                                authentication: !proxy.auth ? false : {","                                    username: decodeURIComponent(proxy.auth.split(':').shift()),","                                    password: decodeURIComponent(proxy.auth.split(':').pop())","                                }","                            }, (err, socket) => {","                                if (err) {","                                    return callback(err);","                                }","                                return callback(null, {","                                    connection: socket","                                });","                            });","                        };","","                        if (net.isIP(proxy.hostname)) {","                            return connect(proxy.hostname);","                        }","","                        return dns.resolve(proxy.hostname, (err, address) => {","                            if (err) {","                                return callback(err);","                            }","                            connect(address);","                        });","                    }","            }","            callback(new Error('Unknown proxy configuration'));","        };","    }","","    _convertDataImages(mail, callback) {","        if (!this.options.attachDataUrls && !mail.data.attachDataUrls || !mail.data.html) {","            return callback();","        }","        mail.resolveContent(mail.data, 'html', (err, html) => {","            if (err) {","                return callback(err);","            }","            let cidCounter = 0;","            html = (html || '').toString().replace(/(<img\\b[^>]* src\\s*=[\\s\"']*)(data:([^;]+);[^\"'>\\s]+)/gi, (match, prefix, dataUri, mimeType) => {","                let cid = crypto.randomBytes(10).toString('hex') + '@localhost';","                if (!mail.data.attachments) {","                    mail.data.attachments = [];","                }","                if (!Array.isArray(mail.data.attachments)) {","                    mail.data.attachments = [].concat(mail.data.attachments || []);","                }","                mail.data.attachments.push({","                    path: dataUri,","                    cid,","                    filename: 'image-' + (++cidCounter) + '.' + mimeTypes.detectExtension(mimeType)","                });","                return prefix + 'cid:' + cid;","            });","            mail.data.html = html;","            callback();","        });","    }","","    set(key, value) {","        return this.meta.set(key, value);","    }","","    get(key) {","        return this.meta.get(key);","    }","}","","module.exports = Mail;",""],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"25":0,"27":0,"28":0,"30":0,"31":0,"35":0,"40":0,"42":0,"44":0,"45":0,"47":0,"51":0,"56":0,"59":0,"60":0,"66":0,"67":0,"71":0,"75":0,"76":0,"83":0,"84":0,"85":0,"86":0,"88":0,"92":0,"98":0,"99":0,"104":0,"105":0,"106":0,"108":0,"119":0,"121":0,"122":0,"123":0,"127":0,"128":0,"129":0,"132":0,"134":0,"141":0,"142":0,"143":0,"148":0,"151":0,"153":0,"154":0,"155":0,"157":0,"158":0,"159":0,"164":0,"167":0,"168":0,"169":0,"170":0,"173":0,"175":0,"179":0,"180":0,"181":0,"187":0,"192":0,"196":0,"207":0,"209":0,"210":0,"213":0,"214":0,"216":0,"217":0,"224":0,"225":0,"228":0,"229":0,"230":0,"231":0,"232":0,"233":0,"234":0,"235":0,"236":0,"238":0,"241":0,"242":0,"243":0,"244":0,"246":0,"250":0,"259":0,"262":0,"263":0,"265":0,"266":0,"269":0,"273":0,"274":0,"275":0,"277":0,"281":0,"287":0,"288":0,"291":0,"292":0,"308":0,"309":0,"311":0,"317":0,"318":0,"321":0,"322":0,"323":0,"325":0,"329":0,"334":0,"335":0,"337":0,"338":0,"339":0,"341":0,"342":0,"343":0,"344":0,"345":0,"347":0,"348":0,"350":0,"355":0,"357":0,"358":0,"363":0,"367":0,"371":1}},"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/shared/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/shared/index.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":1,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":1,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":1,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":1,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":1,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":1,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":1,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":1,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0},"b":{"1":[0,0],"2":[0,0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0,0,0],"26":[0,0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0,0],"46":[0,0],"47":[0,0],"48":[0,0],"49":[0,0,0,0],"50":[0,0],"51":[0,0],"52":[0,0],"53":[0,0],"54":[0,0],"55":[0,0],"56":[0,0],"57":[0,0],"58":[0,0],"59":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"(anonymous_1)","line":153,"loc":{"start":{"line":153,"column":54},"end":{"line":153,"column":66}}},"2":{"name":"(anonymous_2)","line":234,"loc":{"start":{"line":234,"column":24},"end":{"line":234,"column":63}}},"3":{"name":"resolveStream","line":286,"loc":{"start":{"line":286,"column":0},"end":{"line":286,"column":41}}},"4":{"name":"createDefaultLogger","line":330,"loc":{"start":{"line":330,"column":0},"end":{"line":330,"column":37}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":30}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":29}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":25}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":34}},"5":{"start":{"line":14,"column":0},"end":{"line":89,"column":2}},"6":{"start":{"line":15,"column":4},"end":{"line":15,"column":20}},"7":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"8":{"start":{"line":18,"column":4},"end":{"line":86,"column":7}},"9":{"start":{"line":19,"column":8},"end":{"line":19,"column":17}},"10":{"start":{"line":21,"column":8},"end":{"line":31,"column":9}},"11":{"start":{"line":23,"column":16},"end":{"line":23,"column":39}},"12":{"start":{"line":24,"column":16},"end":{"line":24,"column":22}},"13":{"start":{"line":26,"column":16},"end":{"line":26,"column":38}},"14":{"start":{"line":27,"column":16},"end":{"line":27,"column":22}},"15":{"start":{"line":29,"column":16},"end":{"line":29,"column":38}},"16":{"start":{"line":30,"column":16},"end":{"line":30,"column":22}},"17":{"start":{"line":33,"column":8},"end":{"line":35,"column":9}},"18":{"start":{"line":34,"column":12},"end":{"line":34,"column":44}},"19":{"start":{"line":37,"column":8},"end":{"line":39,"column":9}},"20":{"start":{"line":38,"column":12},"end":{"line":38,"column":40}},"21":{"start":{"line":41,"column":8},"end":{"line":50,"column":9}},"22":{"start":{"line":42,"column":12},"end":{"line":42,"column":39}},"23":{"start":{"line":44,"column":12},"end":{"line":46,"column":13}},"24":{"start":{"line":45,"column":16},"end":{"line":45,"column":34}},"25":{"start":{"line":48,"column":12},"end":{"line":48,"column":45}},"26":{"start":{"line":49,"column":12},"end":{"line":49,"column":47}},"27":{"start":{"line":52,"column":8},"end":{"line":85,"column":11}},"28":{"start":{"line":53,"column":12},"end":{"line":53,"column":30}},"29":{"start":{"line":54,"column":12},"end":{"line":54,"column":27}},"30":{"start":{"line":55,"column":12},"end":{"line":55,"column":39}},"31":{"start":{"line":57,"column":12},"end":{"line":59,"column":13}},"32":{"start":{"line":58,"column":16},"end":{"line":58,"column":38}},"33":{"start":{"line":61,"column":12},"end":{"line":68,"column":13}},"34":{"start":{"line":63,"column":20},"end":{"line":63,"column":33}},"35":{"start":{"line":64,"column":20},"end":{"line":64,"column":26}},"36":{"start":{"line":66,"column":20},"end":{"line":66,"column":34}},"37":{"start":{"line":67,"column":20},"end":{"line":67,"column":26}},"38":{"start":{"line":71,"column":12},"end":{"line":80,"column":13}},"39":{"start":{"line":72,"column":16},"end":{"line":72,"column":37}},"40":{"start":{"line":73,"column":16},"end":{"line":75,"column":17}},"41":{"start":{"line":74,"column":20},"end":{"line":74,"column":37}},"42":{"start":{"line":76,"column":16},"end":{"line":76,"column":34}},"43":{"start":{"line":77,"column":19},"end":{"line":80,"column":13}},"44":{"start":{"line":79,"column":16},"end":{"line":79,"column":23}},"45":{"start":{"line":82,"column":12},"end":{"line":84,"column":13}},"46":{"start":{"line":83,"column":16},"end":{"line":83,"column":34}},"47":{"start":{"line":88,"column":4},"end":{"line":88,"column":19}},"48":{"start":{"line":91,"column":0},"end":{"line":107,"column":2}},"49":{"start":{"line":92,"column":4},"end":{"line":92,"column":19}},"50":{"start":{"line":94,"column":4},"end":{"line":98,"column":7}},"51":{"start":{"line":95,"column":8},"end":{"line":97,"column":9}},"52":{"start":{"line":96,"column":12},"end":{"line":96,"column":39}},"53":{"start":{"line":100,"column":4},"end":{"line":104,"column":7}},"54":{"start":{"line":101,"column":8},"end":{"line":103,"column":9}},"55":{"start":{"line":102,"column":12},"end":{"line":102,"column":35}},"56":{"start":{"line":106,"column":4},"end":{"line":106,"column":43}},"57":{"start":{"line":116,"column":0},"end":{"line":144,"column":2}},"58":{"start":{"line":117,"column":4},"end":{"line":117,"column":28}},"59":{"start":{"line":119,"column":4},"end":{"line":119,"column":22}},"60":{"start":{"line":120,"column":4},"end":{"line":120,"column":70}},"61":{"start":{"line":122,"column":4},"end":{"line":128,"column":5}},"62":{"start":{"line":124,"column":8},"end":{"line":126,"column":11}},"63":{"start":{"line":125,"column":12},"end":{"line":125,"column":42}},"64":{"start":{"line":125,"column":36},"end":{"line":125,"column":41}},"65":{"start":{"line":127,"column":8},"end":{"line":127,"column":24}},"66":{"start":{"line":130,"column":4},"end":{"line":130,"column":32}},"67":{"start":{"line":132,"column":4},"end":{"line":135,"column":5}},"68":{"start":{"line":134,"column":8},"end":{"line":134,"column":45}},"69":{"start":{"line":137,"column":4},"end":{"line":141,"column":7}},"70":{"start":{"line":138,"column":8},"end":{"line":140,"column":10}},"71":{"start":{"line":139,"column":12},"end":{"line":139,"column":85}},"72":{"start":{"line":143,"column":4},"end":{"line":143,"column":20}},"73":{"start":{"line":153,"column":0},"end":{"line":161,"column":2}},"74":{"start":{"line":153,"column":54},"end":{"line":161,"column":1}},"75":{"start":{"line":154,"column":4},"end":{"line":154,"column":37}},"76":{"start":{"line":155,"column":4},"end":{"line":155,"column":27}},"77":{"start":{"line":156,"column":4},"end":{"line":160,"column":5}},"78":{"start":{"line":157,"column":8},"end":{"line":157,"column":20}},"79":{"start":{"line":159,"column":8},"end":{"line":159,"column":25}},"80":{"start":{"line":176,"column":0},"end":{"line":229,"column":2}},"81":{"start":{"line":177,"column":4},"end":{"line":177,"column":16}},"82":{"start":{"line":179,"column":4},"end":{"line":183,"column":5}},"83":{"start":{"line":180,"column":8},"end":{"line":182,"column":11}},"84":{"start":{"line":181,"column":12},"end":{"line":181,"column":71}},"85":{"start":{"line":185,"column":4},"end":{"line":185,"column":70}},"86":{"start":{"line":186,"column":4},"end":{"line":186,"column":22}},"87":{"start":{"line":187,"column":4},"end":{"line":190,"column":32}},"88":{"start":{"line":192,"column":4},"end":{"line":194,"column":5}},"89":{"start":{"line":193,"column":8},"end":{"line":193,"column":39}},"90":{"start":{"line":196,"column":4},"end":{"line":219,"column":5}},"91":{"start":{"line":197,"column":8},"end":{"line":218,"column":9}},"92":{"start":{"line":198,"column":12},"end":{"line":206,"column":15}},"93":{"start":{"line":199,"column":16},"end":{"line":201,"column":17}},"94":{"start":{"line":200,"column":20},"end":{"line":200,"column":41}},"95":{"start":{"line":204,"column":16},"end":{"line":204,"column":34}},"96":{"start":{"line":205,"column":16},"end":{"line":205,"column":38}},"97":{"start":{"line":207,"column":15},"end":{"line":218,"column":9}},"98":{"start":{"line":208,"column":12},"end":{"line":208,"column":64}},"99":{"start":{"line":209,"column":12},"end":{"line":209,"column":58}},"100":{"start":{"line":210,"column":15},"end":{"line":218,"column":9}},"101":{"start":{"line":211,"column":12},"end":{"line":211,"column":100}},"102":{"start":{"line":212,"column":12},"end":{"line":214,"column":13}},"103":{"start":{"line":213,"column":16},"end":{"line":213,"column":53}},"104":{"start":{"line":215,"column":12},"end":{"line":215,"column":139}},"105":{"start":{"line":216,"column":15},"end":{"line":218,"column":9}},"106":{"start":{"line":217,"column":12},"end":{"line":217,"column":78}},"107":{"start":{"line":221,"column":4},"end":{"line":223,"column":5}},"108":{"start":{"line":222,"column":8},"end":{"line":222,"column":58}},"109":{"start":{"line":226,"column":4},"end":{"line":226,"column":48}},"110":{"start":{"line":226,"column":23},"end":{"line":226,"column":46}},"111":{"start":{"line":228,"column":4},"end":{"line":228,"column":19}},"112":{"start":{"line":234,"column":0},"end":{"line":256,"column":2}},"113":{"start":{"line":235,"column":4},"end":{"line":235,"column":37}},"114":{"start":{"line":236,"column":4},"end":{"line":236,"column":36}},"115":{"start":{"line":238,"column":4},"end":{"line":254,"column":7}},"116":{"start":{"line":239,"column":8},"end":{"line":253,"column":11}},"117":{"start":{"line":240,"column":12},"end":{"line":252,"column":13}},"118":{"start":{"line":243,"column":16},"end":{"line":246,"column":17}},"119":{"start":{"line":245,"column":20},"end":{"line":245,"column":37}},"120":{"start":{"line":247,"column":16},"end":{"line":249,"column":19}},"121":{"start":{"line":248,"column":20},"end":{"line":248,"column":62}},"122":{"start":{"line":251,"column":16},"end":{"line":251,"column":42}},"123":{"start":{"line":255,"column":4},"end":{"line":255,"column":18}},"124":{"start":{"line":258,"column":0},"end":{"line":277,"column":2}},"125":{"start":{"line":263,"column":4},"end":{"line":265,"column":5}},"126":{"start":{"line":264,"column":8},"end":{"line":264,"column":19}},"127":{"start":{"line":266,"column":4},"end":{"line":266,"column":31}},"128":{"start":{"line":267,"column":4},"end":{"line":267,"column":20}},"129":{"start":{"line":268,"column":4},"end":{"line":275,"column":5}},"130":{"start":{"line":269,"column":8},"end":{"line":269,"column":23}},"131":{"start":{"line":270,"column":8},"end":{"line":274,"column":9}},"132":{"start":{"line":271,"column":12},"end":{"line":271,"column":81}},"133":{"start":{"line":273,"column":12},"end":{"line":273,"column":45}},"134":{"start":{"line":276,"column":4},"end":{"line":276,"column":18}},"135":{"start":{"line":286,"column":0},"end":{"line":323,"column":1}},"136":{"start":{"line":287,"column":4},"end":{"line":287,"column":26}},"137":{"start":{"line":288,"column":4},"end":{"line":288,"column":20}},"138":{"start":{"line":289,"column":4},"end":{"line":289,"column":21}},"139":{"start":{"line":291,"column":4},"end":{"line":298,"column":7}},"140":{"start":{"line":292,"column":8},"end":{"line":294,"column":9}},"141":{"start":{"line":293,"column":12},"end":{"line":293,"column":19}},"142":{"start":{"line":296,"column":8},"end":{"line":296,"column":25}},"143":{"start":{"line":297,"column":8},"end":{"line":297,"column":22}},"144":{"start":{"line":300,"column":4},"end":{"line":306,"column":7}},"145":{"start":{"line":301,"column":8},"end":{"line":301,"column":18}},"146":{"start":{"line":302,"column":8},"end":{"line":305,"column":9}},"147":{"start":{"line":303,"column":12},"end":{"line":303,"column":31}},"148":{"start":{"line":304,"column":12},"end":{"line":304,"column":37}},"149":{"start":{"line":308,"column":4},"end":{"line":322,"column":7}},"150":{"start":{"line":309,"column":8},"end":{"line":311,"column":9}},"151":{"start":{"line":310,"column":12},"end":{"line":310,"column":19}},"152":{"start":{"line":312,"column":8},"end":{"line":312,"column":25}},"153":{"start":{"line":314,"column":8},"end":{"line":314,"column":18}},"154":{"start":{"line":316,"column":8},"end":{"line":320,"column":9}},"155":{"start":{"line":317,"column":12},"end":{"line":317,"column":52}},"156":{"start":{"line":319,"column":12},"end":{"line":319,"column":31}},"157":{"start":{"line":321,"column":8},"end":{"line":321,"column":30}},"158":{"start":{"line":330,"column":0},"end":{"line":381,"column":1}},"159":{"start":{"line":332,"column":4},"end":{"line":332,"column":24}},"160":{"start":{"line":333,"column":4},"end":{"line":333,"column":31}},"161":{"start":{"line":334,"column":4},"end":{"line":338,"column":7}},"162":{"start":{"line":335,"column":8},"end":{"line":337,"column":9}},"163":{"start":{"line":336,"column":12},"end":{"line":336,"column":39}},"164":{"start":{"line":340,"column":4},"end":{"line":346,"column":7}},"165":{"start":{"line":341,"column":8},"end":{"line":341,"column":44}},"166":{"start":{"line":342,"column":8},"end":{"line":344,"column":9}},"167":{"start":{"line":343,"column":12},"end":{"line":343,"column":68}},"168":{"start":{"line":345,"column":8},"end":{"line":345,"column":41}},"169":{"start":{"line":348,"column":4},"end":{"line":373,"column":6}},"170":{"start":{"line":349,"column":8},"end":{"line":349,"column":24}},"171":{"start":{"line":350,"column":8},"end":{"line":364,"column":9}},"172":{"start":{"line":351,"column":12},"end":{"line":355,"column":13}},"173":{"start":{"line":352,"column":16},"end":{"line":352,"column":31}},"174":{"start":{"line":353,"column":19},"end":{"line":355,"column":13}},"175":{"start":{"line":354,"column":16},"end":{"line":354,"column":31}},"176":{"start":{"line":357,"column":12},"end":{"line":359,"column":13}},"177":{"start":{"line":358,"column":16},"end":{"line":358,"column":57}},"178":{"start":{"line":361,"column":12},"end":{"line":363,"column":13}},"179":{"start":{"line":362,"column":16},"end":{"line":362,"column":58}},"180":{"start":{"line":366,"column":8},"end":{"line":366,"column":48}},"181":{"start":{"line":367,"column":8},"end":{"line":372,"column":11}},"182":{"start":{"line":368,"column":12},"end":{"line":371,"column":31}},"183":{"start":{"line":375,"column":4},"end":{"line":375,"column":20}},"184":{"start":{"line":376,"column":4},"end":{"line":378,"column":7}},"185":{"start":{"line":377,"column":8},"end":{"line":377,"column":48}},"186":{"start":{"line":380,"column":4},"end":{"line":380,"column":18}}},"branchMap":{"1":{"line":15,"type":"binary-expr","locations":[{"start":{"line":15,"column":10},"end":{"line":15,"column":13}},{"start":{"line":15,"column":17},"end":{"line":15,"column":19}}]},"2":{"line":21,"type":"switch","locations":[{"start":{"line":22,"column":12},"end":{"line":24,"column":22}},{"start":{"line":25,"column":12},"end":{"line":27,"column":22}},{"start":{"line":28,"column":12},"end":{"line":30,"column":22}}]},"3":{"line":33,"type":"if","locations":[{"start":{"line":33,"column":8},"end":{"line":33,"column":8}},{"start":{"line":33,"column":8},"end":{"line":33,"column":8}}]},"4":{"line":33,"type":"binary-expr","locations":[{"start":{"line":33,"column":12},"end":{"line":33,"column":28}},{"start":{"line":33,"column":32},"end":{"line":33,"column":48}}]},"5":{"line":37,"type":"if","locations":[{"start":{"line":37,"column":8},"end":{"line":37,"column":8}},{"start":{"line":37,"column":8},"end":{"line":37,"column":8}}]},"6":{"line":41,"type":"if","locations":[{"start":{"line":41,"column":8},"end":{"line":41,"column":8}},{"start":{"line":41,"column":8},"end":{"line":41,"column":8}}]},"7":{"line":44,"type":"if","locations":[{"start":{"line":44,"column":12},"end":{"line":44,"column":12}},{"start":{"line":44,"column":12},"end":{"line":44,"column":12}}]},"8":{"line":52,"type":"binary-expr","locations":[{"start":{"line":52,"column":20},"end":{"line":52,"column":29}},{"start":{"line":52,"column":33},"end":{"line":52,"column":35}}]},"9":{"line":57,"type":"if","locations":[{"start":{"line":57,"column":12},"end":{"line":57,"column":12}},{"start":{"line":57,"column":12},"end":{"line":57,"column":12}}]},"10":{"line":61,"type":"switch","locations":[{"start":{"line":62,"column":16},"end":{"line":64,"column":26}},{"start":{"line":65,"column":16},"end":{"line":67,"column":26}}]},"11":{"line":71,"type":"if","locations":[{"start":{"line":71,"column":12},"end":{"line":71,"column":12}},{"start":{"line":71,"column":12},"end":{"line":71,"column":12}}]},"12":{"line":73,"type":"if","locations":[{"start":{"line":73,"column":16},"end":{"line":73,"column":16}},{"start":{"line":73,"column":16},"end":{"line":73,"column":16}}]},"13":{"line":77,"type":"if","locations":[{"start":{"line":77,"column":19},"end":{"line":77,"column":19}},{"start":{"line":77,"column":19},"end":{"line":77,"column":19}}]},"14":{"line":82,"type":"if","locations":[{"start":{"line":82,"column":12},"end":{"line":82,"column":12}},{"start":{"line":82,"column":12},"end":{"line":82,"column":12}}]},"15":{"line":94,"type":"binary-expr","locations":[{"start":{"line":94,"column":16},"end":{"line":94,"column":24}},{"start":{"line":94,"column":28},"end":{"line":94,"column":30}}]},"16":{"line":95,"type":"if","locations":[{"start":{"line":95,"column":8},"end":{"line":95,"column":8}},{"start":{"line":95,"column":8},"end":{"line":95,"column":8}}]},"17":{"line":100,"type":"binary-expr","locations":[{"start":{"line":100,"column":16},"end":{"line":100,"column":20}},{"start":{"line":100,"column":24},"end":{"line":100,"column":26}}]},"18":{"line":101,"type":"if","locations":[{"start":{"line":101,"column":8},"end":{"line":101,"column":8}},{"start":{"line":101,"column":8},"end":{"line":101,"column":8}}]},"19":{"line":117,"type":"binary-expr","locations":[{"start":{"line":117,"column":14},"end":{"line":117,"column":21}},{"start":{"line":117,"column":25},"end":{"line":117,"column":27}}]},"20":{"line":122,"type":"if","locations":[{"start":{"line":122,"column":4},"end":{"line":122,"column":4}},{"start":{"line":122,"column":4},"end":{"line":122,"column":4}}]},"21":{"line":132,"type":"if","locations":[{"start":{"line":132,"column":4},"end":{"line":132,"column":4}},{"start":{"line":132,"column":4},"end":{"line":132,"column":4}}]},"22":{"line":156,"type":"if","locations":[{"start":{"line":156,"column":4},"end":{"line":156,"column":4}},{"start":{"line":156,"column":4},"end":{"line":156,"column":4}}]},"23":{"line":179,"type":"if","locations":[{"start":{"line":179,"column":4},"end":{"line":179,"column":4}},{"start":{"line":179,"column":4},"end":{"line":179,"column":4}}]},"24":{"line":179,"type":"binary-expr","locations":[{"start":{"line":179,"column":8},"end":{"line":179,"column":17}},{"start":{"line":179,"column":21},"end":{"line":179,"column":50}}]},"25":{"line":185,"type":"binary-expr","locations":[{"start":{"line":185,"column":18},"end":{"line":185,"column":22}},{"start":{"line":185,"column":26},"end":{"line":185,"column":35}},{"start":{"line":185,"column":39},"end":{"line":185,"column":56}},{"start":{"line":185,"column":60},"end":{"line":185,"column":69}}]},"26":{"line":187,"type":"binary-expr","locations":[{"start":{"line":187,"column":20},"end":{"line":187,"column":49}},{"start":{"line":187,"column":53},"end":{"line":187,"column":71}},{"start":{"line":187,"column":75},"end":{"line":187,"column":81}}]},"27":{"line":192,"type":"if","locations":[{"start":{"line":192,"column":4},"end":{"line":192,"column":4}},{"start":{"line":192,"column":4},"end":{"line":192,"column":4}}]},"28":{"line":196,"type":"if","locations":[{"start":{"line":196,"column":4},"end":{"line":196,"column":4}},{"start":{"line":196,"column":4},"end":{"line":196,"column":4}}]},"29":{"line":197,"type":"if","locations":[{"start":{"line":197,"column":8},"end":{"line":197,"column":8}},{"start":{"line":197,"column":8},"end":{"line":197,"column":8}}]},"30":{"line":199,"type":"if","locations":[{"start":{"line":199,"column":16},"end":{"line":199,"column":16}},{"start":{"line":199,"column":16},"end":{"line":199,"column":16}}]},"31":{"line":207,"type":"if","locations":[{"start":{"line":207,"column":15},"end":{"line":207,"column":15}},{"start":{"line":207,"column":15},"end":{"line":207,"column":15}}]},"32":{"line":207,"type":"binary-expr","locations":[{"start":{"line":207,"column":40},"end":{"line":207,"column":52}},{"start":{"line":207,"column":56},"end":{"line":207,"column":68}}]},"33":{"line":208,"type":"binary-expr","locations":[{"start":{"line":208,"column":34},"end":{"line":208,"column":46}},{"start":{"line":208,"column":50},"end":{"line":208,"column":62}}]},"34":{"line":210,"type":"if","locations":[{"start":{"line":210,"column":15},"end":{"line":210,"column":15}},{"start":{"line":210,"column":15},"end":{"line":210,"column":15}}]},"35":{"line":210,"type":"binary-expr","locations":[{"start":{"line":210,"column":34},"end":{"line":210,"column":46}},{"start":{"line":210,"column":50},"end":{"line":210,"column":62}}]},"36":{"line":211,"type":"binary-expr","locations":[{"start":{"line":211,"column":25},"end":{"line":211,"column":37}},{"start":{"line":211,"column":41},"end":{"line":211,"column":53}}]},"37":{"line":212,"type":"if","locations":[{"start":{"line":212,"column":12},"end":{"line":212,"column":12}},{"start":{"line":212,"column":12},"end":{"line":212,"column":12}}]},"38":{"line":215,"type":"cond-expr","locations":[{"start":{"line":215,"column":64},"end":{"line":215,"column":94}},{"start":{"line":215,"column":97},"end":{"line":215,"column":137}}]},"39":{"line":216,"type":"if","locations":[{"start":{"line":216,"column":15},"end":{"line":216,"column":15}},{"start":{"line":216,"column":15},"end":{"line":216,"column":15}}]},"40":{"line":221,"type":"if","locations":[{"start":{"line":221,"column":4},"end":{"line":221,"column":4}},{"start":{"line":221,"column":4},"end":{"line":221,"column":4}}]},"41":{"line":221,"type":"binary-expr","locations":[{"start":{"line":221,"column":8},"end":{"line":221,"column":45}},{"start":{"line":221,"column":49},"end":{"line":221,"column":97}}]},"42":{"line":236,"type":"binary-expr","locations":[{"start":{"line":236,"column":17},"end":{"line":236,"column":29}},{"start":{"line":236,"column":33},"end":{"line":236,"column":35}}]},"43":{"line":239,"type":"binary-expr","locations":[{"start":{"line":239,"column":20},"end":{"line":239,"column":26}},{"start":{"line":239,"column":30},"end":{"line":239,"column":32}}]},"44":{"line":240,"type":"if","locations":[{"start":{"line":240,"column":12},"end":{"line":240,"column":12}},{"start":{"line":240,"column":12},"end":{"line":240,"column":12}}]},"45":{"line":240,"type":"binary-expr","locations":[{"start":{"line":240,"column":16},"end":{"line":240,"column":45}},{"start":{"line":240,"column":49},"end":{"line":240,"column":60}},{"start":{"line":240,"column":64},"end":{"line":240,"column":95}}]},"46":{"line":243,"type":"if","locations":[{"start":{"line":243,"column":16},"end":{"line":243,"column":16}},{"start":{"line":243,"column":16},"end":{"line":243,"column":16}}]},"47":{"line":263,"type":"if","locations":[{"start":{"line":263,"column":4},"end":{"line":263,"column":4}},{"start":{"line":263,"column":4},"end":{"line":263,"column":4}}]},"48":{"line":270,"type":"if","locations":[{"start":{"line":270,"column":8},"end":{"line":270,"column":8}},{"start":{"line":270,"column":8},"end":{"line":270,"column":8}}]},"49":{"line":270,"type":"binary-expr","locations":[{"start":{"line":270,"column":12},"end":{"line":270,"column":20}},{"start":{"line":270,"column":24},"end":{"line":270,"column":32}},{"start":{"line":270,"column":36},"end":{"line":270,"column":46}},{"start":{"line":270,"column":50},"end":{"line":270,"column":60}}]},"50":{"line":271,"type":"cond-expr","locations":[{"start":{"line":271,"column":40},"end":{"line":271,"column":43}},{"start":{"line":271,"column":46},"end":{"line":271,"column":48}}]},"51":{"line":292,"type":"if","locations":[{"start":{"line":292,"column":8},"end":{"line":292,"column":8}},{"start":{"line":292,"column":8},"end":{"line":292,"column":8}}]},"52":{"line":309,"type":"if","locations":[{"start":{"line":309,"column":8},"end":{"line":309,"column":8}},{"start":{"line":309,"column":8},"end":{"line":309,"column":8}}]},"53":{"line":335,"type":"if","locations":[{"start":{"line":335,"column":8},"end":{"line":335,"column":8}},{"start":{"line":335,"column":8},"end":{"line":335,"column":8}}]},"54":{"line":342,"type":"if","locations":[{"start":{"line":342,"column":8},"end":{"line":342,"column":8}},{"start":{"line":342,"column":8},"end":{"line":342,"column":8}}]},"55":{"line":350,"type":"if","locations":[{"start":{"line":350,"column":8},"end":{"line":350,"column":8}},{"start":{"line":350,"column":8},"end":{"line":350,"column":8}}]},"56":{"line":351,"type":"if","locations":[{"start":{"line":351,"column":12},"end":{"line":351,"column":12}},{"start":{"line":351,"column":12},"end":{"line":351,"column":12}}]},"57":{"line":353,"type":"if","locations":[{"start":{"line":353,"column":19},"end":{"line":353,"column":19}},{"start":{"line":353,"column":19},"end":{"line":353,"column":19}}]},"58":{"line":357,"type":"if","locations":[{"start":{"line":357,"column":12},"end":{"line":357,"column":12}},{"start":{"line":357,"column":12},"end":{"line":357,"column":12}}]},"59":{"line":361,"type":"if","locations":[{"start":{"line":361,"column":12},"end":{"line":361,"column":12}},{"start":{"line":361,"column":12},"end":{"line":361,"column":12}}]}},"code":["'use strict';","","const urllib = require('url');","const util = require('util');","const fs = require('fs');","const fetch = require('../fetch');","","/**"," * Parses connection url to a structured configuration object"," *"," * @param {String} str Connection url"," * @return {Object} Configuration object"," */","module.exports.parseConnectionUrl = str => {","    str = str || '';","    let options = {};","","    [urllib.parse(str, true)].forEach(url => {","        let auth;","","        switch (url.protocol) {","            case 'smtp:':","                options.secure = false;","                break;","            case 'smtps:':","                options.secure = true;","                break;","            case 'direct:':","                options.direct = true;","                break;","        }","","        if (!isNaN(url.port) && Number(url.port)) {","            options.port = Number(url.port);","        }","","        if (url.hostname) {","            options.host = url.hostname;","        }","","        if (url.auth) {","            auth = url.auth.split(':');","","            if (!options.auth) {","                options.auth = {};","            }","","            options.auth.user = auth.shift();","            options.auth.pass = auth.join(':');","        }","","        Object.keys(url.query || {}).forEach(key => {","            let obj = options;","            let lKey = key;","            let value = url.query[key];","","            if (!isNaN(value)) {","                value = Number(value);","            }","","            switch (value) {","                case 'true':","                    value = true;","                    break;","                case 'false':","                    value = false;","                    break;","            }","","            // tls is nested object","            if (key.indexOf('tls.') === 0) {","                lKey = key.substr(4);","                if (!options.tls) {","                    options.tls = {};","                }","                obj = options.tls;","            } else if (key.indexOf('.') >= 0) {","                // ignore nested properties besides tls","                return;","            }","","            if (!(lKey in obj)) {","                obj[lKey] = value;","            }","        });","    });","","    return options;","};","","module.exports._logFunc = (logger, level, defaults, data, message, ...args) => {","    let entry = {};","","    Object.keys(defaults || {}).forEach(key => {","        if (key !== 'level') {","            entry[key] = defaults[key];","        }","    });","","    Object.keys(data || {}).forEach(key => {","        if (key !== 'level') {","            entry[key] = data[key];","        }","    });","","    logger[level](entry, message, ...args);","};","","/**"," * Returns a bunyan-compatible logger interface. Uses either provided logger or"," * creates a default console logger"," *"," * @param {Object} [options] Options object that might include 'logger' value"," * @return {Object} bunyan compatible logger"," */","module.exports.getLogger = (options, defaults) => {","    options = options || {};","","    let response = {};","    let levels = ['trace', 'debug', 'info', 'warn', 'error', 'fatal'];","","    if (!options.logger) {","        // use vanity logger","        levels.forEach(level => {","            response[level] = () => false;","        });","        return response;","    }","","    let logger = options.logger;","","    if (options.logger === true) {","        // create console logger","        logger = createDefaultLogger(levels);","    }","","    levels.forEach(level => {","        response[level] = (data, message, ...args) => {","            module.exports._logFunc(logger, level, defaults, data, message, ...args);","        };","    });","","    return response;","};","","/**"," * Wrapper for creating a callback than either resolves or rejects a promise"," * based on input"," *"," * @param {Function} resolve Function to run if callback is called"," * @param {Function} reject Function to run if callback ends with an error"," */","module.exports.callbackPromise = (resolve, reject) => function () {","    let args = Array.from(arguments);","    let err = args.shift();","    if (err) {","        reject(err);","    } else {","        resolve(...args);","    }","};","","/**"," * Resolves a String or a Buffer value for content value. Useful if the value"," * is a Stream or a file or an URL. If the value is a Stream, overwrites"," * the stream object with the resolved value (you can't stream a value twice)."," *"," * This is useful when you want to create a plugin that needs a content value,"," * for example the `html` or `text` value as a String or a Buffer but not as"," * a file path or an URL."," *"," * @param {Object} data An object or an Array you want to resolve an element for"," * @param {String|Number} key Property name or an Array index"," * @param {Function} callback Callback function with (err, value)"," */","module.exports.resolveContent = (data, key, callback) => {","    let promise;","","    if (!callback && typeof Promise === 'function') {","        promise = new Promise((resolve, reject) => {","            callback = module.exports.callbackPromise(resolve, reject);","        });","    }","","    let content = data && data[key] && data[key].content || data[key];","    let contentStream;","    let encoding = (typeof data[key] === 'object' && data[key].encoding || 'utf8')","        .toString()","        .toLowerCase()","        .replace(/[-_\\s]/g, '');","","    if (!content) {","        return callback(null, content);","    }","","    if (typeof content === 'object') {","        if (typeof content.pipe === 'function') {","            return resolveStream(content, (err, value) => {","                if (err) {","                    return callback(err);","                }","                // we can't stream twice the same content, so we need","                // to replace the stream object with the streaming result","                data[key] = value;","                callback(null, value);","            });","        } else if (/^https?:\\/\\//i.test(content.path || content.href)) {","            contentStream = fetch(content.path || content.href);","            return resolveStream(contentStream, callback);","        } else if (/^data:/i.test(content.path || content.href)) {","            let parts = (content.path || content.href).match(/^data:((?:[^;]*;)*(?:[^,]*)),(.*)$/i);","            if (!parts) {","                return callback(null, new Buffer(0));","            }","            return callback(null, /\\bbase64$/i.test(parts[1]) ? new Buffer(parts[2], 'base64') : new Buffer(decodeURIComponent(parts[2])));","        } else if (content.path) {","            return resolveStream(fs.createReadStream(content.path), callback);","        }","    }","","    if (typeof data[key].content === 'string' && !['utf8', 'usascii', 'ascii'].includes(encoding)) {","        content = new Buffer(data[key].content, encoding);","    }","","    // default action, return as is","    setImmediate(() => callback(null, content));","","    return promise;","};","","/**"," * Copies properties from source objects to target objects"," */","module.exports.assign = function ( /* target, ... sources */ ) {","    let args = Array.from(arguments);","    let target = args.shift() || {};","","    args.forEach(source => {","        Object.keys(source || {}).forEach(key => {","            if (['tls', 'auth'].includes(key) && source[key] && typeof source[key] === 'object') {","                // tls and auth are special keys that need to be enumerated separately","                // other objects are passed as is","                if (!target[key]) {","                    // ensure that target has this key","                    target[key] = {};","                }","                Object.keys(source[key]).forEach(subKey => {","                    target[key][subKey] = source[key][subKey];","                });","            } else {","                target[key] = source[key];","            }","        });","    });","    return target;","};","","module.exports.encodeXText = str => {","    // ! 0x21","    // + 0x2B","    // = 0x3D","    // ~ 0x7E","    if (!/[^\\x21-\\x2A\\x2C-\\x3C\\x3E-\\x7E]/.test(str)) {","        return str;","    }","    let buf = Buffer.from(str);","    let result = '';","    for (let i = 0, len = buf.length; i < len; i++) {","        let c = buf[i];","        if (c < 0x21 || c > 0x7e || c === 0x2b || c === 0x3d) {","            result += '+' + (c < 0x10 ? '0' : '') + c.toString(16).toUpperCase();","        } else {","            result += String.fromCharCode(c);","        }","    }","    return result;","};","","","/**"," * Streams a stream value into a Buffer"," *"," * @param {Object} stream Readable stream"," * @param {Function} callback Callback function with (err, value)"," */","function resolveStream(stream, callback) {","    let responded = false;","    let chunks = [];","    let chunklen = 0;","","    stream.on('error', err => {","        if (responded) {","            return;","        }","","        responded = true;","        callback(err);","    });","","    stream.on('readable', () => {","        let chunk;","        while ((chunk = stream.read()) !== null) {","            chunks.push(chunk);","            chunklen += chunk.length;","        }","    });","","    stream.on('end', () => {","        if (responded) {","            return;","        }","        responded = true;","","        let value;","","        try {","            value = Buffer.concat(chunks, chunklen);","        } catch (E) {","            return callback(E);","        }","        callback(null, value);","    });","}","","/**"," * Generates a bunyan-like logger that prints to console"," *"," * @returns {Object} Bunyan logger instance"," */","function createDefaultLogger(levels) {","","    let levelMaxLen = 0;","    let levelNames = new Map();","    levels.forEach(level => {","        if (level.length > levelMaxLen) {","            levelMaxLen = level.length;","        }","    });","","    levels.forEach(level => {","        let levelName = level.toUpperCase();","        if (levelName.length < levelMaxLen) {","            levelName += ' '.repeat(levelMaxLen - levelName.length);","        }","        levelNames.set(level, levelName);","    });","","    let print = (level, entry, message, ...args) => {","        let prefix = '';","        if (entry) {","            if (entry.tnx === 'server') {","                prefix = 'S: ';","            } else if (entry.tnx === 'client') {","                prefix = 'C: ';","            }","","            if (entry.sid) {","                prefix = '[' + entry.sid + '] ' + prefix;","            }","","            if (entry.cid) {","                prefix = '[#' + entry.cid + '] ' + prefix;","            }","        }","","        message = util.format(message, ...args);","        message.split(/\\r?\\n/).forEach(line => {","            console.log('[%s] %s %s', // eslint-disable-line no-console","                new Date().toISOString().substr(0, 19).replace(/T/, ' '),","                levelNames.get(level),","                prefix + line);","        });","    };","","    let logger = {};","    levels.forEach(level => {","        logger[level] = print.bind(null, level);","    });","","    return logger;","}",""],"l":{"3":1,"4":1,"5":1,"6":1,"14":1,"15":0,"16":0,"18":0,"19":0,"21":0,"23":0,"24":0,"26":0,"27":0,"29":0,"30":0,"33":0,"34":0,"37":0,"38":0,"41":0,"42":0,"44":0,"45":0,"48":0,"49":0,"52":0,"53":0,"54":0,"55":0,"57":0,"58":0,"61":0,"63":0,"64":0,"66":0,"67":0,"71":0,"72":0,"73":0,"74":0,"76":0,"77":0,"79":0,"82":0,"83":0,"88":0,"91":1,"92":0,"94":0,"95":0,"96":0,"100":0,"101":0,"102":0,"106":0,"116":1,"117":0,"119":0,"120":0,"122":0,"124":0,"125":0,"127":0,"130":0,"132":0,"134":0,"137":0,"138":0,"139":0,"143":0,"153":1,"154":0,"155":0,"156":0,"157":0,"159":0,"176":1,"177":0,"179":0,"180":0,"181":0,"185":0,"186":0,"187":0,"192":0,"193":0,"196":0,"197":0,"198":0,"199":0,"200":0,"204":0,"205":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":0,"213":0,"215":0,"216":0,"217":0,"221":0,"222":0,"226":0,"228":0,"234":1,"235":0,"236":0,"238":0,"239":0,"240":0,"243":0,"245":0,"247":0,"248":0,"251":0,"255":0,"258":1,"263":0,"264":0,"266":0,"267":0,"268":0,"269":0,"270":0,"271":0,"273":0,"276":0,"286":1,"287":0,"288":0,"289":0,"291":0,"292":0,"293":0,"296":0,"297":0,"300":0,"301":0,"302":0,"303":0,"304":0,"308":0,"309":0,"310":0,"312":0,"314":0,"316":0,"317":0,"319":0,"321":0,"330":1,"332":0,"333":0,"334":0,"335":0,"336":0,"340":0,"341":0,"342":0,"343":0,"345":0,"348":0,"349":0,"350":0,"351":0,"352":0,"353":0,"354":0,"357":0,"358":0,"361":0,"362":0,"366":0,"367":0,"368":0,"375":0,"376":0,"377":0,"380":0}},"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/fetch/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/fetch/index.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":1,"12":1,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"(anonymous_1)","line":13,"loc":{"start":{"line":13,"column":17},"end":{"line":13,"column":41}}},"2":{"name":"fetch","line":19,"loc":{"start":{"line":19,"column":0},"end":{"line":19,"column":29}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":29}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":31}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":30}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":29}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":50}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":37}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":50}},"8":{"start":{"line":11,"column":0},"end":{"line":11,"column":24}},"9":{"start":{"line":13,"column":0},"end":{"line":15,"column":2}},"10":{"start":{"line":14,"column":4},"end":{"line":14,"column":31}},"11":{"start":{"line":17,"column":0},"end":{"line":17,"column":33}},"12":{"start":{"line":19,"column":0},"end":{"line":249,"column":1}},"13":{"start":{"line":20,"column":4},"end":{"line":20,"column":28}},"14":{"start":{"line":22,"column":4},"end":{"line":22,"column":61}},"15":{"start":{"line":23,"column":4},"end":{"line":23,"column":55}},"16":{"start":{"line":24,"column":4},"end":{"line":24,"column":47}},"17":{"start":{"line":25,"column":4},"end":{"line":25,"column":94}},"18":{"start":{"line":27,"column":4},"end":{"line":32,"column":5}},"19":{"start":{"line":28,"column":8},"end":{"line":30,"column":11}},"20":{"start":{"line":29,"column":12},"end":{"line":29,"column":45}},"21":{"start":{"line":31,"column":8},"end":{"line":31,"column":31}},"22":{"start":{"line":34,"column":4},"end":{"line":34,"column":36}},"23":{"start":{"line":35,"column":4},"end":{"line":35,"column":35}},"24":{"start":{"line":36,"column":4},"end":{"line":36,"column":81}},"25":{"start":{"line":37,"column":4},"end":{"line":37,"column":25}},"26":{"start":{"line":38,"column":4},"end":{"line":38,"column":16}},"27":{"start":{"line":39,"column":4},"end":{"line":39,"column":13}},"28":{"start":{"line":41,"column":4},"end":{"line":41,"column":62}},"29":{"start":{"line":43,"column":4},"end":{"line":46,"column":6}},"30":{"start":{"line":48,"column":4},"end":{"line":50,"column":7}},"31":{"start":{"line":49,"column":8},"end":{"line":49,"column":65}},"32":{"start":{"line":52,"column":4},"end":{"line":54,"column":5}},"33":{"start":{"line":53,"column":8},"end":{"line":53,"column":50}},"34":{"start":{"line":56,"column":4},"end":{"line":58,"column":5}},"35":{"start":{"line":57,"column":8},"end":{"line":57,"column":86}},"36":{"start":{"line":60,"column":4},"end":{"line":62,"column":5}},"37":{"start":{"line":61,"column":8},"end":{"line":61,"column":33}},"38":{"start":{"line":64,"column":4},"end":{"line":99,"column":5}},"39":{"start":{"line":65,"column":8},"end":{"line":67,"column":9}},"40":{"start":{"line":66,"column":12},"end":{"line":66,"column":97}},"41":{"start":{"line":69,"column":8},"end":{"line":96,"column":9}},"42":{"start":{"line":71,"column":12},"end":{"line":71,"column":53}},"43":{"start":{"line":72,"column":12},"end":{"line":72,"column":32}},"44":{"start":{"line":73,"column":12},"end":{"line":81,"column":15}},"45":{"start":{"line":74,"column":16},"end":{"line":76,"column":17}},"46":{"start":{"line":75,"column":20},"end":{"line":75,"column":27}},"47":{"start":{"line":77,"column":16},"end":{"line":77,"column":32}},"48":{"start":{"line":78,"column":16},"end":{"line":78,"column":35}},"49":{"start":{"line":79,"column":16},"end":{"line":79,"column":36}},"50":{"start":{"line":80,"column":16},"end":{"line":80,"column":44}},"51":{"start":{"line":83,"column":12},"end":{"line":92,"column":13}},"52":{"start":{"line":84,"column":16},"end":{"line":84,"column":36}},"53":{"start":{"line":85,"column":19},"end":{"line":92,"column":13}},"54":{"start":{"line":86,"column":16},"end":{"line":89,"column":30}},"55":{"start":{"line":87,"column":20},"end":{"line":87,"column":68}},"56":{"start":{"line":88,"column":20},"end":{"line":88,"column":85}},"57":{"start":{"line":91,"column":16},"end":{"line":91,"column":66}},"58":{"start":{"line":94,"column":12},"end":{"line":94,"column":97}},"59":{"start":{"line":95,"column":12},"end":{"line":95,"column":52}},"60":{"start":{"line":98,"column":8},"end":{"line":98,"column":82}},"61":{"start":{"line":101,"column":4},"end":{"line":101,"column":12}},"62":{"start":{"line":102,"column":4},"end":{"line":110,"column":6}},"63":{"start":{"line":112,"column":4},"end":{"line":116,"column":5}},"64":{"start":{"line":113,"column":8},"end":{"line":115,"column":11}},"65":{"start":{"line":114,"column":12},"end":{"line":114,"column":47}},"66":{"start":{"line":118,"column":4},"end":{"line":128,"column":5}},"67":{"start":{"line":119,"column":8},"end":{"line":119,"column":42}},"68":{"start":{"line":121,"column":8},"end":{"line":121,"column":24}},"69":{"start":{"line":122,"column":8},"end":{"line":126,"column":11}},"70":{"start":{"line":123,"column":12},"end":{"line":123,"column":29}},"71":{"start":{"line":124,"column":12},"end":{"line":124,"column":30}},"72":{"start":{"line":125,"column":12},"end":{"line":125,"column":38}},"73":{"start":{"line":127,"column":8},"end":{"line":127,"column":24}},"74":{"start":{"line":130,"column":4},"end":{"line":142,"column":5}},"75":{"start":{"line":131,"column":8},"end":{"line":141,"column":11}},"76":{"start":{"line":132,"column":12},"end":{"line":134,"column":13}},"77":{"start":{"line":133,"column":16},"end":{"line":133,"column":23}},"78":{"start":{"line":135,"column":12},"end":{"line":135,"column":28}},"79":{"start":{"line":136,"column":12},"end":{"line":136,"column":24}},"80":{"start":{"line":137,"column":12},"end":{"line":137,"column":51}},"81":{"start":{"line":138,"column":12},"end":{"line":138,"column":31}},"82":{"start":{"line":139,"column":12},"end":{"line":139,"column":32}},"83":{"start":{"line":140,"column":12},"end":{"line":140,"column":40}},"84":{"start":{"line":144,"column":4},"end":{"line":152,"column":7}},"85":{"start":{"line":145,"column":8},"end":{"line":147,"column":9}},"86":{"start":{"line":146,"column":12},"end":{"line":146,"column":19}},"87":{"start":{"line":148,"column":8},"end":{"line":148,"column":24}},"88":{"start":{"line":149,"column":8},"end":{"line":149,"column":27}},"89":{"start":{"line":150,"column":8},"end":{"line":150,"column":28}},"90":{"start":{"line":151,"column":8},"end":{"line":151,"column":36}},"91":{"start":{"line":154,"column":4},"end":{"line":227,"column":7}},"92":{"start":{"line":155,"column":8},"end":{"line":155,"column":20}},"93":{"start":{"line":157,"column":8},"end":{"line":159,"column":9}},"94":{"start":{"line":158,"column":12},"end":{"line":158,"column":19}},"95":{"start":{"line":161,"column":8},"end":{"line":166,"column":9}},"96":{"start":{"line":164,"column":16},"end":{"line":164,"column":45}},"97":{"start":{"line":165,"column":16},"end":{"line":165,"column":22}},"98":{"start":{"line":168,"column":8},"end":{"line":172,"column":9}},"99":{"start":{"line":169,"column":12},"end":{"line":171,"column":15}},"100":{"start":{"line":170,"column":16},"end":{"line":170,"column":49}},"101":{"start":{"line":174,"column":8},"end":{"line":187,"column":9}},"102":{"start":{"line":176,"column":12},"end":{"line":176,"column":32}},"103":{"start":{"line":177,"column":12},"end":{"line":185,"column":13}},"104":{"start":{"line":178,"column":16},"end":{"line":178,"column":32}},"105":{"start":{"line":179,"column":16},"end":{"line":179,"column":71}},"106":{"start":{"line":180,"column":16},"end":{"line":180,"column":35}},"107":{"start":{"line":181,"column":16},"end":{"line":181,"column":36}},"108":{"start":{"line":182,"column":16},"end":{"line":182,"column":44}},"109":{"start":{"line":183,"column":16},"end":{"line":183,"column":28}},"110":{"start":{"line":184,"column":16},"end":{"line":184,"column":23}},"111":{"start":{"line":186,"column":12},"end":{"line":186,"column":77}},"112":{"start":{"line":189,"column":8},"end":{"line":189,"column":45}},"113":{"start":{"line":191,"column":8},"end":{"line":199,"column":9}},"114":{"start":{"line":192,"column":12},"end":{"line":192,"column":28}},"115":{"start":{"line":193,"column":12},"end":{"line":193,"column":73}},"116":{"start":{"line":194,"column":12},"end":{"line":194,"column":31}},"117":{"start":{"line":195,"column":12},"end":{"line":195,"column":32}},"118":{"start":{"line":196,"column":12},"end":{"line":196,"column":40}},"119":{"start":{"line":197,"column":12},"end":{"line":197,"column":24}},"120":{"start":{"line":198,"column":12},"end":{"line":198,"column":19}},"121":{"start":{"line":201,"column":8},"end":{"line":210,"column":11}},"122":{"start":{"line":202,"column":12},"end":{"line":204,"column":13}},"123":{"start":{"line":203,"column":16},"end":{"line":203,"column":23}},"124":{"start":{"line":205,"column":12},"end":{"line":205,"column":28}},"125":{"start":{"line":206,"column":12},"end":{"line":206,"column":31}},"126":{"start":{"line":207,"column":12},"end":{"line":207,"column":32}},"127":{"start":{"line":208,"column":12},"end":{"line":208,"column":40}},"128":{"start":{"line":209,"column":12},"end":{"line":209,"column":24}},"129":{"start":{"line":212,"column":8},"end":{"line":226,"column":9}},"130":{"start":{"line":213,"column":12},"end":{"line":213,"column":45}},"131":{"start":{"line":214,"column":12},"end":{"line":223,"column":15}},"132":{"start":{"line":215,"column":16},"end":{"line":217,"column":17}},"133":{"start":{"line":216,"column":20},"end":{"line":216,"column":27}},"134":{"start":{"line":218,"column":16},"end":{"line":218,"column":32}},"135":{"start":{"line":219,"column":16},"end":{"line":219,"column":35}},"136":{"start":{"line":220,"column":16},"end":{"line":220,"column":36}},"137":{"start":{"line":221,"column":16},"end":{"line":221,"column":44}},"138":{"start":{"line":222,"column":16},"end":{"line":222,"column":28}},"139":{"start":{"line":225,"column":12},"end":{"line":225,"column":31}},"140":{"start":{"line":229,"column":4},"end":{"line":246,"column":7}},"141":{"start":{"line":230,"column":8},"end":{"line":244,"column":9}},"142":{"start":{"line":231,"column":12},"end":{"line":243,"column":13}},"143":{"start":{"line":232,"column":16},"end":{"line":236,"column":17}},"144":{"start":{"line":233,"column":20},"end":{"line":233,"column":42}},"145":{"start":{"line":235,"column":20},"end":{"line":235,"column":36}},"146":{"start":{"line":238,"column":16},"end":{"line":238,"column":32}},"147":{"start":{"line":239,"column":16},"end":{"line":239,"column":35}},"148":{"start":{"line":240,"column":16},"end":{"line":240,"column":36}},"149":{"start":{"line":241,"column":16},"end":{"line":241,"column":44}},"150":{"start":{"line":242,"column":16},"end":{"line":242,"column":23}},"151":{"start":{"line":245,"column":8},"end":{"line":245,"column":18}},"152":{"start":{"line":248,"column":4},"end":{"line":248,"column":20}}},"branchMap":{"1":{"line":20,"type":"binary-expr","locations":[{"start":{"line":20,"column":14},"end":{"line":20,"column":21}},{"start":{"line":20,"column":25},"end":{"line":20,"column":27}}]},"2":{"line":22,"type":"binary-expr","locations":[{"start":{"line":22,"column":23},"end":{"line":22,"column":39}},{"start":{"line":22,"column":43},"end":{"line":22,"column":60}}]},"3":{"line":23,"type":"binary-expr","locations":[{"start":{"line":23,"column":22},"end":{"line":23,"column":37}},{"start":{"line":23,"column":41},"end":{"line":23,"column":54}}]},"4":{"line":24,"type":"binary-expr","locations":[{"start":{"line":24,"column":24},"end":{"line":24,"column":41}},{"start":{"line":24,"column":45},"end":{"line":24,"column":46}}]},"5":{"line":25,"type":"cond-expr","locations":[{"start":{"line":25,"column":57},"end":{"line":25,"column":70}},{"start":{"line":25,"column":73},"end":{"line":25,"column":93}}]},"6":{"line":27,"type":"if","locations":[{"start":{"line":27,"column":4},"end":{"line":27,"column":4}},{"start":{"line":27,"column":4},"end":{"line":27,"column":4}}]},"7":{"line":28,"type":"binary-expr","locations":[{"start":{"line":28,"column":18},"end":{"line":28,"column":32}},{"start":{"line":28,"column":36},"end":{"line":28,"column":38}}]},"8":{"line":36,"type":"binary-expr","locations":[{"start":{"line":36,"column":17},"end":{"line":36,"column":71}},{"start":{"line":36,"column":75},"end":{"line":36,"column":80}}]},"9":{"line":36,"type":"binary-expr","locations":[{"start":{"line":36,"column":18},"end":{"line":36,"column":32}},{"start":{"line":36,"column":36},"end":{"line":36,"column":38}}]},"10":{"line":41,"type":"cond-expr","locations":[{"start":{"line":41,"column":49},"end":{"line":41,"column":54}},{"start":{"line":41,"column":57},"end":{"line":41,"column":61}}]},"11":{"line":48,"type":"binary-expr","locations":[{"start":{"line":48,"column":16},"end":{"line":48,"column":31}},{"start":{"line":48,"column":35},"end":{"line":48,"column":37}}]},"12":{"line":52,"type":"if","locations":[{"start":{"line":52,"column":4},"end":{"line":52,"column":4}},{"start":{"line":52,"column":4},"end":{"line":52,"column":4}}]},"13":{"line":56,"type":"if","locations":[{"start":{"line":56,"column":4},"end":{"line":56,"column":4}},{"start":{"line":56,"column":4},"end":{"line":56,"column":4}}]},"14":{"line":60,"type":"if","locations":[{"start":{"line":60,"column":4},"end":{"line":60,"column":4}},{"start":{"line":60,"column":4},"end":{"line":60,"column":4}}]},"15":{"line":64,"type":"if","locations":[{"start":{"line":64,"column":4},"end":{"line":64,"column":4}},{"start":{"line":64,"column":4},"end":{"line":64,"column":4}}]},"16":{"line":65,"type":"if","locations":[{"start":{"line":65,"column":8},"end":{"line":65,"column":8}},{"start":{"line":65,"column":8},"end":{"line":65,"column":8}}]},"17":{"line":66,"type":"binary-expr","locations":[{"start":{"line":66,"column":38},"end":{"line":66,"column":57}},{"start":{"line":66,"column":61},"end":{"line":66,"column":96}}]},"18":{"line":69,"type":"if","locations":[{"start":{"line":69,"column":8},"end":{"line":69,"column":8}},{"start":{"line":69,"column":8},"end":{"line":69,"column":8}}]},"19":{"line":74,"type":"if","locations":[{"start":{"line":74,"column":16},"end":{"line":74,"column":16}},{"start":{"line":74,"column":16},"end":{"line":74,"column":16}}]},"20":{"line":83,"type":"if","locations":[{"start":{"line":83,"column":12},"end":{"line":83,"column":12}},{"start":{"line":83,"column":12},"end":{"line":83,"column":12}}]},"21":{"line":85,"type":"if","locations":[{"start":{"line":85,"column":19},"end":{"line":85,"column":19}},{"start":{"line":85,"column":19},"end":{"line":85,"column":19}}]},"22":{"line":94,"type":"binary-expr","locations":[{"start":{"line":94,"column":38},"end":{"line":94,"column":57}},{"start":{"line":94,"column":61},"end":{"line":94,"column":96}}]},"23":{"line":98,"type":"binary-expr","locations":[{"start":{"line":98,"column":17},"end":{"line":98,"column":71}},{"start":{"line":98,"column":75},"end":{"line":98,"column":81}}]},"24":{"line":98,"type":"binary-expr","locations":[{"start":{"line":98,"column":18},"end":{"line":98,"column":32}},{"start":{"line":98,"column":36},"end":{"line":98,"column":38}}]},"25":{"line":106,"type":"cond-expr","locations":[{"start":{"line":106,"column":28},"end":{"line":106,"column":39}},{"start":{"line":106,"column":43},"end":{"line":106,"column":82}}]},"26":{"line":106,"type":"cond-expr","locations":[{"start":{"line":106,"column":74},"end":{"line":106,"column":77}},{"start":{"line":106,"column":80},"end":{"line":106,"column":82}}]},"27":{"line":112,"type":"if","locations":[{"start":{"line":112,"column":4},"end":{"line":112,"column":4}},{"start":{"line":112,"column":4},"end":{"line":112,"column":4}}]},"28":{"line":130,"type":"if","locations":[{"start":{"line":130,"column":4},"end":{"line":130,"column":4}},{"start":{"line":130,"column":4},"end":{"line":130,"column":4}}]},"29":{"line":132,"type":"if","locations":[{"start":{"line":132,"column":12},"end":{"line":132,"column":12}},{"start":{"line":132,"column":12},"end":{"line":132,"column":12}}]},"30":{"line":145,"type":"if","locations":[{"start":{"line":145,"column":8},"end":{"line":145,"column":8}},{"start":{"line":145,"column":8},"end":{"line":145,"column":8}}]},"31":{"line":157,"type":"if","locations":[{"start":{"line":157,"column":8},"end":{"line":157,"column":8}},{"start":{"line":157,"column":8},"end":{"line":157,"column":8}}]},"32":{"line":161,"type":"switch","locations":[{"start":{"line":162,"column":12},"end":{"line":162,"column":24}},{"start":{"line":163,"column":12},"end":{"line":165,"column":22}}]},"33":{"line":168,"type":"if","locations":[{"start":{"line":168,"column":8},"end":{"line":168,"column":8}},{"start":{"line":168,"column":8},"end":{"line":168,"column":8}}]},"34":{"line":169,"type":"binary-expr","locations":[{"start":{"line":169,"column":22},"end":{"line":169,"column":47}},{"start":{"line":169,"column":51},"end":{"line":169,"column":53}}]},"35":{"line":174,"type":"if","locations":[{"start":{"line":174,"column":8},"end":{"line":174,"column":8}},{"start":{"line":174,"column":8},"end":{"line":174,"column":8}}]},"36":{"line":174,"type":"binary-expr","locations":[{"start":{"line":174,"column":12},"end":{"line":174,"column":62}},{"start":{"line":174,"column":66},"end":{"line":174,"column":86}}]},"37":{"line":177,"type":"if","locations":[{"start":{"line":177,"column":12},"end":{"line":177,"column":12}},{"start":{"line":177,"column":12},"end":{"line":177,"column":12}}]},"38":{"line":191,"type":"if","locations":[{"start":{"line":191,"column":8},"end":{"line":191,"column":8}},{"start":{"line":191,"column":8},"end":{"line":191,"column":8}}]},"39":{"line":191,"type":"binary-expr","locations":[{"start":{"line":191,"column":12},"end":{"line":191,"column":33}},{"start":{"line":191,"column":37},"end":{"line":191,"column":64}}]},"40":{"line":202,"type":"if","locations":[{"start":{"line":202,"column":12},"end":{"line":202,"column":12}},{"start":{"line":202,"column":12},"end":{"line":202,"column":12}}]},"41":{"line":212,"type":"if","locations":[{"start":{"line":212,"column":8},"end":{"line":212,"column":8}},{"start":{"line":212,"column":8},"end":{"line":212,"column":8}}]},"42":{"line":215,"type":"if","locations":[{"start":{"line":215,"column":16},"end":{"line":215,"column":16}},{"start":{"line":215,"column":16},"end":{"line":215,"column":16}}]},"43":{"line":230,"type":"if","locations":[{"start":{"line":230,"column":8},"end":{"line":230,"column":8}},{"start":{"line":230,"column":8},"end":{"line":230,"column":8}}]},"44":{"line":232,"type":"if","locations":[{"start":{"line":232,"column":16},"end":{"line":232,"column":16}},{"start":{"line":232,"column":16},"end":{"line":232,"column":16}}]}},"code":["'use strict';","","const http = require('http');","const https = require('https');","const urllib = require('url');","const zlib = require('zlib');","const PassThrough = require('stream').PassThrough;","const Cookies = require('./cookies');","const packageData = require('../../package.json');","","const MAX_REDIRECTS = 5;","","module.exports = function (url, options) {","    return fetch(url, options);","};","","module.exports.Cookies = Cookies;","","function fetch(url, options) {","    options = options || {};","","    options.fetchRes = options.fetchRes || new PassThrough();","    options.cookies = options.cookies || new Cookies();","    options.redirects = options.redirects || 0;","    options.maxRedirects = isNaN(options.maxRedirects) ? MAX_REDIRECTS : options.maxRedirects;","","    if (options.cookie) {","        [].concat(options.cookie || []).forEach(cookie => {","            options.cookies.set(cookie, url);","        });","        options.cookie = false;","    }","","    let fetchRes = options.fetchRes;","    let parsed = urllib.parse(url);","    let method = (options.method || '').toString().trim().toUpperCase() || 'GET';","    let finished = false;","    let cookies;","    let body;","","    let handler = parsed.protocol === 'https:' ? https : http;","","    let headers = {","        'accept-encoding': 'gzip,deflate',","        'user-agent': 'nodemailer/' + packageData.version","    };","","    Object.keys(options.headers || {}).forEach(key => {","        headers[key.toLowerCase().trim()] = options.headers[key];","    });","","    if (options.userAgent) {","        headers['user-agent'] = options.userAgent;","    }","","    if (parsed.auth) {","        headers.Authorization = 'Basic ' + new Buffer(parsed.auth).toString('base64');","    }","","    if ((cookies = options.cookies.get(url))) {","        headers.cookie = cookies;","    }","","    if (options.body) {","        if (options.contentType !== false) {","            headers['Content-Type'] = options.contentType || 'application/x-www-form-urlencoded';","        }","","        if (typeof options.body.pipe === 'function') {","            // it's a stream","            headers['Transfer-Encoding'] = 'chunked';","            body = options.body;","            body.on('error', err => {","                if (finished) {","                    return;","                }","                finished = true;","                err.type = 'FETCH';","                err.sourceUrl = url;","                fetchRes.emit('error', err);","            });","        } else {","            if (options.body instanceof Buffer) {","                body = options.body;","            } else if (typeof options.body === 'object') {","                body = new Buffer(Object.keys(options.body).map(key => {","                    let value = options.body[key].toString().trim();","                    return encodeURIComponent(key) + '=' + encodeURIComponent(value);","                }).join('&'));","            } else {","                body = new Buffer(options.body.toString().trim());","            }","","            headers['Content-Type'] = options.contentType || 'application/x-www-form-urlencoded';","            headers['Content-Length'] = body.length;","        }","        // if method is not provided, use POST instead of GET","        method = (options.method || '').toString().trim().toUpperCase() || 'POST';","    }","","    let req;","    let reqOptions = {","        method,","        host: parsed.hostname,","        path: parsed.path,","        port: parsed.port ? parsed.port : (parsed.protocol === 'https:' ? 443 : 80),","        headers,","        rejectUnauthorized: false,","        agent: false","    };","","    if (options.tls) {","        Object.keys(options.tls).forEach(key => {","            reqOptions[key] = options.tls[key];","        });","    }","","    try {","        req = handler.request(reqOptions);","    } catch (E) {","        finished = true;","        setImmediate(() => {","            E.type = 'FETCH';","            E.sourceUrl = url;","            fetchRes.emit('error', E);","        });","        return fetchRes;","    }","","    if (options.timeout) {","        req.setTimeout(options.timeout, () => {","            if (finished) {","                return;","            }","            finished = true;","            req.abort();","            let err = new Error('Request Timeout');","            err.type = 'FETCH';","            err.sourceUrl = url;","            fetchRes.emit('error', err);","        });","    }","","    req.on('error', err => {","        if (finished) {","            return;","        }","        finished = true;","        err.type = 'FETCH';","        err.sourceUrl = url;","        fetchRes.emit('error', err);","    });","","    req.on('response', res => {","        let inflate;","","        if (finished) {","            return;","        }","","        switch (res.headers['content-encoding']) {","            case 'gzip':","            case 'deflate':","                inflate = zlib.createUnzip();","                break;","        }","","        if (res.headers['set-cookie']) {","            [].concat(res.headers['set-cookie'] || []).forEach(cookie => {","                options.cookies.set(cookie, url);","            });","        }","","        if ([301, 302, 303, 307, 308].includes(res.statusCode) && res.headers.location) {","            // redirect","            options.redirects++;","            if (options.redirects > options.maxRedirects) {","                finished = true;","                let err = new Error('Maximum redirect count exceeded');","                err.type = 'FETCH';","                err.sourceUrl = url;","                fetchRes.emit('error', err);","                req.abort();","                return;","            }","            return fetch(urllib.resolve(url, res.headers.location), options);","        }","","        fetchRes.statusCode = res.statusCode;","","        if (res.statusCode >= 300 && !options.allowErrorResponse) {","            finished = true;","            let err = new Error('Invalid status code ' + res.statusCode);","            err.type = 'FETCH';","            err.sourceUrl = url;","            fetchRes.emit('error', err);","            req.abort();","            return;","        }","","        res.on('error', err => {","            if (finished) {","                return;","            }","            finished = true;","            err.type = 'FETCH';","            err.sourceUrl = url;","            fetchRes.emit('error', err);","            req.abort();","        });","","        if (inflate) {","            res.pipe(inflate).pipe(fetchRes);","            inflate.on('error', err => {","                if (finished) {","                    return;","                }","                finished = true;","                err.type = 'FETCH';","                err.sourceUrl = url;","                fetchRes.emit('error', err);","                req.abort();","            });","        } else {","            res.pipe(fetchRes);","        }","    });","","    setImmediate(() => {","        if (body) {","            try {","                if (typeof body.pipe === 'function') {","                    return body.pipe(req);","                } else {","                    req.write(body);","                }","            } catch (err) {","                finished = true;","                err.type = 'FETCH';","                err.sourceUrl = url;","                fetchRes.emit('error', err);","                return;","            }","        }","        req.end();","    });","","    return fetchRes;","}",""],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"11":1,"13":1,"14":0,"17":1,"19":1,"20":0,"22":0,"23":0,"24":0,"25":0,"27":0,"28":0,"29":0,"31":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"41":0,"43":0,"48":0,"49":0,"52":0,"53":0,"56":0,"57":0,"60":0,"61":0,"64":0,"65":0,"66":0,"69":0,"71":0,"72":0,"73":0,"74":0,"75":0,"77":0,"78":0,"79":0,"80":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"91":0,"94":0,"95":0,"98":0,"101":0,"102":0,"112":0,"113":0,"114":0,"118":0,"119":0,"121":0,"122":0,"123":0,"124":0,"125":0,"127":0,"130":0,"131":0,"132":0,"133":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"144":0,"145":0,"146":0,"148":0,"149":0,"150":0,"151":0,"154":0,"155":0,"157":0,"158":0,"161":0,"164":0,"165":0,"168":0,"169":0,"170":0,"174":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"186":0,"189":0,"191":0,"192":0,"193":0,"194":0,"195":0,"196":0,"197":0,"198":0,"201":0,"202":0,"203":0,"205":0,"206":0,"207":0,"208":0,"209":0,"212":0,"213":0,"214":0,"215":0,"216":0,"218":0,"219":0,"220":0,"221":0,"222":0,"225":0,"229":0,"230":0,"231":0,"232":0,"233":0,"235":0,"238":0,"239":0,"240":0,"241":0,"242":0,"245":0,"248":0}},"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/fetch/cookies.js":{"path":"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/fetch/cookies.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0,0,0,0,0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0,0,0,0],"32":[0,0,0],"33":[0,0],"34":[0,0],"35":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},"fnMap":{"1":{"name":"(anonymous_1)","line":16,"loc":{"start":{"line":16,"column":15},"end":{"line":16,"column":25}}},"2":{"name":"(anonymous_2)","line":27,"loc":{"start":{"line":27,"column":7},"end":{"line":27,"column":24}}},"3":{"name":"(anonymous_3)","line":66,"loc":{"start":{"line":66,"column":7},"end":{"line":66,"column":13}}},"4":{"name":"(anonymous_4)","line":77,"loc":{"start":{"line":77,"column":8},"end":{"line":77,"column":14}}},"5":{"name":"(anonymous_5)","line":104,"loc":{"start":{"line":104,"column":9},"end":{"line":104,"column":21}}},"6":{"name":"(anonymous_6)","line":170,"loc":{"start":{"line":170,"column":9},"end":{"line":170,"column":23}}},"7":{"name":"(anonymous_7)","line":198,"loc":{"start":{"line":198,"column":7},"end":{"line":198,"column":16}}},"8":{"name":"(anonymous_8)","line":237,"loc":{"start":{"line":237,"column":11},"end":{"line":237,"column":18}}},"9":{"name":"(anonymous_9)","line":247,"loc":{"start":{"line":247,"column":13},"end":{"line":247,"column":22}}},"10":{"name":"(anonymous_10)","line":257,"loc":{"start":{"line":257,"column":11},"end":{"line":257,"column":22}}}},"statementMap":{"1":{"start":{"line":5,"column":0},"end":{"line":5,"column":30}},"2":{"start":{"line":7,"column":0},"end":{"line":7,"column":29}},"3":{"start":{"line":17,"column":8},"end":{"line":17,"column":37}},"4":{"start":{"line":18,"column":8},"end":{"line":18,"column":26}},"5":{"start":{"line":28,"column":8},"end":{"line":28,"column":47}},"6":{"start":{"line":29,"column":8},"end":{"line":29,"column":43}},"7":{"start":{"line":30,"column":8},"end":{"line":30,"column":19}},"8":{"start":{"line":32,"column":8},"end":{"line":46,"column":9}},"9":{"start":{"line":33,"column":12},"end":{"line":33,"column":54}},"10":{"start":{"line":36,"column":12},"end":{"line":43,"column":13}},"11":{"start":{"line":42,"column":16},"end":{"line":42,"column":50}},"12":{"start":{"line":45,"column":12},"end":{"line":45,"column":46}},"13":{"start":{"line":48,"column":8},"end":{"line":50,"column":9}},"14":{"start":{"line":49,"column":12},"end":{"line":49,"column":58}},"15":{"start":{"line":53,"column":8},"end":{"line":55,"column":9}},"16":{"start":{"line":54,"column":12},"end":{"line":54,"column":135}},"17":{"start":{"line":57,"column":8},"end":{"line":57,"column":32}},"18":{"start":{"line":67,"column":8},"end":{"line":68,"column":57}},"19":{"start":{"line":68,"column":12},"end":{"line":68,"column":44}},"20":{"start":{"line":78,"column":8},"end":{"line":78,"column":24}},"21":{"start":{"line":79,"column":8},"end":{"line":79,"column":14}},"22":{"start":{"line":80,"column":8},"end":{"line":80,"column":19}},"23":{"start":{"line":82,"column":8},"end":{"line":93,"column":9}},"24":{"start":{"line":83,"column":12},"end":{"line":83,"column":37}},"25":{"start":{"line":85,"column":12},"end":{"line":88,"column":13}},"26":{"start":{"line":86,"column":16},"end":{"line":86,"column":42}},"27":{"start":{"line":87,"column":16},"end":{"line":87,"column":25}},"28":{"start":{"line":90,"column":12},"end":{"line":92,"column":13}},"29":{"start":{"line":91,"column":16},"end":{"line":91,"column":39}},"30":{"start":{"line":95,"column":8},"end":{"line":95,"column":22}},"31":{"start":{"line":105,"column":8},"end":{"line":105,"column":24}},"32":{"start":{"line":107,"column":8},"end":{"line":158,"column":11}},"33":{"start":{"line":108,"column":12},"end":{"line":108,"column":51}},"34":{"start":{"line":109,"column":12},"end":{"line":109,"column":62}},"35":{"start":{"line":110,"column":12},"end":{"line":110,"column":52}},"36":{"start":{"line":111,"column":12},"end":{"line":111,"column":23}},"37":{"start":{"line":113,"column":12},"end":{"line":116,"column":13}},"38":{"start":{"line":115,"column":16},"end":{"line":115,"column":23}},"39":{"start":{"line":118,"column":12},"end":{"line":157,"column":13}},"40":{"start":{"line":121,"column":20},"end":{"line":121,"column":44}},"41":{"start":{"line":123,"column":20},"end":{"line":125,"column":21}},"42":{"start":{"line":124,"column":24},"end":{"line":124,"column":47}},"43":{"start":{"line":126,"column":20},"end":{"line":126,"column":26}},"44":{"start":{"line":129,"column":20},"end":{"line":129,"column":40}},"45":{"start":{"line":130,"column":20},"end":{"line":130,"column":26}},"46":{"start":{"line":133,"column":20},"end":{"line":133,"column":49}},"47":{"start":{"line":134,"column":20},"end":{"line":136,"column":21}},"48":{"start":{"line":135,"column":24},"end":{"line":135,"column":46}},"49":{"start":{"line":137,"column":20},"end":{"line":137,"column":43}},"50":{"start":{"line":138,"column":20},"end":{"line":138,"column":26}},"51":{"start":{"line":141,"column":20},"end":{"line":141,"column":88}},"52":{"start":{"line":142,"column":20},"end":{"line":142,"column":26}},"53":{"start":{"line":145,"column":20},"end":{"line":145,"column":41}},"54":{"start":{"line":146,"column":20},"end":{"line":146,"column":26}},"55":{"start":{"line":149,"column":20},"end":{"line":149,"column":43}},"56":{"start":{"line":150,"column":20},"end":{"line":150,"column":26}},"57":{"start":{"line":153,"column":20},"end":{"line":156,"column":21}},"58":{"start":{"line":154,"column":24},"end":{"line":154,"column":42}},"59":{"start":{"line":155,"column":24},"end":{"line":155,"column":45}},"60":{"start":{"line":160,"column":8},"end":{"line":160,"column":22}},"61":{"start":{"line":171,"column":8},"end":{"line":171,"column":47}},"62":{"start":{"line":175,"column":8},"end":{"line":177,"column":9}},"63":{"start":{"line":176,"column":12},"end":{"line":176,"column":25}},"64":{"start":{"line":180,"column":8},"end":{"line":180,"column":51}},"65":{"start":{"line":181,"column":8},"end":{"line":183,"column":9}},"66":{"start":{"line":182,"column":12},"end":{"line":182,"column":25}},"67":{"start":{"line":186,"column":8},"end":{"line":188,"column":9}},"68":{"start":{"line":187,"column":12},"end":{"line":187,"column":25}},"69":{"start":{"line":190,"column":8},"end":{"line":190,"column":20}},"70":{"start":{"line":199,"column":8},"end":{"line":199,"column":14}},"71":{"start":{"line":200,"column":8},"end":{"line":200,"column":16}},"72":{"start":{"line":203,"column":8},"end":{"line":205,"column":9}},"73":{"start":{"line":204,"column":12},"end":{"line":204,"column":25}},"74":{"start":{"line":208,"column":8},"end":{"line":220,"column":9}},"75":{"start":{"line":209,"column":12},"end":{"line":219,"column":13}},"76":{"start":{"line":212,"column":16},"end":{"line":215,"column":17}},"77":{"start":{"line":213,"column":20},"end":{"line":213,"column":46}},"78":{"start":{"line":214,"column":20},"end":{"line":214,"column":33}},"79":{"start":{"line":217,"column":16},"end":{"line":217,"column":41}},"80":{"start":{"line":218,"column":16},"end":{"line":218,"column":28}},"81":{"start":{"line":223,"column":8},"end":{"line":225,"column":9}},"82":{"start":{"line":224,"column":12},"end":{"line":224,"column":38}},"83":{"start":{"line":227,"column":8},"end":{"line":227,"column":20}},"84":{"start":{"line":238,"column":8},"end":{"line":238,"column":133}},"85":{"start":{"line":248,"column":8},"end":{"line":248,"column":80}},"86":{"start":{"line":258,"column":8},"end":{"line":258,"column":48}},"87":{"start":{"line":259,"column":8},"end":{"line":259,"column":19}},"88":{"start":{"line":260,"column":8},"end":{"line":260,"column":37}},"89":{"start":{"line":263,"column":8},"end":{"line":265,"column":9}},"90":{"start":{"line":264,"column":12},"end":{"line":264,"column":30}},"91":{"start":{"line":268,"column":8},"end":{"line":270,"column":9}},"92":{"start":{"line":269,"column":12},"end":{"line":269,"column":24}},"93":{"start":{"line":272,"column":8},"end":{"line":272,"column":20}},"94":{"start":{"line":276,"column":0},"end":{"line":276,"column":25}}},"branchMap":{"1":{"line":17,"type":"binary-expr","locations":[{"start":{"line":17,"column":23},"end":{"line":17,"column":30}},{"start":{"line":17,"column":34},"end":{"line":17,"column":36}}]},"2":{"line":28,"type":"binary-expr","locations":[{"start":{"line":28,"column":36},"end":{"line":28,"column":39}},{"start":{"line":28,"column":43},"end":{"line":28,"column":45}}]},"3":{"line":32,"type":"if","locations":[{"start":{"line":32,"column":8},"end":{"line":32,"column":8}},{"start":{"line":32,"column":8},"end":{"line":32,"column":8}}]},"4":{"line":36,"type":"if","locations":[{"start":{"line":36,"column":12},"end":{"line":36,"column":12}},{"start":{"line":36,"column":12},"end":{"line":36,"column":12}}]},"5":{"line":38,"type":"binary-expr","locations":[{"start":{"line":38,"column":16},"end":{"line":38,"column":56}},{"start":{"line":41,"column":16},"end":{"line":41,"column":87}}]},"6":{"line":48,"type":"if","locations":[{"start":{"line":48,"column":8},"end":{"line":48,"column":8}},{"start":{"line":48,"column":8},"end":{"line":48,"column":8}}]},"7":{"line":53,"type":"if","locations":[{"start":{"line":53,"column":8},"end":{"line":53,"column":8}},{"start":{"line":53,"column":8},"end":{"line":53,"column":8}}]},"8":{"line":54,"type":"binary-expr","locations":[{"start":{"line":54,"column":52},"end":{"line":54,"column":106}},{"start":{"line":54,"column":110},"end":{"line":54,"column":125}}]},"9":{"line":54,"type":"binary-expr","locations":[{"start":{"line":54,"column":59},"end":{"line":54,"column":86}},{"start":{"line":54,"column":90},"end":{"line":54,"column":105}}]},"10":{"line":85,"type":"if","locations":[{"start":{"line":85,"column":12},"end":{"line":85,"column":12}},{"start":{"line":85,"column":12},"end":{"line":85,"column":12}}]},"11":{"line":90,"type":"if","locations":[{"start":{"line":90,"column":12},"end":{"line":90,"column":12}},{"start":{"line":90,"column":12},"end":{"line":90,"column":12}}]},"12":{"line":107,"type":"binary-expr","locations":[{"start":{"line":107,"column":9},"end":{"line":107,"column":18}},{"start":{"line":107,"column":22},"end":{"line":107,"column":24}}]},"13":{"line":113,"type":"if","locations":[{"start":{"line":113,"column":12},"end":{"line":113,"column":12}},{"start":{"line":113,"column":12},"end":{"line":113,"column":12}}]},"14":{"line":118,"type":"switch","locations":[{"start":{"line":120,"column":16},"end":{"line":126,"column":26}},{"start":{"line":128,"column":16},"end":{"line":130,"column":26}},{"start":{"line":132,"column":16},"end":{"line":138,"column":26}},{"start":{"line":140,"column":16},"end":{"line":142,"column":26}},{"start":{"line":144,"column":16},"end":{"line":146,"column":26}},{"start":{"line":148,"column":16},"end":{"line":150,"column":26}},{"start":{"line":152,"column":16},"end":{"line":156,"column":21}}]},"15":{"line":123,"type":"if","locations":[{"start":{"line":123,"column":20},"end":{"line":123,"column":20}},{"start":{"line":123,"column":20},"end":{"line":123,"column":20}}]},"16":{"line":134,"type":"if","locations":[{"start":{"line":134,"column":20},"end":{"line":134,"column":20}},{"start":{"line":134,"column":20},"end":{"line":134,"column":20}}]},"17":{"line":134,"type":"binary-expr","locations":[{"start":{"line":134,"column":24},"end":{"line":134,"column":37}},{"start":{"line":134,"column":41},"end":{"line":134,"column":65}}]},"18":{"line":141,"type":"binary-expr","locations":[{"start":{"line":141,"column":60},"end":{"line":141,"column":73}},{"start":{"line":141,"column":77},"end":{"line":141,"column":78}}]},"19":{"line":153,"type":"if","locations":[{"start":{"line":153,"column":20},"end":{"line":153,"column":20}},{"start":{"line":153,"column":20},"end":{"line":153,"column":20}}]},"20":{"line":171,"type":"binary-expr","locations":[{"start":{"line":171,"column":36},"end":{"line":171,"column":39}},{"start":{"line":171,"column":43},"end":{"line":171,"column":45}}]},"21":{"line":175,"type":"if","locations":[{"start":{"line":175,"column":8},"end":{"line":175,"column":8}},{"start":{"line":175,"column":8},"end":{"line":175,"column":8}}]},"22":{"line":175,"type":"binary-expr","locations":[{"start":{"line":175,"column":12},"end":{"line":175,"column":47}},{"start":{"line":175,"column":52},"end":{"line":175,"column":83}},{"start":{"line":175,"column":87},"end":{"line":175,"column":160}}]},"23":{"line":181,"type":"if","locations":[{"start":{"line":181,"column":8},"end":{"line":181,"column":8}},{"start":{"line":181,"column":8},"end":{"line":181,"column":8}}]},"24":{"line":186,"type":"if","locations":[{"start":{"line":186,"column":8},"end":{"line":186,"column":8}},{"start":{"line":186,"column":8},"end":{"line":186,"column":8}}]},"25":{"line":186,"type":"binary-expr","locations":[{"start":{"line":186,"column":12},"end":{"line":186,"column":25}},{"start":{"line":186,"column":29},"end":{"line":186,"column":59}}]},"26":{"line":203,"type":"if","locations":[{"start":{"line":203,"column":8},"end":{"line":203,"column":8}},{"start":{"line":203,"column":8},"end":{"line":203,"column":8}}]},"27":{"line":203,"type":"binary-expr","locations":[{"start":{"line":203,"column":12},"end":{"line":203,"column":19}},{"start":{"line":203,"column":23},"end":{"line":203,"column":35}}]},"28":{"line":209,"type":"if","locations":[{"start":{"line":209,"column":12},"end":{"line":209,"column":12}},{"start":{"line":209,"column":12},"end":{"line":209,"column":12}}]},"29":{"line":212,"type":"if","locations":[{"start":{"line":212,"column":16},"end":{"line":212,"column":16}},{"start":{"line":212,"column":16},"end":{"line":212,"column":16}}]},"30":{"line":223,"type":"if","locations":[{"start":{"line":223,"column":8},"end":{"line":223,"column":8}},{"start":{"line":223,"column":8},"end":{"line":223,"column":8}}]},"31":{"line":238,"type":"binary-expr","locations":[{"start":{"line":238,"column":15},"end":{"line":238,"column":32}},{"start":{"line":238,"column":36},"end":{"line":238,"column":53}},{"start":{"line":238,"column":57},"end":{"line":238,"column":78}},{"start":{"line":238,"column":82},"end":{"line":238,"column":103}},{"start":{"line":238,"column":107},"end":{"line":238,"column":132}}]},"32":{"line":248,"type":"binary-expr","locations":[{"start":{"line":248,"column":16},"end":{"line":248,"column":30}},{"start":{"line":248,"column":34},"end":{"line":248,"column":61}},{"start":{"line":248,"column":66},"end":{"line":248,"column":79}}]},"33":{"line":258,"type":"binary-expr","locations":[{"start":{"line":258,"column":20},"end":{"line":258,"column":28}},{"start":{"line":258,"column":32},"end":{"line":258,"column":35}}]},"34":{"line":263,"type":"if","locations":[{"start":{"line":263,"column":8},"end":{"line":263,"column":8}},{"start":{"line":263,"column":8},"end":{"line":263,"column":8}}]},"35":{"line":268,"type":"if","locations":[{"start":{"line":268,"column":8},"end":{"line":268,"column":8}},{"start":{"line":268,"column":8},"end":{"line":268,"column":8}}]}},"code":["'use strict';","","// module to handle cookies","","const urllib = require('url');","","const SESSION_TIMEOUT = 1800; // 30 min","","/**"," * Creates a biskviit cookie jar for managing cookie values in memory"," *"," * @constructor"," * @param {Object} [options] Optional options object"," */","class Cookies {","    constructor(options) {","        this.options = options || {};","        this.cookies = [];","    }","","    /**","     * Stores a cookie string to the cookie storage","     *","     * @param {String} cookieStr Value from the 'Set-Cookie:' header","     * @param {String} url Current URL","     */","    set(cookieStr, url) {","        let urlparts = urllib.parse(url || '');","        let cookie = this.parse(cookieStr);","        let domain;","","        if (cookie.domain) {","            domain = cookie.domain.replace(/^\\./, '');","","            // do not allow cross origin cookies","            if (","                // can't be valid if the requested domain is shorter than current hostname","                urlparts.hostname.length < domain.length ||","","                // prefix domains with dot to be sure that partial matches are not used","                ('.' + urlparts.hostname).substr(-domain.length + 1) !== ('.' + domain)) {","                cookie.domain = urlparts.hostname;","            }","        } else {","            cookie.domain = urlparts.hostname;","        }","","        if (!cookie.path) {","            cookie.path = this.getPath(urlparts.pathname);","        }","","        // if no expire date, then use sessionTimeout value","        if (!cookie.expires) {","            cookie.expires = new Date(Date.now() + (Number(this.options.sessionTimeout || SESSION_TIMEOUT) || SESSION_TIMEOUT) * 1000);","        }","","        return this.add(cookie);","    }","","    /**","     * Returns cookie string for the 'Cookie:' header.","     *","     * @param {String} url URL to check for","     * @returns {String} Cookie header or empty string if no matches were found","     */","    get(url) {","        return this.list(url).map(cookie =>","            cookie.name + '=' + cookie.value).join('; ');","    }","","    /**","     * Lists all valied cookie objects for the specified URL","     *","     * @param {String} url URL to check for","     * @returns {Array} An array of cookie objects","     */","    list(url) {","        let result = [];","        let i;","        let cookie;","","        for (i = this.cookies.length - 1; i >= 0; i--) {","            cookie = this.cookies[i];","","            if (this.isExpired(cookie)) {","                this.cookies.splice(i, i);","                continue;","            }","","            if (this.match(cookie, url)) {","                result.unshift(cookie);","            }","        }","","        return result;","    }","","    /**","     * Parses cookie string from the 'Set-Cookie:' header","     *","     * @param {String} cookieStr String from the 'Set-Cookie:' header","     * @returns {Object} Cookie object","     */","    parse(cookieStr) {","        let cookie = {};","","        (cookieStr || '').toString().split(';').forEach(cookiePart => {","            let valueParts = cookiePart.split('=');","            let key = valueParts.shift().trim().toLowerCase();","            let value = valueParts.join('=').trim();","            let domain;","","            if (!key) {","                // skip empty parts","                return;","            }","","            switch (key) {","","                case 'expires':","                    value = new Date(value);","                    // ignore date if can not parse it","                    if (value.toString() !== 'Invalid Date') {","                        cookie.expires = value;","                    }","                    break;","","                case 'path':","                    cookie.path = value;","                    break;","","                case 'domain':","                    domain = value.toLowerCase();","                    if (domain.length && domain.charAt(0) !== '.') {","                        domain = '.' + domain; // ensure preceeding dot for user set domains","                    }","                    cookie.domain = domain;","                    break;","","                case 'max-age':","                    cookie.expires = new Date(Date.now() + (Number(value) || 0) * 1000);","                    break;","","                case 'secure':","                    cookie.secure = true;","                    break;","","                case 'httponly':","                    cookie.httponly = true;","                    break;","","                default:","                    if (!cookie.name) {","                        cookie.name = key;","                        cookie.value = value;","                    }","            }","        });","","        return cookie;","    }","","    /**","     * Checks if a cookie object is valid for a specified URL","     *","     * @param {Object} cookie Cookie object","     * @param {String} url URL to check for","     * @returns {Boolean} true if cookie is valid for specifiec URL","     */","    match(cookie, url) {","        let urlparts = urllib.parse(url || '');","","        // check if hostname matches","        // .foo.com also matches subdomains, foo.com does not","        if (urlparts.hostname !== cookie.domain && (cookie.domain.charAt(0) !== '.' || ('.' + urlparts.hostname).substr(-cookie.domain.length) !== cookie.domain)) {","            return false;","        }","","        // check if path matches","        let path = this.getPath(urlparts.pathname);","        if (path.substr(0, cookie.path.length) !== cookie.path) {","            return false;","        }","","        // check secure argument","        if (cookie.secure && urlparts.protocol !== 'https:') {","            return false;","        }","","        return true;","    }","","    /**","     * Adds (or updates/removes if needed) a cookie object to the cookie storage","     *","     * @param {Object} cookie Cookie value to be stored","     */","    add(cookie) {","        let i;","        let len;","","        // nothing to do here","        if (!cookie || !cookie.name) {","            return false;","        }","","        // overwrite if has same params","        for (i = 0, len = this.cookies.length; i < len; i++) {","            if (this.compare(this.cookies[i], cookie)) {","","                // check if the cookie needs to be removed instead","                if (this.isExpired(cookie)) {","                    this.cookies.splice(i, 1); // remove expired/unset cookie","                    return false;","                }","","                this.cookies[i] = cookie;","                return true;","            }","        }","","        // add as new if not already expired","        if (!this.isExpired(cookie)) {","            this.cookies.push(cookie);","        }","","        return true;","    }","","    /**","     * Checks if two cookie objects are the same","     *","     * @param {Object} a Cookie to check against","     * @param {Object} b Cookie to check against","     * @returns {Boolean} True, if the cookies are the same","     */","    compare(a, b) {","        return a.name === b.name && a.path === b.path && a.domain === b.domain && a.secure === b.secure && a.httponly === a.httponly;","    }","","    /**","     * Checks if a cookie is expired","     *","     * @param {Object} cookie Cookie object to check against","     * @returns {Boolean} True, if the cookie is expired","     */","    isExpired(cookie) {","        return (cookie.expires && cookie.expires < new Date()) || !cookie.value;","    }","","    /**","     * Returns normalized cookie path for an URL path argument","     *","     * @param {String} pathname","     * @returns {String} Normalized path","     */","    getPath(pathname) {","        let path = (pathname || '/').split('/');","        path.pop(); // remove filename part","        path = path.join('/').trim();","","        // ensure path prefix /","        if (path.charAt(0) !== '/') {","            path = '/' + path;","        }","","        // ensure path suffix /","        if (path.substr(-1) !== '/') {","            path += '/';","        }","","        return path;","    }","}","","module.exports = Cookies;",""],"l":{"5":1,"7":1,"17":0,"18":0,"28":0,"29":0,"30":0,"32":0,"33":0,"36":0,"42":0,"45":0,"48":0,"49":0,"53":0,"54":0,"57":0,"67":0,"68":0,"78":0,"79":0,"80":0,"82":0,"83":0,"85":0,"86":0,"87":0,"90":0,"91":0,"95":0,"105":0,"107":0,"108":0,"109":0,"110":0,"111":0,"113":0,"115":0,"118":0,"121":0,"123":0,"124":0,"126":0,"129":0,"130":0,"133":0,"134":0,"135":0,"137":0,"138":0,"141":0,"142":0,"145":0,"146":0,"149":0,"150":0,"153":0,"154":0,"155":0,"160":0,"171":0,"175":0,"176":0,"180":0,"181":0,"182":0,"186":0,"187":0,"190":0,"199":0,"200":0,"203":0,"204":0,"208":0,"209":0,"212":0,"213":0,"214":0,"217":0,"218":0,"223":0,"224":0,"227":0,"238":0,"248":0,"258":0,"259":0,"260":0,"263":0,"264":0,"268":0,"269":0,"272":0,"276":1}},"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/mime-funcs/mime-types.js":{"path":"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/mime-funcs/mime-types.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0},"b":{"1":[0,0],"2":[0,0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"(anonymous_1)","line":2317,"loc":{"start":{"line":2317,"column":18},"end":{"line":2317,"column":29}}},"2":{"name":"(anonymous_2)","line":2336,"loc":{"start":{"line":2336,"column":19},"end":{"line":2336,"column":30}}}},"statementMap":{"1":{"start":{"line":5,"column":0},"end":{"line":5,"column":29}},"2":{"start":{"line":7,"column":0},"end":{"line":7,"column":51}},"3":{"start":{"line":8,"column":0},"end":{"line":8,"column":31}},"4":{"start":{"line":10,"column":0},"end":{"line":1098,"column":3}},"5":{"start":{"line":1099,"column":0},"end":{"line":2314,"column":3}},"6":{"start":{"line":2316,"column":0},"end":{"line":2359,"column":2}},"7":{"start":{"line":2318,"column":8},"end":{"line":2320,"column":9}},"8":{"start":{"line":2319,"column":12},"end":{"line":2319,"column":35}},"9":{"start":{"line":2322,"column":8},"end":{"line":2322,"column":42}},"10":{"start":{"line":2323,"column":8},"end":{"line":2323,"column":108}},"11":{"start":{"line":2324,"column":8},"end":{"line":2324,"column":36}},"12":{"start":{"line":2326,"column":8},"end":{"line":2328,"column":9}},"13":{"start":{"line":2327,"column":12},"end":{"line":2327,"column":46}},"14":{"start":{"line":2330,"column":8},"end":{"line":2332,"column":9}},"15":{"start":{"line":2331,"column":12},"end":{"line":2331,"column":28}},"16":{"start":{"line":2333,"column":8},"end":{"line":2333,"column":21}},"17":{"start":{"line":2337,"column":8},"end":{"line":2339,"column":9}},"18":{"start":{"line":2338,"column":12},"end":{"line":2338,"column":36}},"19":{"start":{"line":2340,"column":8},"end":{"line":2340,"column":69}},"20":{"start":{"line":2341,"column":8},"end":{"line":2341,"column":44}},"21":{"start":{"line":2342,"column":8},"end":{"line":2342,"column":45}},"22":{"start":{"line":2344,"column":8},"end":{"line":2350,"column":9}},"23":{"start":{"line":2345,"column":12},"end":{"line":2345,"column":64}},"24":{"start":{"line":2346,"column":12},"end":{"line":2348,"column":13}},"25":{"start":{"line":2347,"column":16},"end":{"line":2347,"column":32}},"26":{"start":{"line":2349,"column":12},"end":{"line":2349,"column":25}},"27":{"start":{"line":2352,"column":8},"end":{"line":2357,"column":9}},"28":{"start":{"line":2354,"column":16},"end":{"line":2354,"column":29}},"29":{"start":{"line":2356,"column":16},"end":{"line":2356,"column":29}}},"branchMap":{"1":{"line":2318,"type":"if","locations":[{"start":{"line":2318,"column":8},"end":{"line":2318,"column":8}},{"start":{"line":2318,"column":8},"end":{"line":2318,"column":8}}]},"2":{"line":2323,"type":"binary-expr","locations":[{"start":{"line":2323,"column":25},"end":{"line":2323,"column":45}},{"start":{"line":2323,"column":49},"end":{"line":2323,"column":60}},{"start":{"line":2323,"column":64},"end":{"line":2323,"column":66}}]},"3":{"line":2326,"type":"if","locations":[{"start":{"line":2326,"column":8},"end":{"line":2326,"column":8}},{"start":{"line":2326,"column":8},"end":{"line":2326,"column":8}}]},"4":{"line":2330,"type":"if","locations":[{"start":{"line":2330,"column":8},"end":{"line":2330,"column":8}},{"start":{"line":2330,"column":8},"end":{"line":2330,"column":8}}]},"5":{"line":2337,"type":"if","locations":[{"start":{"line":2337,"column":8},"end":{"line":2337,"column":8}},{"start":{"line":2337,"column":8},"end":{"line":2337,"column":8}}]},"6":{"line":2340,"type":"binary-expr","locations":[{"start":{"line":2340,"column":21},"end":{"line":2340,"column":29}},{"start":{"line":2340,"column":33},"end":{"line":2340,"column":35}}]},"7":{"line":2344,"type":"if","locations":[{"start":{"line":2344,"column":8},"end":{"line":2344,"column":8}},{"start":{"line":2344,"column":8},"end":{"line":2344,"column":8}}]},"8":{"line":2346,"type":"if","locations":[{"start":{"line":2346,"column":12},"end":{"line":2346,"column":12}},{"start":{"line":2346,"column":12},"end":{"line":2346,"column":12}}]},"9":{"line":2352,"type":"switch","locations":[{"start":{"line":2353,"column":12},"end":{"line":2354,"column":29}},{"start":{"line":2355,"column":12},"end":{"line":2356,"column":29}}]}},"code":["/* eslint quote-props: 0 */","","'use strict';","","const path = require('path');","","const defaultMimeType = 'application/octet-stream';","const defaultExtension = 'bin';","","const mimeTypes = new Map([","    ['application/acad', 'dwg'],","    ['application/applixware', 'aw'],","    ['application/arj', 'arj'],","    ['application/atom+xml', 'xml'],","    ['application/atomcat+xml', 'atomcat'],","    ['application/atomsvc+xml', 'atomsvc'],","    ['application/base64', ['mm', 'mme']],","    ['application/binhex', 'hqx'],","    ['application/binhex4', 'hqx'],","    ['application/book', ['book', 'boo']],","    ['application/ccxml+xml,', 'ccxml'],","    ['application/cdf', 'cdf'],","    ['application/cdmi-capability', 'cdmia'],","    ['application/cdmi-container', 'cdmic'],","    ['application/cdmi-domain', 'cdmid'],","    ['application/cdmi-object', 'cdmio'],","    ['application/cdmi-queue', 'cdmiq'],","    ['application/clariscad', 'ccad'],","    ['application/commonground', 'dp'],","    ['application/cu-seeme', 'cu'],","    ['application/davmount+xml', 'davmount'],","    ['application/drafting', 'drw'],","    ['application/dsptype', 'tsp'],","    ['application/dssc+der', 'dssc'],","    ['application/dssc+xml', 'xdssc'],","    ['application/dxf', 'dxf'],","    ['application/ecmascript', ['js', 'es']],","    ['application/emma+xml', 'emma'],","    ['application/envoy', 'evy'],","    ['application/epub+zip', 'epub'],","    ['application/excel', ['xls',","        'xl',","        'xla',","        'xlb',","        'xlc',","        'xld',","        'xlk',","        'xll',","        'xlm',","        'xlt',","        'xlv',","        'xlw'","    ]],","    ['application/exi', 'exi'],","    ['application/font-tdpfr', 'pfr'],","    ['application/fractals', 'fif'],","    ['application/freeloader', 'frl'],","    ['application/futuresplash', 'spl'],","    ['application/gnutar', 'tgz'],","    ['application/groupwise', 'vew'],","    ['application/hlp', 'hlp'],","    ['application/hta', 'hta'],","    ['application/hyperstudio', 'stk'],","    ['application/i-deas', 'unv'],","    ['application/iges', ['iges', 'igs']],","    ['application/inf', 'inf'],","    ['application/internet-property-stream', 'acx'],","    ['application/ipfix', 'ipfix'],","    ['application/java', 'class'],","    ['application/java-archive', 'jar'],","    ['application/java-byte-code', 'class'],","    ['application/java-serialized-object', 'ser'],","    ['application/java-vm', 'class'],","    ['application/javascript', 'js'],","    ['application/json', 'json'],","    ['application/lha', 'lha'],","    ['application/lzx', 'lzx'],","    ['application/mac-binary', 'bin'],","    ['application/mac-binhex', 'hqx'],","    ['application/mac-binhex40', 'hqx'],","    ['application/mac-compactpro', 'cpt'],","    ['application/macbinary', 'bin'],","    ['application/mads+xml', 'mads'],","    ['application/marc', 'mrc'],","    ['application/marcxml+xml', 'mrcx'],","    ['application/mathematica', 'ma'],","    ['application/mathml+xml', 'mathml'],","    ['application/mbedlet', 'mbd'],","    ['application/mbox', 'mbox'],","    ['application/mcad', 'mcd'],","    ['application/mediaservercontrol+xml', 'mscml'],","    ['application/metalink4+xml', 'meta4'],","    ['application/mets+xml', 'mets'],","    ['application/mime', 'aps'],","    ['application/mods+xml', 'mods'],","    ['application/mp21', 'm21'],","    ['application/mp4', 'mp4'],","    ['application/mspowerpoint', ['ppt', 'pot', 'pps', 'ppz']],","    ['application/msword', ['doc', 'dot', 'w6w', 'wiz', 'word']],","    ['application/mswrite', 'wri'],","    ['application/mxf', 'mxf'],","    ['application/netmc', 'mcp'],","    ['application/octet-stream', ['*']],","    ['application/oda', 'oda'],","    ['application/oebps-package+xml', 'opf'],","    ['application/ogg', 'ogx'],","    ['application/olescript', 'axs'],","    ['application/onenote', 'onetoc'],","    ['application/patch-ops-error+xml', 'xer'],","    ['application/pdf', 'pdf'],","    ['application/pgp-encrypted', 'asc'],","    ['application/pgp-signature', 'pgp'],","    ['application/pics-rules', 'prf'],","    ['application/pkcs-12', 'p12'],","    ['application/pkcs-crl', 'crl'],","    ['application/pkcs10', 'p10'],","    ['application/pkcs7-mime', ['p7c', 'p7m']],","    ['application/pkcs7-signature', 'p7s'],","    ['application/pkcs8', 'p8'],","    ['application/pkix-attr-cert', 'ac'],","    ['application/pkix-cert', ['cer', 'crt']],","    ['application/pkix-crl', 'crl'],","    ['application/pkix-pkipath', 'pkipath'],","    ['application/pkixcmp', 'pki'],","    ['application/plain', 'text'],","    ['application/pls+xml', 'pls'],","    ['application/postscript', ['ps', 'ai', 'eps']],","    ['application/powerpoint', 'ppt'],","    ['application/pro_eng', ['part', 'prt']],","    ['application/prs.cww', 'cww'],","    ['application/pskc+xml', 'pskcxml'],","    ['application/rdf+xml', 'rdf'],","    ['application/reginfo+xml', 'rif'],","    ['application/relax-ng-compact-syntax', 'rnc'],","    ['application/resource-lists+xml', 'rl'],","    ['application/resource-lists-diff+xml', 'rld'],","    ['application/ringing-tones', 'rng'],","    ['application/rls-services+xml', 'rs'],","    ['application/rsd+xml', 'rsd'],","    ['application/rss+xml', 'xml'],","    ['application/rtf', ['rtf', 'rtx']],","    ['application/sbml+xml', 'sbml'],","    ['application/scvp-cv-request', 'scq'],","    ['application/scvp-cv-response', 'scs'],","    ['application/scvp-vp-request', 'spq'],","    ['application/scvp-vp-response', 'spp'],","    ['application/sdp', 'sdp'],","    ['application/sea', 'sea'],","    ['application/set', 'set'],","    ['application/set-payment-initiation', 'setpay'],","    ['application/set-registration-initiation', 'setreg'],","    ['application/shf+xml', 'shf'],","    ['application/sla', 'stl'],","    ['application/smil', ['smi', 'smil']],","    ['application/smil+xml', 'smi'],","    ['application/solids', 'sol'],","    ['application/sounder', 'sdr'],","    ['application/sparql-query', 'rq'],","    ['application/sparql-results+xml', 'srx'],","    ['application/srgs', 'gram'],","    ['application/srgs+xml', 'grxml'],","    ['application/sru+xml', 'sru'],","    ['application/ssml+xml', 'ssml'],","    ['application/step', ['step', 'stp']],","    ['application/streamingmedia', 'ssm'],","    ['application/tei+xml', 'tei'],","    ['application/thraud+xml', 'tfi'],","    ['application/timestamped-data', 'tsd'],","    ['application/toolbook', 'tbk'],","    ['application/vda', 'vda'],","    ['application/vnd.3gpp.pic-bw-large', 'plb'],","    ['application/vnd.3gpp.pic-bw-small', 'psb'],","    ['application/vnd.3gpp.pic-bw-var', 'pvb'],","    ['application/vnd.3gpp2.tcap', 'tcap'],","    ['application/vnd.3m.post-it-notes', 'pwn'],","    ['application/vnd.accpac.simply.aso', 'aso'],","    ['application/vnd.accpac.simply.imp', 'imp'],","    ['application/vnd.acucobol', 'acu'],","    ['application/vnd.acucorp', 'atc'],","    ['application/vnd.adobe.air-application-installer-package+zip',","        'air'","    ],","    ['application/vnd.adobe.fxp', 'fxp'],","    ['application/vnd.adobe.xdp+xml', 'xdp'],","    ['application/vnd.adobe.xfdf', 'xfdf'],","    ['application/vnd.ahead.space', 'ahead'],","    ['application/vnd.airzip.filesecure.azf', 'azf'],","    ['application/vnd.airzip.filesecure.azs', 'azs'],","    ['application/vnd.amazon.ebook', 'azw'],","    ['application/vnd.americandynamics.acc', 'acc'],","    ['application/vnd.amiga.ami', 'ami'],","    ['application/vnd.android.package-archive', 'apk'],","    ['application/vnd.anser-web-certificate-issue-initiation',","        'cii'","    ],","    ['application/vnd.anser-web-funds-transfer-initiation', 'fti'],","    ['application/vnd.antix.game-component', 'atx'],","    ['application/vnd.apple.installer+xml', 'mpkg'],","    ['application/vnd.apple.mpegurl', 'm3u8'],","    ['application/vnd.aristanetworks.swi', 'swi'],","    ['application/vnd.audiograph', 'aep'],","    ['application/vnd.blueice.multipass', 'mpm'],","    ['application/vnd.bmi', 'bmi'],","    ['application/vnd.businessobjects', 'rep'],","    ['application/vnd.chemdraw+xml', 'cdxml'],","    ['application/vnd.chipnuts.karaoke-mmd', 'mmd'],","    ['application/vnd.cinderella', 'cdy'],","    ['application/vnd.claymore', 'cla'],","    ['application/vnd.cloanto.rp9', 'rp9'],","    ['application/vnd.clonk.c4group', 'c4g'],","    ['application/vnd.cluetrust.cartomobile-config', 'c11amc'],","    ['application/vnd.cluetrust.cartomobile-config-pkg', 'c11amz'],","    ['application/vnd.commonspace', 'csp'],","    ['application/vnd.contact.cmsg', 'cdbcmsg'],","    ['application/vnd.cosmocaller', 'cmc'],","    ['application/vnd.crick.clicker', 'clkx'],","    ['application/vnd.crick.clicker.keyboard', 'clkk'],","    ['application/vnd.crick.clicker.palette', 'clkp'],","    ['application/vnd.crick.clicker.template', 'clkt'],","    ['application/vnd.crick.clicker.wordbank', 'clkw'],","    ['application/vnd.criticaltools.wbs+xml', 'wbs'],","    ['application/vnd.ctc-posml', 'pml'],","    ['application/vnd.cups-ppd', 'ppd'],","    ['application/vnd.curl.car', 'car'],","    ['application/vnd.curl.pcurl', 'pcurl'],","    ['application/vnd.data-vision.rdz', 'rdz'],","    ['application/vnd.denovo.fcselayout-link', 'fe_launch'],","    ['application/vnd.dna', 'dna'],","    ['application/vnd.dolby.mlp', 'mlp'],","    ['application/vnd.dpgraph', 'dpg'],","    ['application/vnd.dreamfactory', 'dfac'],","    ['application/vnd.dvb.ait', 'ait'],","    ['application/vnd.dvb.service', 'svc'],","    ['application/vnd.dynageo', 'geo'],","    ['application/vnd.ecowin.chart', 'mag'],","    ['application/vnd.enliven', 'nml'],","    ['application/vnd.epson.esf', 'esf'],","    ['application/vnd.epson.msf', 'msf'],","    ['application/vnd.epson.quickanime', 'qam'],","    ['application/vnd.epson.salt', 'slt'],","    ['application/vnd.epson.ssf', 'ssf'],","    ['application/vnd.eszigno3+xml', 'es3'],","    ['application/vnd.ezpix-album', 'ez2'],","    ['application/vnd.ezpix-package', 'ez3'],","    ['application/vnd.fdf', 'fdf'],","    ['application/vnd.fdsn.seed', 'seed'],","    ['application/vnd.flographit', 'gph'],","    ['application/vnd.fluxtime.clip', 'ftc'],","    ['application/vnd.framemaker', 'fm'],","    ['application/vnd.frogans.fnc', 'fnc'],","    ['application/vnd.frogans.ltf', 'ltf'],","    ['application/vnd.fsc.weblaunch', 'fsc'],","    ['application/vnd.fujitsu.oasys', 'oas'],","    ['application/vnd.fujitsu.oasys2', 'oa2'],","    ['application/vnd.fujitsu.oasys3', 'oa3'],","    ['application/vnd.fujitsu.oasysgp', 'fg5'],","    ['application/vnd.fujitsu.oasysprs', 'bh2'],","    ['application/vnd.fujixerox.ddd', 'ddd'],","    ['application/vnd.fujixerox.docuworks', 'xdw'],","    ['application/vnd.fujixerox.docuworks.binder', 'xbd'],","    ['application/vnd.fuzzysheet', 'fzs'],","    ['application/vnd.genomatix.tuxedo', 'txd'],","    ['application/vnd.geogebra.file', 'ggb'],","    ['application/vnd.geogebra.tool', 'ggt'],","    ['application/vnd.geometry-explorer', 'gex'],","    ['application/vnd.geonext', 'gxt'],","    ['application/vnd.geoplan', 'g2w'],","    ['application/vnd.geospace', 'g3w'],","    ['application/vnd.gmx', 'gmx'],","    ['application/vnd.google-earth.kml+xml', 'kml'],","    ['application/vnd.google-earth.kmz', 'kmz'],","    ['application/vnd.grafeq', 'gqf'],","    ['application/vnd.groove-account', 'gac'],","    ['application/vnd.groove-help', 'ghf'],","    ['application/vnd.groove-identity-message', 'gim'],","    ['application/vnd.groove-injector', 'grv'],","    ['application/vnd.groove-tool-message', 'gtm'],","    ['application/vnd.groove-tool-template', 'tpl'],","    ['application/vnd.groove-vcard', 'vcg'],","    ['application/vnd.hal+xml', 'hal'],","    ['application/vnd.handheld-entertainment+xml', 'zmm'],","    ['application/vnd.hbci', 'hbci'],","    ['application/vnd.hhe.lesson-player', 'les'],","    ['application/vnd.hp-hpgl', ['hgl', 'hpg', 'hpgl']],","    ['application/vnd.hp-hpid', 'hpid'],","    ['application/vnd.hp-hps', 'hps'],","    ['application/vnd.hp-jlyt', 'jlt'],","    ['application/vnd.hp-pcl', 'pcl'],","    ['application/vnd.hp-pclxl', 'pclxl'],","    ['application/vnd.hydrostatix.sof-data', 'sfd-hdstx'],","    ['application/vnd.hzn-3d-crossword', 'x3d'],","    ['application/vnd.ibm.minipay', 'mpy'],","    ['application/vnd.ibm.modcap', 'afp'],","    ['application/vnd.ibm.rights-management', 'irm'],","    ['application/vnd.ibm.secure-container', 'sc'],","    ['application/vnd.iccprofile', 'icc'],","    ['application/vnd.igloader', 'igl'],","    ['application/vnd.immervision-ivp', 'ivp'],","    ['application/vnd.immervision-ivu', 'ivu'],","    ['application/vnd.insors.igm', 'igm'],","    ['application/vnd.intercon.formnet', 'xpw'],","    ['application/vnd.intergeo', 'i2g'],","    ['application/vnd.intu.qbo', 'qbo'],","    ['application/vnd.intu.qfx', 'qfx'],","    ['application/vnd.ipunplugged.rcprofile', 'rcprofile'],","    ['application/vnd.irepository.package+xml', 'irp'],","    ['application/vnd.is-xpr', 'xpr'],","    ['application/vnd.isac.fcs', 'fcs'],","    ['application/vnd.jam', 'jam'],","    ['application/vnd.jcp.javame.midlet-rms', 'rms'],","    ['application/vnd.jisp', 'jisp'],","    ['application/vnd.joost.joda-archive', 'joda'],","    ['application/vnd.kahootz', 'ktz'],","    ['application/vnd.kde.karbon', 'karbon'],","    ['application/vnd.kde.kchart', 'chrt'],","    ['application/vnd.kde.kformula', 'kfo'],","    ['application/vnd.kde.kivio', 'flw'],","    ['application/vnd.kde.kontour', 'kon'],","    ['application/vnd.kde.kpresenter', 'kpr'],","    ['application/vnd.kde.kspread', 'ksp'],","    ['application/vnd.kde.kword', 'kwd'],","    ['application/vnd.kenameaapp', 'htke'],","    ['application/vnd.kidspiration', 'kia'],","    ['application/vnd.kinar', 'kne'],","    ['application/vnd.koan', 'skp'],","    ['application/vnd.kodak-descriptor', 'sse'],","    ['application/vnd.las.las+xml', 'lasxml'],","    ['application/vnd.llamagraphics.life-balance.desktop', 'lbd'],","    ['application/vnd.llamagraphics.life-balance.exchange+xml',","        'lbe'","    ],","    ['application/vnd.lotus-1-2-3', '123'],","    ['application/vnd.lotus-approach', 'apr'],","    ['application/vnd.lotus-freelance', 'pre'],","    ['application/vnd.lotus-notes', 'nsf'],","    ['application/vnd.lotus-organizer', 'org'],","    ['application/vnd.lotus-screencam', 'scm'],","    ['application/vnd.lotus-wordpro', 'lwp'],","    ['application/vnd.macports.portpkg', 'portpkg'],","    ['application/vnd.mcd', 'mcd'],","    ['application/vnd.medcalcdata', 'mc1'],","    ['application/vnd.mediastation.cdkey', 'cdkey'],","    ['application/vnd.mfer', 'mwf'],","    ['application/vnd.mfmp', 'mfm'],","    ['application/vnd.micrografx.flo', 'flo'],","    ['application/vnd.micrografx.igx', 'igx'],","    ['application/vnd.mif', 'mif'],","    ['application/vnd.mobius.daf', 'daf'],","    ['application/vnd.mobius.dis', 'dis'],","    ['application/vnd.mobius.mbk', 'mbk'],","    ['application/vnd.mobius.mqy', 'mqy'],","    ['application/vnd.mobius.msl', 'msl'],","    ['application/vnd.mobius.plc', 'plc'],","    ['application/vnd.mobius.txf', 'txf'],","    ['application/vnd.mophun.application', 'mpn'],","    ['application/vnd.mophun.certificate', 'mpc'],","    ['application/vnd.mozilla.xul+xml', 'xul'],","    ['application/vnd.ms-artgalry', 'cil'],","    ['application/vnd.ms-cab-compressed', 'cab'],","    ['application/vnd.ms-excel', ['xls', 'xla', 'xlc', 'xlm', 'xlt', 'xlw', 'xlb', 'xll']],","    ['application/vnd.ms-excel.addin.macroenabled.12', 'xlam'],","    ['application/vnd.ms-excel.sheet.binary.macroenabled.12',","        'xlsb'","    ],","    ['application/vnd.ms-excel.sheet.macroenabled.12', 'xlsm'],","    ['application/vnd.ms-excel.template.macroenabled.12', 'xltm'],","    ['application/vnd.ms-fontobject', 'eot'],","    ['application/vnd.ms-htmlhelp', 'chm'],","    ['application/vnd.ms-ims', 'ims'],","    ['application/vnd.ms-lrm', 'lrm'],","    ['application/vnd.ms-officetheme', 'thmx'],","    ['application/vnd.ms-outlook', 'msg'],","    ['application/vnd.ms-pki.certstore', 'sst'],","    ['application/vnd.ms-pki.pko', 'pko'],","    ['application/vnd.ms-pki.seccat', 'cat'],","    ['application/vnd.ms-pki.stl', 'stl'],","    ['application/vnd.ms-pkicertstore', 'sst'],","    ['application/vnd.ms-pkiseccat', 'cat'],","    ['application/vnd.ms-pkistl', 'stl'],","    ['application/vnd.ms-powerpoint', ['ppt', 'pot', 'pps', 'ppa', 'pwz']],","    ['application/vnd.ms-powerpoint.addin.macroenabled.12',","        'ppam'","    ],","    ['application/vnd.ms-powerpoint.presentation.macroenabled.12',","        'pptm'","    ],","    ['application/vnd.ms-powerpoint.slide.macroenabled.12',","        'sldm'","    ],","    ['application/vnd.ms-powerpoint.slideshow.macroenabled.12',","        'ppsm'","    ],","    ['application/vnd.ms-powerpoint.template.macroenabled.12',","        'potm'","    ],","    ['application/vnd.ms-project', 'mpp'],","    ['application/vnd.ms-word.document.macroenabled.12', 'docm'],","    ['application/vnd.ms-word.template.macroenabled.12', 'dotm'],","    ['application/vnd.ms-works', ['wks', 'wcm', 'wdb', 'wps']],","    ['application/vnd.ms-wpl', 'wpl'],","    ['application/vnd.ms-xpsdocument', 'xps'],","    ['application/vnd.mseq', 'mseq'],","    ['application/vnd.musician', 'mus'],","    ['application/vnd.muvee.style', 'msty'],","    ['application/vnd.neurolanguage.nlu', 'nlu'],","    ['application/vnd.noblenet-directory', 'nnd'],","    ['application/vnd.noblenet-sealer', 'nns'],","    ['application/vnd.noblenet-web', 'nnw'],","    ['application/vnd.nokia.configuration-message', 'ncm'],","    ['application/vnd.nokia.n-gage.data', 'ngdat'],","    ['application/vnd.nokia.n-gage.symbian.install', 'n-gage'],","    ['application/vnd.nokia.radio-preset', 'rpst'],","    ['application/vnd.nokia.radio-presets', 'rpss'],","    ['application/vnd.nokia.ringing-tone', 'rng'],","    ['application/vnd.novadigm.edm', 'edm'],","    ['application/vnd.novadigm.edx', 'edx'],","    ['application/vnd.novadigm.ext', 'ext'],","    ['application/vnd.oasis.opendocument.chart', 'odc'],","    ['application/vnd.oasis.opendocument.chart-template', 'otc'],","    ['application/vnd.oasis.opendocument.database', 'odb'],","    ['application/vnd.oasis.opendocument.formula', 'odf'],","    ['application/vnd.oasis.opendocument.formula-template',","        'odft'","    ],","    ['application/vnd.oasis.opendocument.graphics', 'odg'],","    ['application/vnd.oasis.opendocument.graphics-template',","        'otg'","    ],","    ['application/vnd.oasis.opendocument.image', 'odi'],","    ['application/vnd.oasis.opendocument.image-template', 'oti'],","    ['application/vnd.oasis.opendocument.presentation', 'odp'],","    ['application/vnd.oasis.opendocument.presentation-template',","        'otp'","    ],","    ['application/vnd.oasis.opendocument.spreadsheet', 'ods'],","    ['application/vnd.oasis.opendocument.spreadsheet-template',","        'ots'","    ],","    ['application/vnd.oasis.opendocument.text', 'odt'],","    ['application/vnd.oasis.opendocument.text-master', 'odm'],","    ['application/vnd.oasis.opendocument.text-template', 'ott'],","    ['application/vnd.oasis.opendocument.text-web', 'oth'],","    ['application/vnd.olpc-sugar', 'xo'],","    ['application/vnd.oma.dd2+xml', 'dd2'],","    ['application/vnd.openofficeorg.extension', 'oxt'],","    ['application/vnd.openxmlformats-officedocument.presentationml.presentation',","        'pptx'","    ],","    ['application/vnd.openxmlformats-officedocument.presentationml.slide',","        'sldx'","    ],","    ['application/vnd.openxmlformats-officedocument.presentationml.slideshow',","        'ppsx'","    ],","    ['application/vnd.openxmlformats-officedocument.presentationml.template',","        'potx'","    ],","    ['application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',","        'xlsx'","    ],","    ['application/vnd.openxmlformats-officedocument.spreadsheetml.template',","        'xltx'","    ],","    ['application/vnd.openxmlformats-officedocument.wordprocessingml.document',","        'docx'","    ],","    ['application/vnd.openxmlformats-officedocument.wordprocessingml.template',","        'dotx'","    ],","    ['application/vnd.osgeo.mapguide.package', 'mgp'],","    ['application/vnd.osgi.dp', 'dp'],","    ['application/vnd.palm', 'pdb'],","    ['application/vnd.pawaafile', 'paw'],","    ['application/vnd.pg.format', 'str'],","    ['application/vnd.pg.osasli', 'ei6'],","    ['application/vnd.picsel', 'efif'],","    ['application/vnd.pmi.widget', 'wg'],","    ['application/vnd.pocketlearn', 'plf'],","    ['application/vnd.powerbuilder6', 'pbd'],","    ['application/vnd.previewsystems.box', 'box'],","    ['application/vnd.proteus.magazine', 'mgz'],","    ['application/vnd.publishare-delta-tree', 'qps'],","    ['application/vnd.pvi.ptid1', 'ptid'],","    ['application/vnd.quark.quarkxpress', 'qxd'],","    ['application/vnd.realvnc.bed', 'bed'],","    ['application/vnd.recordare.musicxml', 'mxl'],","    ['application/vnd.recordare.musicxml+xml', 'musicxml'],","    ['application/vnd.rig.cryptonote', 'cryptonote'],","    ['application/vnd.rim.cod', 'cod'],","    ['application/vnd.rn-realmedia', 'rm'],","    ['application/vnd.rn-realplayer', 'rnx'],","    ['application/vnd.route66.link66+xml', 'link66'],","    ['application/vnd.sailingtracker.track', 'st'],","    ['application/vnd.seemail', 'see'],","    ['application/vnd.sema', 'sema'],","    ['application/vnd.semd', 'semd'],","    ['application/vnd.semf', 'semf'],","    ['application/vnd.shana.informed.formdata', 'ifm'],","    ['application/vnd.shana.informed.formtemplate', 'itp'],","    ['application/vnd.shana.informed.interchange', 'iif'],","    ['application/vnd.shana.informed.package', 'ipk'],","    ['application/vnd.simtech-mindmapper', 'twd'],","    ['application/vnd.smaf', 'mmf'],","    ['application/vnd.smart.teacher', 'teacher'],","    ['application/vnd.solent.sdkm+xml', 'sdkm'],","    ['application/vnd.spotfire.dxp', 'dxp'],","    ['application/vnd.spotfire.sfs', 'sfs'],","    ['application/vnd.stardivision.calc', 'sdc'],","    ['application/vnd.stardivision.draw', 'sda'],","    ['application/vnd.stardivision.impress', 'sdd'],","    ['application/vnd.stardivision.math', 'smf'],","    ['application/vnd.stardivision.writer', 'sdw'],","    ['application/vnd.stardivision.writer-global', 'sgl'],","    ['application/vnd.stepmania.stepchart', 'sm'],","    ['application/vnd.sun.xml.calc', 'sxc'],","    ['application/vnd.sun.xml.calc.template', 'stc'],","    ['application/vnd.sun.xml.draw', 'sxd'],","    ['application/vnd.sun.xml.draw.template', 'std'],","    ['application/vnd.sun.xml.impress', 'sxi'],","    ['application/vnd.sun.xml.impress.template', 'sti'],","    ['application/vnd.sun.xml.math', 'sxm'],","    ['application/vnd.sun.xml.writer', 'sxw'],","    ['application/vnd.sun.xml.writer.global', 'sxg'],","    ['application/vnd.sun.xml.writer.template', 'stw'],","    ['application/vnd.sus-calendar', 'sus'],","    ['application/vnd.svd', 'svd'],","    ['application/vnd.symbian.install', 'sis'],","    ['application/vnd.syncml+xml', 'xsm'],","    ['application/vnd.syncml.dm+wbxml', 'bdm'],","    ['application/vnd.syncml.dm+xml', 'xdm'],","    ['application/vnd.tao.intent-module-archive', 'tao'],","    ['application/vnd.tmobile-livetv', 'tmo'],","    ['application/vnd.trid.tpt', 'tpt'],","    ['application/vnd.triscape.mxs', 'mxs'],","    ['application/vnd.trueapp', 'tra'],","    ['application/vnd.ufdl', 'ufd'],","    ['application/vnd.uiq.theme', 'utz'],","    ['application/vnd.umajin', 'umj'],","    ['application/vnd.unity', 'unityweb'],","    ['application/vnd.uoml+xml', 'uoml'],","    ['application/vnd.vcx', 'vcx'],","    ['application/vnd.visio', 'vsd'],","    ['application/vnd.visionary', 'vis'],","    ['application/vnd.vsf', 'vsf'],","    ['application/vnd.wap.wbxml', 'wbxml'],","    ['application/vnd.wap.wmlc', 'wmlc'],","    ['application/vnd.wap.wmlscriptc', 'wmlsc'],","    ['application/vnd.webturbo', 'wtb'],","    ['application/vnd.wolfram.player', 'nbp'],","    ['application/vnd.wordperfect', 'wpd'],","    ['application/vnd.wqd', 'wqd'],","    ['application/vnd.wt.stf', 'stf'],","    ['application/vnd.xara', ['web', 'xar']],","    ['application/vnd.xfdl', 'xfdl'],","    ['application/vnd.yamaha.hv-dic', 'hvd'],","    ['application/vnd.yamaha.hv-script', 'hvs'],","    ['application/vnd.yamaha.hv-voice', 'hvp'],","    ['application/vnd.yamaha.openscoreformat', 'osf'],","    ['application/vnd.yamaha.openscoreformat.osfpvg+xml',","        'osfpvg'","    ],","    ['application/vnd.yamaha.smaf-audio', 'saf'],","    ['application/vnd.yamaha.smaf-phrase', 'spf'],","    ['application/vnd.yellowriver-custom-menu', 'cmp'],","    ['application/vnd.zul', 'zir'],","    ['application/vnd.zzazz.deck+xml', 'zaz'],","    ['application/vocaltec-media-desc', 'vmd'],","    ['application/vocaltec-media-file', 'vmf'],","    ['application/voicexml+xml', 'vxml'],","    ['application/widget', 'wgt'],","    ['application/winhlp', 'hlp'],","    ['application/wordperfect', ['wp', 'wp5', 'wp6', 'wpd']],","    ['application/wordperfect6.0', ['w60', 'wp5']],","    ['application/wordperfect6.1', 'w61'],","    ['application/wsdl+xml', 'wsdl'],","    ['application/wspolicy+xml', 'wspolicy'],","    ['application/x-123', 'wk1'],","    ['application/x-7z-compressed', '7z'],","    ['application/x-abiword', 'abw'],","    ['application/x-ace-compressed', 'ace'],","    ['application/x-aim', 'aim'],","    ['application/x-authorware-bin', 'aab'],","    ['application/x-authorware-map', 'aam'],","    ['application/x-authorware-seg', 'aas'],","    ['application/x-bcpio', 'bcpio'],","    ['application/x-binary', 'bin'],","    ['application/x-binhex40', 'hqx'],","    ['application/x-bittorrent', 'torrent'],","    ['application/x-bsh', ['bsh', 'sh', 'shar']],","    ['application/x-bytecode.elisp', 'elc'],","    ['applicaiton/x-bytecode.python', 'pyc'],","    ['application/x-bzip', 'bz'],","    ['application/x-bzip2', ['boz', 'bz2']],","    ['application/x-cdf', 'cdf'],","    ['application/x-cdlink', 'vcd'],","    ['application/x-chat', ['cha', 'chat']],","    ['application/x-chess-pgn', 'pgn'],","    ['application/x-cmu-raster', 'ras'],","    ['application/x-cocoa', 'cco'],","    ['application/x-compactpro', 'cpt'],","    ['application/x-compress', 'z'],","    ['application/x-compressed', ['tgz', 'gz', 'z', 'zip']],","    ['application/x-conference', 'nsc'],","    ['application/x-cpio', 'cpio'],","    ['application/x-cpt', 'cpt'],","    ['application/x-csh', 'csh'],","    ['application/x-debian-package', 'deb'],","    ['application/x-deepv', 'deepv'],","    ['application/x-director', ['dir', 'dcr', 'dxr']],","    ['application/x-doom', 'wad'],","    ['application/x-dtbncx+xml', 'ncx'],","    ['application/x-dtbook+xml', 'dtb'],","    ['application/x-dtbresource+xml', 'res'],","    ['application/x-dvi', 'dvi'],","    ['application/x-elc', 'elc'],","    ['application/x-envoy', ['env', 'evy']],","    ['application/x-esrehber', 'es'],","    ['application/x-excel', ['xls',","        'xla',","        'xlb',","        'xlc',","        'xld',","        'xlk',","        'xll',","        'xlm',","        'xlt',","        'xlv',","        'xlw'","    ]],","    ['application/x-font-bdf', 'bdf'],","    ['application/x-font-ghostscript', 'gsf'],","    ['application/x-font-linux-psf', 'psf'],","    ['application/x-font-otf', 'otf'],","    ['application/x-font-pcf', 'pcf'],","    ['application/x-font-snf', 'snf'],","    ['application/x-font-ttf', 'ttf'],","    ['application/x-font-type1', 'pfa'],","    ['application/x-font-woff', 'woff'],","    ['application/x-frame', 'mif'],","    ['application/x-freelance', 'pre'],","    ['application/x-futuresplash', 'spl'],","    ['application/x-gnumeric', 'gnumeric'],","    ['application/x-gsp', 'gsp'],","    ['application/x-gss', 'gss'],","    ['application/x-gtar', 'gtar'],","    ['application/x-gzip', ['gz', 'gzip']],","    ['application/x-hdf', 'hdf'],","    ['application/x-helpfile', ['help', 'hlp']],","    ['application/x-httpd-imap', 'imap'],","    ['application/x-ima', 'ima'],","    ['application/x-internet-signup', ['ins', 'isp']],","    ['application/x-internett-signup', 'ins'],","    ['application/x-inventor', 'iv'],","    ['application/x-ip2', 'ip'],","    ['application/x-iphone', 'iii'],","    ['application/x-java-class', 'class'],","    ['application/x-java-commerce', 'jcm'],","    ['application/x-java-jnlp-file', 'jnlp'],","    ['application/x-javascript', 'js'],","    ['application/x-koan', ['skd', 'skm', 'skp', 'skt']],","    ['application/x-ksh', 'ksh'],","    ['application/x-latex', ['latex', 'ltx']],","    ['application/x-lha', 'lha'],","    ['application/x-lisp', 'lsp'],","    ['application/x-livescreen', 'ivy'],","    ['application/x-lotus', 'wq1'],","    ['application/x-lotusscreencam', 'scm'],","    ['application/x-lzh', 'lzh'],","    ['application/x-lzx', 'lzx'],","    ['application/x-mac-binhex40', 'hqx'],","    ['application/x-macbinary', 'bin'],","    ['application/x-magic-cap-package-1.0', 'mc$'],","    ['application/x-mathcad', 'mcd'],","    ['application/x-meme', 'mm'],","    ['application/x-midi', ['mid', 'midi']],","    ['application/x-mif', 'mif'],","    ['application/x-mix-transfer', 'nix'],","    ['application/x-mobipocket-ebook', 'prc'],","    ['application/x-mplayer2', 'asx'],","    ['application/x-ms-application', 'application'],","    ['application/x-ms-wmd', 'wmd'],","    ['application/x-ms-wmz', 'wmz'],","    ['application/x-ms-xbap', 'xbap'],","    ['application/x-msaccess', 'mdb'],","    ['application/x-msbinder', 'obd'],","    ['application/x-mscardfile', 'crd'],","    ['application/x-msclip', 'clp'],","    ['application/x-msdownload', ['exe', 'dll']],","    ['application/x-msexcel', ['xls', 'xla', 'xlw']],","    ['application/x-msmediaview', ['mvb', 'm13', 'm14']],","    ['application/x-msmetafile', 'wmf'],","    ['application/x-msmoney', 'mny'],","    ['application/x-mspowerpoint', 'ppt'],","    ['application/x-mspublisher', 'pub'],","    ['application/x-msschedule', 'scd'],","    ['application/x-msterminal', 'trm'],","    ['application/x-mswrite', 'wri'],","    ['application/x-navi-animation', 'ani'],","    ['application/x-navidoc', 'nvd'],","    ['application/x-navimap', 'map'],","    ['application/x-navistyle', 'stl'],","    ['application/x-netcdf', ['cdf', 'nc']],","    ['application/x-newton-compatible-pkg', 'pkg'],","    ['application/x-nokia-9000-communicator-add-on-software',","        'aos'","    ],","    ['application/x-omc', 'omc'],","    ['application/x-omcdatamaker', 'omcd'],","    ['application/x-omcregerator', 'omcr'],","    ['application/x-pagemaker', ['pm4', 'pm5']],","    ['application/x-pcl', 'pcl'],","    ['application/x-perfmon', ['pma', 'pmc', 'pml', 'pmr', 'pmw']],","    ['application/x-pixclscript', 'plx'],","    ['application/x-pkcs10', 'p10'],","    ['application/x-pkcs12', ['p12', 'pfx']],","    ['application/x-pkcs7-certificates', ['p7b', 'spc']],","    ['application/x-pkcs7-certreqresp', 'p7r'],","    ['application/x-pkcs7-mime', ['p7m', 'p7c']],","    ['application/x-pkcs7-signature', ['p7s', 'p7a']],","    ['application/x-pointplus', 'css'],","    ['application/x-portable-anymap', 'pnm'],","    ['application/x-project', ['mpc', 'mpt', 'mpv', 'mpx']],","    ['application/x-qpro', 'wb1'],","    ['application/x-rar-compressed', 'rar'],","    ['application/x-rtf', 'rtf'],","    ['application/x-sdp', 'sdp'],","    ['application/x-sea', 'sea'],","    ['application/x-seelogo', 'sl'],","    ['application/x-sh', 'sh'],","    ['application/x-shar', ['shar', 'sh']],","    ['application/x-shockwave-flash', 'swf'],","    ['application/x-silverlight-app', 'xap'],","    ['application/x-sit', 'sit'],","    ['application/x-sprite', ['spr', 'sprite']],","    ['application/x-stuffit', 'sit'],","    ['application/x-stuffitx', 'sitx'],","    ['application/x-sv4cpio', 'sv4cpio'],","    ['application/x-sv4crc', 'sv4crc'],","    ['application/x-tar', 'tar'],","    ['application/x-tbook', ['sbk', 'tbk']],","    ['application/x-tcl', 'tcl'],","    ['application/x-tex', 'tex'],","    ['application/x-tex-tfm', 'tfm'],","    ['application/x-texinfo', ['texi', 'texinfo']],","    ['application/x-troff', ['roff', 't', 'tr']],","    ['application/x-troff-man', 'man'],","    ['application/x-troff-me', 'me'],","    ['application/x-troff-ms', 'ms'],","    ['application/x-troff-msvideo', 'avi'],","    ['application/x-ustar', 'ustar'],","    ['application/x-visio', ['vsd', 'vst', 'vsw']],","    ['application/x-vnd.audioexplosion.mzz', 'mzz'],","    ['application/x-vnd.ls-xpix', 'xpix'],","    ['application/x-vrml', 'vrml'],","    ['application/x-wais-source', ['src', 'wsrc']],","    ['application/x-winhelp', 'hlp'],","    ['application/x-wintalk', 'wtk'],","    ['application/x-world', ['wrl', 'svr']],","    ['application/x-wpwin', 'wpd'],","    ['application/x-wri', 'wri'],","    ['application/x-x509-ca-cert', ['cer', 'crt', 'der']],","    ['application/x-x509-user-cert', 'crt'],","    ['application/x-xfig', 'fig'],","    ['application/x-xpinstall', 'xpi'],","    ['application/x-zip-compressed', 'zip'],","    ['application/xcap-diff+xml', 'xdf'],","    ['application/xenc+xml', 'xenc'],","    ['application/xhtml+xml', 'xhtml'],","    ['application/xml', 'xml'],","    ['application/xml-dtd', 'dtd'],","    ['application/xop+xml', 'xop'],","    ['application/xslt+xml', 'xslt'],","    ['application/xspf+xml', 'xspf'],","    ['application/xv+xml', 'mxml'],","    ['application/yang', 'yang'],","    ['application/yin+xml', 'yin'],","    ['application/ynd.ms-pkipko', 'pko'],","    ['application/zip', 'zip'],","    ['audio/adpcm', 'adp'],","    ['audio/aiff', ['aiff', 'aif', 'aifc']],","    ['audio/basic', ['snd', 'au']],","    ['audio/it', 'it'],","    ['audio/make', ['funk', 'my', 'pfunk']],","    ['audio/make.my.funk', 'pfunk'],","    ['audio/mid', ['mid', 'rmi']],","    ['audio/midi', ['midi', 'kar', 'mid']],","    ['audio/mod', 'mod'],","    ['audio/mp4', 'mp4a'],","    ['audio/mpeg', ['mpga', 'mp3', 'm2a', 'mp2', 'mpa', 'mpg']],","    ['audio/mpeg3', 'mp3'],","    ['audio/nspaudio', ['la', 'lma']],","    ['audio/ogg', 'oga'],","    ['audio/s3m', 's3m'],","    ['audio/tsp-audio', 'tsi'],","    ['audio/tsplayer', 'tsp'],","    ['audio/vnd.dece.audio', 'uva'],","    ['audio/vnd.digital-winds', 'eol'],","    ['audio/vnd.dra', 'dra'],","    ['audio/vnd.dts', 'dts'],","    ['audio/vnd.dts.hd', 'dtshd'],","    ['audio/vnd.lucent.voice', 'lvp'],","    ['audio/vnd.ms-playready.media.pya', 'pya'],","    ['audio/vnd.nuera.ecelp4800', 'ecelp4800'],","    ['audio/vnd.nuera.ecelp7470', 'ecelp7470'],","    ['audio/vnd.nuera.ecelp9600', 'ecelp9600'],","    ['audio/vnd.qcelp', 'qcp'],","    ['audio/vnd.rip', 'rip'],","    ['audio/voc', 'voc'],","    ['audio/voxware', 'vox'],","    ['audio/wav', 'wav'],","    ['audio/webm', 'weba'],","    ['audio/x-aac', 'aac'],","    ['audio/x-adpcm', 'snd'],","    ['audio/x-aiff', ['aiff', 'aif', 'aifc']],","    ['audio/x-au', 'au'],","    ['audio/x-gsm', ['gsd', 'gsm']],","    ['audio/x-jam', 'jam'],","    ['audio/x-liveaudio', 'lam'],","    ['audio/x-mid', ['mid', 'midi']],","    ['audio/x-midi', ['midi', 'mid']],","    ['audio/x-mod', 'mod'],","    ['audio/x-mpeg', 'mp2'],","    ['audio/x-mpeg-3', 'mp3'],","    ['audio/x-mpegurl', 'm3u'],","    ['audio/x-mpequrl', 'm3u'],","    ['audio/x-ms-wax', 'wax'],","    ['audio/x-ms-wma', 'wma'],","    ['audio/x-nspaudio', ['la', 'lma']],","    ['audio/x-pn-realaudio', ['ra', 'ram', 'rm', 'rmm', 'rmp']],","    ['audio/x-pn-realaudio-plugin', ['ra', 'rmp', 'rpm']],","    ['audio/x-psid', 'sid'],","    ['audio/x-realaudio', 'ra'],","    ['audio/x-twinvq', 'vqf'],","    ['audio/x-twinvq-plugin', ['vqe', 'vql']],","    ['audio/x-vnd.audioexplosion.mjuicemediafile', 'mjf'],","    ['audio/x-voc', 'voc'],","    ['audio/x-wav', 'wav'],","    ['audio/xm', 'xm'],","    ['chemical/x-cdx', 'cdx'],","    ['chemical/x-cif', 'cif'],","    ['chemical/x-cmdf', 'cmdf'],","    ['chemical/x-cml', 'cml'],","    ['chemical/x-csml', 'csml'],","    ['chemical/x-pdb', ['pdb', 'xyz']],","    ['chemical/x-xyz', 'xyz'],","    ['drawing/x-dwf', 'dwf'],","    ['i-world/i-vrml', 'ivr'],","    ['image/bmp', ['bmp', 'bm']],","    ['image/cgm', 'cgm'],","    ['image/cis-cod', 'cod'],","    ['image/cmu-raster', ['ras', 'rast']],","    ['image/fif', 'fif'],","    ['image/florian', ['flo', 'turbot']],","    ['image/g3fax', 'g3'],","    ['image/gif', 'gif'],","    ['image/ief', ['ief', 'iefs']],","    ['image/jpeg', ['jpeg', 'jpe', 'jpg', 'jfif', 'jfif-tbnl']],","    ['image/jutvision', 'jut'],","    ['image/ktx', 'ktx'],","    ['image/naplps', ['nap', 'naplps']],","    ['image/pict', ['pic', 'pict']],","    ['image/pipeg', 'jfif'],","    ['image/pjpeg', ['jfif', 'jpe', 'jpeg', 'jpg']],","    ['image/png', ['png', 'x-png']],","    ['image/prs.btif', 'btif'],","    ['image/svg+xml', 'svg'],","    ['image/tiff', ['tif', 'tiff']],","    ['image/vasa', 'mcf'],","    ['image/vnd.adobe.photoshop', 'psd'],","    ['image/vnd.dece.graphic', 'uvi'],","    ['image/vnd.djvu', 'djvu'],","    ['image/vnd.dvb.subtitle', 'sub'],","    ['image/vnd.dwg', ['dwg', 'dxf', 'svf']],","    ['image/vnd.dxf', 'dxf'],","    ['image/vnd.fastbidsheet', 'fbs'],","    ['image/vnd.fpx', 'fpx'],","    ['image/vnd.fst', 'fst'],","    ['image/vnd.fujixerox.edmics-mmr', 'mmr'],","    ['image/vnd.fujixerox.edmics-rlc', 'rlc'],","    ['image/vnd.ms-modi', 'mdi'],","    ['image/vnd.net-fpx', ['fpx', 'npx']],","    ['image/vnd.rn-realflash', 'rf'],","    ['image/vnd.rn-realpix', 'rp'],","    ['image/vnd.wap.wbmp', 'wbmp'],","    ['image/vnd.xiff', 'xif'],","    ['image/webp', 'webp'],","    ['image/x-cmu-raster', 'ras'],","    ['image/x-cmx', 'cmx'],","    ['image/x-dwg', ['dwg', 'dxf', 'svf']],","    ['image/x-freehand', 'fh'],","    ['image/x-icon', 'ico'],","    ['image/x-jg', 'art'],","    ['image/x-jps', 'jps'],","    ['image/x-niff', ['niff', 'nif']],","    ['image/x-pcx', 'pcx'],","    ['image/x-pict', ['pct', 'pic']],","    ['image/x-portable-anymap', 'pnm'],","    ['image/x-portable-bitmap', 'pbm'],","    ['image/x-portable-graymap', 'pgm'],","    ['image/x-portable-greymap', 'pgm'],","    ['image/x-portable-pixmap', 'ppm'],","    ['image/x-quicktime', ['qif', 'qti', 'qtif']],","    ['image/x-rgb', 'rgb'],","    ['image/x-tiff', ['tif', 'tiff']],","    ['image/x-windows-bmp', 'bmp'],","    ['image/x-xbitmap', 'xbm'],","    ['image/x-xbm', 'xbm'],","    ['image/x-xpixmap', ['xpm', 'pm']],","    ['image/x-xwd', 'xwd'],","    ['image/x-xwindowdump', 'xwd'],","    ['image/xbm', 'xbm'],","    ['image/xpm', 'xpm'],","    ['message/rfc822', ['eml', 'mht', 'mhtml', 'nws', 'mime']],","    ['model/iges', ['iges', 'igs']],","    ['model/mesh', 'msh'],","    ['model/vnd.collada+xml', 'dae'],","    ['model/vnd.dwf', 'dwf'],","    ['model/vnd.gdl', 'gdl'],","    ['model/vnd.gtw', 'gtw'],","    ['model/vnd.mts', 'mts'],","    ['model/vnd.vtu', 'vtu'],","    ['model/vrml', ['vrml', 'wrl', 'wrz']],","    ['model/x-pov', 'pov'],","    ['multipart/x-gzip', 'gzip'],","    ['multipart/x-ustar', 'ustar'],","    ['multipart/x-zip', 'zip'],","    ['music/crescendo', ['mid', 'midi']],","    ['music/x-karaoke', 'kar'],","    ['paleovu/x-pv', 'pvu'],","    ['text/asp', 'asp'],","    ['text/calendar', 'ics'],","    ['text/css', 'css'],","    ['text/csv', 'csv'],","    ['text/ecmascript', 'js'],","    ['text/h323', '323'],","    ['text/html', ['html', 'htm', 'stm', 'acgi', 'htmls', 'htx', 'shtml']],","    ['text/iuls', 'uls'],","    ['text/javascript', 'js'],","    ['text/mcf', 'mcf'],","    ['text/n3', 'n3'],","    ['text/pascal', 'pas'],","    ['text/plain', ['txt',","        'bas',","        'c',","        'h',","        'c++',","        'cc',","        'com',","        'conf',","        'cxx',","        'def',","        'f',","        'f90',","        'for',","        'g',","        'hh',","        'idc',","        'jav',","        'java',","        'list',","        'log',","        'lst',","        'm',","        'mar',","        'pl',","        'sdml',","        'text'","    ]],","    ['text/plain-bas', 'par'],","    ['text/prs.lines.tag', 'dsc'],","    ['text/richtext', ['rtx', 'rt', 'rtf']],","    ['text/scriplet', 'wsc'],","    ['text/scriptlet', 'sct'],","    ['text/sgml', ['sgm', 'sgml']],","    ['text/tab-separated-values', 'tsv'],","    ['text/troff', 't'],","    ['text/turtle', 'ttl'],","    ['text/uri-list', ['uni', 'unis', 'uri', 'uris']],","    ['text/vnd.abc', 'abc'],","    ['text/vnd.curl', 'curl'],","    ['text/vnd.curl.dcurl', 'dcurl'],","    ['text/vnd.curl.mcurl', 'mcurl'],","    ['text/vnd.curl.scurl', 'scurl'],","    ['text/vnd.fly', 'fly'],","    ['text/vnd.fmi.flexstor', 'flx'],","    ['text/vnd.graphviz', 'gv'],","    ['text/vnd.in3d.3dml', '3dml'],","    ['text/vnd.in3d.spot', 'spot'],","    ['text/vnd.rn-realtext', 'rt'],","    ['text/vnd.sun.j2me.app-descriptor', 'jad'],","    ['text/vnd.wap.wml', 'wml'],","    ['text/vnd.wap.wmlscript', 'wmls'],","    ['text/webviewhtml', 'htt'],","    ['text/x-asm', ['asm', 's']],","    ['text/x-audiosoft-intra', 'aip'],","    ['text/x-c', ['c', 'cc', 'cpp']],","    ['text/x-component', 'htc'],","    ['text/x-fortran', ['for', 'f', 'f77', 'f90']],","    ['text/x-h', ['h', 'hh']],","    ['text/x-java-source', ['java', 'jav']],","    ['text/x-java-source,java', 'java'],","    ['text/x-la-asf', 'lsx'],","    ['text/x-m', 'm'],","    ['text/x-pascal', 'p'],","    ['text/x-script', 'hlb'],","    ['text/x-script.csh', 'csh'],","    ['text/x-script.elisp', 'el'],","    ['text/x-script.guile', 'scm'],","    ['text/x-script.ksh', 'ksh'],","    ['text/x-script.lisp', 'lsp'],","    ['text/x-script.perl', 'pl'],","    ['text/x-script.perl-module', 'pm'],","    ['text/x-script.phyton', 'py'],","    ['text/x-script.rexx', 'rexx'],","    ['text/x-script.scheme', 'scm'],","    ['text/x-script.sh', 'sh'],","    ['text/x-script.tcl', 'tcl'],","    ['text/x-script.tcsh', 'tcsh'],","    ['text/x-script.zsh', 'zsh'],","    ['text/x-server-parsed-html', ['shtml', 'ssi']],","    ['text/x-setext', 'etx'],","    ['text/x-sgml', ['sgm', 'sgml']],","    ['text/x-speech', ['spc', 'talk']],","    ['text/x-uil', 'uil'],","    ['text/x-uuencode', ['uu', 'uue']],","    ['text/x-vcalendar', 'vcs'],","    ['text/x-vcard', 'vcf'],","    ['text/xml', 'xml'],","    ['video/3gpp', '3gp'],","    ['video/3gpp2', '3g2'],","    ['video/animaflex', 'afl'],","    ['video/avi', 'avi'],","    ['video/avs-video', 'avs'],","    ['video/dl', 'dl'],","    ['video/fli', 'fli'],","    ['video/gl', 'gl'],","    ['video/h261', 'h261'],","    ['video/h263', 'h263'],","    ['video/h264', 'h264'],","    ['video/jpeg', 'jpgv'],","    ['video/jpm', 'jpm'],","    ['video/mj2', 'mj2'],","    ['video/mp4', 'mp4'],","    ['video/mpeg', ['mpeg', 'mp2', 'mpa', 'mpe', 'mpg', 'mpv2', 'm1v', 'm2v', 'mp3']],","    ['video/msvideo', 'avi'],","    ['video/ogg', 'ogv'],","    ['video/quicktime', ['mov', 'qt', 'moov']],","    ['video/vdo', 'vdo'],","    ['video/vivo', ['viv', 'vivo']],","    ['video/vnd.dece.hd', 'uvh'],","    ['video/vnd.dece.mobile', 'uvm'],","    ['video/vnd.dece.pd', 'uvp'],","    ['video/vnd.dece.sd', 'uvs'],","    ['video/vnd.dece.video', 'uvv'],","    ['video/vnd.fvt', 'fvt'],","    ['video/vnd.mpegurl', 'mxu'],","    ['video/vnd.ms-playready.media.pyv', 'pyv'],","    ['video/vnd.rn-realvideo', 'rv'],","    ['video/vnd.uvvu.mp4', 'uvu'],","    ['video/vnd.vivo', ['viv', 'vivo']],","    ['video/vosaic', 'vos'],","    ['video/webm', 'webm'],","    ['video/x-amt-demorun', 'xdr'],","    ['video/x-amt-showrun', 'xsr'],","    ['video/x-atomic3d-feature', 'fmf'],","    ['video/x-dl', 'dl'],","    ['video/x-dv', ['dif', 'dv']],","    ['video/x-f4v', 'f4v'],","    ['video/x-fli', 'fli'],","    ['video/x-flv', 'flv'],","    ['video/x-gl', 'gl'],","    ['video/x-isvideo', 'isu'],","    ['video/x-la-asf', ['lsf', 'lsx']],","    ['video/x-m4v', 'm4v'],","    ['video/x-motion-jpeg', 'mjpg'],","    ['video/x-mpeg', ['mp3', 'mp2']],","    ['video/x-mpeq2a', 'mp2'],","    ['video/x-ms-asf', ['asf', 'asr', 'asx']],","    ['video/x-ms-asf-plugin', 'asx'],","    ['video/x-ms-wm', 'wm'],","    ['video/x-ms-wmv', 'wmv'],","    ['video/x-ms-wmx', 'wmx'],","    ['video/x-ms-wvx', 'wvx'],","    ['video/x-msvideo', 'avi'],","    ['video/x-qtc', 'qtc'],","    ['video/x-scm', 'scm'],","    ['video/x-sgi-movie', ['movie', 'mv']],","    ['windows/metafile', 'wmf'],","    ['www/mime', 'mime'],","    ['x-conference/x-cooltalk', 'ice'],","    ['x-music/x-midi', ['mid', 'midi']],","    ['x-world/x-3dmf', ['3dm', '3dmf', 'qd3', 'qd3d']],","    ['x-world/x-svr', 'svr'],","    ['x-world/x-vrml', ['flr', 'vrml', 'wrl', 'wrz', 'xaf', 'xof']],","    ['x-world/x-vrt', 'vrt'],","    ['xgl/drawing', 'xgz'],","    ['xgl/movie', 'xmz']","]);","const extensions = new Map([","    ['123', 'application/vnd.lotus-1-2-3'],","    ['323', 'text/h323'],","    ['*', 'application/octet-stream'],","    ['3dm', 'x-world/x-3dmf'],","    ['3dmf', 'x-world/x-3dmf'],","    ['3dml', 'text/vnd.in3d.3dml'],","    ['3g2', 'video/3gpp2'],","    ['3gp', 'video/3gpp'],","    ['7z', 'application/x-7z-compressed'],","    ['a', 'application/octet-stream'],","    ['aab', 'application/x-authorware-bin'],","    ['aac', 'audio/x-aac'],","    ['aam', 'application/x-authorware-map'],","    ['aas', 'application/x-authorware-seg'],","    ['abc', 'text/vnd.abc'],","    ['abw', 'application/x-abiword'],","    ['ac', 'application/pkix-attr-cert'],","    ['acc', 'application/vnd.americandynamics.acc'],","    ['ace', 'application/x-ace-compressed'],","    ['acgi', 'text/html'],","    ['acu', 'application/vnd.acucobol'],","    ['acx', 'application/internet-property-stream'],","    ['adp', 'audio/adpcm'],","    ['aep', 'application/vnd.audiograph'],","    ['afl', 'video/animaflex'],","    ['afp', 'application/vnd.ibm.modcap'],","    ['ahead', 'application/vnd.ahead.space'],","    ['ai', 'application/postscript'],","    ['aif', ['audio/aiff', 'audio/x-aiff']],","    ['aifc', ['audio/aiff', 'audio/x-aiff']],","    ['aiff', ['audio/aiff', 'audio/x-aiff']],","    ['aim', 'application/x-aim'],","    ['aip', 'text/x-audiosoft-intra'],","    ['air',","        'application/vnd.adobe.air-application-installer-package+zip'","    ],","    ['ait', 'application/vnd.dvb.ait'],","    ['ami', 'application/vnd.amiga.ami'],","    ['ani', 'application/x-navi-animation'],","    ['aos',","        'application/x-nokia-9000-communicator-add-on-software'","    ],","    ['apk', 'application/vnd.android.package-archive'],","    ['application', 'application/x-ms-application'],","    ['apr', 'application/vnd.lotus-approach'],","    ['aps', 'application/mime'],","    ['arc', 'application/octet-stream'],","    ['arj', ['application/arj', 'application/octet-stream']],","    ['art', 'image/x-jg'],","    ['asf', 'video/x-ms-asf'],","    ['asm', 'text/x-asm'],","    ['aso', 'application/vnd.accpac.simply.aso'],","    ['asp', 'text/asp'],","    ['asr', 'video/x-ms-asf'],","    ['asx', ['video/x-ms-asf',","        'application/x-mplayer2',","        'video/x-ms-asf-plugin'","    ]],","    ['atc', 'application/vnd.acucorp'],","    ['atomcat', 'application/atomcat+xml'],","    ['atomsvc', 'application/atomsvc+xml'],","    ['atx', 'application/vnd.antix.game-component'],","    ['au', ['audio/basic', 'audio/x-au']],","    ['avi', ['video/avi',","        'video/msvideo',","        'application/x-troff-msvideo',","        'video/x-msvideo'","    ]],","    ['avs', 'video/avs-video'],","    ['aw', 'application/applixware'],","    ['axs', 'application/olescript'],","    ['azf', 'application/vnd.airzip.filesecure.azf'],","    ['azs', 'application/vnd.airzip.filesecure.azs'],","    ['azw', 'application/vnd.amazon.ebook'],","    ['bas', 'text/plain'],","    ['bcpio', 'application/x-bcpio'],","    ['bdf', 'application/x-font-bdf'],","    ['bdm', 'application/vnd.syncml.dm+wbxml'],","    ['bed', 'application/vnd.realvnc.bed'],","    ['bh2', 'application/vnd.fujitsu.oasysprs'],","    ['bin', ['application/octet-stream',","        'application/mac-binary',","        'application/macbinary',","        'application/x-macbinary',","        'application/x-binary'","    ]],","    ['bm', 'image/bmp'],","    ['bmi', 'application/vnd.bmi'],","    ['bmp', ['image/bmp', 'image/x-windows-bmp']],","    ['boo', 'application/book'],","    ['book', 'application/book'],","    ['box', 'application/vnd.previewsystems.box'],","    ['boz', 'application/x-bzip2'],","    ['bsh', 'application/x-bsh'],","    ['btif', 'image/prs.btif'],","    ['bz', 'application/x-bzip'],","    ['bz2', 'application/x-bzip2'],","    ['c', ['text/plain', 'text/x-c']],","    ['c++', 'text/plain'],","    ['c11amc', 'application/vnd.cluetrust.cartomobile-config'],","    ['c11amz', 'application/vnd.cluetrust.cartomobile-config-pkg'],","    ['c4g', 'application/vnd.clonk.c4group'],","    ['cab', 'application/vnd.ms-cab-compressed'],","    ['car', 'application/vnd.curl.car'],","    ['cat', ['application/vnd.ms-pkiseccat',","        'application/vnd.ms-pki.seccat'","    ]],","    ['cc', ['text/plain', 'text/x-c']],","    ['ccad', 'application/clariscad'],","    ['cco', 'application/x-cocoa'],","    ['ccxml', 'application/ccxml+xml,'],","    ['cdbcmsg', 'application/vnd.contact.cmsg'],","    ['cdf', ['application/cdf',","        'application/x-cdf',","        'application/x-netcdf'","    ]],","    ['cdkey', 'application/vnd.mediastation.cdkey'],","    ['cdmia', 'application/cdmi-capability'],","    ['cdmic', 'application/cdmi-container'],","    ['cdmid', 'application/cdmi-domain'],","    ['cdmio', 'application/cdmi-object'],","    ['cdmiq', 'application/cdmi-queue'],","    ['cdx', 'chemical/x-cdx'],","    ['cdxml', 'application/vnd.chemdraw+xml'],","    ['cdy', 'application/vnd.cinderella'],","    ['cer', ['application/pkix-cert', 'application/x-x509-ca-cert']],","    ['cgm', 'image/cgm'],","    ['cha', 'application/x-chat'],","    ['chat', 'application/x-chat'],","    ['chm', 'application/vnd.ms-htmlhelp'],","    ['chrt', 'application/vnd.kde.kchart'],","    ['cif', 'chemical/x-cif'],","    ['cii',","        'application/vnd.anser-web-certificate-issue-initiation'","    ],","    ['cil', 'application/vnd.ms-artgalry'],","    ['cla', 'application/vnd.claymore'],","    ['class', ['application/octet-stream',","        'application/java',","        'application/java-byte-code',","        'application/java-vm',","        'application/x-java-class'","    ]],","    ['clkk', 'application/vnd.crick.clicker.keyboard'],","    ['clkp', 'application/vnd.crick.clicker.palette'],","    ['clkt', 'application/vnd.crick.clicker.template'],","    ['clkw', 'application/vnd.crick.clicker.wordbank'],","    ['clkx', 'application/vnd.crick.clicker'],","    ['clp', 'application/x-msclip'],","    ['cmc', 'application/vnd.cosmocaller'],","    ['cmdf', 'chemical/x-cmdf'],","    ['cml', 'chemical/x-cml'],","    ['cmp', 'application/vnd.yellowriver-custom-menu'],","    ['cmx', 'image/x-cmx'],","    ['cod', ['image/cis-cod', 'application/vnd.rim.cod']],","    ['com', ['application/octet-stream', 'text/plain']],","    ['conf', 'text/plain'],","    ['cpio', 'application/x-cpio'],","    ['cpp', 'text/x-c'],","    ['cpt', ['application/mac-compactpro',","        'application/x-compactpro',","        'application/x-cpt'","    ]],","    ['crd', 'application/x-mscardfile'],","    ['crl', ['application/pkix-crl', 'application/pkcs-crl']],","    ['crt', ['application/pkix-cert',","        'application/x-x509-user-cert',","        'application/x-x509-ca-cert'","    ]],","    ['cryptonote', 'application/vnd.rig.cryptonote'],","    ['csh', ['text/x-script.csh', 'application/x-csh']],","    ['csml', 'chemical/x-csml'],","    ['csp', 'application/vnd.commonspace'],","    ['css', ['text/css', 'application/x-pointplus']],","    ['csv', 'text/csv'],","    ['cu', 'application/cu-seeme'],","    ['curl', 'text/vnd.curl'],","    ['cww', 'application/prs.cww'],","    ['cxx', 'text/plain'],","    ['dae', 'model/vnd.collada+xml'],","    ['daf', 'application/vnd.mobius.daf'],","    ['davmount', 'application/davmount+xml'],","    ['dcr', 'application/x-director'],","    ['dcurl', 'text/vnd.curl.dcurl'],","    ['dd2', 'application/vnd.oma.dd2+xml'],","    ['ddd', 'application/vnd.fujixerox.ddd'],","    ['deb', 'application/x-debian-package'],","    ['deepv', 'application/x-deepv'],","    ['def', 'text/plain'],","    ['der', 'application/x-x509-ca-cert'],","    ['dfac', 'application/vnd.dreamfactory'],","    ['dif', 'video/x-dv'],","    ['dir', 'application/x-director'],","    ['dis', 'application/vnd.mobius.dis'],","    ['djvu', 'image/vnd.djvu'],","    ['dl', ['video/dl', 'video/x-dl']],","    ['dll', 'application/x-msdownload'],","    ['dms', 'application/octet-stream'],","    ['dna', 'application/vnd.dna'],","    ['doc', 'application/msword'],","    ['docm', 'application/vnd.ms-word.document.macroenabled.12'],","    ['docx',","        'application/vnd.openxmlformats-officedocument.wordprocessingml.document'","    ],","    ['dot', 'application/msword'],","    ['dotm', 'application/vnd.ms-word.template.macroenabled.12'],","    ['dotx',","        'application/vnd.openxmlformats-officedocument.wordprocessingml.template'","    ],","    ['dp', ['application/commonground', 'application/vnd.osgi.dp']],","    ['dpg', 'application/vnd.dpgraph'],","    ['dra', 'audio/vnd.dra'],","    ['drw', 'application/drafting'],","    ['dsc', 'text/prs.lines.tag'],","    ['dssc', 'application/dssc+der'],","    ['dtb', 'application/x-dtbook+xml'],","    ['dtd', 'application/xml-dtd'],","    ['dts', 'audio/vnd.dts'],","    ['dtshd', 'audio/vnd.dts.hd'],","    ['dump', 'application/octet-stream'],","    ['dv', 'video/x-dv'],","    ['dvi', 'application/x-dvi'],","    ['dwf', ['model/vnd.dwf', 'drawing/x-dwf']],","    ['dwg', ['application/acad', 'image/vnd.dwg', 'image/x-dwg']],","    ['dxf', ['application/dxf',","        'image/vnd.dwg',","        'image/vnd.dxf',","        'image/x-dwg'","    ]],","    ['dxp', 'application/vnd.spotfire.dxp'],","    ['dxr', 'application/x-director'],","    ['ecelp4800', 'audio/vnd.nuera.ecelp4800'],","    ['ecelp7470', 'audio/vnd.nuera.ecelp7470'],","    ['ecelp9600', 'audio/vnd.nuera.ecelp9600'],","    ['edm', 'application/vnd.novadigm.edm'],","    ['edx', 'application/vnd.novadigm.edx'],","    ['efif', 'application/vnd.picsel'],","    ['ei6', 'application/vnd.pg.osasli'],","    ['el', 'text/x-script.elisp'],","    ['elc', ['application/x-elc', 'application/x-bytecode.elisp']],","    ['eml', 'message/rfc822'],","    ['emma', 'application/emma+xml'],","    ['env', 'application/x-envoy'],","    ['eol', 'audio/vnd.digital-winds'],","    ['eot', 'application/vnd.ms-fontobject'],","    ['eps', 'application/postscript'],","    ['epub', 'application/epub+zip'],","    ['es', ['application/ecmascript', 'application/x-esrehber']],","    ['es3', 'application/vnd.eszigno3+xml'],","    ['esf', 'application/vnd.epson.esf'],","    ['etx', 'text/x-setext'],","    ['evy', ['application/envoy', 'application/x-envoy']],","    ['exe', ['application/octet-stream', 'application/x-msdownload']],","    ['exi', 'application/exi'],","    ['ext', 'application/vnd.novadigm.ext'],","    ['ez2', 'application/vnd.ezpix-album'],","    ['ez3', 'application/vnd.ezpix-package'],","    ['f', ['text/plain', 'text/x-fortran']],","    ['f4v', 'video/x-f4v'],","    ['f77', 'text/x-fortran'],","    ['f90', ['text/plain', 'text/x-fortran']],","    ['fbs', 'image/vnd.fastbidsheet'],","    ['fcs', 'application/vnd.isac.fcs'],","    ['fdf', 'application/vnd.fdf'],","    ['fe_launch', 'application/vnd.denovo.fcselayout-link'],","    ['fg5', 'application/vnd.fujitsu.oasysgp'],","    ['fh', 'image/x-freehand'],","    ['fif', ['application/fractals', 'image/fif']],","    ['fig', 'application/x-xfig'],","    ['fli', ['video/fli', 'video/x-fli']],","    ['flo', ['image/florian', 'application/vnd.micrografx.flo']],","    ['flr', 'x-world/x-vrml'],","    ['flv', 'video/x-flv'],","    ['flw', 'application/vnd.kde.kivio'],","    ['flx', 'text/vnd.fmi.flexstor'],","    ['fly', 'text/vnd.fly'],","    ['fm', 'application/vnd.framemaker'],","    ['fmf', 'video/x-atomic3d-feature'],","    ['fnc', 'application/vnd.frogans.fnc'],","    ['for', ['text/plain', 'text/x-fortran']],","    ['fpx', ['image/vnd.fpx', 'image/vnd.net-fpx']],","    ['frl', 'application/freeloader'],","    ['fsc', 'application/vnd.fsc.weblaunch'],","    ['fst', 'image/vnd.fst'],","    ['ftc', 'application/vnd.fluxtime.clip'],","    ['fti', 'application/vnd.anser-web-funds-transfer-initiation'],","    ['funk', 'audio/make'],","    ['fvt', 'video/vnd.fvt'],","    ['fxp', 'application/vnd.adobe.fxp'],","    ['fzs', 'application/vnd.fuzzysheet'],","    ['g', 'text/plain'],","    ['g2w', 'application/vnd.geoplan'],","    ['g3', 'image/g3fax'],","    ['g3w', 'application/vnd.geospace'],","    ['gac', 'application/vnd.groove-account'],","    ['gdl', 'model/vnd.gdl'],","    ['geo', 'application/vnd.dynageo'],","    ['gex', 'application/vnd.geometry-explorer'],","    ['ggb', 'application/vnd.geogebra.file'],","    ['ggt', 'application/vnd.geogebra.tool'],","    ['ghf', 'application/vnd.groove-help'],","    ['gif', 'image/gif'],","    ['gim', 'application/vnd.groove-identity-message'],","    ['gl', ['video/gl', 'video/x-gl']],","    ['gmx', 'application/vnd.gmx'],","    ['gnumeric', 'application/x-gnumeric'],","    ['gph', 'application/vnd.flographit'],","    ['gqf', 'application/vnd.grafeq'],","    ['gram', 'application/srgs'],","    ['grv', 'application/vnd.groove-injector'],","    ['grxml', 'application/srgs+xml'],","    ['gsd', 'audio/x-gsm'],","    ['gsf', 'application/x-font-ghostscript'],","    ['gsm', 'audio/x-gsm'],","    ['gsp', 'application/x-gsp'],","    ['gss', 'application/x-gss'],","    ['gtar', 'application/x-gtar'],","    ['gtm', 'application/vnd.groove-tool-message'],","    ['gtw', 'model/vnd.gtw'],","    ['gv', 'text/vnd.graphviz'],","    ['gxt', 'application/vnd.geonext'],","    ['gz', ['application/x-gzip', 'application/x-compressed']],","    ['gzip', ['multipart/x-gzip', 'application/x-gzip']],","    ['h', ['text/plain', 'text/x-h']],","    ['h261', 'video/h261'],","    ['h263', 'video/h263'],","    ['h264', 'video/h264'],","    ['hal', 'application/vnd.hal+xml'],","    ['hbci', 'application/vnd.hbci'],","    ['hdf', 'application/x-hdf'],","    ['help', 'application/x-helpfile'],","    ['hgl', 'application/vnd.hp-hpgl'],","    ['hh', ['text/plain', 'text/x-h']],","    ['hlb', 'text/x-script'],","    ['hlp', ['application/winhlp',","        'application/hlp',","        'application/x-helpfile',","        'application/x-winhelp'","    ]],","    ['hpg', 'application/vnd.hp-hpgl'],","    ['hpgl', 'application/vnd.hp-hpgl'],","    ['hpid', 'application/vnd.hp-hpid'],","    ['hps', 'application/vnd.hp-hps'],","    ['hqx', ['application/mac-binhex40',","        'application/binhex',","        'application/binhex4',","        'application/mac-binhex',","        'application/x-binhex40',","        'application/x-mac-binhex40'","    ]],","    ['hta', 'application/hta'],","    ['htc', 'text/x-component'],","    ['htke', 'application/vnd.kenameaapp'],","    ['htm', 'text/html'],","    ['html', 'text/html'],","    ['htmls', 'text/html'],","    ['htt', 'text/webviewhtml'],","    ['htx', 'text/html'],","    ['hvd', 'application/vnd.yamaha.hv-dic'],","    ['hvp', 'application/vnd.yamaha.hv-voice'],","    ['hvs', 'application/vnd.yamaha.hv-script'],","    ['i2g', 'application/vnd.intergeo'],","    ['icc', 'application/vnd.iccprofile'],","    ['ice', 'x-conference/x-cooltalk'],","    ['ico', 'image/x-icon'],","    ['ics', 'text/calendar'],","    ['idc', 'text/plain'],","    ['ief', 'image/ief'],","    ['iefs', 'image/ief'],","    ['ifm', 'application/vnd.shana.informed.formdata'],","    ['iges', ['application/iges', 'model/iges']],","    ['igl', 'application/vnd.igloader'],","    ['igm', 'application/vnd.insors.igm'],","    ['igs', ['application/iges', 'model/iges']],","    ['igx', 'application/vnd.micrografx.igx'],","    ['iif', 'application/vnd.shana.informed.interchange'],","    ['iii', 'application/x-iphone'],","    ['ima', 'application/x-ima'],","    ['imap', 'application/x-httpd-imap'],","    ['imp', 'application/vnd.accpac.simply.imp'],","    ['ims', 'application/vnd.ms-ims'],","    ['inf', 'application/inf'],","    ['ins', ['application/x-internet-signup',","        'application/x-internett-signup'","    ]],","    ['ip', 'application/x-ip2'],","    ['ipfix', 'application/ipfix'],","    ['ipk', 'application/vnd.shana.informed.package'],","    ['irm', 'application/vnd.ibm.rights-management'],","    ['irp', 'application/vnd.irepository.package+xml'],","    ['isp', 'application/x-internet-signup'],","    ['isu', 'video/x-isvideo'],","    ['it', 'audio/it'],","    ['itp', 'application/vnd.shana.informed.formtemplate'],","    ['iv', 'application/x-inventor'],","    ['ivp', 'application/vnd.immervision-ivp'],","    ['ivr', 'i-world/i-vrml'],","    ['ivu', 'application/vnd.immervision-ivu'],","    ['ivy', 'application/x-livescreen'],","    ['jad', 'text/vnd.sun.j2me.app-descriptor'],","    ['jam', ['application/vnd.jam', 'audio/x-jam']],","    ['jar', 'application/java-archive'],","    ['jav', ['text/plain', 'text/x-java-source']],","    ['java', ['text/plain', 'text/x-java-source,java', 'text/x-java-source']],","    ['jcm', 'application/x-java-commerce'],","    ['jfif', ['image/pipeg', 'image/jpeg', 'image/pjpeg']],","    ['jfif-tbnl', 'image/jpeg'],","    ['jisp', 'application/vnd.jisp'],","    ['jlt', 'application/vnd.hp-jlyt'],","    ['jnlp', 'application/x-java-jnlp-file'],","    ['joda', 'application/vnd.joost.joda-archive'],","    ['jpe', ['image/jpeg', 'image/pjpeg']],","    ['jpeg', ['image/jpeg', 'image/pjpeg']],","    ['jpg', ['image/jpeg', 'image/pjpeg']],","    ['jpgv', 'video/jpeg'],","    ['jpm', 'video/jpm'],","    ['jps', 'image/x-jps'],","    ['js', ['application/javascript',","        'application/ecmascript',","        'text/javascript',","        'text/ecmascript',","        'application/x-javascript'","    ]],","    ['json', 'application/json'],","    ['jut', 'image/jutvision'],","    ['kar', ['audio/midi', 'music/x-karaoke']],","    ['karbon', 'application/vnd.kde.karbon'],","    ['kfo', 'application/vnd.kde.kformula'],","    ['kia', 'application/vnd.kidspiration'],","    ['kml', 'application/vnd.google-earth.kml+xml'],","    ['kmz', 'application/vnd.google-earth.kmz'],","    ['kne', 'application/vnd.kinar'],","    ['kon', 'application/vnd.kde.kontour'],","    ['kpr', 'application/vnd.kde.kpresenter'],","    ['ksh', ['application/x-ksh', 'text/x-script.ksh']],","    ['ksp', 'application/vnd.kde.kspread'],","    ['ktx', 'image/ktx'],","    ['ktz', 'application/vnd.kahootz'],","    ['kwd', 'application/vnd.kde.kword'],","    ['la', ['audio/nspaudio', 'audio/x-nspaudio']],","    ['lam', 'audio/x-liveaudio'],","    ['lasxml', 'application/vnd.las.las+xml'],","    ['latex', 'application/x-latex'],","    ['lbd', 'application/vnd.llamagraphics.life-balance.desktop'],","    ['lbe',","        'application/vnd.llamagraphics.life-balance.exchange+xml'","    ],","    ['les', 'application/vnd.hhe.lesson-player'],","    ['lha', ['application/octet-stream',","        'application/lha',","        'application/x-lha'","    ]],","    ['lhx', 'application/octet-stream'],","    ['link66', 'application/vnd.route66.link66+xml'],","    ['list', 'text/plain'],","    ['lma', ['audio/nspaudio', 'audio/x-nspaudio']],","    ['log', 'text/plain'],","    ['lrm', 'application/vnd.ms-lrm'],","    ['lsf', 'video/x-la-asf'],","    ['lsp', ['application/x-lisp', 'text/x-script.lisp']],","    ['lst', 'text/plain'],","    ['lsx', ['video/x-la-asf', 'text/x-la-asf']],","    ['ltf', 'application/vnd.frogans.ltf'],","    ['ltx', 'application/x-latex'],","    ['lvp', 'audio/vnd.lucent.voice'],","    ['lwp', 'application/vnd.lotus-wordpro'],","    ['lzh', ['application/octet-stream', 'application/x-lzh']],","    ['lzx', ['application/lzx',","        'application/octet-stream',","        'application/x-lzx'","    ]],","    ['m', ['text/plain', 'text/x-m']],","    ['m13', 'application/x-msmediaview'],","    ['m14', 'application/x-msmediaview'],","    ['m1v', 'video/mpeg'],","    ['m21', 'application/mp21'],","    ['m2a', 'audio/mpeg'],","    ['m2v', 'video/mpeg'],","    ['m3u', ['audio/x-mpegurl', 'audio/x-mpequrl']],","    ['m3u8', 'application/vnd.apple.mpegurl'],","    ['m4v', 'video/x-m4v'],","    ['ma', 'application/mathematica'],","    ['mads', 'application/mads+xml'],","    ['mag', 'application/vnd.ecowin.chart'],","    ['man', 'application/x-troff-man'],","    ['map', 'application/x-navimap'],","    ['mar', 'text/plain'],","    ['mathml', 'application/mathml+xml'],","    ['mbd', 'application/mbedlet'],","    ['mbk', 'application/vnd.mobius.mbk'],","    ['mbox', 'application/mbox'],","    ['mc$', 'application/x-magic-cap-package-1.0'],","    ['mc1', 'application/vnd.medcalcdata'],","    ['mcd', ['application/mcad',","        'application/vnd.mcd',","        'application/x-mathcad'","    ]],","    ['mcf', ['image/vasa', 'text/mcf']],","    ['mcp', 'application/netmc'],","    ['mcurl', 'text/vnd.curl.mcurl'],","    ['mdb', 'application/x-msaccess'],","    ['mdi', 'image/vnd.ms-modi'],","    ['me', 'application/x-troff-me'],","    ['meta4', 'application/metalink4+xml'],","    ['mets', 'application/mets+xml'],","    ['mfm', 'application/vnd.mfmp'],","    ['mgp', 'application/vnd.osgeo.mapguide.package'],","    ['mgz', 'application/vnd.proteus.magazine'],","    ['mht', 'message/rfc822'],","    ['mhtml', 'message/rfc822'],","    ['mid', ['audio/mid',","        'audio/midi',","        'music/crescendo',","        'x-music/x-midi',","        'audio/x-midi',","        'application/x-midi',","        'audio/x-mid'","    ]],","    ['midi', ['audio/midi',","        'music/crescendo',","        'x-music/x-midi',","        'audio/x-midi',","        'application/x-midi',","        'audio/x-mid'","    ]],","    ['mif', ['application/vnd.mif',","        'application/x-mif',","        'application/x-frame'","    ]],","    ['mime', ['message/rfc822', 'www/mime']],","    ['mj2', 'video/mj2'],","    ['mjf', 'audio/x-vnd.audioexplosion.mjuicemediafile'],","    ['mjpg', 'video/x-motion-jpeg'],","    ['mlp', 'application/vnd.dolby.mlp'],","    ['mm', ['application/base64', 'application/x-meme']],","    ['mmd', 'application/vnd.chipnuts.karaoke-mmd'],","    ['mme', 'application/base64'],","    ['mmf', 'application/vnd.smaf'],","    ['mmr', 'image/vnd.fujixerox.edmics-mmr'],","    ['mny', 'application/x-msmoney'],","    ['mod', ['audio/mod', 'audio/x-mod']],","    ['mods', 'application/mods+xml'],","    ['moov', 'video/quicktime'],","    ['mov', 'video/quicktime'],","    ['movie', 'video/x-sgi-movie'],","    ['mp2', ['video/mpeg',","        'audio/mpeg',","        'video/x-mpeg',","        'audio/x-mpeg',","        'video/x-mpeq2a'","    ]],","    ['mp3', ['audio/mpeg',","        'audio/mpeg3',","        'video/mpeg',","        'audio/x-mpeg-3',","        'video/x-mpeg'","    ]],","    ['mp4', ['video/mp4', 'application/mp4']],","    ['mp4a', 'audio/mp4'],","    ['mpa', ['video/mpeg', 'audio/mpeg']],","    ['mpc', ['application/vnd.mophun.certificate',","        'application/x-project'","    ]],","    ['mpe', 'video/mpeg'],","    ['mpeg', 'video/mpeg'],","    ['mpg', ['video/mpeg', 'audio/mpeg']],","    ['mpga', 'audio/mpeg'],","    ['mpkg', 'application/vnd.apple.installer+xml'],","    ['mpm', 'application/vnd.blueice.multipass'],","    ['mpn', 'application/vnd.mophun.application'],","    ['mpp', 'application/vnd.ms-project'],","    ['mpt', 'application/x-project'],","    ['mpv', 'application/x-project'],","    ['mpv2', 'video/mpeg'],","    ['mpx', 'application/x-project'],","    ['mpy', 'application/vnd.ibm.minipay'],","    ['mqy', 'application/vnd.mobius.mqy'],","    ['mrc', 'application/marc'],","    ['mrcx', 'application/marcxml+xml'],","    ['ms', 'application/x-troff-ms'],","    ['mscml', 'application/mediaservercontrol+xml'],","    ['mseq', 'application/vnd.mseq'],","    ['msf', 'application/vnd.epson.msf'],","    ['msg', 'application/vnd.ms-outlook'],","    ['msh', 'model/mesh'],","    ['msl', 'application/vnd.mobius.msl'],","    ['msty', 'application/vnd.muvee.style'],","    ['mts', 'model/vnd.mts'],","    ['mus', 'application/vnd.musician'],","    ['musicxml', 'application/vnd.recordare.musicxml+xml'],","    ['mv', 'video/x-sgi-movie'],","    ['mvb', 'application/x-msmediaview'],","    ['mwf', 'application/vnd.mfer'],","    ['mxf', 'application/mxf'],","    ['mxl', 'application/vnd.recordare.musicxml'],","    ['mxml', 'application/xv+xml'],","    ['mxs', 'application/vnd.triscape.mxs'],","    ['mxu', 'video/vnd.mpegurl'],","    ['my', 'audio/make'],","    ['mzz', 'application/x-vnd.audioexplosion.mzz'],","    ['n-gage', 'application/vnd.nokia.n-gage.symbian.install'],","    ['n3', 'text/n3'],","    ['nap', 'image/naplps'],","    ['naplps', 'image/naplps'],","    ['nbp', 'application/vnd.wolfram.player'],","    ['nc', 'application/x-netcdf'],","    ['ncm', 'application/vnd.nokia.configuration-message'],","    ['ncx', 'application/x-dtbncx+xml'],","    ['ngdat', 'application/vnd.nokia.n-gage.data'],","    ['nif', 'image/x-niff'],","    ['niff', 'image/x-niff'],","    ['nix', 'application/x-mix-transfer'],","    ['nlu', 'application/vnd.neurolanguage.nlu'],","    ['nml', 'application/vnd.enliven'],","    ['nnd', 'application/vnd.noblenet-directory'],","    ['nns', 'application/vnd.noblenet-sealer'],","    ['nnw', 'application/vnd.noblenet-web'],","    ['npx', 'image/vnd.net-fpx'],","    ['nsc', 'application/x-conference'],","    ['nsf', 'application/vnd.lotus-notes'],","    ['nvd', 'application/x-navidoc'],","    ['nws', 'message/rfc822'],","    ['o', 'application/octet-stream'],","    ['oa2', 'application/vnd.fujitsu.oasys2'],","    ['oa3', 'application/vnd.fujitsu.oasys3'],","    ['oas', 'application/vnd.fujitsu.oasys'],","    ['obd', 'application/x-msbinder'],","    ['oda', 'application/oda'],","    ['odb', 'application/vnd.oasis.opendocument.database'],","    ['odc', 'application/vnd.oasis.opendocument.chart'],","    ['odf', 'application/vnd.oasis.opendocument.formula'],","    ['odft',","        'application/vnd.oasis.opendocument.formula-template'","    ],","    ['odg', 'application/vnd.oasis.opendocument.graphics'],","    ['odi', 'application/vnd.oasis.opendocument.image'],","    ['odm', 'application/vnd.oasis.opendocument.text-master'],","    ['odp', 'application/vnd.oasis.opendocument.presentation'],","    ['ods', 'application/vnd.oasis.opendocument.spreadsheet'],","    ['odt', 'application/vnd.oasis.opendocument.text'],","    ['oga', 'audio/ogg'],","    ['ogv', 'video/ogg'],","    ['ogx', 'application/ogg'],","    ['omc', 'application/x-omc'],","    ['omcd', 'application/x-omcdatamaker'],","    ['omcr', 'application/x-omcregerator'],","    ['onetoc', 'application/onenote'],","    ['opf', 'application/oebps-package+xml'],","    ['org', 'application/vnd.lotus-organizer'],","    ['osf', 'application/vnd.yamaha.openscoreformat'],","    ['osfpvg',","        'application/vnd.yamaha.openscoreformat.osfpvg+xml'","    ],","    ['otc', 'application/vnd.oasis.opendocument.chart-template'],","    ['otf', 'application/x-font-otf'],","    ['otg',","        'application/vnd.oasis.opendocument.graphics-template'","    ],","    ['oth', 'application/vnd.oasis.opendocument.text-web'],","    ['oti', 'application/vnd.oasis.opendocument.image-template'],","    ['otp',","        'application/vnd.oasis.opendocument.presentation-template'","    ],","    ['ots',","        'application/vnd.oasis.opendocument.spreadsheet-template'","    ],","    ['ott', 'application/vnd.oasis.opendocument.text-template'],","    ['oxt', 'application/vnd.openofficeorg.extension'],","    ['p', 'text/x-pascal'],","    ['p10', ['application/pkcs10', 'application/x-pkcs10']],","    ['p12', ['application/pkcs-12', 'application/x-pkcs12']],","    ['p7a', 'application/x-pkcs7-signature'],","    ['p7b', 'application/x-pkcs7-certificates'],","    ['p7c', ['application/pkcs7-mime', 'application/x-pkcs7-mime']],","    ['p7m', ['application/pkcs7-mime', 'application/x-pkcs7-mime']],","    ['p7r', 'application/x-pkcs7-certreqresp'],","    ['p7s', ['application/pkcs7-signature',","        'application/x-pkcs7-signature'","    ]],","    ['p8', 'application/pkcs8'],","    ['par', 'text/plain-bas'],","    ['part', 'application/pro_eng'],","    ['pas', 'text/pascal'],","    ['paw', 'application/vnd.pawaafile'],","    ['pbd', 'application/vnd.powerbuilder6'],","    ['pbm', 'image/x-portable-bitmap'],","    ['pcf', 'application/x-font-pcf'],","    ['pcl', ['application/vnd.hp-pcl', 'application/x-pcl']],","    ['pclxl', 'application/vnd.hp-pclxl'],","    ['pct', 'image/x-pict'],","    ['pcurl', 'application/vnd.curl.pcurl'],","    ['pcx', 'image/x-pcx'],","    ['pdb', ['application/vnd.palm', 'chemical/x-pdb']],","    ['pdf', 'application/pdf'],","    ['pfa', 'application/x-font-type1'],","    ['pfr', 'application/font-tdpfr'],","    ['pfunk', ['audio/make', 'audio/make.my.funk']],","    ['pfx', 'application/x-pkcs12'],","    ['pgm', ['image/x-portable-graymap', 'image/x-portable-greymap']],","    ['pgn', 'application/x-chess-pgn'],","    ['pgp', 'application/pgp-signature'],","    ['pic', ['image/pict', 'image/x-pict']],","    ['pict', 'image/pict'],","    ['pkg', 'application/x-newton-compatible-pkg'],","    ['pki', 'application/pkixcmp'],","    ['pkipath', 'application/pkix-pkipath'],","    ['pko', ['application/ynd.ms-pkipko', 'application/vnd.ms-pki.pko']],","    ['pl', ['text/plain', 'text/x-script.perl']],","    ['plb', 'application/vnd.3gpp.pic-bw-large'],","    ['plc', 'application/vnd.mobius.plc'],","    ['plf', 'application/vnd.pocketlearn'],","    ['pls', 'application/pls+xml'],","    ['plx', 'application/x-pixclscript'],","    ['pm', ['text/x-script.perl-module', 'image/x-xpixmap']],","    ['pm4', 'application/x-pagemaker'],","    ['pm5', 'application/x-pagemaker'],","    ['pma', 'application/x-perfmon'],","    ['pmc', 'application/x-perfmon'],","    ['pml', ['application/vnd.ctc-posml', 'application/x-perfmon']],","    ['pmr', 'application/x-perfmon'],","    ['pmw', 'application/x-perfmon'],","    ['png', 'image/png'],","    ['pnm', ['application/x-portable-anymap', 'image/x-portable-anymap']],","    ['portpkg', 'application/vnd.macports.portpkg'],","    ['pot', ['application/vnd.ms-powerpoint', 'application/mspowerpoint']],","    ['potm',","        'application/vnd.ms-powerpoint.template.macroenabled.12'","    ],","    ['potx',","        'application/vnd.openxmlformats-officedocument.presentationml.template'","    ],","    ['pov', 'model/x-pov'],","    ['ppa', 'application/vnd.ms-powerpoint'],","    ['ppam',","        'application/vnd.ms-powerpoint.addin.macroenabled.12'","    ],","    ['ppd', 'application/vnd.cups-ppd'],","    ['ppm', 'image/x-portable-pixmap'],","    ['pps', ['application/vnd.ms-powerpoint', 'application/mspowerpoint']],","    ['ppsm',","        'application/vnd.ms-powerpoint.slideshow.macroenabled.12'","    ],","    ['ppsx',","        'application/vnd.openxmlformats-officedocument.presentationml.slideshow'","    ],","    ['ppt', ['application/vnd.ms-powerpoint',","        'application/mspowerpoint',","        'application/powerpoint',","        'application/x-mspowerpoint'","    ]],","    ['pptm',","        'application/vnd.ms-powerpoint.presentation.macroenabled.12'","    ],","    ['pptx',","        'application/vnd.openxmlformats-officedocument.presentationml.presentation'","    ],","    ['ppz', 'application/mspowerpoint'],","    ['prc', 'application/x-mobipocket-ebook'],","    ['pre', ['application/vnd.lotus-freelance', 'application/x-freelance']],","    ['prf', 'application/pics-rules'],","    ['prt', 'application/pro_eng'],","    ['ps', 'application/postscript'],","    ['psb', 'application/vnd.3gpp.pic-bw-small'],","    ['psd', ['application/octet-stream', 'image/vnd.adobe.photoshop']],","    ['psf', 'application/x-font-linux-psf'],","    ['pskcxml', 'application/pskc+xml'],","    ['ptid', 'application/vnd.pvi.ptid1'],","    ['pub', 'application/x-mspublisher'],","    ['pvb', 'application/vnd.3gpp.pic-bw-var'],","    ['pvu', 'paleovu/x-pv'],","    ['pwn', 'application/vnd.3m.post-it-notes'],","    ['pwz', 'application/vnd.ms-powerpoint'],","    ['py', 'text/x-script.phyton'],","    ['pya', 'audio/vnd.ms-playready.media.pya'],","    ['pyc', 'applicaiton/x-bytecode.python'],","    ['pyv', 'video/vnd.ms-playready.media.pyv'],","    ['qam', 'application/vnd.epson.quickanime'],","    ['qbo', 'application/vnd.intu.qbo'],","    ['qcp', 'audio/vnd.qcelp'],","    ['qd3', 'x-world/x-3dmf'],","    ['qd3d', 'x-world/x-3dmf'],","    ['qfx', 'application/vnd.intu.qfx'],","    ['qif', 'image/x-quicktime'],","    ['qps', 'application/vnd.publishare-delta-tree'],","    ['qt', 'video/quicktime'],","    ['qtc', 'video/x-qtc'],","    ['qti', 'image/x-quicktime'],","    ['qtif', 'image/x-quicktime'],","    ['qxd', 'application/vnd.quark.quarkxpress'],","    ['ra', ['audio/x-realaudio',","        'audio/x-pn-realaudio',","        'audio/x-pn-realaudio-plugin'","    ]],","    ['ram', 'audio/x-pn-realaudio'],","    ['rar', 'application/x-rar-compressed'],","    ['ras', ['image/cmu-raster',","        'application/x-cmu-raster',","        'image/x-cmu-raster'","    ]],","    ['rast', 'image/cmu-raster'],","    ['rcprofile', 'application/vnd.ipunplugged.rcprofile'],","    ['rdf', 'application/rdf+xml'],","    ['rdz', 'application/vnd.data-vision.rdz'],","    ['rep', 'application/vnd.businessobjects'],","    ['res', 'application/x-dtbresource+xml'],","    ['rexx', 'text/x-script.rexx'],","    ['rf', 'image/vnd.rn-realflash'],","    ['rgb', 'image/x-rgb'],","    ['rif', 'application/reginfo+xml'],","    ['rip', 'audio/vnd.rip'],","    ['rl', 'application/resource-lists+xml'],","    ['rlc', 'image/vnd.fujixerox.edmics-rlc'],","    ['rld', 'application/resource-lists-diff+xml'],","    ['rm', ['application/vnd.rn-realmedia', 'audio/x-pn-realaudio']],","    ['rmi', 'audio/mid'],","    ['rmm', 'audio/x-pn-realaudio'],","    ['rmp', ['audio/x-pn-realaudio-plugin', 'audio/x-pn-realaudio']],","    ['rms', 'application/vnd.jcp.javame.midlet-rms'],","    ['rnc', 'application/relax-ng-compact-syntax'],","    ['rng', ['application/ringing-tones',","        'application/vnd.nokia.ringing-tone'","    ]],","    ['rnx', 'application/vnd.rn-realplayer'],","    ['roff', 'application/x-troff'],","    ['rp', 'image/vnd.rn-realpix'],","    ['rp9', 'application/vnd.cloanto.rp9'],","    ['rpm', 'audio/x-pn-realaudio-plugin'],","    ['rpss', 'application/vnd.nokia.radio-presets'],","    ['rpst', 'application/vnd.nokia.radio-preset'],","    ['rq', 'application/sparql-query'],","    ['rs', 'application/rls-services+xml'],","    ['rsd', 'application/rsd+xml'],","    ['rt', ['text/richtext', 'text/vnd.rn-realtext']],","    ['rtf', ['application/rtf', 'text/richtext', 'application/x-rtf']],","    ['rtx', ['text/richtext', 'application/rtf']],","    ['rv', 'video/vnd.rn-realvideo'],","    ['s', 'text/x-asm'],","    ['s3m', 'audio/s3m'],","    ['saf', 'application/vnd.yamaha.smaf-audio'],","    ['saveme', 'application/octet-stream'],","    ['sbk', 'application/x-tbook'],","    ['sbml', 'application/sbml+xml'],","    ['sc', 'application/vnd.ibm.secure-container'],","    ['scd', 'application/x-msschedule'],","    ['scm', ['application/vnd.lotus-screencam',","        'video/x-scm',","        'text/x-script.guile',","        'application/x-lotusscreencam',","        'text/x-script.scheme'","    ]],","    ['scq', 'application/scvp-cv-request'],","    ['scs', 'application/scvp-cv-response'],","    ['sct', 'text/scriptlet'],","    ['scurl', 'text/vnd.curl.scurl'],","    ['sda', 'application/vnd.stardivision.draw'],","    ['sdc', 'application/vnd.stardivision.calc'],","    ['sdd', 'application/vnd.stardivision.impress'],","    ['sdkm', 'application/vnd.solent.sdkm+xml'],","    ['sdml', 'text/plain'],","    ['sdp', ['application/sdp', 'application/x-sdp']],","    ['sdr', 'application/sounder'],","    ['sdw', 'application/vnd.stardivision.writer'],","    ['sea', ['application/sea', 'application/x-sea']],","    ['see', 'application/vnd.seemail'],","    ['seed', 'application/vnd.fdsn.seed'],","    ['sema', 'application/vnd.sema'],","    ['semd', 'application/vnd.semd'],","    ['semf', 'application/vnd.semf'],","    ['ser', 'application/java-serialized-object'],","    ['set', 'application/set'],","    ['setpay', 'application/set-payment-initiation'],","    ['setreg', 'application/set-registration-initiation'],","    ['sfd-hdstx', 'application/vnd.hydrostatix.sof-data'],","    ['sfs', 'application/vnd.spotfire.sfs'],","    ['sgl', 'application/vnd.stardivision.writer-global'],","    ['sgm', ['text/sgml', 'text/x-sgml']],","    ['sgml', ['text/sgml', 'text/x-sgml']],","    ['sh', ['application/x-shar',","        'application/x-bsh',","        'application/x-sh',","        'text/x-script.sh'","    ]],","    ['shar', ['application/x-bsh', 'application/x-shar']],","    ['shf', 'application/shf+xml'],","    ['shtml', ['text/html', 'text/x-server-parsed-html']],","    ['sid', 'audio/x-psid'],","    ['sis', 'application/vnd.symbian.install'],","    ['sit', ['application/x-stuffit', 'application/x-sit']],","    ['sitx', 'application/x-stuffitx'],","    ['skd', 'application/x-koan'],","    ['skm', 'application/x-koan'],","    ['skp', ['application/vnd.koan', 'application/x-koan']],","    ['skt', 'application/x-koan'],","    ['sl', 'application/x-seelogo'],","    ['sldm',","        'application/vnd.ms-powerpoint.slide.macroenabled.12'","    ],","    ['sldx',","        'application/vnd.openxmlformats-officedocument.presentationml.slide'","    ],","    ['slt', 'application/vnd.epson.salt'],","    ['sm', 'application/vnd.stepmania.stepchart'],","    ['smf', 'application/vnd.stardivision.math'],","    ['smi', ['application/smil', 'application/smil+xml']],","    ['smil', 'application/smil'],","    ['snd', ['audio/basic', 'audio/x-adpcm']],","    ['snf', 'application/x-font-snf'],","    ['sol', 'application/solids'],","    ['spc', ['text/x-speech', 'application/x-pkcs7-certificates']],","    ['spf', 'application/vnd.yamaha.smaf-phrase'],","    ['spl', ['application/futuresplash', 'application/x-futuresplash']],","    ['spot', 'text/vnd.in3d.spot'],","    ['spp', 'application/scvp-vp-response'],","    ['spq', 'application/scvp-vp-request'],","    ['spr', 'application/x-sprite'],","    ['sprite', 'application/x-sprite'],","    ['src', 'application/x-wais-source'],","    ['sru', 'application/sru+xml'],","    ['srx', 'application/sparql-results+xml'],","    ['sse', 'application/vnd.kodak-descriptor'],","    ['ssf', 'application/vnd.epson.ssf'],","    ['ssi', 'text/x-server-parsed-html'],","    ['ssm', 'application/streamingmedia'],","    ['ssml', 'application/ssml+xml'],","    ['sst', ['application/vnd.ms-pkicertstore',","        'application/vnd.ms-pki.certstore'","    ]],","    ['st', 'application/vnd.sailingtracker.track'],","    ['stc', 'application/vnd.sun.xml.calc.template'],","    ['std', 'application/vnd.sun.xml.draw.template'],","    ['step', 'application/step'],","    ['stf', 'application/vnd.wt.stf'],","    ['sti', 'application/vnd.sun.xml.impress.template'],","    ['stk', 'application/hyperstudio'],","    ['stl', ['application/vnd.ms-pkistl',","        'application/sla',","        'application/vnd.ms-pki.stl',","        'application/x-navistyle'","    ]],","    ['stm', 'text/html'],","    ['stp', 'application/step'],","    ['str', 'application/vnd.pg.format'],","    ['stw', 'application/vnd.sun.xml.writer.template'],","    ['sub', 'image/vnd.dvb.subtitle'],","    ['sus', 'application/vnd.sus-calendar'],","    ['sv4cpio', 'application/x-sv4cpio'],","    ['sv4crc', 'application/x-sv4crc'],","    ['svc', 'application/vnd.dvb.service'],","    ['svd', 'application/vnd.svd'],","    ['svf', ['image/vnd.dwg', 'image/x-dwg']],","    ['svg', 'image/svg+xml'],","    ['svr', ['x-world/x-svr', 'application/x-world']],","    ['swf', 'application/x-shockwave-flash'],","    ['swi', 'application/vnd.aristanetworks.swi'],","    ['sxc', 'application/vnd.sun.xml.calc'],","    ['sxd', 'application/vnd.sun.xml.draw'],","    ['sxg', 'application/vnd.sun.xml.writer.global'],","    ['sxi', 'application/vnd.sun.xml.impress'],","    ['sxm', 'application/vnd.sun.xml.math'],","    ['sxw', 'application/vnd.sun.xml.writer'],","    ['t', ['text/troff', 'application/x-troff']],","    ['talk', 'text/x-speech'],","    ['tao', 'application/vnd.tao.intent-module-archive'],","    ['tar', 'application/x-tar'],","    ['tbk', ['application/toolbook', 'application/x-tbook']],","    ['tcap', 'application/vnd.3gpp2.tcap'],","    ['tcl', ['text/x-script.tcl', 'application/x-tcl']],","    ['tcsh', 'text/x-script.tcsh'],","    ['teacher', 'application/vnd.smart.teacher'],","    ['tei', 'application/tei+xml'],","    ['tex', 'application/x-tex'],","    ['texi', 'application/x-texinfo'],","    ['texinfo', 'application/x-texinfo'],","    ['text', ['application/plain', 'text/plain']],","    ['tfi', 'application/thraud+xml'],","    ['tfm', 'application/x-tex-tfm'],","    ['tgz', ['application/gnutar', 'application/x-compressed']],","    ['thmx', 'application/vnd.ms-officetheme'],","    ['tif', ['image/tiff', 'image/x-tiff']],","    ['tiff', ['image/tiff', 'image/x-tiff']],","    ['tmo', 'application/vnd.tmobile-livetv'],","    ['torrent', 'application/x-bittorrent'],","    ['tpl', 'application/vnd.groove-tool-template'],","    ['tpt', 'application/vnd.trid.tpt'],","    ['tr', 'application/x-troff'],","    ['tra', 'application/vnd.trueapp'],","    ['trm', 'application/x-msterminal'],","    ['tsd', 'application/timestamped-data'],","    ['tsi', 'audio/tsp-audio'],","    ['tsp', ['application/dsptype', 'audio/tsplayer']],","    ['tsv', 'text/tab-separated-values'],","    ['ttf', 'application/x-font-ttf'],","    ['ttl', 'text/turtle'],","    ['turbot', 'image/florian'],","    ['twd', 'application/vnd.simtech-mindmapper'],","    ['txd', 'application/vnd.genomatix.tuxedo'],","    ['txf', 'application/vnd.mobius.txf'],","    ['txt', 'text/plain'],","    ['ufd', 'application/vnd.ufdl'],","    ['uil', 'text/x-uil'],","    ['uls', 'text/iuls'],","    ['umj', 'application/vnd.umajin'],","    ['uni', 'text/uri-list'],","    ['unis', 'text/uri-list'],","    ['unityweb', 'application/vnd.unity'],","    ['unv', 'application/i-deas'],","    ['uoml', 'application/vnd.uoml+xml'],","    ['uri', 'text/uri-list'],","    ['uris', 'text/uri-list'],","    ['ustar', ['application/x-ustar', 'multipart/x-ustar']],","    ['utz', 'application/vnd.uiq.theme'],","    ['uu', ['application/octet-stream', 'text/x-uuencode']],","    ['uue', 'text/x-uuencode'],","    ['uva', 'audio/vnd.dece.audio'],","    ['uvh', 'video/vnd.dece.hd'],","    ['uvi', 'image/vnd.dece.graphic'],","    ['uvm', 'video/vnd.dece.mobile'],","    ['uvp', 'video/vnd.dece.pd'],","    ['uvs', 'video/vnd.dece.sd'],","    ['uvu', 'video/vnd.uvvu.mp4'],","    ['uvv', 'video/vnd.dece.video'],","    ['vcd', 'application/x-cdlink'],","    ['vcf', 'text/x-vcard'],","    ['vcg', 'application/vnd.groove-vcard'],","    ['vcs', 'text/x-vcalendar'],","    ['vcx', 'application/vnd.vcx'],","    ['vda', 'application/vda'],","    ['vdo', 'video/vdo'],","    ['vew', 'application/groupwise'],","    ['vis', 'application/vnd.visionary'],","    ['viv', ['video/vivo', 'video/vnd.vivo']],","    ['vivo', ['video/vivo', 'video/vnd.vivo']],","    ['vmd', 'application/vocaltec-media-desc'],","    ['vmf', 'application/vocaltec-media-file'],","    ['voc', ['audio/voc', 'audio/x-voc']],","    ['vos', 'video/vosaic'],","    ['vox', 'audio/voxware'],","    ['vqe', 'audio/x-twinvq-plugin'],","    ['vqf', 'audio/x-twinvq'],","    ['vql', 'audio/x-twinvq-plugin'],","    ['vrml', ['model/vrml', 'x-world/x-vrml', 'application/x-vrml']],","    ['vrt', 'x-world/x-vrt'],","    ['vsd', ['application/vnd.visio', 'application/x-visio']],","    ['vsf', 'application/vnd.vsf'],","    ['vst', 'application/x-visio'],","    ['vsw', 'application/x-visio'],","    ['vtu', 'model/vnd.vtu'],","    ['vxml', 'application/voicexml+xml'],","    ['w60', 'application/wordperfect6.0'],","    ['w61', 'application/wordperfect6.1'],","    ['w6w', 'application/msword'],","    ['wad', 'application/x-doom'],","    ['wav', ['audio/wav', 'audio/x-wav']],","    ['wax', 'audio/x-ms-wax'],","    ['wb1', 'application/x-qpro'],","    ['wbmp', 'image/vnd.wap.wbmp'],","    ['wbs', 'application/vnd.criticaltools.wbs+xml'],","    ['wbxml', 'application/vnd.wap.wbxml'],","    ['wcm', 'application/vnd.ms-works'],","    ['wdb', 'application/vnd.ms-works'],","    ['web', 'application/vnd.xara'],","    ['weba', 'audio/webm'],","    ['webm', 'video/webm'],","    ['webp', 'image/webp'],","    ['wg', 'application/vnd.pmi.widget'],","    ['wgt', 'application/widget'],","    ['wiz', 'application/msword'],","    ['wk1', 'application/x-123'],","    ['wks', 'application/vnd.ms-works'],","    ['wm', 'video/x-ms-wm'],","    ['wma', 'audio/x-ms-wma'],","    ['wmd', 'application/x-ms-wmd'],","    ['wmf', ['windows/metafile', 'application/x-msmetafile']],","    ['wml', 'text/vnd.wap.wml'],","    ['wmlc', 'application/vnd.wap.wmlc'],","    ['wmls', 'text/vnd.wap.wmlscript'],","    ['wmlsc', 'application/vnd.wap.wmlscriptc'],","    ['wmv', 'video/x-ms-wmv'],","    ['wmx', 'video/x-ms-wmx'],","    ['wmz', 'application/x-ms-wmz'],","    ['woff', 'application/x-font-woff'],","    ['word', 'application/msword'],","    ['wp', 'application/wordperfect'],","    ['wp5', ['application/wordperfect', 'application/wordperfect6.0']],","    ['wp6', 'application/wordperfect'],","    ['wpd', ['application/wordperfect',","        'application/vnd.wordperfect',","        'application/x-wpwin'","    ]],","    ['wpl', 'application/vnd.ms-wpl'],","    ['wps', 'application/vnd.ms-works'],","    ['wq1', 'application/x-lotus'],","    ['wqd', 'application/vnd.wqd'],","    ['wri', ['application/mswrite',","        'application/x-wri',","        'application/x-mswrite'","    ]],","    ['wrl', ['model/vrml', 'x-world/x-vrml', 'application/x-world']],","    ['wrz', ['model/vrml', 'x-world/x-vrml']],","    ['wsc', 'text/scriplet'],","    ['wsdl', 'application/wsdl+xml'],","    ['wspolicy', 'application/wspolicy+xml'],","    ['wsrc', 'application/x-wais-source'],","    ['wtb', 'application/vnd.webturbo'],","    ['wtk', 'application/x-wintalk'],","    ['wvx', 'video/x-ms-wvx'],","    ['x-png', 'image/png'],","    ['x3d', 'application/vnd.hzn-3d-crossword'],","    ['xaf', 'x-world/x-vrml'],","    ['xap', 'application/x-silverlight-app'],","    ['xar', 'application/vnd.xara'],","    ['xbap', 'application/x-ms-xbap'],","    ['xbd', 'application/vnd.fujixerox.docuworks.binder'],","    ['xbm', ['image/xbm', 'image/x-xbm', 'image/x-xbitmap']],","    ['xdf', 'application/xcap-diff+xml'],","    ['xdm', 'application/vnd.syncml.dm+xml'],","    ['xdp', 'application/vnd.adobe.xdp+xml'],","    ['xdr', 'video/x-amt-demorun'],","    ['xdssc', 'application/dssc+xml'],","    ['xdw', 'application/vnd.fujixerox.docuworks'],","    ['xenc', 'application/xenc+xml'],","    ['xer', 'application/patch-ops-error+xml'],","    ['xfdf', 'application/vnd.adobe.xfdf'],","    ['xfdl', 'application/vnd.xfdl'],","    ['xgz', 'xgl/drawing'],","    ['xhtml', 'application/xhtml+xml'],","    ['xif', 'image/vnd.xiff'],","    ['xl', 'application/excel'],","    ['xla', ['application/vnd.ms-excel',","        'application/excel',","        'application/x-msexcel',","        'application/x-excel'","    ]],","    ['xlam', 'application/vnd.ms-excel.addin.macroenabled.12'],","    ['xlb', ['application/excel',","        'application/vnd.ms-excel',","        'application/x-excel'","    ]],","    ['xlc', ['application/vnd.ms-excel',","        'application/excel',","        'application/x-excel'","    ]],","    ['xld', ['application/excel', 'application/x-excel']],","    ['xlk', ['application/excel', 'application/x-excel']],","    ['xll', ['application/excel',","        'application/vnd.ms-excel',","        'application/x-excel'","    ]],","    ['xlm', ['application/vnd.ms-excel',","        'application/excel',","        'application/x-excel'","    ]],","    ['xls', ['application/vnd.ms-excel',","        'application/excel',","        'application/x-msexcel',","        'application/x-excel'","    ]],","    ['xlsb',","        'application/vnd.ms-excel.sheet.binary.macroenabled.12'","    ],","    ['xlsm', 'application/vnd.ms-excel.sheet.macroenabled.12'],","    ['xlsx',","        'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'","    ],","    ['xlt', ['application/vnd.ms-excel',","        'application/excel',","        'application/x-excel'","    ]],","    ['xltm', 'application/vnd.ms-excel.template.macroenabled.12'],","    ['xltx',","        'application/vnd.openxmlformats-officedocument.spreadsheetml.template'","    ],","    ['xlv', ['application/excel', 'application/x-excel']],","    ['xlw', ['application/vnd.ms-excel',","        'application/excel',","        'application/x-msexcel',","        'application/x-excel'","    ]],","    ['xm', 'audio/xm'],","    ['xml', ['application/xml',","        'text/xml',","        'application/atom+xml',","        'application/rss+xml'","    ]],","    ['xmz', 'xgl/movie'],","    ['xo', 'application/vnd.olpc-sugar'],","    ['xof', 'x-world/x-vrml'],","    ['xop', 'application/xop+xml'],","    ['xpi', 'application/x-xpinstall'],","    ['xpix', 'application/x-vnd.ls-xpix'],","    ['xpm', ['image/xpm', 'image/x-xpixmap']],","    ['xpr', 'application/vnd.is-xpr'],","    ['xps', 'application/vnd.ms-xpsdocument'],","    ['xpw', 'application/vnd.intercon.formnet'],","    ['xslt', 'application/xslt+xml'],","    ['xsm', 'application/vnd.syncml+xml'],","    ['xspf', 'application/xspf+xml'],","    ['xsr', 'video/x-amt-showrun'],","    ['xul', 'application/vnd.mozilla.xul+xml'],","    ['xwd', ['image/x-xwd', 'image/x-xwindowdump']],","    ['xyz', ['chemical/x-xyz', 'chemical/x-pdb']],","    ['yang', 'application/yang'],","    ['yin', 'application/yin+xml'],","    ['z', ['application/x-compressed', 'application/x-compress']],","    ['zaz', 'application/vnd.zzazz.deck+xml'],","    ['zip', ['application/zip',","        'multipart/x-zip',","        'application/x-zip-compressed',","        'application/x-compressed'","    ]],","    ['zir', 'application/vnd.zul'],","    ['zmm', 'application/vnd.handheld-entertainment+xml'],","    ['zoo', 'application/octet-stream'],","    ['zsh', 'text/x-script.zsh']","]);","","module.exports = {","    detectMimeType(filename) {","        if (!filename) {","            return defaultMimeType;","        }","","        let parsed = path.parse(filename);","        let extension = (parsed.ext.substr(1) || parsed.name || '').split('?').shift().trim().toLowerCase();","        let value = defaultMimeType;","","        if (extensions.has(extension)) {","            value = extensions.get(extension);","        }","","        if (Array.isArray(value)) {","            return value[0];","        }","        return value;","    },","","    detectExtension(mimeType) {","        if (!mimeType) {","            return defaultExtension;","        }","        let parts = (mimeType || '').toLowerCase().trim().split('/');","        let rootType = parts.shift().trim();","        let subType = parts.join('/').trim();","","        if (mimeTypes.has(rootType + '/' + subType)) {","            let value = mimeTypes.get(rootType + '/' + subType);","            if (Array.isArray(value)) {","                return value[0];","            }","            return value;","        }","","        switch (rootType) {","            case 'text':","                return 'txt';","            default:","                return 'bin';","        }","    }","};",""],"l":{"5":1,"7":1,"8":1,"10":1,"1099":1,"2316":1,"2318":0,"2319":0,"2322":0,"2323":0,"2324":0,"2326":0,"2327":0,"2330":0,"2331":0,"2333":0,"2337":0,"2338":0,"2340":0,"2341":0,"2342":0,"2344":0,"2345":0,"2346":0,"2347":0,"2349":0,"2352":0,"2354":0,"2356":0}},"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/mail-composer/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/mail-composer/index.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":0,"192":0,"193":0,"194":0,"195":0,"196":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0,0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0,0,0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0,0,0,0],"46":[0,0],"47":[0,0],"48":[0,0],"49":[0,0],"50":[0,0,0,0,0],"51":[0,0],"52":[0,0],"53":[0,0],"54":[0,0],"55":[0,0],"56":[0,0],"57":[0,0,0,0,0],"58":[0,0],"59":[0,0],"60":[0,0],"61":[0,0],"62":[0,0],"63":[0,0],"64":[0,0,0,0,0],"65":[0,0],"66":[0,0],"67":[0,0],"68":[0,0],"69":[0,0],"70":[0,0],"71":[0,0],"72":[0,0],"73":[0,0],"74":[0,0],"75":[0,0,0,0],"76":[0,0],"77":[0,0],"78":[0,0],"79":[0,0],"80":[0,0],"81":[0,0],"82":[0,0],"83":[0,0],"84":[0,0],"85":[0,0],"86":[0,0],"87":[0,0,0],"88":[0,0],"89":[0,0],"90":[0,0],"91":[0,0],"92":[0,0],"93":[0,0],"94":[0,0],"95":[0,0],"96":[0,0],"97":[0,0],"98":[0,0],"99":[0,0],"100":[0,0],"101":[0,0],"102":[0,0],"103":[0,0],"104":[0,0],"105":[0,0],"106":[0,0],"107":[0,0],"108":[0,0],"109":[0,0],"110":[0,0],"111":[0,0],"112":[0,0],"113":[0,0],"114":[0,0],"115":[0,0],"116":[0,0],"117":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"fnMap":{"1":{"name":"(anonymous_1)","line":15,"loc":{"start":{"line":15,"column":15},"end":{"line":15,"column":22}}},"2":{"name":"(anonymous_2)","line":23,"loc":{"start":{"line":23,"column":11},"end":{"line":23,"column":14}}},"3":{"name":"(anonymous_3)","line":90,"loc":{"start":{"line":90,"column":18},"end":{"line":90,"column":32}}},"4":{"name":"(anonymous_4)","line":191,"loc":{"start":{"line":191,"column":19},"end":{"line":191,"column":22}}},"5":{"name":"(anonymous_5)","line":320,"loc":{"start":{"line":320,"column":16},"end":{"line":320,"column":29}}},"6":{"name":"(anonymous_6)","line":361,"loc":{"start":{"line":361,"column":22},"end":{"line":361,"column":35}}},"7":{"name":"(anonymous_7)","line":396,"loc":{"start":{"line":396,"column":18},"end":{"line":396,"column":31}}},"8":{"name":"(anonymous_8)","line":428,"loc":{"start":{"line":428,"column":22},"end":{"line":428,"column":44}}},"9":{"name":"(anonymous_9)","line":494,"loc":{"start":{"line":494,"column":19},"end":{"line":494,"column":29}}}},"statementMap":{"1":{"start":{"line":5,"column":0},"end":{"line":5,"column":41}},"2":{"start":{"line":6,"column":0},"end":{"line":6,"column":43}},"3":{"start":{"line":16,"column":8},"end":{"line":16,"column":31}},"4":{"start":{"line":17,"column":8},"end":{"line":17,"column":29}},"5":{"start":{"line":24,"column":8},"end":{"line":24,"column":52}},"6":{"start":{"line":25,"column":8},"end":{"line":25,"column":120}},"7":{"start":{"line":25,"column":66},"end":{"line":25,"column":112}},"8":{"start":{"line":26,"column":8},"end":{"line":26,"column":66}},"9":{"start":{"line":28,"column":8},"end":{"line":28,"column":82}},"10":{"start":{"line":29,"column":8},"end":{"line":29,"column":61}},"11":{"start":{"line":30,"column":8},"end":{"line":30,"column":137}},"12":{"start":{"line":33,"column":8},"end":{"line":46,"column":9}},"13":{"start":{"line":34,"column":12},"end":{"line":34,"column":64}},"14":{"start":{"line":35,"column":15},"end":{"line":46,"column":9}},"15":{"start":{"line":36,"column":12},"end":{"line":36,"column":47}},"16":{"start":{"line":37,"column":15},"end":{"line":46,"column":9}},"17":{"start":{"line":38,"column":12},"end":{"line":38,"column":53}},"18":{"start":{"line":39,"column":15},"end":{"line":46,"column":9}},"19":{"start":{"line":40,"column":12},"end":{"line":40,"column":49}},"20":{"start":{"line":42,"column":12},"end":{"line":45,"column":15}},"21":{"start":{"line":49,"column":8},"end":{"line":51,"column":9}},"22":{"start":{"line":50,"column":12},"end":{"line":50,"column":54}},"23":{"start":{"line":54,"column":8},"end":{"line":71,"column":11}},"24":{"start":{"line":67,"column":12},"end":{"line":67,"column":74}},"25":{"start":{"line":67,"column":57},"end":{"line":67,"column":72}},"26":{"start":{"line":68,"column":12},"end":{"line":70,"column":13}},"27":{"start":{"line":69,"column":16},"end":{"line":69,"column":63}},"28":{"start":{"line":74,"column":8},"end":{"line":76,"column":9}},"29":{"start":{"line":75,"column":12},"end":{"line":75,"column":57}},"30":{"start":{"line":79,"column":8},"end":{"line":79,"column":33}},"31":{"start":{"line":81,"column":8},"end":{"line":81,"column":28}},"32":{"start":{"line":91,"column":8},"end":{"line":91,"column":35}},"33":{"start":{"line":92,"column":8},"end":{"line":148,"column":11}},"34":{"start":{"line":93,"column":12},"end":{"line":93,"column":21}},"35":{"start":{"line":94,"column":12},"end":{"line":94,"column":75}},"36":{"start":{"line":96,"column":12},"end":{"line":98,"column":13}},"37":{"start":{"line":97,"column":16},"end":{"line":97,"column":62}},"38":{"start":{"line":100,"column":12},"end":{"line":105,"column":14}},"39":{"start":{"line":107,"column":12},"end":{"line":114,"column":13}},"40":{"start":{"line":108,"column":16},"end":{"line":108,"column":52}},"41":{"start":{"line":109,"column":19},"end":{"line":114,"column":13}},"42":{"start":{"line":110,"column":16},"end":{"line":110,"column":119}},"43":{"start":{"line":111,"column":16},"end":{"line":113,"column":17}},"44":{"start":{"line":112,"column":20},"end":{"line":112,"column":87}},"45":{"start":{"line":116,"column":12},"end":{"line":119,"column":13}},"46":{"start":{"line":117,"column":16},"end":{"line":117,"column":50}},"47":{"start":{"line":118,"column":16},"end":{"line":118,"column":44}},"48":{"start":{"line":121,"column":12},"end":{"line":123,"column":13}},"49":{"start":{"line":122,"column":16},"end":{"line":122,"column":42}},"50":{"start":{"line":125,"column":12},"end":{"line":137,"column":13}},"51":{"start":{"line":126,"column":16},"end":{"line":126,"column":42}},"52":{"start":{"line":127,"column":19},"end":{"line":137,"column":13}},"53":{"start":{"line":128,"column":16},"end":{"line":130,"column":18}},"54":{"start":{"line":131,"column":19},"end":{"line":137,"column":13}},"55":{"start":{"line":132,"column":16},"end":{"line":134,"column":18}},"56":{"start":{"line":136,"column":16},"end":{"line":136,"column":56}},"57":{"start":{"line":139,"column":12},"end":{"line":141,"column":13}},"58":{"start":{"line":140,"column":16},"end":{"line":140,"column":52}},"59":{"start":{"line":143,"column":12},"end":{"line":145,"column":13}},"60":{"start":{"line":144,"column":16},"end":{"line":144,"column":50}},"61":{"start":{"line":147,"column":12},"end":{"line":147,"column":24}},"62":{"start":{"line":150,"column":8},"end":{"line":171,"column":9}},"63":{"start":{"line":151,"column":12},"end":{"line":157,"column":13}},"64":{"start":{"line":152,"column":16},"end":{"line":152,"column":48}},"65":{"start":{"line":154,"column":16},"end":{"line":156,"column":18}},"66":{"start":{"line":159,"column":12},"end":{"line":159,"column":29}},"67":{"start":{"line":160,"column":12},"end":{"line":162,"column":15}},"68":{"start":{"line":161,"column":16},"end":{"line":161,"column":50}},"69":{"start":{"line":164,"column":12},"end":{"line":164,"column":56}},"70":{"start":{"line":165,"column":12},"end":{"line":167,"column":13}},"71":{"start":{"line":166,"column":16},"end":{"line":166,"column":41}},"72":{"start":{"line":168,"column":12},"end":{"line":168,"column":72}},"73":{"start":{"line":169,"column":12},"end":{"line":169,"column":70}},"74":{"start":{"line":170,"column":12},"end":{"line":170,"column":72}},"75":{"start":{"line":173,"column":8},"end":{"line":183,"column":9}},"76":{"start":{"line":174,"column":12},"end":{"line":177,"column":14}},"77":{"start":{"line":179,"column":12},"end":{"line":182,"column":14}},"78":{"start":{"line":180,"column":59},"end":{"line":180,"column":74}},"79":{"start":{"line":181,"column":58},"end":{"line":181,"column":74}},"80":{"start":{"line":192,"column":8},"end":{"line":193,"column":58}},"81":{"start":{"line":195,"column":8},"end":{"line":204,"column":9}},"82":{"start":{"line":196,"column":12},"end":{"line":202,"column":13}},"83":{"start":{"line":197,"column":16},"end":{"line":197,"column":38}},"84":{"start":{"line":199,"column":16},"end":{"line":201,"column":18}},"85":{"start":{"line":203,"column":12},"end":{"line":203,"column":127}},"86":{"start":{"line":206,"column":8},"end":{"line":215,"column":9}},"87":{"start":{"line":207,"column":12},"end":{"line":213,"column":13}},"88":{"start":{"line":208,"column":16},"end":{"line":208,"column":48}},"89":{"start":{"line":210,"column":16},"end":{"line":212,"column":18}},"90":{"start":{"line":214,"column":12},"end":{"line":214,"column":147}},"91":{"start":{"line":219,"column":8},"end":{"line":244,"column":9}},"92":{"start":{"line":220,"column":12},"end":{"line":226,"column":13}},"93":{"start":{"line":221,"column":16},"end":{"line":221,"column":48}},"94":{"start":{"line":223,"column":16},"end":{"line":225,"column":18}},"95":{"start":{"line":228,"column":12},"end":{"line":228,"column":29}},"96":{"start":{"line":229,"column":12},"end":{"line":231,"column":15}},"97":{"start":{"line":230,"column":16},"end":{"line":230,"column":50}},"98":{"start":{"line":233,"column":12},"end":{"line":237,"column":13}},"99":{"start":{"line":236,"column":16},"end":{"line":236,"column":52}},"100":{"start":{"line":239,"column":12},"end":{"line":239,"column":41}},"101":{"start":{"line":240,"column":12},"end":{"line":240,"column":148}},"102":{"start":{"line":241,"column":12},"end":{"line":243,"column":13}},"103":{"start":{"line":242,"column":16},"end":{"line":242,"column":41}},"104":{"start":{"line":246,"column":8},"end":{"line":255,"column":9}},"105":{"start":{"line":247,"column":12},"end":{"line":253,"column":13}},"106":{"start":{"line":248,"column":16},"end":{"line":248,"column":38}},"107":{"start":{"line":250,"column":16},"end":{"line":252,"column":18}},"108":{"start":{"line":254,"column":12},"end":{"line":254,"column":126}},"109":{"start":{"line":257,"column":8},"end":{"line":308,"column":11}},"110":{"start":{"line":264,"column":12},"end":{"line":264,"column":21}},"111":{"start":{"line":266,"column":12},"end":{"line":268,"column":13}},"112":{"start":{"line":267,"column":16},"end":{"line":267,"column":64}},"113":{"start":{"line":270,"column":12},"end":{"line":274,"column":14}},"114":{"start":{"line":276,"column":12},"end":{"line":278,"column":13}},"115":{"start":{"line":277,"column":16},"end":{"line":277,"column":53}},"116":{"start":{"line":280,"column":12},"end":{"line":283,"column":13}},"117":{"start":{"line":281,"column":16},"end":{"line":281,"column":52}},"118":{"start":{"line":282,"column":16},"end":{"line":282,"column":45}},"119":{"start":{"line":285,"column":12},"end":{"line":297,"column":13}},"120":{"start":{"line":286,"column":16},"end":{"line":286,"column":43}},"121":{"start":{"line":287,"column":19},"end":{"line":297,"column":13}},"122":{"start":{"line":288,"column":16},"end":{"line":290,"column":18}},"123":{"start":{"line":291,"column":19},"end":{"line":297,"column":13}},"124":{"start":{"line":292,"column":16},"end":{"line":294,"column":18}},"125":{"start":{"line":296,"column":16},"end":{"line":296,"column":57}},"126":{"start":{"line":299,"column":12},"end":{"line":301,"column":13}},"127":{"start":{"line":300,"column":16},"end":{"line":300,"column":53}},"128":{"start":{"line":303,"column":12},"end":{"line":305,"column":13}},"129":{"start":{"line":304,"column":16},"end":{"line":304,"column":51}},"130":{"start":{"line":307,"column":12},"end":{"line":307,"column":36}},"131":{"start":{"line":310,"column":8},"end":{"line":310,"column":28}},"132":{"start":{"line":321,"column":8},"end":{"line":321,"column":17}},"133":{"start":{"line":323,"column":8},"end":{"line":336,"column":9}},"134":{"start":{"line":324,"column":12},"end":{"line":330,"column":15}},"135":{"start":{"line":332,"column":12},"end":{"line":335,"column":15}},"136":{"start":{"line":338,"column":8},"end":{"line":342,"column":9}},"137":{"start":{"line":339,"column":12},"end":{"line":339,"column":42}},"138":{"start":{"line":340,"column":15},"end":{"line":342,"column":9}},"139":{"start":{"line":341,"column":12},"end":{"line":341,"column":38}},"140":{"start":{"line":344,"column":8},"end":{"line":349,"column":11}},"141":{"start":{"line":346,"column":12},"end":{"line":348,"column":13}},"142":{"start":{"line":347,"column":16},"end":{"line":347,"column":55}},"143":{"start":{"line":351,"column":8},"end":{"line":351,"column":20}},"144":{"start":{"line":362,"column":8},"end":{"line":362,"column":17}},"145":{"start":{"line":364,"column":8},"end":{"line":377,"column":9}},"146":{"start":{"line":365,"column":12},"end":{"line":371,"column":15}},"147":{"start":{"line":373,"column":12},"end":{"line":376,"column":15}},"148":{"start":{"line":379,"column":8},"end":{"line":385,"column":11}},"149":{"start":{"line":380,"column":12},"end":{"line":384,"column":13}},"150":{"start":{"line":381,"column":16},"end":{"line":381,"column":42}},"151":{"start":{"line":383,"column":16},"end":{"line":383,"column":59}},"152":{"start":{"line":387,"column":8},"end":{"line":387,"column":20}},"153":{"start":{"line":397,"column":8},"end":{"line":397,"column":17}},"154":{"start":{"line":399,"column":8},"end":{"line":412,"column":9}},"155":{"start":{"line":400,"column":12},"end":{"line":406,"column":15}},"156":{"start":{"line":408,"column":12},"end":{"line":411,"column":15}},"157":{"start":{"line":414,"column":8},"end":{"line":414,"column":54}},"158":{"start":{"line":416,"column":8},"end":{"line":416,"column":101}},"159":{"start":{"line":416,"column":57},"end":{"line":416,"column":99}},"160":{"start":{"line":418,"column":8},"end":{"line":418,"column":20}},"161":{"start":{"line":429,"column":8},"end":{"line":429,"column":32}},"162":{"start":{"line":430,"column":8},"end":{"line":430,"column":48}},"163":{"start":{"line":432,"column":8},"end":{"line":432,"column":17}},"164":{"start":{"line":433,"column":8},"end":{"line":436,"column":36}},"165":{"start":{"line":438,"column":8},"end":{"line":453,"column":9}},"166":{"start":{"line":439,"column":12},"end":{"line":446,"column":15}},"167":{"start":{"line":448,"column":12},"end":{"line":452,"column":15}},"168":{"start":{"line":456,"column":8},"end":{"line":458,"column":9}},"169":{"start":{"line":457,"column":12},"end":{"line":457,"column":44}},"170":{"start":{"line":460,"column":8},"end":{"line":462,"column":9}},"171":{"start":{"line":461,"column":12},"end":{"line":461,"column":87}},"172":{"start":{"line":464,"column":8},"end":{"line":468,"column":9}},"173":{"start":{"line":465,"column":12},"end":{"line":465,"column":89}},"174":{"start":{"line":466,"column":15},"end":{"line":468,"column":9}},"175":{"start":{"line":467,"column":12},"end":{"line":467,"column":76}},"176":{"start":{"line":470,"column":8},"end":{"line":472,"column":9}},"177":{"start":{"line":471,"column":12},"end":{"line":471,"column":121}},"178":{"start":{"line":474,"column":8},"end":{"line":476,"column":9}},"179":{"start":{"line":475,"column":12},"end":{"line":475,"column":68}},"180":{"start":{"line":479,"column":8},"end":{"line":483,"column":9}},"181":{"start":{"line":480,"column":12},"end":{"line":480,"column":37}},"182":{"start":{"line":482,"column":12},"end":{"line":482,"column":45}},"183":{"start":{"line":485,"column":8},"end":{"line":485,"column":20}},"184":{"start":{"line":495,"column":8},"end":{"line":495,"column":96}},"185":{"start":{"line":496,"column":8},"end":{"line":498,"column":9}},"186":{"start":{"line":497,"column":12},"end":{"line":497,"column":27}},"187":{"start":{"line":500,"column":8},"end":{"line":500,"column":130}},"188":{"start":{"line":502,"column":8},"end":{"line":504,"column":9}},"189":{"start":{"line":503,"column":12},"end":{"line":503,"column":33}},"190":{"start":{"line":506,"column":8},"end":{"line":508,"column":9}},"191":{"start":{"line":507,"column":12},"end":{"line":507,"column":33}},"192":{"start":{"line":510,"column":8},"end":{"line":514,"column":11}},"193":{"start":{"line":511,"column":12},"end":{"line":513,"column":13}},"194":{"start":{"line":512,"column":16},"end":{"line":512,"column":80}},"195":{"start":{"line":516,"column":8},"end":{"line":516,"column":23}},"196":{"start":{"line":520,"column":0},"end":{"line":520,"column":30}}},"branchMap":{"1":{"line":16,"type":"binary-expr","locations":[{"start":{"line":16,"column":20},"end":{"line":16,"column":24}},{"start":{"line":16,"column":28},"end":{"line":16,"column":30}}]},"2":{"line":28,"type":"binary-expr","locations":[{"start":{"line":28,"column":30},"end":{"line":28,"column":44}},{"start":{"line":28,"column":48},"end":{"line":28,"column":80}}]},"3":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":25},"end":{"line":30,"column":62}},{"start":{"line":30,"column":67},"end":{"line":30,"column":92}},{"start":{"line":30,"column":96},"end":{"line":30,"column":135}}]},"4":{"line":33,"type":"if","locations":[{"start":{"line":33,"column":8},"end":{"line":33,"column":8}},{"start":{"line":33,"column":8},"end":{"line":33,"column":8}}]},"5":{"line":35,"type":"if","locations":[{"start":{"line":35,"column":15},"end":{"line":35,"column":15}},{"start":{"line":35,"column":15},"end":{"line":35,"column":15}}]},"6":{"line":37,"type":"if","locations":[{"start":{"line":37,"column":15},"end":{"line":37,"column":15}},{"start":{"line":37,"column":15},"end":{"line":37,"column":15}}]},"7":{"line":39,"type":"if","locations":[{"start":{"line":39,"column":15},"end":{"line":39,"column":15}},{"start":{"line":39,"column":15},"end":{"line":39,"column":15}}]},"8":{"line":42,"type":"binary-expr","locations":[{"start":{"line":42,"column":58},"end":{"line":42,"column":142}},{"start":{"line":42,"column":146},"end":{"line":45,"column":13}}]},"9":{"line":42,"type":"binary-expr","locations":[{"start":{"line":42,"column":68},"end":{"line":42,"column":86}},{"start":{"line":42,"column":90},"end":{"line":42,"column":92}}]},"10":{"line":42,"type":"binary-expr","locations":[{"start":{"line":42,"column":101},"end":{"line":42,"column":127}},{"start":{"line":42,"column":131},"end":{"line":42,"column":133}}]},"11":{"line":49,"type":"if","locations":[{"start":{"line":49,"column":8},"end":{"line":49,"column":8}},{"start":{"line":49,"column":8},"end":{"line":49,"column":8}}]},"12":{"line":68,"type":"if","locations":[{"start":{"line":68,"column":12},"end":{"line":68,"column":12}},{"start":{"line":68,"column":12},"end":{"line":68,"column":12}}]},"13":{"line":74,"type":"if","locations":[{"start":{"line":74,"column":8},"end":{"line":74,"column":8}},{"start":{"line":74,"column":8},"end":{"line":74,"column":8}}]},"14":{"line":92,"type":"binary-expr","locations":[{"start":{"line":92,"column":36},"end":{"line":92,"column":57}},{"start":{"line":92,"column":61},"end":{"line":92,"column":63}}]},"15":{"line":96,"type":"if","locations":[{"start":{"line":96,"column":12},"end":{"line":96,"column":12}},{"start":{"line":96,"column":12},"end":{"line":96,"column":12}}]},"16":{"line":96,"type":"binary-expr","locations":[{"start":{"line":96,"column":31},"end":{"line":96,"column":46}},{"start":{"line":96,"column":50},"end":{"line":96,"column":65}}]},"17":{"line":101,"type":"binary-expr","locations":[{"start":{"line":101,"column":29},"end":{"line":101,"column":51}},{"start":{"line":102,"column":20},"end":{"line":102,"column":112}}]},"18":{"line":102,"type":"binary-expr","locations":[{"start":{"line":102,"column":45},"end":{"line":102,"column":64}},{"start":{"line":102,"column":68},"end":{"line":102,"column":83}},{"start":{"line":102,"column":87},"end":{"line":102,"column":102}},{"start":{"line":102,"column":106},"end":{"line":102,"column":111}}]},"19":{"line":103,"type":"binary-expr","locations":[{"start":{"line":103,"column":36},"end":{"line":103,"column":65}},{"start":{"line":103,"column":70},"end":{"line":103,"column":109}}]},"20":{"line":103,"type":"cond-expr","locations":[{"start":{"line":103,"column":86},"end":{"line":103,"column":94}},{"start":{"line":103,"column":97},"end":{"line":103,"column":109}}]},"21":{"line":107,"type":"if","locations":[{"start":{"line":107,"column":12},"end":{"line":107,"column":12}},{"start":{"line":107,"column":12},"end":{"line":107,"column":12}}]},"22":{"line":109,"type":"if","locations":[{"start":{"line":109,"column":19},"end":{"line":109,"column":19}},{"start":{"line":109,"column":19},"end":{"line":109,"column":19}}]},"23":{"line":109,"type":"binary-expr","locations":[{"start":{"line":109,"column":23},"end":{"line":109,"column":37}},{"start":{"line":109,"column":41},"end":{"line":109,"column":70}}]},"24":{"line":110,"type":"binary-expr","locations":[{"start":{"line":110,"column":32},"end":{"line":110,"column":91}},{"start":{"line":110,"column":95},"end":{"line":110,"column":118}}]},"25":{"line":110,"type":"binary-expr","locations":[{"start":{"line":110,"column":33},"end":{"line":110,"column":48}},{"start":{"line":110,"column":52},"end":{"line":110,"column":67}},{"start":{"line":110,"column":71},"end":{"line":110,"column":73}}]},"26":{"line":111,"type":"if","locations":[{"start":{"line":111,"column":16},"end":{"line":111,"column":16}},{"start":{"line":111,"column":16},"end":{"line":111,"column":16}}]},"27":{"line":116,"type":"if","locations":[{"start":{"line":116,"column":12},"end":{"line":116,"column":12}},{"start":{"line":116,"column":12},"end":{"line":116,"column":12}}]},"28":{"line":121,"type":"if","locations":[{"start":{"line":121,"column":12},"end":{"line":121,"column":12}},{"start":{"line":121,"column":12},"end":{"line":121,"column":12}}]},"29":{"line":125,"type":"if","locations":[{"start":{"line":125,"column":12},"end":{"line":125,"column":12}},{"start":{"line":125,"column":12},"end":{"line":125,"column":12}}]},"30":{"line":127,"type":"if","locations":[{"start":{"line":127,"column":19},"end":{"line":127,"column":19}},{"start":{"line":127,"column":19},"end":{"line":127,"column":19}}]},"31":{"line":131,"type":"if","locations":[{"start":{"line":131,"column":19},"end":{"line":131,"column":19}},{"start":{"line":131,"column":19},"end":{"line":131,"column":19}}]},"32":{"line":136,"type":"binary-expr","locations":[{"start":{"line":136,"column":31},"end":{"line":136,"column":49}},{"start":{"line":136,"column":53},"end":{"line":136,"column":55}}]},"33":{"line":139,"type":"if","locations":[{"start":{"line":139,"column":12},"end":{"line":139,"column":12}},{"start":{"line":139,"column":12},"end":{"line":139,"column":12}}]},"34":{"line":143,"type":"if","locations":[{"start":{"line":143,"column":12},"end":{"line":143,"column":12}},{"start":{"line":143,"column":12},"end":{"line":143,"column":12}}]},"35":{"line":150,"type":"if","locations":[{"start":{"line":150,"column":8},"end":{"line":150,"column":8}},{"start":{"line":150,"column":8},"end":{"line":150,"column":8}}]},"36":{"line":151,"type":"if","locations":[{"start":{"line":151,"column":12},"end":{"line":151,"column":12}},{"start":{"line":151,"column":12},"end":{"line":151,"column":12}}]},"37":{"line":151,"type":"binary-expr","locations":[{"start":{"line":151,"column":16},"end":{"line":151,"column":55}},{"start":{"line":151,"column":60},"end":{"line":151,"column":87}},{"start":{"line":151,"column":91},"end":{"line":151,"column":115}},{"start":{"line":151,"column":119},"end":{"line":151,"column":143}},{"start":{"line":151,"column":147},"end":{"line":151,"column":170}}]},"38":{"line":165,"type":"if","locations":[{"start":{"line":165,"column":12},"end":{"line":165,"column":12}},{"start":{"line":165,"column":12},"end":{"line":165,"column":12}}]},"39":{"line":168,"type":"binary-expr","locations":[{"start":{"line":168,"column":35},"end":{"line":168,"column":55}},{"start":{"line":168,"column":59},"end":{"line":168,"column":71}}]},"40":{"line":173,"type":"if","locations":[{"start":{"line":173,"column":8},"end":{"line":173,"column":8}},{"start":{"line":173,"column":8},"end":{"line":173,"column":8}}]},"41":{"line":175,"type":"binary-expr","locations":[{"start":{"line":175,"column":45},"end":{"line":175,"column":56}},{"start":{"line":175,"column":60},"end":{"line":175,"column":62}}]},"42":{"line":180,"type":"binary-expr","locations":[{"start":{"line":180,"column":83},"end":{"line":180,"column":94}},{"start":{"line":180,"column":98},"end":{"line":180,"column":100}}]},"43":{"line":195,"type":"if","locations":[{"start":{"line":195,"column":8},"end":{"line":195,"column":8}},{"start":{"line":195,"column":8},"end":{"line":195,"column":8}}]},"44":{"line":196,"type":"if","locations":[{"start":{"line":196,"column":12},"end":{"line":196,"column":12}},{"start":{"line":196,"column":12},"end":{"line":196,"column":12}}]},"45":{"line":196,"type":"binary-expr","locations":[{"start":{"line":196,"column":16},"end":{"line":196,"column":50}},{"start":{"line":196,"column":55},"end":{"line":196,"column":77}},{"start":{"line":196,"column":81},"end":{"line":196,"column":100}},{"start":{"line":196,"column":104},"end":{"line":196,"column":123}},{"start":{"line":196,"column":127},"end":{"line":196,"column":145}}]},"46":{"line":203,"type":"cond-expr","locations":[{"start":{"line":203,"column":103},"end":{"line":203,"column":105}},{"start":{"line":203,"column":108},"end":{"line":203,"column":125}}]},"47":{"line":203,"type":"binary-expr","locations":[{"start":{"line":203,"column":47},"end":{"line":203,"column":61}},{"start":{"line":203,"column":65},"end":{"line":203,"column":100}}]},"48":{"line":206,"type":"if","locations":[{"start":{"line":206,"column":8},"end":{"line":206,"column":8}},{"start":{"line":206,"column":8},"end":{"line":206,"column":8}}]},"49":{"line":207,"type":"if","locations":[{"start":{"line":207,"column":12},"end":{"line":207,"column":12}},{"start":{"line":207,"column":12},"end":{"line":207,"column":12}}]},"50":{"line":207,"type":"binary-expr","locations":[{"start":{"line":207,"column":16},"end":{"line":207,"column":55}},{"start":{"line":207,"column":60},"end":{"line":207,"column":87}},{"start":{"line":207,"column":91},"end":{"line":207,"column":115}},{"start":{"line":207,"column":119},"end":{"line":207,"column":143}},{"start":{"line":207,"column":147},"end":{"line":207,"column":170}}]},"51":{"line":214,"type":"cond-expr","locations":[{"start":{"line":214,"column":123},"end":{"line":214,"column":125}},{"start":{"line":214,"column":128},"end":{"line":214,"column":145}}]},"52":{"line":214,"type":"binary-expr","locations":[{"start":{"line":214,"column":57},"end":{"line":214,"column":76}},{"start":{"line":214,"column":80},"end":{"line":214,"column":120}}]},"53":{"line":219,"type":"if","locations":[{"start":{"line":219,"column":8},"end":{"line":219,"column":8}},{"start":{"line":219,"column":8},"end":{"line":219,"column":8}}]},"54":{"line":219,"type":"binary-expr","locations":[{"start":{"line":219,"column":12},"end":{"line":219,"column":31}},{"start":{"line":219,"column":35},"end":{"line":219,"column":91}}]},"55":{"line":219,"type":"binary-expr","locations":[{"start":{"line":219,"column":37},"end":{"line":219,"column":58}},{"start":{"line":219,"column":62},"end":{"line":219,"column":90}}]},"56":{"line":220,"type":"if","locations":[{"start":{"line":220,"column":12},"end":{"line":220,"column":12}},{"start":{"line":220,"column":12},"end":{"line":220,"column":12}}]},"57":{"line":220,"type":"binary-expr","locations":[{"start":{"line":220,"column":16},"end":{"line":220,"column":55}},{"start":{"line":220,"column":60},"end":{"line":220,"column":87}},{"start":{"line":220,"column":91},"end":{"line":220,"column":115}},{"start":{"line":220,"column":119},"end":{"line":220,"column":143}},{"start":{"line":220,"column":147},"end":{"line":220,"column":170}}]},"58":{"line":233,"type":"if","locations":[{"start":{"line":233,"column":12},"end":{"line":233,"column":12}},{"start":{"line":233,"column":12},"end":{"line":233,"column":12}}]},"59":{"line":233,"type":"binary-expr","locations":[{"start":{"line":233,"column":16},"end":{"line":233,"column":35}},{"start":{"line":233,"column":39},"end":{"line":233,"column":78}}]},"60":{"line":240,"type":"binary-expr","locations":[{"start":{"line":240,"column":83},"end":{"line":240,"column":101}},{"start":{"line":240,"column":105},"end":{"line":240,"column":114}}]},"61":{"line":241,"type":"if","locations":[{"start":{"line":241,"column":12},"end":{"line":241,"column":12}},{"start":{"line":241,"column":12},"end":{"line":241,"column":12}}]},"62":{"line":246,"type":"if","locations":[{"start":{"line":246,"column":8},"end":{"line":246,"column":8}},{"start":{"line":246,"column":8},"end":{"line":246,"column":8}}]},"63":{"line":247,"type":"if","locations":[{"start":{"line":247,"column":12},"end":{"line":247,"column":12}},{"start":{"line":247,"column":12},"end":{"line":247,"column":12}}]},"64":{"line":247,"type":"binary-expr","locations":[{"start":{"line":247,"column":16},"end":{"line":247,"column":50}},{"start":{"line":247,"column":55},"end":{"line":247,"column":77}},{"start":{"line":247,"column":81},"end":{"line":247,"column":100}},{"start":{"line":247,"column":104},"end":{"line":247,"column":123}},{"start":{"line":247,"column":127},"end":{"line":247,"column":145}}]},"65":{"line":254,"type":"cond-expr","locations":[{"start":{"line":254,"column":102},"end":{"line":254,"column":104}},{"start":{"line":254,"column":107},"end":{"line":254,"column":124}}]},"66":{"line":254,"type":"binary-expr","locations":[{"start":{"line":254,"column":46},"end":{"line":254,"column":60}},{"start":{"line":254,"column":64},"end":{"line":254,"column":99}}]},"67":{"line":258,"type":"binary-expr","locations":[{"start":{"line":258,"column":15},"end":{"line":258,"column":19}},{"start":{"line":258,"column":23},"end":{"line":258,"column":25}}]},"68":{"line":259,"type":"binary-expr","locations":[{"start":{"line":259,"column":15},"end":{"line":259,"column":24}},{"start":{"line":259,"column":28},"end":{"line":259,"column":30}}]},"69":{"line":260,"type":"binary-expr","locations":[{"start":{"line":260,"column":15},"end":{"line":260,"column":19}},{"start":{"line":260,"column":23},"end":{"line":260,"column":25}}]},"70":{"line":261,"type":"binary-expr","locations":[{"start":{"line":261,"column":15},"end":{"line":261,"column":26}},{"start":{"line":261,"column":30},"end":{"line":261,"column":32}}]},"71":{"line":262,"type":"binary-expr","locations":[{"start":{"line":262,"column":15},"end":{"line":262,"column":37}},{"start":{"line":262,"column":41},"end":{"line":262,"column":43}}]},"72":{"line":266,"type":"if","locations":[{"start":{"line":266,"column":12},"end":{"line":266,"column":12}},{"start":{"line":266,"column":12},"end":{"line":266,"column":12}}]},"73":{"line":266,"type":"binary-expr","locations":[{"start":{"line":266,"column":31},"end":{"line":266,"column":47}},{"start":{"line":266,"column":51},"end":{"line":266,"column":67}}]},"74":{"line":271,"type":"binary-expr","locations":[{"start":{"line":271,"column":29},"end":{"line":271,"column":52}},{"start":{"line":272,"column":20},"end":{"line":272,"column":115}}]},"75":{"line":272,"type":"binary-expr","locations":[{"start":{"line":272,"column":45},"end":{"line":272,"column":65}},{"start":{"line":272,"column":69},"end":{"line":272,"column":85}},{"start":{"line":272,"column":89},"end":{"line":272,"column":105}},{"start":{"line":272,"column":109},"end":{"line":272,"column":114}}]},"76":{"line":276,"type":"if","locations":[{"start":{"line":276,"column":12},"end":{"line":276,"column":12}},{"start":{"line":276,"column":12},"end":{"line":276,"column":12}}]},"77":{"line":280,"type":"if","locations":[{"start":{"line":280,"column":12},"end":{"line":280,"column":12}},{"start":{"line":280,"column":12},"end":{"line":280,"column":12}}]},"78":{"line":285,"type":"if","locations":[{"start":{"line":285,"column":12},"end":{"line":285,"column":12}},{"start":{"line":285,"column":12},"end":{"line":285,"column":12}}]},"79":{"line":287,"type":"if","locations":[{"start":{"line":287,"column":19},"end":{"line":287,"column":19}},{"start":{"line":287,"column":19},"end":{"line":287,"column":19}}]},"80":{"line":291,"type":"if","locations":[{"start":{"line":291,"column":19},"end":{"line":291,"column":19}},{"start":{"line":291,"column":19},"end":{"line":291,"column":19}}]},"81":{"line":296,"type":"binary-expr","locations":[{"start":{"line":296,"column":31},"end":{"line":296,"column":50}},{"start":{"line":296,"column":54},"end":{"line":296,"column":56}}]},"82":{"line":299,"type":"if","locations":[{"start":{"line":299,"column":12},"end":{"line":299,"column":12}},{"start":{"line":299,"column":12},"end":{"line":299,"column":12}}]},"83":{"line":303,"type":"if","locations":[{"start":{"line":303,"column":12},"end":{"line":303,"column":12}},{"start":{"line":303,"column":12},"end":{"line":303,"column":12}}]},"84":{"line":323,"type":"if","locations":[{"start":{"line":323,"column":8},"end":{"line":323,"column":8}},{"start":{"line":323,"column":8},"end":{"line":323,"column":8}}]},"85":{"line":338,"type":"if","locations":[{"start":{"line":338,"column":8},"end":{"line":338,"column":8}},{"start":{"line":338,"column":8},"end":{"line":338,"column":8}}]},"86":{"line":340,"type":"if","locations":[{"start":{"line":340,"column":15},"end":{"line":340,"column":15}},{"start":{"line":340,"column":15},"end":{"line":340,"column":15}}]},"87":{"line":344,"type":"binary-expr","locations":[{"start":{"line":344,"column":18},"end":{"line":344,"column":39}},{"start":{"line":344,"column":43},"end":{"line":344,"column":61}},{"start":{"line":344,"column":65},"end":{"line":344,"column":67}}]},"88":{"line":344,"type":"binary-expr","locations":[{"start":{"line":344,"column":76},"end":{"line":344,"column":102}},{"start":{"line":344,"column":106},"end":{"line":344,"column":108}}]},"89":{"line":346,"type":"if","locations":[{"start":{"line":346,"column":12},"end":{"line":346,"column":12}},{"start":{"line":346,"column":12},"end":{"line":346,"column":12}}]},"90":{"line":346,"type":"binary-expr","locations":[{"start":{"line":346,"column":16},"end":{"line":346,"column":33}},{"start":{"line":346,"column":37},"end":{"line":346,"column":63}}]},"91":{"line":364,"type":"if","locations":[{"start":{"line":364,"column":8},"end":{"line":364,"column":8}},{"start":{"line":364,"column":8},"end":{"line":364,"column":8}}]},"92":{"line":380,"type":"if","locations":[{"start":{"line":380,"column":12},"end":{"line":380,"column":12}},{"start":{"line":380,"column":12},"end":{"line":380,"column":12}}]},"93":{"line":380,"type":"binary-expr","locations":[{"start":{"line":380,"column":16},"end":{"line":380,"column":32}},{"start":{"line":380,"column":36},"end":{"line":380,"column":66}}]},"94":{"line":399,"type":"if","locations":[{"start":{"line":399,"column":8},"end":{"line":399,"column":8}},{"start":{"line":399,"column":8},"end":{"line":399,"column":8}}]},"95":{"line":429,"type":"binary-expr","locations":[{"start":{"line":429,"column":18},"end":{"line":429,"column":25}},{"start":{"line":429,"column":29},"end":{"line":429,"column":31}}]},"96":{"line":430,"type":"binary-expr","locations":[{"start":{"line":430,"column":26},"end":{"line":430,"column":41}},{"start":{"line":430,"column":45},"end":{"line":430,"column":47}}]},"97":{"line":433,"type":"binary-expr","locations":[{"start":{"line":433,"column":24},"end":{"line":433,"column":40}},{"start":{"line":433,"column":44},"end":{"line":433,"column":50}}]},"98":{"line":438,"type":"if","locations":[{"start":{"line":438,"column":8},"end":{"line":438,"column":8}},{"start":{"line":438,"column":8},"end":{"line":438,"column":8}}]},"99":{"line":456,"type":"if","locations":[{"start":{"line":456,"column":8},"end":{"line":456,"column":8}},{"start":{"line":456,"column":8},"end":{"line":456,"column":8}}]},"100":{"line":460,"type":"if","locations":[{"start":{"line":460,"column":8},"end":{"line":460,"column":8}},{"start":{"line":460,"column":8},"end":{"line":460,"column":8}}]},"101":{"line":464,"type":"if","locations":[{"start":{"line":464,"column":8},"end":{"line":464,"column":8}},{"start":{"line":464,"column":8},"end":{"line":464,"column":8}}]},"102":{"line":466,"type":"if","locations":[{"start":{"line":466,"column":15},"end":{"line":466,"column":15}},{"start":{"line":466,"column":15},"end":{"line":466,"column":15}}]},"103":{"line":466,"type":"binary-expr","locations":[{"start":{"line":466,"column":19},"end":{"line":466,"column":37}},{"start":{"line":466,"column":41},"end":{"line":466,"column":77}}]},"104":{"line":470,"type":"if","locations":[{"start":{"line":470,"column":8},"end":{"line":470,"column":8}},{"start":{"line":470,"column":8},"end":{"line":470,"column":8}}]},"105":{"line":470,"type":"binary-expr","locations":[{"start":{"line":470,"column":12},"end":{"line":470,"column":49}},{"start":{"line":470,"column":53},"end":{"line":470,"column":79}}]},"106":{"line":471,"type":"binary-expr","locations":[{"start":{"line":471,"column":50},"end":{"line":471,"column":76}},{"start":{"line":471,"column":81},"end":{"line":471,"column":118}}]},"107":{"line":471,"type":"cond-expr","locations":[{"start":{"line":471,"column":95},"end":{"line":471,"column":103}},{"start":{"line":471,"column":106},"end":{"line":471,"column":118}}]},"108":{"line":474,"type":"if","locations":[{"start":{"line":474,"column":8},"end":{"line":474,"column":8}},{"start":{"line":474,"column":8},"end":{"line":474,"column":8}}]},"109":{"line":474,"type":"binary-expr","locations":[{"start":{"line":474,"column":12},"end":{"line":474,"column":47}},{"start":{"line":474,"column":51},"end":{"line":474,"column":99}}]},"110":{"line":479,"type":"if","locations":[{"start":{"line":479,"column":8},"end":{"line":479,"column":8}},{"start":{"line":479,"column":8},"end":{"line":479,"column":8}}]},"111":{"line":495,"type":"binary-expr","locations":[{"start":{"line":495,"column":21},"end":{"line":495,"column":33}},{"start":{"line":495,"column":37},"end":{"line":495,"column":49}}]},"112":{"line":496,"type":"if","locations":[{"start":{"line":496,"column":8},"end":{"line":496,"column":8}},{"start":{"line":496,"column":8},"end":{"line":496,"column":8}}]},"113":{"line":500,"type":"cond-expr","locations":[{"start":{"line":500,"column":56},"end":{"line":500,"column":86}},{"start":{"line":500,"column":89},"end":{"line":500,"column":129}}]},"114":{"line":502,"type":"if","locations":[{"start":{"line":502,"column":8},"end":{"line":502,"column":8}},{"start":{"line":502,"column":8},"end":{"line":502,"column":8}}]},"115":{"line":506,"type":"if","locations":[{"start":{"line":506,"column":8},"end":{"line":506,"column":8}},{"start":{"line":506,"column":8},"end":{"line":506,"column":8}}]},"116":{"line":511,"type":"if","locations":[{"start":{"line":511,"column":12},"end":{"line":511,"column":12}},{"start":{"line":511,"column":12},"end":{"line":511,"column":12}}]},"117":{"line":512,"type":"binary-expr","locations":[{"start":{"line":512,"column":38},"end":{"line":512,"column":57}},{"start":{"line":512,"column":61},"end":{"line":512,"column":79}}]}},"code":["/* eslint no-undefined: 0 */","","'use strict';","","const MimeNode = require('../mime-node');","const mimeFuncs = require('../mime-funcs');","","/**"," * Creates the object for composing a MimeNode instance out from the mail options"," *"," * @constructor"," * @param {Object} mail Mail options"," */","class MailComposer {","    constructor(mail) {","        this.mail = mail || {};","        this.message = false;","    }","","    /**","     * Builds MimeNode instance","     */","    compile() {","        this._alternatives = this.getAlternatives();","        this._htmlNode = this._alternatives.filter(alternative => /^text\\/html\\b/i.test(alternative.contentType)).pop();","        this._attachments = this.getAttachments(!!this._htmlNode);","","        this._useRelated = !!(this._htmlNode && this._attachments.related.length);","        this._useAlternative = this._alternatives.length > 1;","        this._useMixed = this._attachments.attached.length > 1 || (this._alternatives.length && this._attachments.attached.length === 1);","","        // Compose MIME tree","        if (this.mail.raw) {","            this.message = new MimeNode().setRaw(this.mail.raw);","        } else if (this._useMixed) {","            this.message = this._createMixed();","        } else if (this._useAlternative) {","            this.message = this._createAlternative();","        } else if (this._useRelated) {","            this.message = this._createRelated();","        } else {","            this.message = this._createContentNode(false, [].concat(this._alternatives || []).concat(this._attachments.attached || []).shift() || {","                contentType: 'text/plain',","                content: ''","            });","        }","","        // Add custom headers","        if (this.mail.headers) {","            this.message.addHeader(this.mail.headers);","        }","","        // Add headers to the root node, always overrides custom headers","        [","            'from',","            'sender',","            'to',","            'cc',","            'bcc',","            'reply-to',","            'in-reply-to',","            'references',","            'subject',","            'message-id',","            'date'","        ].forEach(header => {","            let key = header.replace(/-(\\w)/g, (o, c) => c.toUpperCase());","            if (this.mail[key]) {","                this.message.setHeader(header, this.mail[key]);","            }","        });","","        // Sets custom envelope","        if (this.mail.envelope) {","            this.message.setEnvelope(this.mail.envelope);","        }","","        // ensure Message-Id value","        this.message.messageId();","","        return this.message;","    }","","    /**","     * List all attachments. Resulting attachment objects can be used as input for MimeNode nodes","     *","     * @param {Boolean} findRelated If true separate related attachments from attached ones","     * @returns {Object} An object of arrays (`related` and `attached`)","     */","    getAttachments(findRelated) {","        let icalEvent, eventObject;","        let attachments = [].concat(this.mail.attachments || []).map((attachment, i) => {","            let data;","            let isMessageNode = /^message\\//i.test(attachment.contentType);","","            if (/^data:/i.test(attachment.path || attachment.href)) {","                attachment = this._processDataUrl(attachment);","            }","","            data = {","                contentType: attachment.contentType ||","                    mimeFuncs.detectMimeType(attachment.filename || attachment.path || attachment.href || 'bin'),","                contentDisposition: attachment.contentDisposition || (isMessageNode ? 'inline' : 'attachment'),","                contentTransferEncoding: attachment.contentTransferEncoding","            };","","            if (attachment.filename) {","                data.filename = attachment.filename;","            } else if (!isMessageNode && attachment.filename !== false) {","                data.filename = (attachment.path || attachment.href || '').split('/').pop() || 'attachment-' + (i + 1);","                if (data.filename.indexOf('.') < 0) {","                    data.filename += '.' + mimeFuncs.detectExtension(data.contentType);","                }","            }","","            if (/^https?:\\/\\//i.test(attachment.path)) {","                attachment.href = attachment.path;","                attachment.path = undefined;","            }","","            if (attachment.cid) {","                data.cid = attachment.cid;","            }","","            if (attachment.raw) {","                data.raw = attachment.raw;","            } else if (attachment.path) {","                data.content = {","                    path: attachment.path","                };","            } else if (attachment.href) {","                data.content = {","                    href: attachment.href","                };","            } else {","                data.content = attachment.content || '';","            }","","            if (attachment.encoding) {","                data.encoding = attachment.encoding;","            }","","            if (attachment.headers) {","                data.headers = attachment.headers;","            }","","            return data;","        });","","        if (this.mail.icalEvent) {","            if (typeof this.mail.icalEvent === 'object' && (this.mail.icalEvent.content || this.mail.icalEvent.path || this.mail.icalEvent.href || this.mail.icalEvent.raw)) {","                icalEvent = this.mail.icalEvent;","            } else {","                icalEvent = {","                    content: this.mail.icalEvent","                };","            }","","            eventObject = {};","            Object.keys(icalEvent).forEach(key => {","                eventObject[key] = icalEvent[key];","            });","","            eventObject.contentType = 'application/ics';","            if (!eventObject.headers) {","                eventObject.headers = {};","            }","            eventObject.filename = eventObject.filename || 'invite.ics';","            eventObject.headers['Content-Disposition'] = 'attachment';","            eventObject.headers['Content-Transfer-Encoding'] = 'base64';","        }","","        if (!findRelated) {","            return {","                attached: attachments.concat(eventObject || []),","                related: []","            };","        } else {","            return {","                attached: attachments.filter(attachment => !attachment.cid).concat(eventObject || []),","                related: attachments.filter(attachment => !!attachment.cid)","            };","        }","    }","","    /**","     * List alternatives. Resulting objects can be used as input for MimeNode nodes","     *","     * @returns {Array} An array of alternative elements. Includes the `text` and `html` values as well","     */","    getAlternatives() {","        let alternatives = [],","            text, html, watchHtml, icalEvent, eventObject;","","        if (this.mail.text) {","            if (typeof this.mail.text === 'object' && (this.mail.text.content || this.mail.text.path || this.mail.text.href || this.mail.text.raw)) {","                text = this.mail.text;","            } else {","                text = {","                    content: this.mail.text","                };","            }","            text.contentType = 'text/plain' + (!text.encoding && mimeFuncs.isPlainText(text.content) ? '' : '; charset=utf-8');","        }","","        if (this.mail.watchHtml) {","            if (typeof this.mail.watchHtml === 'object' && (this.mail.watchHtml.content || this.mail.watchHtml.path || this.mail.watchHtml.href || this.mail.watchHtml.raw)) {","                watchHtml = this.mail.watchHtml;","            } else {","                watchHtml = {","                    content: this.mail.watchHtml","                };","            }","            watchHtml.contentType = 'text/watch-html' + (!watchHtml.encoding && mimeFuncs.isPlainText(watchHtml.content) ? '' : '; charset=utf-8');","        }","","        // only include the calendar alternative if there are no attachments","        // otherwise you might end up in a blank screen on some clients","        if (this.mail.icalEvent && !(this.mail.attachments && this.mail.attachments.length)) {","            if (typeof this.mail.icalEvent === 'object' && (this.mail.icalEvent.content || this.mail.icalEvent.path || this.mail.icalEvent.href || this.mail.icalEvent.raw)) {","                icalEvent = this.mail.icalEvent;","            } else {","                icalEvent = {","                    content: this.mail.icalEvent","                };","            }","","            eventObject = {};","            Object.keys(icalEvent).forEach(key => {","                eventObject[key] = icalEvent[key];","            });","","            if (eventObject.content && typeof eventObject.content === 'object') {","                // we are going to have the same attachment twice, so mark this to be","                // resolved just once","                eventObject.content._resolve = true;","            }","","            eventObject.filename = false;","            eventObject.contentType = 'text/calendar; charset=\"utf-8\"; method=' + (eventObject.method || 'PUBLISH').toString().trim().toUpperCase();","            if (!eventObject.headers) {","                eventObject.headers = {};","            }","        }","","        if (this.mail.html) {","            if (typeof this.mail.html === 'object' && (this.mail.html.content || this.mail.html.path || this.mail.html.href || this.mail.html.raw)) {","                html = this.mail.html;","            } else {","                html = {","                    content: this.mail.html","                };","            }","            html.contentType = 'text/html' + (!html.encoding && mimeFuncs.isPlainText(html.content) ? '' : '; charset=utf-8');","        }","","        [].","        concat(text || []).","        concat(watchHtml || []).","        concat(html || []).","        concat(eventObject || []).","        concat(this.mail.alternatives || []).","        forEach(alternative => {","            let data;","","            if (/^data:/i.test(alternative.path || alternative.href)) {","                alternative = this._processDataUrl(alternative);","            }","","            data = {","                contentType: alternative.contentType ||","                    mimeFuncs.detectMimeType(alternative.filename || alternative.path || alternative.href || 'txt'),","                contentTransferEncoding: alternative.contentTransferEncoding","            };","","            if (alternative.filename) {","                data.filename = alternative.filename;","            }","","            if (/^https?:\\/\\//i.test(alternative.path)) {","                alternative.href = alternative.path;","                alternative.path = undefined;","            }","","            if (alternative.raw) {","                data.raw = alternative.raw;","            } else if (alternative.path) {","                data.content = {","                    path: alternative.path","                };","            } else if (alternative.href) {","                data.content = {","                    href: alternative.href","                };","            } else {","                data.content = alternative.content || '';","            }","","            if (alternative.encoding) {","                data.encoding = alternative.encoding;","            }","","            if (alternative.headers) {","                data.headers = alternative.headers;","            }","","            alternatives.push(data);","        });","","        return alternatives;","    }","","    /**","     * Builds multipart/mixed node. It should always contain different type of elements on the same level","     * eg. text + attachments","     *","     * @param {Object} parentNode Parent for this note. If it does not exist, a root node is created","     * @returns {Object} MimeNode node element","     */","    _createMixed(parentNode) {","        let node;","","        if (!parentNode) {","            node = new MimeNode('multipart/mixed', {","                baseBoundary: this.mail.baseBoundary,","                textEncoding: this.mail.textEncoding,","                boundaryPrefix: this.mail.boundaryPrefix,","                disableUrlAccess: this.mail.disableUrlAccess,","                disableFileAccess: this.mail.disableFileAccess","            });","        } else {","            node = parentNode.createChild('multipart/mixed', {","                disableUrlAccess: this.mail.disableUrlAccess,","                disableFileAccess: this.mail.disableFileAccess","            });","        }","","        if (this._useAlternative) {","            this._createAlternative(node);","        } else if (this._useRelated) {","            this._createRelated(node);","        }","","        [].concat(!this._useAlternative && this._alternatives || []).concat(this._attachments.attached || []).forEach(element => {","            // if the element is a html node from related subpart then ignore it","            if (!this._useRelated || element !== this._htmlNode) {","                this._createContentNode(node, element);","            }","        });","","        return node;","    }","","    /**","     * Builds multipart/alternative node. It should always contain same type of elements on the same level","     * eg. text + html view of the same data","     *","     * @param {Object} parentNode Parent for this note. If it does not exist, a root node is created","     * @returns {Object} MimeNode node element","     */","    _createAlternative(parentNode) {","        let node;","","        if (!parentNode) {","            node = new MimeNode('multipart/alternative', {","                baseBoundary: this.mail.baseBoundary,","                textEncoding: this.mail.textEncoding,","                boundaryPrefix: this.mail.boundaryPrefix,","                disableUrlAccess: this.mail.disableUrlAccess,","                disableFileAccess: this.mail.disableFileAccess","            });","        } else {","            node = parentNode.createChild('multipart/alternative', {","                disableUrlAccess: this.mail.disableUrlAccess,","                disableFileAccess: this.mail.disableFileAccess","            });","        }","","        this._alternatives.forEach(alternative => {","            if (this._useRelated && this._htmlNode === alternative) {","                this._createRelated(node);","            } else {","                this._createContentNode(node, alternative);","            }","        });","","        return node;","    }","","    /**","     * Builds multipart/related node. It should always contain html node with related attachments","     *","     * @param {Object} parentNode Parent for this note. If it does not exist, a root node is created","     * @returns {Object} MimeNode node element","     */","    _createRelated(parentNode) {","        let node;","","        if (!parentNode) {","            node = new MimeNode('multipart/related; type=\"text/html\"', {","                baseBoundary: this.mail.baseBoundary,","                textEncoding: this.mail.textEncoding,","                boundaryPrefix: this.mail.boundaryPrefix,","                disableUrlAccess: this.mail.disableUrlAccess,","                disableFileAccess: this.mail.disableFileAccess","            });","        } else {","            node = parentNode.createChild('multipart/related; type=\"text/html\"', {","                disableUrlAccess: this.mail.disableUrlAccess,","                disableFileAccess: this.mail.disableFileAccess","            });","        }","","        this._createContentNode(node, this._htmlNode);","","        this._attachments.related.forEach(alternative => this._createContentNode(node, alternative));","","        return node;","    }","","    /**","     * Creates a regular node with contents","     *","     * @param {Object} parentNode Parent for this note. If it does not exist, a root node is created","     * @param {Object} element Node data","     * @returns {Object} MimeNode node element","     */","    _createContentNode(parentNode, element) {","        element = element || {};","        element.content = element.content || '';","","        let node;","        let encoding = (element.encoding || 'utf8')","            .toString()","            .toLowerCase()","            .replace(/[-_\\s]/g, '');","","        if (!parentNode) {","            node = new MimeNode(element.contentType, {","                filename: element.filename,","                baseBoundary: this.mail.baseBoundary,","                textEncoding: this.mail.textEncoding,","                boundaryPrefix: this.mail.boundaryPrefix,","                disableUrlAccess: this.mail.disableUrlAccess,","                disableFileAccess: this.mail.disableFileAccess","            });","        } else {","            node = parentNode.createChild(element.contentType, {","                filename: element.filename,","                disableUrlAccess: this.mail.disableUrlAccess,","                disableFileAccess: this.mail.disableFileAccess","            });","        }","","        // add custom headers","        if (element.headers) {","            node.addHeader(element.headers);","        }","","        if (element.cid) {","            node.setHeader('Content-Id', '<' + element.cid.replace(/[<>]/g, '') + '>');","        }","","        if (element.contentTransferEncoding) {","            node.setHeader('Content-Transfer-Encoding', element.contentTransferEncoding);","        } else if (this.mail.encoding && /^text\\//i.test(element.contentType)) {","            node.setHeader('Content-Transfer-Encoding', this.mail.encoding);","        }","","        if (!/^text\\//i.test(element.contentType) || element.contentDisposition) {","            node.setHeader('Content-Disposition', element.contentDisposition || (element.cid ? 'inline' : 'attachment'));","        }","","        if (typeof element.content === 'string' && !['utf8', 'usascii', 'ascii'].includes(encoding)) {","            element.content = new Buffer(element.content, encoding);","        }","","        // prefer pregenerated raw content","        if (element.raw) {","            node.setRaw(element.raw);","        } else {","            node.setContent(element.content);","        }","","        return node;","    }","","    /**","     * Parses data uri and converts it to a Buffer","     *","     * @param {Object} element Content element","     * @return {Object} Parsed element","     */","    _processDataUrl(element) {","        let parts = (element.path || element.href).match(/^data:((?:[^;]*;)*(?:[^,]*)),(.*)$/i);","        if (!parts) {","            return element;","        }","","        element.content = /\\bbase64$/i.test(parts[1]) ? new Buffer(parts[2], 'base64') : new Buffer(decodeURIComponent(parts[2]));","","        if ('path' in element) {","            element.path = false;","        }","","        if ('href' in element) {","            element.href = false;","        }","","        parts[1].split(';').forEach(item => {","            if (/^\\w+\\/[^\\/]+$/i.test(item)) {","                element.contentType = element.contentType || item.toLowerCase();","            }","        });","","        return element;","    }","}","","module.exports = MailComposer;",""],"l":{"5":1,"6":1,"16":0,"17":0,"24":0,"25":0,"26":0,"28":0,"29":0,"30":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"42":0,"49":0,"50":0,"54":0,"67":0,"68":0,"69":0,"74":0,"75":0,"79":0,"81":0,"91":0,"92":0,"93":0,"94":0,"96":0,"97":0,"100":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"116":0,"117":0,"118":0,"121":0,"122":0,"125":0,"126":0,"127":0,"128":0,"131":0,"132":0,"136":0,"139":0,"140":0,"143":0,"144":0,"147":0,"150":0,"151":0,"152":0,"154":0,"159":0,"160":0,"161":0,"164":0,"165":0,"166":0,"168":0,"169":0,"170":0,"173":0,"174":0,"179":0,"180":0,"181":0,"192":0,"195":0,"196":0,"197":0,"199":0,"203":0,"206":0,"207":0,"208":0,"210":0,"214":0,"219":0,"220":0,"221":0,"223":0,"228":0,"229":0,"230":0,"233":0,"236":0,"239":0,"240":0,"241":0,"242":0,"246":0,"247":0,"248":0,"250":0,"254":0,"257":0,"264":0,"266":0,"267":0,"270":0,"276":0,"277":0,"280":0,"281":0,"282":0,"285":0,"286":0,"287":0,"288":0,"291":0,"292":0,"296":0,"299":0,"300":0,"303":0,"304":0,"307":0,"310":0,"321":0,"323":0,"324":0,"332":0,"338":0,"339":0,"340":0,"341":0,"344":0,"346":0,"347":0,"351":0,"362":0,"364":0,"365":0,"373":0,"379":0,"380":0,"381":0,"383":0,"387":0,"397":0,"399":0,"400":0,"408":0,"414":0,"416":0,"418":0,"429":0,"430":0,"432":0,"433":0,"438":0,"439":0,"448":0,"456":0,"457":0,"460":0,"461":0,"464":0,"465":0,"466":0,"467":0,"470":0,"471":0,"474":0,"475":0,"479":0,"480":0,"482":0,"485":0,"495":0,"496":0,"497":0,"500":0,"502":0,"503":0,"506":0,"507":0,"510":0,"511":0,"512":0,"516":0,"520":1}},"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/mime-node/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/mime-node/index.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":0,"192":0,"193":0,"194":0,"195":0,"196":0,"197":0,"198":0,"199":0,"200":0,"201":0,"202":0,"203":0,"204":0,"205":0,"206":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":0,"213":0,"214":0,"215":0,"216":0,"217":0,"218":0,"219":0,"220":0,"221":0,"222":0,"223":0,"224":0,"225":0,"226":0,"227":0,"228":0,"229":0,"230":0,"231":0,"232":0,"233":0,"234":0,"235":0,"236":0,"237":0,"238":0,"239":0,"240":0,"241":0,"242":0,"243":0,"244":0,"245":0,"246":0,"247":0,"248":0,"249":0,"250":0,"251":0,"252":0,"253":0,"254":0,"255":0,"256":0,"257":0,"258":0,"259":0,"260":0,"261":0,"262":0,"263":0,"264":0,"265":0,"266":0,"267":0,"268":0,"269":0,"270":0,"271":0,"272":0,"273":0,"274":0,"275":0,"276":0,"277":0,"278":0,"279":0,"280":0,"281":0,"282":0,"283":0,"284":0,"285":0,"286":0,"287":0,"288":0,"289":0,"290":0,"291":0,"292":0,"293":0,"294":0,"295":0,"296":0,"297":0,"298":0,"299":0,"300":0,"301":0,"302":0,"303":0,"304":0,"305":0,"306":0,"307":0,"308":0,"309":0,"310":0,"311":0,"312":0,"313":0,"314":0,"315":0,"316":0,"317":0,"318":0,"319":0,"320":0,"321":0,"322":0,"323":0,"324":0,"325":0,"326":0,"327":0,"328":0,"329":0,"330":0,"331":0,"332":0,"333":0,"334":0,"335":0,"336":0,"337":0,"338":0,"339":0,"340":0,"341":0,"342":0,"343":0,"344":0,"345":0,"346":0,"347":0,"348":0,"349":0,"350":0,"351":0,"352":0,"353":0,"354":0,"355":0,"356":0,"357":0,"358":0,"359":0,"360":0,"361":0,"362":0,"363":0,"364":0,"365":0,"366":0,"367":0,"368":0,"369":0,"370":0,"371":0,"372":0,"373":0,"374":0,"375":0,"376":0,"377":0,"378":0,"379":0,"380":0,"381":0,"382":0,"383":0,"384":0,"385":0,"386":0,"387":0,"388":0,"389":0,"390":0,"391":0,"392":0,"393":0,"394":0,"395":0,"396":0,"397":0,"398":0,"399":0,"400":0,"401":0,"402":0,"403":0,"404":0,"405":0,"406":0,"407":0,"408":0,"409":0,"410":0,"411":0,"412":0,"413":0,"414":0,"415":0,"416":0,"417":0,"418":0,"419":0,"420":0,"421":0,"422":0,"423":0,"424":0,"425":0,"426":0,"427":0,"428":0,"429":0,"430":0,"431":0,"432":0,"433":0,"434":0,"435":0,"436":0,"437":0,"438":0,"439":0,"440":0,"441":0,"442":0,"443":0,"444":0,"445":0,"446":0,"447":0,"448":0,"449":0,"450":0,"451":0,"452":0,"453":0,"454":0,"455":0,"456":0,"457":0,"458":0,"459":0,"460":0,"461":0,"462":0,"463":0,"464":0,"465":0,"466":0,"467":0,"468":0,"469":0,"470":0,"471":0,"472":0,"473":0,"474":0,"475":0,"476":0,"477":0,"478":0,"479":0,"480":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0],"47":[0,0],"48":[0,0],"49":[0,0],"50":[0,0],"51":[0,0],"52":[0,0],"53":[0,0],"54":[0,0],"55":[0,0],"56":[0,0],"57":[0,0],"58":[0,0],"59":[0,0],"60":[0,0,0],"61":[0,0],"62":[0,0],"63":[0,0],"64":[0,0],"65":[0,0,0],"66":[0,0],"67":[0,0],"68":[0,0,0],"69":[0,0],"70":[0,0],"71":[0,0],"72":[0,0],"73":[0,0],"74":[0,0],"75":[0,0],"76":[0,0],"77":[0,0],"78":[0,0],"79":[0,0],"80":[0,0],"81":[0,0],"82":[0,0],"83":[0,0],"84":[0,0],"85":[0,0],"86":[0,0],"87":[0,0],"88":[0,0],"89":[0,0],"90":[0,0],"91":[0,0],"92":[0,0],"93":[0,0],"94":[0,0],"95":[0,0],"96":[0,0],"97":[0,0],"98":[0,0],"99":[0,0],"100":[0,0],"101":[0,0],"102":[0,0],"103":[0,0],"104":[0,0,0],"105":[0,0],"106":[0,0],"107":[0,0],"108":[0,0],"109":[0,0],"110":[0,0],"111":[0,0],"112":[0,0],"113":[0,0],"114":[0,0,0],"115":[0,0],"116":[0,0],"117":[0,0],"118":[0,0],"119":[0,0],"120":[0,0],"121":[0,0],"122":[0,0],"123":[0,0],"124":[0,0],"125":[0,0],"126":[0,0,0],"127":[0,0,0,0,0,0,0,0,0,0,0,0],"128":[0,0],"129":[0,0],"130":[0,0],"131":[0,0],"132":[0,0],"133":[0,0],"134":[0,0],"135":[0,0],"136":[0,0],"137":[0,0],"138":[0,0],"139":[0,0],"140":[0,0],"141":[0,0],"142":[0,0],"143":[0,0],"144":[0,0],"145":[0,0],"146":[0,0],"147":[0,0],"148":[0,0],"149":[0,0],"150":[0,0],"151":[0,0],"152":[0,0],"153":[0,0],"154":[0,0],"155":[0,0,0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0},"fnMap":{"1":{"name":"(anonymous_1)","line":33,"loc":{"start":{"line":33,"column":15},"end":{"line":33,"column":38}}},"2":{"name":"(anonymous_2)","line":161,"loc":{"start":{"line":161,"column":15},"end":{"line":161,"column":38}}},"3":{"name":"(anonymous_3)","line":178,"loc":{"start":{"line":178,"column":15},"end":{"line":178,"column":27}}},"4":{"name":"(anonymous_4)","line":197,"loc":{"start":{"line":197,"column":11},"end":{"line":197,"column":18}}},"5":{"name":"(anonymous_5)","line":224,"loc":{"start":{"line":224,"column":10},"end":{"line":224,"column":13}}},"6":{"name":"(anonymous_6)","line":248,"loc":{"start":{"line":248,"column":13},"end":{"line":248,"column":26}}},"7":{"name":"(anonymous_7)","line":314,"loc":{"start":{"line":314,"column":13},"end":{"line":314,"column":26}}},"8":{"name":"(anonymous_8)","line":356,"loc":{"start":{"line":356,"column":13},"end":{"line":356,"column":19}}},"9":{"name":"(anonymous_9)","line":373,"loc":{"start":{"line":373,"column":14},"end":{"line":373,"column":24}}},"10":{"name":"(anonymous_10)","line":393,"loc":{"start":{"line":393,"column":9},"end":{"line":393,"column":20}}},"11":{"name":"(anonymous_11)","line":431,"loc":{"start":{"line":431,"column":23},"end":{"line":431,"column":26}}},"12":{"name":"(anonymous_12)","line":462,"loc":{"start":{"line":462,"column":16},"end":{"line":462,"column":19}}},"13":{"name":"(anonymous_13)","line":573,"loc":{"start":{"line":573,"column":20},"end":{"line":573,"column":30}}},"14":{"name":"(anonymous_14)","line":618,"loc":{"start":{"line":618,"column":13},"end":{"line":618,"column":25}}},"15":{"name":"(anonymous_15)","line":630,"loc":{"start":{"line":630,"column":15},"end":{"line":630,"column":29}}},"16":{"name":"(anonymous_16)","line":634,"loc":{"start":{"line":634,"column":10},"end":{"line":634,"column":40}}},"17":{"name":"(anonymous_17)","line":782,"loc":{"start":{"line":782,"column":15},"end":{"line":782,"column":26}}},"18":{"name":"(anonymous_18)","line":821,"loc":{"start":{"line":821,"column":16},"end":{"line":821,"column":19}}},"19":{"name":"(anonymous_19)","line":843,"loc":{"start":{"line":843,"column":15},"end":{"line":843,"column":18}}},"20":{"name":"(anonymous_20)","line":874,"loc":{"start":{"line":874,"column":13},"end":{"line":874,"column":16}}},"21":{"name":"(anonymous_21)","line":889,"loc":{"start":{"line":889,"column":10},"end":{"line":889,"column":16}}},"22":{"name":"(anonymous_22)","line":913,"loc":{"start":{"line":913,"column":14},"end":{"line":913,"column":24}}},"23":{"name":"(anonymous_23)","line":955,"loc":{"start":{"line":955,"column":19},"end":{"line":955,"column":31}}},"24":{"name":"(anonymous_24)","line":972,"loc":{"start":{"line":972,"column":23},"end":{"line":972,"column":29}}},"25":{"name":"(anonymous_25)","line":989,"loc":{"start":{"line":989,"column":22},"end":{"line":989,"column":35}}},"26":{"name":"(anonymous_26)","line":1006,"loc":{"start":{"line":1006,"column":21},"end":{"line":1006,"column":24}}},"27":{"name":"(anonymous_27)","line":1016,"loc":{"start":{"line":1016,"column":22},"end":{"line":1016,"column":35}}},"28":{"name":"(anonymous_28)","line":1084,"loc":{"start":{"line":1084,"column":21},"end":{"line":1084,"column":45}}},"29":{"name":"(anonymous_29)","line":1118,"loc":{"start":{"line":1118,"column":21},"end":{"line":1118,"column":31}}},"30":{"name":"(anonymous_30)","line":1139,"loc":{"start":{"line":1139,"column":22},"end":{"line":1139,"column":29}}},"31":{"name":"(anonymous_31)","line":1156,"loc":{"start":{"line":1156,"column":16},"end":{"line":1156,"column":24}}},"32":{"name":"(anonymous_32)","line":1166,"loc":{"start":{"line":1166,"column":20},"end":{"line":1166,"column":28}}},"33":{"name":"(anonymous_33)","line":1190,"loc":{"start":{"line":1190,"column":22},"end":{"line":1190,"column":25}}}},"statementMap":{"1":{"start":{"line":5,"column":0},"end":{"line":5,"column":33}},"2":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"3":{"start":{"line":7,"column":0},"end":{"line":7,"column":25}},"4":{"start":{"line":8,"column":0},"end":{"line":8,"column":37}},"5":{"start":{"line":9,"column":0},"end":{"line":9,"column":50}},"6":{"start":{"line":11,"column":0},"end":{"line":11,"column":43}},"7":{"start":{"line":12,"column":0},"end":{"line":12,"column":28}},"8":{"start":{"line":13,"column":0},"end":{"line":13,"column":36}},"9":{"start":{"line":14,"column":0},"end":{"line":14,"column":50}},"10":{"start":{"line":15,"column":0},"end":{"line":15,"column":34}},"11":{"start":{"line":16,"column":0},"end":{"line":16,"column":46}},"12":{"start":{"line":34,"column":8},"end":{"line":34,"column":29}},"13":{"start":{"line":36,"column":8},"end":{"line":36,"column":32}},"14":{"start":{"line":41,"column":8},"end":{"line":41,"column":90}},"15":{"start":{"line":42,"column":8},"end":{"line":42,"column":65}},"16":{"start":{"line":44,"column":8},"end":{"line":44,"column":61}},"17":{"start":{"line":45,"column":8},"end":{"line":45,"column":59}},"18":{"start":{"line":50,"column":8},"end":{"line":50,"column":31}},"19":{"start":{"line":55,"column":8},"end":{"line":55,"column":49}},"20":{"start":{"line":60,"column":8},"end":{"line":60,"column":41}},"21":{"start":{"line":66,"column":8},"end":{"line":74,"column":9}},"22":{"start":{"line":70,"column":12},"end":{"line":70,"column":45}},"23":{"start":{"line":71,"column":12},"end":{"line":73,"column":13}},"24":{"start":{"line":72,"column":16},"end":{"line":72,"column":87}},"25":{"start":{"line":79,"column":8},"end":{"line":79,"column":99}},"26":{"start":{"line":84,"column":8},"end":{"line":84,"column":45}},"27":{"start":{"line":89,"column":8},"end":{"line":89,"column":41}},"28":{"start":{"line":94,"column":8},"end":{"line":94,"column":29}},"29":{"start":{"line":99,"column":8},"end":{"line":99,"column":51}},"30":{"start":{"line":104,"column":8},"end":{"line":104,"column":27}},"31":{"start":{"line":110,"column":8},"end":{"line":110,"column":34}},"32":{"start":{"line":116,"column":8},"end":{"line":116,"column":35}},"33":{"start":{"line":122,"column":8},"end":{"line":122,"column":31}},"34":{"start":{"line":128,"column":8},"end":{"line":128,"column":26}},"35":{"start":{"line":135,"column":8},"end":{"line":135,"column":30}},"36":{"start":{"line":142,"column":8},"end":{"line":142,"column":32}},"37":{"start":{"line":147,"column":8},"end":{"line":149,"column":9}},"38":{"start":{"line":148,"column":12},"end":{"line":148,"column":56}},"39":{"start":{"line":162,"column":8},"end":{"line":165,"column":9}},"40":{"start":{"line":163,"column":12},"end":{"line":163,"column":34}},"41":{"start":{"line":164,"column":12},"end":{"line":164,"column":36}},"42":{"start":{"line":166,"column":8},"end":{"line":166,"column":54}},"43":{"start":{"line":167,"column":8},"end":{"line":167,"column":31}},"44":{"start":{"line":168,"column":8},"end":{"line":168,"column":20}},"45":{"start":{"line":180,"column":8},"end":{"line":183,"column":9}},"46":{"start":{"line":181,"column":12},"end":{"line":181,"column":47}},"47":{"start":{"line":182,"column":12},"end":{"line":182,"column":60}},"48":{"start":{"line":185,"column":8},"end":{"line":185,"column":36}},"49":{"start":{"line":187,"column":8},"end":{"line":187,"column":40}},"50":{"start":{"line":188,"column":8},"end":{"line":188,"column":25}},"51":{"start":{"line":198,"column":8},"end":{"line":200,"column":9}},"52":{"start":{"line":199,"column":12},"end":{"line":199,"column":24}},"53":{"start":{"line":202,"column":8},"end":{"line":214,"column":11}},"54":{"start":{"line":203,"column":12},"end":{"line":213,"column":13}},"55":{"start":{"line":205,"column":16},"end":{"line":205,"column":46}},"56":{"start":{"line":206,"column":16},"end":{"line":206,"column":50}},"57":{"start":{"line":207,"column":16},"end":{"line":207,"column":44}},"58":{"start":{"line":209,"column":16},"end":{"line":209,"column":37}},"59":{"start":{"line":210,"column":16},"end":{"line":210,"column":44}},"60":{"start":{"line":212,"column":16},"end":{"line":212,"column":53}},"61":{"start":{"line":216,"column":8},"end":{"line":216,"column":20}},"62":{"start":{"line":225,"column":8},"end":{"line":227,"column":9}},"63":{"start":{"line":226,"column":12},"end":{"line":226,"column":24}},"64":{"start":{"line":229,"column":8},"end":{"line":236,"column":9}},"65":{"start":{"line":230,"column":12},"end":{"line":235,"column":13}},"66":{"start":{"line":231,"column":16},"end":{"line":231,"column":56}},"67":{"start":{"line":232,"column":16},"end":{"line":232,"column":44}},"68":{"start":{"line":233,"column":16},"end":{"line":233,"column":37}},"69":{"start":{"line":234,"column":16},"end":{"line":234,"column":28}},"70":{"start":{"line":249,"column":8},"end":{"line":250,"column":24}},"71":{"start":{"line":253,"column":8},"end":{"line":271,"column":9}},"72":{"start":{"line":255,"column":12},"end":{"line":269,"column":13}},"73":{"start":{"line":256,"column":16},"end":{"line":256,"column":51}},"74":{"start":{"line":259,"column":17},"end":{"line":269,"column":13}},"75":{"start":{"line":260,"column":16},"end":{"line":262,"column":19}},"76":{"start":{"line":261,"column":20},"end":{"line":261,"column":51}},"77":{"start":{"line":266,"column":16},"end":{"line":268,"column":19}},"78":{"start":{"line":267,"column":20},"end":{"line":267,"column":46}},"79":{"start":{"line":270,"column":12},"end":{"line":270,"column":24}},"80":{"start":{"line":273,"column":8},"end":{"line":273,"column":44}},"81":{"start":{"line":275,"column":8},"end":{"line":278,"column":10}},"82":{"start":{"line":281,"column":8},"end":{"line":294,"column":9}},"83":{"start":{"line":282,"column":12},"end":{"line":293,"column":13}},"84":{"start":{"line":283,"column":16},"end":{"line":292,"column":17}},"85":{"start":{"line":285,"column":20},"end":{"line":285,"column":51}},"86":{"start":{"line":286,"column":20},"end":{"line":286,"column":33}},"87":{"start":{"line":289,"column":20},"end":{"line":289,"column":47}},"88":{"start":{"line":290,"column":20},"end":{"line":290,"column":24}},"89":{"start":{"line":291,"column":20},"end":{"line":291,"column":26}},"90":{"start":{"line":297,"column":8},"end":{"line":299,"column":9}},"91":{"start":{"line":298,"column":12},"end":{"line":298,"column":44}},"92":{"start":{"line":301,"column":8},"end":{"line":301,"column":20}},"93":{"start":{"line":317,"column":8},"end":{"line":340,"column":9}},"94":{"start":{"line":319,"column":12},"end":{"line":333,"column":13}},"95":{"start":{"line":320,"column":16},"end":{"line":320,"column":51}},"96":{"start":{"line":323,"column":17},"end":{"line":333,"column":13}},"97":{"start":{"line":324,"column":16},"end":{"line":326,"column":19}},"98":{"start":{"line":325,"column":20},"end":{"line":325,"column":51}},"99":{"start":{"line":330,"column":16},"end":{"line":332,"column":19}},"100":{"start":{"line":331,"column":20},"end":{"line":331,"column":46}},"101":{"start":{"line":334,"column":12},"end":{"line":334,"column":24}},"102":{"start":{"line":335,"column":15},"end":{"line":340,"column":9}},"103":{"start":{"line":336,"column":12},"end":{"line":338,"column":15}},"104":{"start":{"line":337,"column":16},"end":{"line":337,"column":41}},"105":{"start":{"line":339,"column":12},"end":{"line":339,"column":24}},"106":{"start":{"line":342,"column":8},"end":{"line":345,"column":11}},"107":{"start":{"line":347,"column":8},"end":{"line":347,"column":20}},"108":{"start":{"line":357,"column":8},"end":{"line":357,"column":44}},"109":{"start":{"line":358,"column":8},"end":{"line":362,"column":9}},"110":{"start":{"line":359,"column":12},"end":{"line":361,"column":13}},"111":{"start":{"line":360,"column":16},"end":{"line":360,"column":46}},"112":{"start":{"line":374,"column":8},"end":{"line":374,"column":31}},"113":{"start":{"line":375,"column":8},"end":{"line":389,"column":9}},"114":{"start":{"line":378,"column":12},"end":{"line":381,"column":14}},"115":{"start":{"line":379,"column":16},"end":{"line":379,"column":80}},"116":{"start":{"line":380,"column":16},"end":{"line":380,"column":35}},"117":{"start":{"line":382,"column":12},"end":{"line":382,"column":66}},"118":{"start":{"line":383,"column":15},"end":{"line":389,"column":9}},"119":{"start":{"line":384,"column":12},"end":{"line":384,"column":68}},"120":{"start":{"line":385,"column":12},"end":{"line":388,"column":13}},"121":{"start":{"line":387,"column":16},"end":{"line":387,"column":42}},"122":{"start":{"line":390,"column":8},"end":{"line":390,"column":20}},"123":{"start":{"line":394,"column":8},"end":{"line":394,"column":45}},"124":{"start":{"line":395,"column":8},"end":{"line":395,"column":21}},"125":{"start":{"line":396,"column":8},"end":{"line":396,"column":23}},"126":{"start":{"line":397,"column":8},"end":{"line":397,"column":29}},"127":{"start":{"line":399,"column":8},"end":{"line":406,"column":11}},"128":{"start":{"line":400,"column":12},"end":{"line":400,"column":22}},"129":{"start":{"line":402,"column":12},"end":{"line":405,"column":13}},"130":{"start":{"line":403,"column":16},"end":{"line":403,"column":32}},"131":{"start":{"line":404,"column":16},"end":{"line":404,"column":39}},"132":{"start":{"line":408,"column":8},"end":{"line":415,"column":11}},"133":{"start":{"line":409,"column":12},"end":{"line":411,"column":13}},"134":{"start":{"line":410,"column":16},"end":{"line":410,"column":23}},"135":{"start":{"line":412,"column":12},"end":{"line":412,"column":28}},"136":{"start":{"line":414,"column":12},"end":{"line":414,"column":33}},"137":{"start":{"line":417,"column":8},"end":{"line":428,"column":11}},"138":{"start":{"line":418,"column":12},"end":{"line":420,"column":13}},"139":{"start":{"line":419,"column":16},"end":{"line":419,"column":23}},"140":{"start":{"line":421,"column":12},"end":{"line":421,"column":28}},"141":{"start":{"line":423,"column":12},"end":{"line":426,"column":13}},"142":{"start":{"line":424,"column":16},"end":{"line":424,"column":32}},"143":{"start":{"line":425,"column":16},"end":{"line":425,"column":39}},"144":{"start":{"line":427,"column":12},"end":{"line":427,"column":62}},"145":{"start":{"line":432,"column":8},"end":{"line":432,"column":37}},"146":{"start":{"line":433,"column":8},"end":{"line":433,"column":97}},"147":{"start":{"line":435,"column":8},"end":{"line":453,"column":9}},"148":{"start":{"line":436,"column":12},"end":{"line":436,"column":115}},"149":{"start":{"line":437,"column":12},"end":{"line":452,"column":13}},"150":{"start":{"line":438,"column":16},"end":{"line":451,"column":17}},"151":{"start":{"line":440,"column":20},"end":{"line":448,"column":21}},"152":{"start":{"line":441,"column":24},"end":{"line":441,"column":50}},"153":{"start":{"line":442,"column":27},"end":{"line":448,"column":21}},"154":{"start":{"line":444,"column":24},"end":{"line":444,"column":119}},"155":{"start":{"line":447,"column":24},"end":{"line":447,"column":105}},"156":{"start":{"line":449,"column":23},"end":{"line":451,"column":17}},"157":{"start":{"line":450,"column":20},"end":{"line":450,"column":68}},"158":{"start":{"line":454,"column":8},"end":{"line":454,"column":32}},"159":{"start":{"line":463,"column":8},"end":{"line":463,"column":58}},"160":{"start":{"line":464,"column":8},"end":{"line":464,"column":25}},"161":{"start":{"line":466,"column":8},"end":{"line":468,"column":9}},"162":{"start":{"line":467,"column":12},"end":{"line":467,"column":74}},"163":{"start":{"line":470,"column":8},"end":{"line":472,"column":9}},"164":{"start":{"line":471,"column":12},"end":{"line":471,"column":64}},"165":{"start":{"line":475,"column":8},"end":{"line":486,"column":9}},"166":{"start":{"line":476,"column":12},"end":{"line":478,"column":13}},"167":{"start":{"line":477,"column":16},"end":{"line":477,"column":88}},"168":{"start":{"line":481,"column":12},"end":{"line":481,"column":29}},"169":{"start":{"line":483,"column":12},"end":{"line":485,"column":13}},"170":{"start":{"line":484,"column":16},"end":{"line":484,"column":54}},"171":{"start":{"line":488,"column":8},"end":{"line":562,"column":11}},"172":{"start":{"line":489,"column":12},"end":{"line":489,"column":33}},"173":{"start":{"line":490,"column":12},"end":{"line":490,"column":37}},"174":{"start":{"line":491,"column":12},"end":{"line":491,"column":27}},"175":{"start":{"line":492,"column":12},"end":{"line":492,"column":22}},"176":{"start":{"line":493,"column":12},"end":{"line":493,"column":29}},"177":{"start":{"line":494,"column":12},"end":{"line":494,"column":107}},"178":{"start":{"line":496,"column":12},"end":{"line":506,"column":13}},"179":{"start":{"line":497,"column":16},"end":{"line":501,"column":19}},"180":{"start":{"line":498,"column":20},"end":{"line":500,"column":21}},"181":{"start":{"line":499,"column":24},"end":{"line":499,"column":50}},"182":{"start":{"line":502,"column":16},"end":{"line":502,"column":55}},"183":{"start":{"line":503,"column":16},"end":{"line":505,"column":17}},"184":{"start":{"line":504,"column":20},"end":{"line":504,"column":27}},"185":{"start":{"line":508,"column":12},"end":{"line":512,"column":13}},"186":{"start":{"line":510,"column":16},"end":{"line":510,"column":49}},"187":{"start":{"line":511,"column":16},"end":{"line":511,"column":23}},"188":{"start":{"line":514,"column":12},"end":{"line":552,"column":13}},"189":{"start":{"line":516,"column":20},"end":{"line":516,"column":67}},"190":{"start":{"line":517,"column":20},"end":{"line":519,"column":21}},"191":{"start":{"line":518,"column":24},"end":{"line":518,"column":67}},"192":{"start":{"line":520,"column":20},"end":{"line":520,"column":67}},"193":{"start":{"line":521,"column":20},"end":{"line":521,"column":26}},"194":{"start":{"line":523,"column":20},"end":{"line":523,"column":67}},"195":{"start":{"line":525,"column":20},"end":{"line":525,"column":56}},"196":{"start":{"line":527,"column":20},"end":{"line":529,"column":21}},"197":{"start":{"line":528,"column":24},"end":{"line":528,"column":60}},"198":{"start":{"line":531,"column":20},"end":{"line":531,"column":67}},"199":{"start":{"line":533,"column":20},"end":{"line":544,"column":21}},"200":{"start":{"line":537,"column":24},"end":{"line":537,"column":65}},"201":{"start":{"line":539,"column":24},"end":{"line":542,"column":25}},"202":{"start":{"line":541,"column":28},"end":{"line":541,"column":54}},"203":{"start":{"line":543,"column":24},"end":{"line":543,"column":51}},"204":{"start":{"line":545,"column":20},"end":{"line":545,"column":26}},"205":{"start":{"line":547,"column":20},"end":{"line":550,"column":21}},"206":{"start":{"line":549,"column":24},"end":{"line":549,"column":31}},"207":{"start":{"line":551,"column":20},"end":{"line":551,"column":26}},"208":{"start":{"line":554,"column":12},"end":{"line":554,"column":56}},"209":{"start":{"line":557,"column":12},"end":{"line":559,"column":13}},"210":{"start":{"line":558,"column":16},"end":{"line":558,"column":23}},"211":{"start":{"line":561,"column":12},"end":{"line":561,"column":70}},"212":{"start":{"line":564,"column":8},"end":{"line":564,"column":36}},"213":{"start":{"line":574,"column":8},"end":{"line":574,"column":32}},"214":{"start":{"line":576,"column":8},"end":{"line":576,"column":46}},"215":{"start":{"line":577,"column":8},"end":{"line":577,"column":34}},"216":{"start":{"line":578,"column":8},"end":{"line":578,"column":22}},"217":{"start":{"line":580,"column":8},"end":{"line":586,"column":11}},"218":{"start":{"line":581,"column":12},"end":{"line":584,"column":13}},"219":{"start":{"line":582,"column":16},"end":{"line":582,"column":48}},"220":{"start":{"line":583,"column":16},"end":{"line":583,"column":23}},"221":{"start":{"line":585,"column":12},"end":{"line":585,"column":25}},"222":{"start":{"line":588,"column":8},"end":{"line":594,"column":9}},"223":{"start":{"line":589,"column":12},"end":{"line":589,"column":112}},"224":{"start":{"line":590,"column":12},"end":{"line":592,"column":15}},"225":{"start":{"line":591,"column":16},"end":{"line":591,"column":45}},"226":{"start":{"line":593,"column":12},"end":{"line":593,"column":56}},"227":{"start":{"line":597,"column":8},"end":{"line":597,"column":38}},"228":{"start":{"line":598,"column":8},"end":{"line":600,"column":11}},"229":{"start":{"line":599,"column":12},"end":{"line":599,"column":41}},"230":{"start":{"line":601,"column":8},"end":{"line":601,"column":52}},"231":{"start":{"line":604,"column":8},"end":{"line":607,"column":9}},"232":{"start":{"line":605,"column":12},"end":{"line":605,"column":46}},"233":{"start":{"line":606,"column":12},"end":{"line":606,"column":51}},"234":{"start":{"line":609,"column":8},"end":{"line":609,"column":28}},"235":{"start":{"line":619,"column":8},"end":{"line":619,"column":41}},"236":{"start":{"line":631,"column":8},"end":{"line":631,"column":45}},"237":{"start":{"line":635,"column":8},"end":{"line":635,"column":58}},"238":{"start":{"line":636,"column":8},"end":{"line":636,"column":26}},"239":{"start":{"line":637,"column":8},"end":{"line":637,"column":24}},"240":{"start":{"line":640,"column":8},"end":{"line":640,"column":29}},"241":{"start":{"line":641,"column":8},"end":{"line":647,"column":10}},"242":{"start":{"line":642,"column":12},"end":{"line":644,"column":13}},"243":{"start":{"line":643,"column":16},"end":{"line":643,"column":23}},"244":{"start":{"line":645,"column":12},"end":{"line":645,"column":28}},"245":{"start":{"line":646,"column":12},"end":{"line":646,"column":22}},"246":{"start":{"line":651,"column":8},"end":{"line":673,"column":10}},"247":{"start":{"line":652,"column":12},"end":{"line":652,"column":28}},"248":{"start":{"line":653,"column":12},"end":{"line":666,"column":14}},"249":{"start":{"line":654,"column":16},"end":{"line":657,"column":17}},"250":{"start":{"line":655,"column":20},"end":{"line":655,"column":76}},"251":{"start":{"line":656,"column":20},"end":{"line":656,"column":38}},"252":{"start":{"line":658,"column":16},"end":{"line":658,"column":55}},"253":{"start":{"line":659,"column":16},"end":{"line":659,"column":96}},"254":{"start":{"line":660,"column":16},"end":{"line":665,"column":19}},"255":{"start":{"line":661,"column":20},"end":{"line":663,"column":21}},"256":{"start":{"line":662,"column":24},"end":{"line":662,"column":45}},"257":{"start":{"line":664,"column":20},"end":{"line":664,"column":51}},"258":{"start":{"line":668,"column":12},"end":{"line":672,"column":13}},"259":{"start":{"line":669,"column":16},"end":{"line":669,"column":47}},"260":{"start":{"line":671,"column":16},"end":{"line":671,"column":34}},"261":{"start":{"line":676,"column":8},"end":{"line":750,"column":10}},"262":{"start":{"line":677,"column":12},"end":{"line":749,"column":13}},"263":{"start":{"line":679,"column":16},"end":{"line":682,"column":17}},"264":{"start":{"line":681,"column":20},"end":{"line":681,"column":50}},"265":{"start":{"line":684,"column":16},"end":{"line":688,"column":17}},"266":{"start":{"line":685,"column":20},"end":{"line":685,"column":84}},"267":{"start":{"line":686,"column":20},"end":{"line":686,"column":69}},"268":{"start":{"line":686,"column":55},"end":{"line":686,"column":68}},"269":{"start":{"line":687,"column":20},"end":{"line":687,"column":74}},"270":{"start":{"line":690,"column":16},"end":{"line":713,"column":18}},"271":{"start":{"line":692,"column":20},"end":{"line":710,"column":21}},"272":{"start":{"line":693,"column":24},"end":{"line":693,"column":106}},"273":{"start":{"line":695,"column":24},"end":{"line":697,"column":27}},"274":{"start":{"line":698,"column":24},"end":{"line":698,"column":60}},"275":{"start":{"line":699,"column":24},"end":{"line":699,"column":74}},"276":{"start":{"line":699,"column":59},"end":{"line":699,"column":72}},"277":{"start":{"line":701,"column":24},"end":{"line":701,"column":68}},"278":{"start":{"line":702,"column":24},"end":{"line":702,"column":56}},"279":{"start":{"line":705,"column":24},"end":{"line":705,"column":68}},"280":{"start":{"line":706,"column":24},"end":{"line":708,"column":27}},"281":{"start":{"line":709,"column":24},"end":{"line":709,"column":58}},"282":{"start":{"line":712,"column":20},"end":{"line":712,"column":68}},"283":{"start":{"line":712,"column":53},"end":{"line":712,"column":66}},"284":{"start":{"line":715,"column":16},"end":{"line":745,"column":17}},"285":{"start":{"line":716,"column":20},"end":{"line":716,"column":36}},"286":{"start":{"line":717,"column":20},"end":{"line":717,"column":37}},"287":{"start":{"line":718,"column":20},"end":{"line":718,"column":41}},"288":{"start":{"line":719,"column":20},"end":{"line":719,"column":69}},"289":{"start":{"line":720,"column":20},"end":{"line":726,"column":23}},"290":{"start":{"line":721,"column":24},"end":{"line":723,"column":25}},"291":{"start":{"line":722,"column":28},"end":{"line":722,"column":35}},"292":{"start":{"line":724,"column":24},"end":{"line":724,"column":40}},"293":{"start":{"line":725,"column":24},"end":{"line":725,"column":38}},"294":{"start":{"line":727,"column":20},"end":{"line":733,"column":23}},"295":{"start":{"line":728,"column":24},"end":{"line":728,"column":34}},"296":{"start":{"line":729,"column":24},"end":{"line":732,"column":25}},"297":{"start":{"line":730,"column":28},"end":{"line":730,"column":47}},"298":{"start":{"line":731,"column":28},"end":{"line":731,"column":53}},"299":{"start":{"line":734,"column":20},"end":{"line":742,"column":23}},"300":{"start":{"line":735,"column":24},"end":{"line":737,"column":25}},"301":{"start":{"line":736,"column":28},"end":{"line":736,"column":35}},"302":{"start":{"line":738,"column":24},"end":{"line":738,"column":40}},"303":{"start":{"line":739,"column":24},"end":{"line":739,"column":54}},"304":{"start":{"line":740,"column":24},"end":{"line":740,"column":86}},"305":{"start":{"line":741,"column":24},"end":{"line":741,"column":51}},"306":{"start":{"line":744,"column":20},"end":{"line":744,"column":47}},"307":{"start":{"line":746,"column":16},"end":{"line":746,"column":23}},"308":{"start":{"line":748,"column":16},"end":{"line":748,"column":46}},"309":{"start":{"line":752,"column":8},"end":{"line":774,"column":9}},"310":{"start":{"line":753,"column":12},"end":{"line":770,"column":15}},"311":{"start":{"line":754,"column":16},"end":{"line":757,"column":17}},"312":{"start":{"line":756,"column":20},"end":{"line":756,"column":47}},"313":{"start":{"line":760,"column":16},"end":{"line":762,"column":17}},"314":{"start":{"line":761,"column":20},"end":{"line":761,"column":81}},"315":{"start":{"line":764,"column":16},"end":{"line":764,"column":53}},"316":{"start":{"line":765,"column":16},"end":{"line":767,"column":19}},"317":{"start":{"line":768,"column":16},"end":{"line":768,"column":72}},"318":{"start":{"line":768,"column":39},"end":{"line":768,"column":70}},"319":{"start":{"line":769,"column":16},"end":{"line":769,"column":40}},"320":{"start":{"line":772,"column":12},"end":{"line":772,"column":65}},"321":{"start":{"line":773,"column":12},"end":{"line":773,"column":38}},"322":{"start":{"line":783,"column":8},"end":{"line":783,"column":17}},"323":{"start":{"line":785,"column":8},"end":{"line":788,"column":10}},"324":{"start":{"line":790,"column":8},"end":{"line":797,"column":9}},"325":{"start":{"line":791,"column":12},"end":{"line":791,"column":22}},"326":{"start":{"line":792,"column":12},"end":{"line":792,"column":78}},"327":{"start":{"line":793,"column":12},"end":{"line":793,"column":70}},"328":{"start":{"line":793,"column":42},"end":{"line":793,"column":68}},"329":{"start":{"line":794,"column":12},"end":{"line":796,"column":13}},"330":{"start":{"line":795,"column":16},"end":{"line":795,"column":54}},"331":{"start":{"line":798,"column":8},"end":{"line":802,"column":11}},"332":{"start":{"line":799,"column":12},"end":{"line":801,"column":13}},"333":{"start":{"line":800,"column":16},"end":{"line":800,"column":95}},"334":{"start":{"line":804,"column":8},"end":{"line":804,"column":95}},"335":{"start":{"line":804,"column":56},"end":{"line":804,"column":66}},"336":{"start":{"line":804,"column":86},"end":{"line":804,"column":93}},"337":{"start":{"line":806,"column":8},"end":{"line":806,"column":57}},"338":{"start":{"line":807,"column":8},"end":{"line":811,"column":11}},"339":{"start":{"line":808,"column":12},"end":{"line":810,"column":13}},"340":{"start":{"line":809,"column":16},"end":{"line":809,"column":52}},"341":{"start":{"line":813,"column":8},"end":{"line":813,"column":20}},"342":{"start":{"line":822,"column":8},"end":{"line":822,"column":27}},"343":{"start":{"line":824,"column":8},"end":{"line":833,"column":11}},"344":{"start":{"line":825,"column":12},"end":{"line":825,"column":47}},"345":{"start":{"line":826,"column":12},"end":{"line":832,"column":13}},"346":{"start":{"line":827,"column":16},"end":{"line":829,"column":17}},"347":{"start":{"line":828,"column":20},"end":{"line":828,"column":40}},"348":{"start":{"line":831,"column":16},"end":{"line":831,"column":91}},"349":{"start":{"line":835,"column":8},"end":{"line":835,"column":25}},"350":{"start":{"line":844,"column":8},"end":{"line":846,"column":9}},"351":{"start":{"line":845,"column":12},"end":{"line":845,"column":34}},"352":{"start":{"line":848,"column":8},"end":{"line":851,"column":10}},"353":{"start":{"line":852,"column":8},"end":{"line":862,"column":11}},"354":{"start":{"line":853,"column":12},"end":{"line":853,"column":26}},"355":{"start":{"line":854,"column":12},"end":{"line":861,"column":13}},"356":{"start":{"line":855,"column":16},"end":{"line":855,"column":81}},"357":{"start":{"line":856,"column":16},"end":{"line":858,"column":17}},"358":{"start":{"line":857,"column":20},"end":{"line":857,"column":52}},"359":{"start":{"line":859,"column":19},"end":{"line":861,"column":13}},"360":{"start":{"line":860,"column":16},"end":{"line":860,"column":88}},"361":{"start":{"line":864,"column":8},"end":{"line":864,"column":56}},"362":{"start":{"line":864,"column":44},"end":{"line":864,"column":54}},"363":{"start":{"line":866,"column":8},"end":{"line":866,"column":24}},"364":{"start":{"line":875,"column":8},"end":{"line":875,"column":53}},"365":{"start":{"line":877,"column":8},"end":{"line":880,"column":9}},"366":{"start":{"line":878,"column":12},"end":{"line":878,"column":50}},"367":{"start":{"line":879,"column":12},"end":{"line":879,"column":52}},"368":{"start":{"line":881,"column":8},"end":{"line":881,"column":25}},"369":{"start":{"line":890,"column":8},"end":{"line":890,"column":24}},"370":{"start":{"line":892,"column":8},"end":{"line":900,"column":9}},"371":{"start":{"line":895,"column":12},"end":{"line":898,"column":14}},"372":{"start":{"line":896,"column":16},"end":{"line":896,"column":77}},"373":{"start":{"line":897,"column":16},"end":{"line":897,"column":32}},"374":{"start":{"line":899,"column":12},"end":{"line":899,"column":63}},"375":{"start":{"line":902,"column":8},"end":{"line":902,"column":20}},"376":{"start":{"line":914,"column":8},"end":{"line":914,"column":26}},"377":{"start":{"line":916,"column":8},"end":{"line":945,"column":9}},"378":{"start":{"line":918,"column":12},"end":{"line":918,"column":46}},"379":{"start":{"line":919,"column":12},"end":{"line":919,"column":74}},"380":{"start":{"line":919,"column":31},"end":{"line":919,"column":72}},"381":{"start":{"line":920,"column":12},"end":{"line":920,"column":33}},"382":{"start":{"line":921,"column":15},"end":{"line":945,"column":9}},"383":{"start":{"line":923,"column":12},"end":{"line":923,"column":27}},"384":{"start":{"line":924,"column":15},"end":{"line":945,"column":9}},"385":{"start":{"line":925,"column":12},"end":{"line":929,"column":13}},"386":{"start":{"line":926,"column":16},"end":{"line":926,"column":50}},"387":{"start":{"line":927,"column":16},"end":{"line":927,"column":119}},"388":{"start":{"line":927,"column":35},"end":{"line":927,"column":117}},"389":{"start":{"line":928,"column":16},"end":{"line":928,"column":37}},"390":{"start":{"line":931,"column":12},"end":{"line":931,"column":53}},"391":{"start":{"line":932,"column":15},"end":{"line":945,"column":9}},"392":{"start":{"line":933,"column":12},"end":{"line":937,"column":13}},"393":{"start":{"line":934,"column":16},"end":{"line":934,"column":50}},"394":{"start":{"line":935,"column":16},"end":{"line":935,"column":118}},"395":{"start":{"line":935,"column":35},"end":{"line":935,"column":116}},"396":{"start":{"line":936,"column":16},"end":{"line":936,"column":37}},"397":{"start":{"line":939,"column":12},"end":{"line":939,"column":39}},"398":{"start":{"line":942,"column":12},"end":{"line":942,"column":46}},"399":{"start":{"line":943,"column":12},"end":{"line":943,"column":65}},"400":{"start":{"line":943,"column":31},"end":{"line":943,"column":63}},"401":{"start":{"line":944,"column":12},"end":{"line":944,"column":33}},"402":{"start":{"line":956,"column":8},"end":{"line":963,"column":12}},"403":{"start":{"line":957,"column":12},"end":{"line":961,"column":13}},"404":{"start":{"line":958,"column":16},"end":{"line":958,"column":74}},"405":{"start":{"line":959,"column":16},"end":{"line":959,"column":50}},"406":{"start":{"line":960,"column":16},"end":{"line":960,"column":33}},"407":{"start":{"line":962,"column":12},"end":{"line":962,"column":42}},"408":{"start":{"line":973,"column":8},"end":{"line":980,"column":60}},"409":{"start":{"line":978,"column":89},"end":{"line":978,"column":104}},"410":{"start":{"line":990,"column":8},"end":{"line":990,"column":65}},"411":{"start":{"line":992,"column":8},"end":{"line":992,"column":115}},"412":{"start":{"line":992,"column":77},"end":{"line":992,"column":113}},"413":{"start":{"line":994,"column":8},"end":{"line":998,"column":9}},"414":{"start":{"line":995,"column":12},"end":{"line":995,"column":129}},"415":{"start":{"line":997,"column":12},"end":{"line":997,"column":34}},"416":{"start":{"line":1007,"column":8},"end":{"line":1007,"column":105}},"417":{"start":{"line":1017,"column":8},"end":{"line":1017,"column":44}},"418":{"start":{"line":1019,"column":8},"end":{"line":1074,"column":9}},"419":{"start":{"line":1028,"column":16},"end":{"line":1028,"column":75}},"420":{"start":{"line":1034,"column":16},"end":{"line":1034,"column":75}},"421":{"start":{"line":1036,"column":16},"end":{"line":1038,"column":17}},"422":{"start":{"line":1037,"column":20},"end":{"line":1037,"column":40}},"423":{"start":{"line":1040,"column":16},"end":{"line":1042,"column":17}},"424":{"start":{"line":1041,"column":20},"end":{"line":1041,"column":40}},"425":{"start":{"line":1043,"column":16},"end":{"line":1043,"column":29}},"426":{"start":{"line":1047,"column":16},"end":{"line":1058,"column":19}},"427":{"start":{"line":1048,"column":20},"end":{"line":1048,"column":82}},"428":{"start":{"line":1049,"column":20},"end":{"line":1049,"column":95}},"429":{"start":{"line":1049,"column":58},"end":{"line":1049,"column":80}},"430":{"start":{"line":1051,"column":20},"end":{"line":1053,"column":21}},"431":{"start":{"line":1052,"column":24},"end":{"line":1052,"column":40}},"432":{"start":{"line":1054,"column":20},"end":{"line":1056,"column":21}},"433":{"start":{"line":1055,"column":24},"end":{"line":1055,"column":40}},"434":{"start":{"line":1057,"column":20},"end":{"line":1057,"column":31}},"435":{"start":{"line":1060,"column":16},"end":{"line":1060,"column":46}},"436":{"start":{"line":1063,"column":16},"end":{"line":1065,"column":17}},"437":{"start":{"line":1064,"column":20},"end":{"line":1064,"column":71}},"438":{"start":{"line":1067,"column":16},"end":{"line":1067,"column":75}},"439":{"start":{"line":1068,"column":16},"end":{"line":1068,"column":48}},"440":{"start":{"line":1071,"column":16},"end":{"line":1071,"column":75}},"441":{"start":{"line":1073,"column":16},"end":{"line":1073,"column":48}},"442":{"start":{"line":1085,"column":8},"end":{"line":1085,"column":24}},"443":{"start":{"line":1087,"column":8},"end":{"line":1087,"column":38}},"444":{"start":{"line":1089,"column":8},"end":{"line":1107,"column":11}},"445":{"start":{"line":1090,"column":12},"end":{"line":1106,"column":13}},"446":{"start":{"line":1091,"column":16},"end":{"line":1091,"column":74}},"447":{"start":{"line":1093,"column":16},"end":{"line":1097,"column":17}},"448":{"start":{"line":1094,"column":20},"end":{"line":1094,"column":49}},"449":{"start":{"line":1095,"column":23},"end":{"line":1097,"column":17}},"450":{"start":{"line":1096,"column":20},"end":{"line":1096,"column":102}},"451":{"start":{"line":1099,"column":16},"end":{"line":1103,"column":17}},"452":{"start":{"line":1100,"column":20},"end":{"line":1102,"column":21}},"453":{"start":{"line":1100,"column":48},"end":{"line":1100,"column":77}},"454":{"start":{"line":1101,"column":24},"end":{"line":1101,"column":49}},"455":{"start":{"line":1104,"column":19},"end":{"line":1106,"column":13}},"456":{"start":{"line":1105,"column":16},"end":{"line":1105,"column":168}},"457":{"start":{"line":1109,"column":8},"end":{"line":1109,"column":33}},"458":{"start":{"line":1119,"column":8},"end":{"line":1119,"column":52}},"459":{"start":{"line":1121,"column":8},"end":{"line":1121,"column":46}},"460":{"start":{"line":1122,"column":8},"end":{"line":1122,"column":45}},"461":{"start":{"line":1123,"column":8},"end":{"line":1123,"column":48}},"462":{"start":{"line":1130,"column":8},"end":{"line":1130,"column":67}},"463":{"start":{"line":1140,"column":8},"end":{"line":1146,"column":9}},"464":{"start":{"line":1141,"column":12},"end":{"line":1145,"column":13}},"465":{"start":{"line":1142,"column":16},"end":{"line":1142,"column":68}},"466":{"start":{"line":1144,"column":16},"end":{"line":1144,"column":83}},"467":{"start":{"line":1147,"column":8},"end":{"line":1147,"column":20}},"468":{"start":{"line":1157,"column":8},"end":{"line":1157,"column":78}},"469":{"start":{"line":1167,"column":8},"end":{"line":1167,"column":41}},"470":{"start":{"line":1169,"column":8},"end":{"line":1169,"column":41}},"471":{"start":{"line":1170,"column":8},"end":{"line":1170,"column":21}},"472":{"start":{"line":1171,"column":8},"end":{"line":1171,"column":24}},"473":{"start":{"line":1173,"column":8},"end":{"line":1181,"column":9}},"474":{"start":{"line":1177,"column":12},"end":{"line":1177,"column":99}},"475":{"start":{"line":1178,"column":12},"end":{"line":1178,"column":61}},"476":{"start":{"line":1180,"column":12},"end":{"line":1180,"column":58}},"477":{"start":{"line":1182,"column":8},"end":{"line":1182,"column":24}},"478":{"start":{"line":1191,"column":8},"end":{"line":1196,"column":110}},"479":{"start":{"line":1193,"column":31},"end":{"line":1193,"column":83}},"480":{"start":{"line":1200,"column":0},"end":{"line":1200,"column":26}}},"branchMap":{"1":{"line":36,"type":"binary-expr","locations":[{"start":{"line":36,"column":18},"end":{"line":36,"column":25}},{"start":{"line":36,"column":29},"end":{"line":36,"column":31}}]},"2":{"line":41,"type":"binary-expr","locations":[{"start":{"line":41,"column":28},"end":{"line":41,"column":48}},{"start":{"line":41,"column":52},"end":{"line":41,"column":89}}]},"3":{"line":42,"type":"binary-expr","locations":[{"start":{"line":42,"column":30},"end":{"line":42,"column":52}},{"start":{"line":42,"column":56},"end":{"line":42,"column":64}}]},"4":{"line":55,"type":"binary-expr","locations":[{"start":{"line":55,"column":24},"end":{"line":55,"column":40}},{"start":{"line":55,"column":44},"end":{"line":55,"column":48}}]},"5":{"line":66,"type":"if","locations":[{"start":{"line":66,"column":8},"end":{"line":66,"column":8}},{"start":{"line":66,"column":8},"end":{"line":66,"column":8}}]},"6":{"line":71,"type":"if","locations":[{"start":{"line":71,"column":12},"end":{"line":71,"column":12}},{"start":{"line":71,"column":12},"end":{"line":71,"column":12}}]},"7":{"line":79,"type":"binary-expr","locations":[{"start":{"line":79,"column":29},"end":{"line":79,"column":49}},{"start":{"line":79,"column":53},"end":{"line":79,"column":55}}]},"8":{"line":147,"type":"if","locations":[{"start":{"line":147,"column":8},"end":{"line":147,"column":8}},{"start":{"line":147,"column":8},"end":{"line":147,"column":8}}]},"9":{"line":162,"type":"if","locations":[{"start":{"line":162,"column":8},"end":{"line":162,"column":8}},{"start":{"line":162,"column":8},"end":{"line":162,"column":8}}]},"10":{"line":162,"type":"binary-expr","locations":[{"start":{"line":162,"column":12},"end":{"line":162,"column":20}},{"start":{"line":162,"column":24},"end":{"line":162,"column":55}}]},"11":{"line":180,"type":"if","locations":[{"start":{"line":180,"column":8},"end":{"line":180,"column":8}},{"start":{"line":180,"column":8},"end":{"line":180,"column":8}}]},"12":{"line":198,"type":"if","locations":[{"start":{"line":198,"column":8},"end":{"line":198,"column":8}},{"start":{"line":198,"column":8},"end":{"line":198,"column":8}}]},"13":{"line":203,"type":"if","locations":[{"start":{"line":203,"column":12},"end":{"line":203,"column":12}},{"start":{"line":203,"column":12},"end":{"line":203,"column":12}}]},"14":{"line":225,"type":"if","locations":[{"start":{"line":225,"column":8},"end":{"line":225,"column":8}},{"start":{"line":225,"column":8},"end":{"line":225,"column":8}}]},"15":{"line":230,"type":"if","locations":[{"start":{"line":230,"column":12},"end":{"line":230,"column":12}},{"start":{"line":230,"column":12},"end":{"line":230,"column":12}}]},"16":{"line":253,"type":"if","locations":[{"start":{"line":253,"column":8},"end":{"line":253,"column":8}},{"start":{"line":253,"column":8},"end":{"line":253,"column":8}}]},"17":{"line":253,"type":"binary-expr","locations":[{"start":{"line":253,"column":12},"end":{"line":253,"column":18}},{"start":{"line":253,"column":22},"end":{"line":253,"column":25}},{"start":{"line":253,"column":29},"end":{"line":253,"column":52}}]},"18":{"line":255,"type":"if","locations":[{"start":{"line":255,"column":12},"end":{"line":255,"column":12}},{"start":{"line":255,"column":12},"end":{"line":255,"column":12}}]},"19":{"line":255,"type":"binary-expr","locations":[{"start":{"line":255,"column":16},"end":{"line":255,"column":23}},{"start":{"line":255,"column":27},"end":{"line":255,"column":41}}]},"20":{"line":259,"type":"if","locations":[{"start":{"line":259,"column":17},"end":{"line":259,"column":17}},{"start":{"line":259,"column":17},"end":{"line":259,"column":17}}]},"21":{"line":282,"type":"if","locations":[{"start":{"line":282,"column":12},"end":{"line":282,"column":12}},{"start":{"line":282,"column":12},"end":{"line":282,"column":12}}]},"22":{"line":283,"type":"if","locations":[{"start":{"line":283,"column":16},"end":{"line":283,"column":16}},{"start":{"line":283,"column":16},"end":{"line":283,"column":16}}]},"23":{"line":297,"type":"if","locations":[{"start":{"line":297,"column":8},"end":{"line":297,"column":8}},{"start":{"line":297,"column":8},"end":{"line":297,"column":8}}]},"24":{"line":317,"type":"if","locations":[{"start":{"line":317,"column":8},"end":{"line":317,"column":8}},{"start":{"line":317,"column":8},"end":{"line":317,"column":8}}]},"25":{"line":317,"type":"binary-expr","locations":[{"start":{"line":317,"column":12},"end":{"line":317,"column":18}},{"start":{"line":317,"column":22},"end":{"line":317,"column":25}},{"start":{"line":317,"column":29},"end":{"line":317,"column":52}}]},"26":{"line":319,"type":"if","locations":[{"start":{"line":319,"column":12},"end":{"line":319,"column":12}},{"start":{"line":319,"column":12},"end":{"line":319,"column":12}}]},"27":{"line":319,"type":"binary-expr","locations":[{"start":{"line":319,"column":16},"end":{"line":319,"column":23}},{"start":{"line":319,"column":27},"end":{"line":319,"column":36}}]},"28":{"line":323,"type":"if","locations":[{"start":{"line":323,"column":17},"end":{"line":323,"column":17}},{"start":{"line":323,"column":17},"end":{"line":323,"column":17}}]},"29":{"line":335,"type":"if","locations":[{"start":{"line":335,"column":15},"end":{"line":335,"column":15}},{"start":{"line":335,"column":15},"end":{"line":335,"column":15}}]},"30":{"line":359,"type":"if","locations":[{"start":{"line":359,"column":12},"end":{"line":359,"column":12}},{"start":{"line":359,"column":12},"end":{"line":359,"column":12}}]},"31":{"line":375,"type":"if","locations":[{"start":{"line":375,"column":8},"end":{"line":375,"column":8}},{"start":{"line":375,"column":8},"end":{"line":375,"column":8}}]},"32":{"line":383,"type":"if","locations":[{"start":{"line":383,"column":15},"end":{"line":383,"column":15}},{"start":{"line":383,"column":15},"end":{"line":383,"column":15}}]},"33":{"line":385,"type":"if","locations":[{"start":{"line":385,"column":12},"end":{"line":385,"column":12}},{"start":{"line":385,"column":12},"end":{"line":385,"column":12}}]},"34":{"line":385,"type":"binary-expr","locations":[{"start":{"line":385,"column":16},"end":{"line":385,"column":33}},{"start":{"line":385,"column":37},"end":{"line":385,"column":79}}]},"35":{"line":409,"type":"if","locations":[{"start":{"line":409,"column":12},"end":{"line":409,"column":12}},{"start":{"line":409,"column":12},"end":{"line":409,"column":12}}]},"36":{"line":418,"type":"if","locations":[{"start":{"line":418,"column":12},"end":{"line":418,"column":12}},{"start":{"line":418,"column":12},"end":{"line":418,"column":12}}]},"37":{"line":423,"type":"if","locations":[{"start":{"line":423,"column":12},"end":{"line":423,"column":12}},{"start":{"line":423,"column":12},"end":{"line":423,"column":12}}]},"38":{"line":423,"type":"binary-expr","locations":[{"start":{"line":423,"column":16},"end":{"line":423,"column":21}},{"start":{"line":423,"column":25},"end":{"line":423,"column":37}}]},"39":{"line":433,"type":"binary-expr","locations":[{"start":{"line":433,"column":27},"end":{"line":433,"column":57}},{"start":{"line":433,"column":61},"end":{"line":433,"column":63}}]},"40":{"line":435,"type":"if","locations":[{"start":{"line":435,"column":8},"end":{"line":435,"column":8}},{"start":{"line":435,"column":8},"end":{"line":435,"column":8}}]},"41":{"line":436,"type":"binary-expr","locations":[{"start":{"line":436,"column":32},"end":{"line":436,"column":75}},{"start":{"line":436,"column":79},"end":{"line":436,"column":81}}]},"42":{"line":437,"type":"if","locations":[{"start":{"line":437,"column":12},"end":{"line":437,"column":12}},{"start":{"line":437,"column":12},"end":{"line":437,"column":12}}]},"43":{"line":437,"type":"binary-expr","locations":[{"start":{"line":437,"column":16},"end":{"line":437,"column":33}},{"start":{"line":437,"column":37},"end":{"line":437,"column":95}}]},"44":{"line":438,"type":"if","locations":[{"start":{"line":438,"column":16},"end":{"line":438,"column":16}},{"start":{"line":438,"column":16},"end":{"line":438,"column":16}}]},"45":{"line":440,"type":"if","locations":[{"start":{"line":440,"column":20},"end":{"line":440,"column":20}},{"start":{"line":440,"column":20},"end":{"line":440,"column":20}}]},"46":{"line":440,"type":"binary-expr","locations":[{"start":{"line":440,"column":24},"end":{"line":440,"column":41}},{"start":{"line":440,"column":45},"end":{"line":440,"column":64}}]},"47":{"line":442,"type":"if","locations":[{"start":{"line":442,"column":27},"end":{"line":442,"column":27}},{"start":{"line":442,"column":27},"end":{"line":442,"column":27}}]},"48":{"line":442,"type":"binary-expr","locations":[{"start":{"line":442,"column":31},"end":{"line":442,"column":63}},{"start":{"line":442,"column":67},"end":{"line":442,"column":97}}]},"49":{"line":444,"type":"cond-expr","locations":[{"start":{"line":444,"column":89},"end":{"line":444,"column":107}},{"start":{"line":444,"column":110},"end":{"line":444,"column":118}}]},"50":{"line":447,"type":"cond-expr","locations":[{"start":{"line":447,"column":75},"end":{"line":447,"column":83}},{"start":{"line":447,"column":86},"end":{"line":447,"column":104}}]},"51":{"line":449,"type":"if","locations":[{"start":{"line":449,"column":23},"end":{"line":449,"column":23}},{"start":{"line":449,"column":23},"end":{"line":449,"column":23}}]},"52":{"line":450,"type":"binary-expr","locations":[{"start":{"line":450,"column":39},"end":{"line":450,"column":55}},{"start":{"line":450,"column":59},"end":{"line":450,"column":67}}]},"53":{"line":466,"type":"if","locations":[{"start":{"line":466,"column":8},"end":{"line":466,"column":8}},{"start":{"line":466,"column":8},"end":{"line":466,"column":8}}]},"54":{"line":470,"type":"if","locations":[{"start":{"line":470,"column":8},"end":{"line":470,"column":8}},{"start":{"line":470,"column":8},"end":{"line":470,"column":8}}]},"55":{"line":470,"type":"binary-expr","locations":[{"start":{"line":470,"column":12},"end":{"line":470,"column":25}},{"start":{"line":470,"column":29},"end":{"line":470,"column":67}}]},"56":{"line":475,"type":"if","locations":[{"start":{"line":475,"column":8},"end":{"line":475,"column":8}},{"start":{"line":475,"column":8},"end":{"line":475,"column":8}}]},"57":{"line":476,"type":"if","locations":[{"start":{"line":476,"column":12},"end":{"line":476,"column":12}},{"start":{"line":476,"column":12},"end":{"line":476,"column":12}}]},"58":{"line":483,"type":"if","locations":[{"start":{"line":483,"column":12},"end":{"line":483,"column":12}},{"start":{"line":483,"column":12},"end":{"line":483,"column":12}}]},"59":{"line":496,"type":"if","locations":[{"start":{"line":496,"column":12},"end":{"line":496,"column":12}},{"start":{"line":496,"column":12},"end":{"line":496,"column":12}}]},"60":{"line":496,"type":"binary-expr","locations":[{"start":{"line":496,"column":16},"end":{"line":496,"column":21}},{"start":{"line":496,"column":25},"end":{"line":496,"column":50}},{"start":{"line":496,"column":54},"end":{"line":496,"column":85}}]},"61":{"line":498,"type":"if","locations":[{"start":{"line":498,"column":20},"end":{"line":498,"column":20}},{"start":{"line":498,"column":20},"end":{"line":498,"column":20}}]},"62":{"line":502,"type":"binary-expr","locations":[{"start":{"line":502,"column":25},"end":{"line":502,"column":36}},{"start":{"line":502,"column":40},"end":{"line":502,"column":42}}]},"63":{"line":503,"type":"if","locations":[{"start":{"line":503,"column":16},"end":{"line":503,"column":16}},{"start":{"line":503,"column":16},"end":{"line":503,"column":16}}]},"64":{"line":508,"type":"if","locations":[{"start":{"line":508,"column":12},"end":{"line":508,"column":12}},{"start":{"line":508,"column":12},"end":{"line":508,"column":12}}]},"65":{"line":514,"type":"switch","locations":[{"start":{"line":515,"column":16},"end":{"line":521,"column":26}},{"start":{"line":522,"column":16},"end":{"line":545,"column":26}},{"start":{"line":546,"column":16},"end":{"line":551,"column":26}}]},"66":{"line":517,"type":"if","locations":[{"start":{"line":517,"column":20},"end":{"line":517,"column":20}},{"start":{"line":517,"column":20},"end":{"line":517,"column":20}}]},"67":{"line":527,"type":"if","locations":[{"start":{"line":527,"column":20},"end":{"line":527,"column":20}},{"start":{"line":527,"column":20},"end":{"line":527,"column":20}}]},"68":{"line":527,"type":"binary-expr","locations":[{"start":{"line":527,"column":24},"end":{"line":527,"column":64}},{"start":{"line":527,"column":68},"end":{"line":527,"column":100}},{"start":{"line":527,"column":104},"end":{"line":527,"column":140}}]},"69":{"line":533,"type":"if","locations":[{"start":{"line":533,"column":20},"end":{"line":533,"column":20}},{"start":{"line":533,"column":20},"end":{"line":533,"column":20}}]},"70":{"line":539,"type":"if","locations":[{"start":{"line":539,"column":24},"end":{"line":539,"column":24}},{"start":{"line":539,"column":24},"end":{"line":539,"column":24}}]},"71":{"line":539,"type":"binary-expr","locations":[{"start":{"line":539,"column":28},"end":{"line":539,"column":51}},{"start":{"line":539,"column":55},"end":{"line":539,"column":100}}]},"72":{"line":547,"type":"if","locations":[{"start":{"line":547,"column":20},"end":{"line":547,"column":20}},{"start":{"line":547,"column":20},"end":{"line":547,"column":20}}]},"73":{"line":557,"type":"if","locations":[{"start":{"line":557,"column":12},"end":{"line":557,"column":12}},{"start":{"line":557,"column":12},"end":{"line":557,"column":12}}]},"74":{"line":557,"type":"binary-expr","locations":[{"start":{"line":557,"column":18},"end":{"line":557,"column":23}},{"start":{"line":557,"column":27},"end":{"line":557,"column":29}}]},"75":{"line":574,"type":"binary-expr","locations":[{"start":{"line":574,"column":18},"end":{"line":574,"column":25}},{"start":{"line":574,"column":29},"end":{"line":574,"column":31}}]},"76":{"line":581,"type":"if","locations":[{"start":{"line":581,"column":12},"end":{"line":581,"column":12}},{"start":{"line":581,"column":12},"end":{"line":581,"column":12}}]},"77":{"line":589,"type":"cond-expr","locations":[{"start":{"line":589,"column":68},"end":{"line":589,"column":89}},{"start":{"line":589,"column":92},"end":{"line":589,"column":111}}]},"78":{"line":642,"type":"if","locations":[{"start":{"line":642,"column":12},"end":{"line":642,"column":12}},{"start":{"line":642,"column":12},"end":{"line":642,"column":12}}]},"79":{"line":654,"type":"if","locations":[{"start":{"line":654,"column":16},"end":{"line":654,"column":16}},{"start":{"line":654,"column":16},"end":{"line":654,"column":16}}]},"80":{"line":659,"type":"cond-expr","locations":[{"start":{"line":659,"column":50},"end":{"line":659,"column":56}},{"start":{"line":659,"column":59},"end":{"line":659,"column":61}}]},"81":{"line":661,"type":"if","locations":[{"start":{"line":661,"column":20},"end":{"line":661,"column":20}},{"start":{"line":661,"column":20},"end":{"line":661,"column":20}}]},"82":{"line":668,"type":"if","locations":[{"start":{"line":668,"column":12},"end":{"line":668,"column":12}},{"start":{"line":668,"column":12},"end":{"line":668,"column":12}}]},"83":{"line":677,"type":"if","locations":[{"start":{"line":677,"column":12},"end":{"line":677,"column":12}},{"start":{"line":677,"column":12},"end":{"line":677,"column":12}}]},"84":{"line":679,"type":"if","locations":[{"start":{"line":679,"column":16},"end":{"line":679,"column":16}},{"start":{"line":679,"column":16},"end":{"line":679,"column":16}}]},"85":{"line":684,"type":"if","locations":[{"start":{"line":684,"column":16},"end":{"line":684,"column":16}},{"start":{"line":684,"column":16},"end":{"line":684,"column":16}}]},"86":{"line":692,"type":"if","locations":[{"start":{"line":692,"column":20},"end":{"line":692,"column":20}},{"start":{"line":692,"column":20},"end":{"line":692,"column":20}}]},"87":{"line":693,"type":"cond-expr","locations":[{"start":{"line":693,"column":76},"end":{"line":693,"column":82}},{"start":{"line":693,"column":85},"end":{"line":693,"column":87}}]},"88":{"line":715,"type":"if","locations":[{"start":{"line":715,"column":16},"end":{"line":715,"column":16}},{"start":{"line":715,"column":16},"end":{"line":715,"column":16}}]},"89":{"line":721,"type":"if","locations":[{"start":{"line":721,"column":24},"end":{"line":721,"column":24}},{"start":{"line":721,"column":24},"end":{"line":721,"column":24}}]},"90":{"line":735,"type":"if","locations":[{"start":{"line":735,"column":24},"end":{"line":735,"column":24}},{"start":{"line":735,"column":24},"end":{"line":735,"column":24}}]},"91":{"line":752,"type":"if","locations":[{"start":{"line":752,"column":8},"end":{"line":752,"column":8}},{"start":{"line":752,"column":8},"end":{"line":752,"column":8}}]},"92":{"line":754,"type":"if","locations":[{"start":{"line":754,"column":16},"end":{"line":754,"column":16}},{"start":{"line":754,"column":16},"end":{"line":754,"column":16}}]},"93":{"line":760,"type":"if","locations":[{"start":{"line":760,"column":16},"end":{"line":760,"column":16}},{"start":{"line":760,"column":16},"end":{"line":760,"column":16}}]},"94":{"line":790,"type":"if","locations":[{"start":{"line":790,"column":8},"end":{"line":790,"column":8}},{"start":{"line":790,"column":8},"end":{"line":790,"column":8}}]},"95":{"line":793,"type":"binary-expr","locations":[{"start":{"line":793,"column":42},"end":{"line":793,"column":49}},{"start":{"line":793,"column":53},"end":{"line":793,"column":68}}]},"96":{"line":794,"type":"if","locations":[{"start":{"line":794,"column":12},"end":{"line":794,"column":12}},{"start":{"line":794,"column":12},"end":{"line":794,"column":12}}]},"97":{"line":794,"type":"binary-expr","locations":[{"start":{"line":794,"column":16},"end":{"line":794,"column":27}},{"start":{"line":794,"column":31},"end":{"line":794,"column":38}}]},"98":{"line":799,"type":"if","locations":[{"start":{"line":799,"column":12},"end":{"line":799,"column":12}},{"start":{"line":799,"column":12},"end":{"line":799,"column":12}}]},"99":{"line":808,"type":"if","locations":[{"start":{"line":808,"column":12},"end":{"line":808,"column":12}},{"start":{"line":808,"column":12},"end":{"line":808,"column":12}}]},"100":{"line":826,"type":"if","locations":[{"start":{"line":826,"column":12},"end":{"line":826,"column":12}},{"start":{"line":826,"column":12},"end":{"line":826,"column":12}}]},"101":{"line":827,"type":"if","locations":[{"start":{"line":827,"column":16},"end":{"line":827,"column":16}},{"start":{"line":827,"column":16},"end":{"line":827,"column":16}}]},"102":{"line":844,"type":"if","locations":[{"start":{"line":844,"column":8},"end":{"line":844,"column":8}},{"start":{"line":844,"column":8},"end":{"line":844,"column":8}}]},"103":{"line":854,"type":"if","locations":[{"start":{"line":854,"column":12},"end":{"line":854,"column":12}},{"start":{"line":854,"column":12},"end":{"line":854,"column":12}}]},"104":{"line":854,"type":"binary-expr","locations":[{"start":{"line":854,"column":16},"end":{"line":854,"column":37}},{"start":{"line":854,"column":42},"end":{"line":854,"column":56}},{"start":{"line":854,"column":60},"end":{"line":854,"column":103}}]},"105":{"line":856,"type":"if","locations":[{"start":{"line":856,"column":16},"end":{"line":856,"column":16}},{"start":{"line":856,"column":16},"end":{"line":856,"column":16}}]},"106":{"line":856,"type":"binary-expr","locations":[{"start":{"line":856,"column":20},"end":{"line":856,"column":31}},{"start":{"line":856,"column":35},"end":{"line":856,"column":42}}]},"107":{"line":859,"type":"if","locations":[{"start":{"line":859,"column":19},"end":{"line":859,"column":19}},{"start":{"line":859,"column":19},"end":{"line":859,"column":19}}]},"108":{"line":877,"type":"if","locations":[{"start":{"line":877,"column":8},"end":{"line":877,"column":8}},{"start":{"line":877,"column":8},"end":{"line":877,"column":8}}]},"109":{"line":892,"type":"if","locations":[{"start":{"line":892,"column":8},"end":{"line":892,"column":8}},{"start":{"line":892,"column":8},"end":{"line":892,"column":8}}]},"110":{"line":892,"type":"binary-expr","locations":[{"start":{"line":892,"column":12},"end":{"line":892,"column":21}},{"start":{"line":892,"column":25},"end":{"line":892,"column":61}}]},"111":{"line":916,"type":"if","locations":[{"start":{"line":916,"column":8},"end":{"line":916,"column":8}},{"start":{"line":916,"column":8},"end":{"line":916,"column":8}}]},"112":{"line":921,"type":"if","locations":[{"start":{"line":921,"column":15},"end":{"line":921,"column":15}},{"start":{"line":921,"column":15},"end":{"line":921,"column":15}}]},"113":{"line":924,"type":"if","locations":[{"start":{"line":924,"column":15},"end":{"line":924,"column":15}},{"start":{"line":924,"column":15},"end":{"line":924,"column":15}}]},"114":{"line":924,"type":"binary-expr","locations":[{"start":{"line":924,"column":19},"end":{"line":924,"column":26}},{"start":{"line":924,"column":30},"end":{"line":924,"column":62}},{"start":{"line":924,"column":66},"end":{"line":924,"column":79}}]},"115":{"line":925,"type":"if","locations":[{"start":{"line":925,"column":12},"end":{"line":925,"column":12}},{"start":{"line":925,"column":12},"end":{"line":925,"column":12}}]},"116":{"line":932,"type":"if","locations":[{"start":{"line":932,"column":15},"end":{"line":932,"column":15}},{"start":{"line":932,"column":15},"end":{"line":932,"column":15}}]},"117":{"line":932,"type":"binary-expr","locations":[{"start":{"line":932,"column":19},"end":{"line":932,"column":26}},{"start":{"line":932,"column":30},"end":{"line":932,"column":62}}]},"118":{"line":933,"type":"if","locations":[{"start":{"line":933,"column":12},"end":{"line":933,"column":12}},{"start":{"line":933,"column":12},"end":{"line":933,"column":12}}]},"119":{"line":943,"type":"binary-expr","locations":[{"start":{"line":943,"column":49},"end":{"line":943,"column":56}},{"start":{"line":943,"column":60},"end":{"line":943,"column":62}}]},"120":{"line":957,"type":"if","locations":[{"start":{"line":957,"column":12},"end":{"line":957,"column":12}},{"start":{"line":957,"column":12},"end":{"line":957,"column":12}}]},"121":{"line":957,"type":"binary-expr","locations":[{"start":{"line":957,"column":16},"end":{"line":957,"column":23}},{"start":{"line":957,"column":27},"end":{"line":957,"column":42}}]},"122":{"line":959,"type":"binary-expr","locations":[{"start":{"line":959,"column":31},"end":{"line":959,"column":43}},{"start":{"line":959,"column":47},"end":{"line":959,"column":49}}]},"123":{"line":973,"type":"binary-expr","locations":[{"start":{"line":973,"column":16},"end":{"line":973,"column":19}},{"start":{"line":973,"column":23},"end":{"line":973,"column":25}}]},"124":{"line":992,"type":"cond-expr","locations":[{"start":{"line":992,"column":100},"end":{"line":992,"column":105}},{"start":{"line":992,"column":108},"end":{"line":992,"column":113}}]},"125":{"line":994,"type":"if","locations":[{"start":{"line":994,"column":8},"end":{"line":994,"column":8}},{"start":{"line":994,"column":8},"end":{"line":994,"column":8}}]},"126":{"line":995,"type":"binary-expr","locations":[{"start":{"line":995,"column":57},"end":{"line":995,"column":83}},{"start":{"line":995,"column":87},"end":{"line":995,"column":100}},{"start":{"line":995,"column":104},"end":{"line":995,"column":128}}]},"127":{"line":1019,"type":"switch","locations":[{"start":{"line":1022,"column":12},"end":{"line":1022,"column":24}},{"start":{"line":1023,"column":12},"end":{"line":1023,"column":26}},{"start":{"line":1024,"column":12},"end":{"line":1024,"column":22}},{"start":{"line":1025,"column":12},"end":{"line":1025,"column":22}},{"start":{"line":1026,"column":12},"end":{"line":1026,"column":23}},{"start":{"line":1027,"column":12},"end":{"line":1028,"column":75}},{"start":{"line":1031,"column":12},"end":{"line":1031,"column":30}},{"start":{"line":1032,"column":12},"end":{"line":1032,"column":31}},{"start":{"line":1033,"column":12},"end":{"line":1043,"column":29}},{"start":{"line":1046,"column":12},"end":{"line":1060,"column":46}},{"start":{"line":1062,"column":12},"end":{"line":1068,"column":48}},{"start":{"line":1070,"column":12},"end":{"line":1073,"column":48}}]},"128":{"line":1034,"type":"binary-expr","locations":[{"start":{"line":1034,"column":25},"end":{"line":1034,"column":30}},{"start":{"line":1034,"column":34},"end":{"line":1034,"column":36}}]},"129":{"line":1036,"type":"if","locations":[{"start":{"line":1036,"column":16},"end":{"line":1036,"column":16}},{"start":{"line":1036,"column":16},"end":{"line":1036,"column":16}}]},"130":{"line":1040,"type":"if","locations":[{"start":{"line":1040,"column":16},"end":{"line":1040,"column":16}},{"start":{"line":1040,"column":16},"end":{"line":1040,"column":16}}]},"131":{"line":1047,"type":"binary-expr","locations":[{"start":{"line":1047,"column":54},"end":{"line":1047,"column":59}},{"start":{"line":1047,"column":63},"end":{"line":1047,"column":65}}]},"132":{"line":1048,"type":"binary-expr","locations":[{"start":{"line":1048,"column":27},"end":{"line":1048,"column":30}},{"start":{"line":1048,"column":34},"end":{"line":1048,"column":36}}]},"133":{"line":1051,"type":"if","locations":[{"start":{"line":1051,"column":20},"end":{"line":1051,"column":20}},{"start":{"line":1051,"column":20},"end":{"line":1051,"column":20}}]},"134":{"line":1054,"type":"if","locations":[{"start":{"line":1054,"column":20},"end":{"line":1054,"column":20}},{"start":{"line":1054,"column":20},"end":{"line":1054,"column":20}}]},"135":{"line":1063,"type":"if","locations":[{"start":{"line":1063,"column":16},"end":{"line":1063,"column":16}},{"start":{"line":1063,"column":16},"end":{"line":1063,"column":16}}]},"136":{"line":1067,"type":"binary-expr","locations":[{"start":{"line":1067,"column":25},"end":{"line":1067,"column":30}},{"start":{"line":1067,"column":34},"end":{"line":1067,"column":36}}]},"137":{"line":1071,"type":"binary-expr","locations":[{"start":{"line":1071,"column":25},"end":{"line":1071,"column":30}},{"start":{"line":1071,"column":34},"end":{"line":1071,"column":36}}]},"138":{"line":1087,"type":"binary-expr","locations":[{"start":{"line":1087,"column":21},"end":{"line":1087,"column":31}},{"start":{"line":1087,"column":35},"end":{"line":1087,"column":37}}]},"139":{"line":1089,"type":"binary-expr","locations":[{"start":{"line":1089,"column":18},"end":{"line":1089,"column":27}},{"start":{"line":1089,"column":31},"end":{"line":1089,"column":33}}]},"140":{"line":1090,"type":"if","locations":[{"start":{"line":1090,"column":12},"end":{"line":1090,"column":12}},{"start":{"line":1090,"column":12},"end":{"line":1090,"column":12}}]},"141":{"line":1093,"type":"if","locations":[{"start":{"line":1093,"column":16},"end":{"line":1093,"column":16}},{"start":{"line":1093,"column":16},"end":{"line":1093,"column":16}}]},"142":{"line":1095,"type":"if","locations":[{"start":{"line":1095,"column":23},"end":{"line":1095,"column":23}},{"start":{"line":1095,"column":23},"end":{"line":1095,"column":23}}]},"143":{"line":1099,"type":"if","locations":[{"start":{"line":1099,"column":16},"end":{"line":1099,"column":16}},{"start":{"line":1099,"column":16},"end":{"line":1099,"column":16}}]},"144":{"line":1100,"type":"if","locations":[{"start":{"line":1100,"column":20},"end":{"line":1100,"column":20}},{"start":{"line":1100,"column":20},"end":{"line":1100,"column":20}}]},"145":{"line":1104,"type":"if","locations":[{"start":{"line":1104,"column":19},"end":{"line":1104,"column":19}},{"start":{"line":1104,"column":19},"end":{"line":1104,"column":19}}]},"146":{"line":1105,"type":"cond-expr","locations":[{"start":{"line":1105,"column":98},"end":{"line":1105,"column":147}},{"start":{"line":1105,"column":150},"end":{"line":1105,"column":152}}]},"147":{"line":1119,"type":"binary-expr","locations":[{"start":{"line":1119,"column":19},"end":{"line":1119,"column":26}},{"start":{"line":1119,"column":30},"end":{"line":1119,"column":32}}]},"148":{"line":1140,"type":"if","locations":[{"start":{"line":1140,"column":8},"end":{"line":1140,"column":8}},{"start":{"line":1140,"column":8},"end":{"line":1140,"column":8}}]},"149":{"line":1141,"type":"if","locations":[{"start":{"line":1141,"column":12},"end":{"line":1141,"column":12}},{"start":{"line":1141,"column":12},"end":{"line":1141,"column":12}}]},"150":{"line":1167,"type":"binary-expr","locations":[{"start":{"line":1167,"column":17},"end":{"line":1167,"column":22}},{"start":{"line":1167,"column":26},"end":{"line":1167,"column":28}}]},"151":{"line":1173,"type":"if","locations":[{"start":{"line":1173,"column":8},"end":{"line":1173,"column":8}},{"start":{"line":1173,"column":8},"end":{"line":1173,"column":8}}]},"152":{"line":1177,"type":"binary-expr","locations":[{"start":{"line":1177,"column":27},"end":{"line":1177,"column":84}},{"start":{"line":1177,"column":88},"end":{"line":1177,"column":90}}]},"153":{"line":1178,"type":"binary-expr","locations":[{"start":{"line":1178,"column":24},"end":{"line":1178,"column":46}},{"start":{"line":1178,"column":50},"end":{"line":1178,"column":52}}]},"154":{"line":1180,"type":"cond-expr","locations":[{"start":{"line":1180,"column":48},"end":{"line":1180,"column":51}},{"start":{"line":1180,"column":54},"end":{"line":1180,"column":57}}]},"155":{"line":1196,"type":"binary-expr","locations":[{"start":{"line":1196,"column":13},"end":{"line":1196,"column":36}},{"start":{"line":1196,"column":40},"end":{"line":1196,"column":53}},{"start":{"line":1196,"column":57},"end":{"line":1196,"column":70}},{"start":{"line":1196,"column":74},"end":{"line":1196,"column":85}}]}},"code":["/* eslint no-undefined: 0 */","","'use strict';","","const crypto = require('crypto');","const os = require('os');","const fs = require('fs');","const punycode = require('punycode');","const PassThrough = require('stream').PassThrough;","","const mimeFuncs = require('../mime-funcs');","const qp = require('../qp');","const base64 = require('../base64');","const addressparser = require('../addressparser');","const fetch = require('../fetch');","const LastNewline = require('./last-newline');","","/**"," * Creates a new mime tree node. Assumes 'multipart/*' as the content type"," * if it is a branch, anything else counts as leaf. If rootNode is missing from"," * the options, assumes this is the root."," *"," * @param {String} contentType Define the content type for the node. Can be left blank for attachments (derived from filename)"," * @param {Object} [options] optional options"," * @param {Object} [options.rootNode] root node for this tree"," * @param {Object} [options.parentNode] immediate parent for this node"," * @param {Object} [options.filename] filename for an attachment node"," * @param {String} [options.baseBoundary] shared part of the unique multipart boundary"," * @param {Boolean} [options.keepBcc] If true, do not exclude Bcc from the generated headers"," * @param {String} [options.textEncoding] either 'Q' (the default) or 'B'"," */","class MimeNode {","    constructor(contentType, options) {","        this.nodeCounter = 0;","","        options = options || {};","","        /**","         * shared part of the unique multipart boundary","         */","        this.baseBoundary = options.baseBoundary || crypto.randomBytes(8).toString('hex');","        this.boundaryPrefix = options.boundaryPrefix || '--_NmP';","","        this.disableFileAccess = !!options.disableFileAccess;","        this.disableUrlAccess = !!options.disableUrlAccess;","","        /**","         * If date headers is missing and current node is the root, this value is used instead","         */","        this.date = new Date();","","        /**","         * Root node for current mime tree","         */","        this.rootNode = options.rootNode || this;","","        /**","         * If true include Bcc in generated headers (if available)","         */","        this.keepBcc = !!options.keepBcc;","","        /**","         * If filename is specified but contentType is not (probably an attachment)","         * detect the content type from filename extension","         */","        if (options.filename) {","            /**","             * Filename for this node. Useful with attachments","             */","            this.filename = options.filename;","            if (!contentType) {","                contentType = mimeFuncs.detectMimeType(this.filename.split('.').pop());","            }","        }","","        /**","         * Indicates which encoding should be used for header strings: \"Q\" or \"B\"","         */","        this.textEncoding = (options.textEncoding || '').toString().trim().charAt(0).toUpperCase();","","        /**","         * Immediate parent for this node (or undefined if not set)","         */","        this.parentNode = options.parentNode;","","        /**","         * Hostname for default message-id values","         */","        this.hostname = options.hostname;","","        /**","         * An array for possible child nodes","         */","        this.childNodes = [];","","        /**","         * Used for generating unique boundaries (prepended to the shared base)","         */","        this._nodeId = ++this.rootNode.nodeCounter;","","        /**","         * A list of header values for this node in the form of [{key:'', value:''}]","         */","        this._headers = [];","","        /**","         * True if the content only uses ASCII printable characters","         * @type {Boolean}","         */","        this._isPlainText = false;","","        /**","         * True if the content is plain text but has longer lines than allowed","         * @type {Boolean}","         */","        this._hasLongLines = false;","","        /**","         * If set, use instead this value for envelopes instead of generating one","         * @type {Boolean}","         */","        this._envelope = false;","","        /**","         * If set then use this value as the stream content instead of building it","         * @type {String|Buffer|Stream}","         */","        this._raw = false;","","        /**","         * Additional transform streams that the message will be piped before","         * exposing by createReadStream","         * @type {Array}","         */","        this._transforms = [];","","        /**","         * Additional process functions that the message will be piped through before","         * exposing by createReadStream. These functions are run after transforms","         * @type {Array}","         */","        this._processFuncs = [];","","        /**","         * If content type is set (or derived from the filename) add it to headers","         */","        if (contentType) {","            this.setHeader('Content-Type', contentType);","        }","    }","","    /////// PUBLIC METHODS","","    /**","     * Creates and appends a child node.Arguments provided are passed to MimeNode constructor","     *","     * @param {String} [contentType] Optional content type","     * @param {Object} [options] Optional options object","     * @return {Object} Created node object","     */","    createChild(contentType, options) {","        if (!options && typeof contentType === 'object') {","            options = contentType;","            contentType = undefined;","        }","        let node = new MimeNode(contentType, options);","        this.appendChild(node);","        return node;","    }","","    /**","     * Appends an existing node to the mime tree. Removes the node from an existing","     * tree if needed","     *","     * @param {Object} childNode node to be appended","     * @return {Object} Appended node object","     */","    appendChild(childNode) {","","        if (childNode.rootNode !== this.rootNode) {","            childNode.rootNode = this.rootNode;","            childNode._nodeId = ++this.rootNode.nodeCounter;","        }","","        childNode.parentNode = this;","","        this.childNodes.push(childNode);","        return childNode;","    }","","    /**","     * Replaces current node with another node","     *","     * @param {Object} node Replacement node","     * @return {Object} Replacement node","     */","    replace(node) {","        if (node === this) {","            return this;","        }","","        this.parentNode.childNodes.forEach((childNode, i) => {","            if (childNode === this) {","","                node.rootNode = this.rootNode;","                node.parentNode = this.parentNode;","                node._nodeId = this._nodeId;","","                this.rootNode = this;","                this.parentNode = undefined;","","                node.parentNode.childNodes[i] = node;","            }","        });","","        return node;","    }","","    /**","     * Removes current node from the mime tree","     *","     * @return {Object} removed node","     */","    remove() {","        if (!this.parentNode) {","            return this;","        }","","        for (let i = this.parentNode.childNodes.length - 1; i >= 0; i--) {","            if (this.parentNode.childNodes[i] === this) {","                this.parentNode.childNodes.splice(i, 1);","                this.parentNode = undefined;","                this.rootNode = this;","                return this;","            }","        }","    }","","    /**","     * Sets a header value. If the value for selected key exists, it is overwritten.","     * You can set multiple values as well by using [{key:'', value:''}] or","     * {key: 'value'} as the first argument.","     *","     * @param {String|Array|Object} key Header key or a list of key value pairs","     * @param {String} value Header value","     * @return {Object} current node","     */","    setHeader(key, value) {","        let added = false,","            headerValue;","","        // Allow setting multiple headers at once","        if (!value && key && typeof key === 'object') {","            // allow {key:'content-type', value: 'text/plain'}","            if (key.key && 'value' in key) {","                this.setHeader(key.key, key.value);","            }","            // allow [{key:'content-type', value: 'text/plain'}]","            else if (Array.isArray(key)) {","                key.forEach(i => {","                    this.setHeader(i.key, i.value);","                });","            }","            // allow {'content-type': 'text/plain'}","            else {","                Object.keys(key).forEach(i => {","                    this.setHeader(i, key[i]);","                });","            }","            return this;","        }","","        key = this._normalizeHeaderKey(key);","","        headerValue = {","            key,","            value","        };","","        // Check if the value exists and overwrite","        for (let i = 0, len = this._headers.length; i < len; i++) {","            if (this._headers[i].key === key) {","                if (!added) {","                    // replace the first match","                    this._headers[i] = headerValue;","                    added = true;","                } else {","                    // remove following matches","                    this._headers.splice(i, 1);","                    i--;","                    len--;","                }","            }","        }","","        // match not found, append the value","        if (!added) {","            this._headers.push(headerValue);","        }","","        return this;","    }","","    /**","     * Adds a header value. If the value for selected key exists, the value is appended","     * as a new field and old one is not touched.","     * You can set multiple values as well by using [{key:'', value:''}] or","     * {key: 'value'} as the first argument.","     *","     * @param {String|Array|Object} key Header key or a list of key value pairs","     * @param {String} value Header value","     * @return {Object} current node","     */","    addHeader(key, value) {","","        // Allow setting multiple headers at once","        if (!value && key && typeof key === 'object') {","            // allow {key:'content-type', value: 'text/plain'}","            if (key.key && key.value) {","                this.addHeader(key.key, key.value);","            }","            // allow [{key:'content-type', value: 'text/plain'}]","            else if (Array.isArray(key)) {","                key.forEach(i => {","                    this.addHeader(i.key, i.value);","                });","            }","            // allow {'content-type': 'text/plain'}","            else {","                Object.keys(key).forEach(i => {","                    this.addHeader(i, key[i]);","                });","            }","            return this;","        } else if (Array.isArray(value)) {","            value.forEach(val => {","                this.addHeader(key, val);","            });","            return this;","        }","","        this._headers.push({","            key: this._normalizeHeaderKey(key),","            value","        });","","        return this;","    }","","    /**","     * Retrieves the first mathcing value of a selected key","     *","     * @param {String} key Key to search for","     * @retun {String} Value for the key","     */","    getHeader(key) {","        key = this._normalizeHeaderKey(key);","        for (let i = 0, len = this._headers.length; i < len; i++) {","            if (this._headers[i].key === key) {","                return this._headers[i].value;","            }","        }","    }","","    /**","     * Sets body content for current node. If the value is a string, charset is added automatically","     * to Content-Type (if it is text/*). If the value is a Buffer, you need to specify","     * the charset yourself","     *","     * @param (String|Buffer) content Body content","     * @return {Object} current node","     */","    setContent(content) {","        this.content = content;","        if (typeof this.content.pipe === 'function') {","            // pre-stream handler. might be triggered if a stream is set as content","            // and 'error' fires before anything is done with this stream","            this._contentErrorHandler = err => {","                this.content.removeListener('error', this._contentErrorHandler);","                this.content = err;","            };","            this.content.once('error', this._contentErrorHandler);","        } else if (typeof this.content === 'string') {","            this._isPlainText = mimeFuncs.isPlainText(this.content);","            if (this._isPlainText && mimeFuncs.hasLongerLines(this.content, 76)) {","                // If there are lines longer than 76 symbols/bytes do not use 7bit","                this._hasLongLines = true;","            }","        }","        return this;","    }","","    build(callback) {","        let stream = this.createReadStream();","        let buf = [];","        let buflen = 0;","        let returned = false;","","        stream.on('readable', () => {","            let chunk;","","            while ((chunk = stream.read()) !== null) {","                buf.push(chunk);","                buflen += chunk.length;","            }","        });","","        stream.once('error', err => {","            if (returned) {","                return;","            }","            returned = true;","","            return callback(err);","        });","","        stream.once('end', chunk => {","            if (returned) {","                return;","            }","            returned = true;","","            if (chunk && chunk.length) {","                buf.push(chunk);","                buflen += chunk.length;","            }","            return callback(null, Buffer.concat(buf, buflen));","        });","    }","","    getTransferEncoding() {","        let transferEncoding = false;","        let contentType = (this.getHeader('Content-Type') || '').toString().toLowerCase().trim();","","        if (this.content) {","            transferEncoding = (this.getHeader('Content-Transfer-Encoding') || '').toString().toLowerCase().trim();","            if (!transferEncoding || !['base64', 'quoted-printable'].includes(transferEncoding)) {","                if (/^text\\//i.test(contentType)) {","                    // If there are no special symbols, no need to modify the text","                    if (this._isPlainText && !this._hasLongLines) {","                        transferEncoding = '7bit';","                    } else if (typeof this.content === 'string' || this.content instanceof Buffer) {","                        // detect preferred encoding for string value","                        transferEncoding = this._getTextEncoding(this.content) === 'Q' ? 'quoted-printable' : 'base64';","                    } else {","                        // we can not check content for a stream, so either use preferred encoding or fallback to QP","                        transferEncoding = this.transferEncoding === 'B' ? 'base64' : 'quoted-printable';","                    }","                } else if (!/^(multipart|message)\\//i.test(contentType)) {","                    transferEncoding = transferEncoding || 'base64';","                }","            }","        }","        return transferEncoding;","    }","","    /**","     * Builds the header block for the mime node. Append \\r\\n\\r\\n before writing the content","     *","     * @returns {String} Headers","     */","    buildHeaders() {","        let transferEncoding = this.getTransferEncoding();","        let headers = [];","","        if (transferEncoding) {","            this.setHeader('Content-Transfer-Encoding', transferEncoding);","        }","","        if (this.filename && !this.getHeader('Content-Disposition')) {","            this.setHeader('Content-Disposition', 'attachment');","        }","","        // Ensure mandatory header fields","        if (this.rootNode === this) {","            if (!this.getHeader('Date')) {","                this.setHeader('Date', this.date.toUTCString().replace(/GMT/, '+0000'));","            }","","            // ensure that Message-Id is present","            this.messageId();","","            if (!this.getHeader('MIME-Version')) {","                this.setHeader('MIME-Version', '1.0');","            }","        }","","        this._headers.forEach(header => {","            let key = header.key;","            let value = header.value;","            let structured;","            let param;","            let options = {};","            let formattedHeaders = ['From', 'Sender', 'To', 'Cc', 'Bcc', 'Reply-To', 'Date', 'References'];","","            if (value && typeof value === 'object' && !formattedHeaders.includes(key)) {","                Object.keys(value).forEach(key => {","                    if (key !== 'value') {","                        options[key] = value[key];","                    }","                });","                value = (value.value || '').toString();","                if (!value.trim()) {","                    return;","                }","            }","","            if (options.prepared) {","                // header value is","                headers.push(key + ': ' + value);","                return;","            }","","            switch (header.key) {","                case 'Content-Disposition':","                    structured = mimeFuncs.parseHeaderValue(value);","                    if (this.filename) {","                        structured.params.filename = this.filename;","                    }","                    value = mimeFuncs.buildHeaderValue(structured);","                    break;","                case 'Content-Type':","                    structured = mimeFuncs.parseHeaderValue(value);","","                    this._handleContentType(structured);","","                    if (structured.value.match(/^text\\/plain\\b/) && typeof this.content === 'string' && /[\\u0080-\\uFFFF]/.test(this.content)) {","                        structured.params.charset = 'utf-8';","                    }","","                    value = mimeFuncs.buildHeaderValue(structured);","","                    if (this.filename) {","                        // add support for non-compliant clients like QQ webmail","                        // we can't build the value with buildHeaderValue as the value is non standard and","                        // would be converted to parameter continuation encoding that we do not want","                        param = this._encodeWords(this.filename);","","                        if (param !== this.filename || /[\\s'\"\\\\;:\\/=\\(\\),<>@\\[\\]\\?]|^\\-/.test(param)) {","                            // include value in quotes if needed","                            param = '\"' + param + '\"';","                        }","                        value += '; name=' + param;","                    }","                    break;","                case 'Bcc':","                    if (!this.keepBcc) {","                        // skip BCC values","                        return;","                    }","                    break;","            }","","            value = this._encodeHeaderValue(key, value);","","            // skip empty lines","            if (!(value || '').toString().trim()) {","                return;","            }","","            headers.push(mimeFuncs.foldLines(key + ': ' + value, 76));","        });","","        return headers.join('\\r\\n');","    }","","    /**","     * Streams the rfc2822 message from the current node. If this is a root node,","     * mandatory header fields are set if missing (Date, Message-Id, MIME-Version)","     *","     * @return {String} Compiled message","     */","    createReadStream(options) {","        options = options || {};","","        let stream = new PassThrough(options);","        let outputStream = stream;","        let transform;","","        this.stream(stream, options, err => {","            if (err) {","                outputStream.emit('error', err);","                return;","            }","            stream.end();","        });","","        for (let i = 0, len = this._transforms.length; i < len; i++) {","            transform = typeof this._transforms[i] === 'function' ? this._transforms[i]() : this._transforms[i];","            outputStream.once('error', err => {","                transform.emit('error', err);","            });","            outputStream = outputStream.pipe(transform);","        }","","        // ensure terminating newline after possible user transforms","        transform = new LastNewline();","        outputStream.once('error', err => {","            transform.emit('error', err);","        });","        outputStream = outputStream.pipe(transform);","","        // dkim and stuff","        for (let i = 0, len = this._processFuncs.length; i < len; i++) {","            transform = this._processFuncs[i];","            outputStream = transform(outputStream);","        }","","        return outputStream;","    }","","    /**","     * Appends a transform stream object to the transforms list. Final output","     * is passed through this stream before exposing","     *","     * @param {Object} transform Read-Write stream","     */","    transform(transform) {","        this._transforms.push(transform);","    }","","    /**","     * Appends a post process function. The functon is run after transforms and","     * uses the following syntax","     *","     *   processFunc(input) -> outputStream","     *","     * @param {Object} processFunc Read-Write stream","     */","    processFunc(processFunc) {","        this._processFuncs.push(processFunc);","    }","","    stream(outputStream, options, done) {","        let transferEncoding = this.getTransferEncoding();","        let contentStream;","        let localStream;","","        // protect actual callback against multiple triggering","        let returned = false;","        let callback = err => {","            if (returned) {","                return;","            }","            returned = true;","            done(err);","        };","","        // for multipart nodes, push child nodes","        // for content nodes end the stream","        let finalize = () => {","            let childId = 0;","            let processChildNode = () => {","                if (childId >= this.childNodes.length) {","                    outputStream.write('\\r\\n--' + this.boundary + '--\\r\\n');","                    return callback();","                }","                let child = this.childNodes[childId++];","                outputStream.write((childId > 1 ? '\\r\\n' : '') + '--' + this.boundary + '\\r\\n');","                child.stream(outputStream, options, err => {","                    if (err) {","                        return callback(err);","                    }","                    setImmediate(processChildNode);","                });","            };","","            if (this.multipart) {","                setImmediate(processChildNode);","            } else {","                return callback();","            }","        };","","        // pushes node content","        let sendContent = () => {","            if (this.content) {","","                if (Object.prototype.toString.call(this.content) === '[object Error]') {","                    // content is already errored","                    return callback(this.content);","                }","","                if (typeof this.content.pipe === 'function') {","                    this.content.removeListener('error', this._contentErrorHandler);","                    this._contentErrorHandler = err => callback(err);","                    this.content.once('error', this._contentErrorHandler);","                }","","                let createStream = () => {","","                    if (['quoted-printable', 'base64'].includes(transferEncoding)) {","                        contentStream = new(transferEncoding === 'base64' ? base64 : qp).Encoder(options);","","                        contentStream.pipe(outputStream, {","                            end: false","                        });","                        contentStream.once('end', finalize);","                        contentStream.once('error', err => callback(err));","","                        localStream = this._getStream(this.content);","                        localStream.pipe(contentStream);","                    } else {","                        // anything that is not QP or Base54 passes as-is","                        localStream = this._getStream(this.content);","                        localStream.pipe(outputStream, {","                            end: false","                        });","                        localStream.once('end', finalize);","                    }","","                    localStream.once('error', err => callback(err));","                };","","                if (this.content._resolve) {","                    let chunks = [];","                    let chunklen = 0;","                    let returned = false;","                    let sourceStream = this._getStream(this.content);","                    sourceStream.on('error', err => {","                        if (returned) {","                            return;","                        }","                        returned = true;","                        callback(err);","                    });","                    sourceStream.on('readable', () => {","                        let chunk;","                        while ((chunk = sourceStream.read()) !== null) {","                            chunks.push(chunk);","                            chunklen += chunk.length;","                        }","                    });","                    sourceStream.on('end', () => {","                        if (returned) {","                            return;","                        }","                        returned = true;","                        this.content._resolve = false;","                        this.content._resolvedValue = Buffer.concat(chunks, chunklen);","                        setImmediate(createStream);","                    });","                } else {","                    setImmediate(createStream);","                }","                return;","            } else {","                return setImmediate(finalize);","            }","        };","","        if (this._raw) {","            setImmediate(() => {","                if (Object.prototype.toString.call(this._raw) === '[object Error]') {","                    // content is already errored","                    return callback(this._raw);","                }","","                // remove default error handler (if set)","                if (typeof this._raw.pipe === 'function') {","                    this._raw.removeListener('error', this._contentErrorHandler);","                }","","                let raw = this._getStream(this._raw);","                raw.pipe(outputStream, {","                    end: false","                });","                raw.on('error', err => outputStream.emit('error', err));","                raw.on('end', finalize);","            });","        } else {","            outputStream.write(this.buildHeaders() + '\\r\\n\\r\\n');","            setImmediate(sendContent);","        }","    }","","    /**","     * Sets envelope to be used instead of the generated one","     *","     * @return {Object} SMTP envelope in the form of {from: 'from@example.com', to: ['to@example.com']}","     */","    setEnvelope(envelope) {","        let list;","","        this._envelope = {","            from: false,","            to: []","        };","","        if (envelope.from) {","            list = [];","            this._convertAddresses(this._parseAddresses(envelope.from), list);","            list = list.filter(address => address && address.address);","            if (list.length && list[0]) {","                this._envelope.from = list[0].address;","            }","        }","        ['to', 'cc', 'bcc'].forEach(key => {","            if (envelope[key]) {","                this._convertAddresses(this._parseAddresses(envelope[key]), this._envelope.to);","            }","        });","","        this._envelope.to = this._envelope.to.map(to => to.address).filter(address => address);","","        let standardFields = ['to', 'cc', 'bcc', 'from'];","        Object.keys(envelope).forEach(key => {","            if (!standardFields.includes(key)) {","                this._envelope[key] = envelope[key];","            }","        });","","        return this;","    }","","    /**","     * Generates and returns an object with parsed address fields","     *","     * @return {Object} Address object","     */","    getAddresses() {","        let addresses = {};","","        this._headers.forEach(header => {","            let key = header.key.toLowerCase();","            if (['from', 'sender', 'reply-to', 'to', 'cc', 'bcc'].includes(key)) {","                if (!Array.isArray(addresses[key])) {","                    addresses[key] = [];","                }","","                this._convertAddresses(this._parseAddresses(header.value), addresses[key]);","            }","        });","","        return addresses;","    }","","    /**","     * Generates and returns SMTP envelope with the sender address and a list of recipients addresses","     *","     * @return {Object} SMTP envelope in the form of {from: 'from@example.com', to: ['to@example.com']}","     */","    getEnvelope() {","        if (this._envelope) {","            return this._envelope;","        }","","        let envelope = {","            from: false,","            to: []","        };","        this._headers.forEach(header => {","            let list = [];","            if (header.key === 'From' || (!envelope.from && ['Reply-To', 'Sender'].includes(header.key))) {","                this._convertAddresses(this._parseAddresses(header.value), list);","                if (list.length && list[0]) {","                    envelope.from = list[0].address;","                }","            } else if (['To', 'Cc', 'Bcc'].includes(header.key)) {","                this._convertAddresses(this._parseAddresses(header.value), envelope.to);","            }","        });","","        envelope.to = envelope.to.map(to => to.address);","","        return envelope;","    }","","    /**","     * Returns Message-Id value. If it does not exist, then creates one","     *","     * @return {String} Message-Id value","     */","    messageId() {","        let messageId = this.getHeader('Message-ID');","        // You really should define your own Message-Id field!","        if (!messageId) {","            messageId = this._generateMessageId();","            this.setHeader('Message-ID', messageId);","        }","        return messageId;","    }","","    /**","     * Sets pregenerated content that will be used as the output of this node","     *","     * @param {String|Buffer|Stream} Raw MIME contents","     */","    setRaw(raw) {","        this._raw = raw;","","        if (this._raw && typeof this._raw.pipe === 'function') {","            // pre-stream handler. might be triggered if a stream is set as content","            // and 'error' fires before anything is done with this stream","            this._contentErrorHandler = err => {","                this._raw.removeListener('error', this._contentErrorHandler);","                this._raw = err;","            };","            this._raw.once('error', this._contentErrorHandler);","        }","","        return this;","    }","","    /////// PRIVATE METHODS","","    /**","     * Detects and returns handle to a stream related with the content.","     *","     * @param {Mixed} content Node content","     * @returns {Object} Stream object","     */","    _getStream(content) {","        let contentStream;","","        if (content._resolvedValue) {","            // pass string or buffer content as a stream","            contentStream = new PassThrough();","            setImmediate(() => contentStream.end(content._resolvedValue));","            return contentStream;","        } else if (typeof content.pipe === 'function') {","            // assume as stream","            return content;","        } else if (content && typeof content.path === 'string' && !content.href) {","            if (this.disableFileAccess) {","                contentStream = new PassThrough();","                setImmediate(() => contentStream.emit('error', new Error('File access rejected for ' + content.path)));","                return contentStream;","            }","            // read file","            return fs.createReadStream(content.path);","        } else if (content && typeof content.href === 'string') {","            if (this.disableUrlAccess) {","                contentStream = new PassThrough();","                setImmediate(() => contentStream.emit('error', new Error('Url access rejected for ' + content.href)));","                return contentStream;","            }","            // fetch URL","            return fetch(content.href);","        } else {","            // pass string or buffer content as a stream","            contentStream = new PassThrough();","            setImmediate(() => contentStream.end(content || ''));","            return contentStream;","        }","    }","","    /**","     * Parses addresses. Takes in a single address or an array or an","     * array of address arrays (eg. To: [[first group], [second group],...])","     *","     * @param {Mixed} addresses Addresses to be parsed","     * @return {Array} An array of address objects","     */","    _parseAddresses(addresses) {","        return [].concat.apply([], [].concat(addresses).map(address => { // eslint-disable-line prefer-spread","            if (address && address.address) {","                address.address = this._normalizeAddress(address.address);","                address.name = address.name || '';","                return [address];","            }","            return addressparser(address);","        }));","    }","","    /**","     * Normalizes a header key, uses Camel-Case form, except for uppercase MIME-","     *","     * @param {String} key Key to be normalized","     * @return {String} key in Camel-Case form","     */","    _normalizeHeaderKey(key) {","        return (key || '').toString().","        // no newlines in keys","        replace(/\\r?\\n|\\r/g, ' ').","        trim().toLowerCase().","        // use uppercase words, except MIME","        replace(/^X\\-SMTPAPI$|^(MIME|DKIM)\\b|^[a-z]|\\-(SPF|FBL|ID|MD5)$|\\-[a-z]/ig, c => c.toUpperCase()).","        // special case","        replace(/^Content\\-Features$/i, 'Content-features');","    }","","    /**","     * Checks if the content type is multipart and defines boundary if needed.","     * Doesn't return anything, modifies object argument instead.","     *","     * @param {Object} structured Parsed header value for 'Content-Type' key","     */","    _handleContentType(structured) {","        this.contentType = structured.value.trim().toLowerCase();","","        this.multipart = this.contentType.split('/').reduce((prev, value) => prev === 'multipart' ? value : false);","","        if (this.multipart) {","            this.boundary = structured.params.boundary = structured.params.boundary || this.boundary || this._generateBoundary();","        } else {","            this.boundary = false;","        }","    }","","    /**","     * Generates a multipart boundary value","     *","     * @return {String} boundary value","     */","    _generateBoundary() {","        return this.rootNode.boundaryPrefix + '-' + this.rootNode.baseBoundary + '-Part_' + this._nodeId;","    }","","    /**","     * Encodes a header value for use in the generated rfc2822 email.","     *","     * @param {String} key Header key","     * @param {String} value Header value","     */","    _encodeHeaderValue(key, value) {","        key = this._normalizeHeaderKey(key);","","        switch (key) {","","            // Structured headers","            case 'From':","            case 'Sender':","            case 'To':","            case 'Cc':","            case 'Bcc':","            case 'Reply-To':","                return this._convertAddresses(this._parseAddresses(value));","","                // values enclosed in <>","            case 'Message-ID':","            case 'In-Reply-To':","            case 'Content-Id':","                value = (value || '').toString().replace(/\\r?\\n|\\r/g, ' ');","","                if (value.charAt(0) !== '<') {","                    value = '<' + value;","                }","","                if (value.charAt(value.length - 1) !== '>') {","                    value = value + '>';","                }","                return value;","","                // space separated list of values enclosed in <>","            case 'References':","                value = [].concat.apply([], [].concat(value || '').map(elm => { // eslint-disable-line prefer-spread","                    elm = (elm || '').toString().replace(/\\r?\\n|\\r/g, ' ').trim();","                    return elm.replace(/<[^>]*>/g, str => str.replace(/\\s/g, '')).split(/\\s+/);","                })).map(elm => {","                    if (elm.charAt(0) !== '<') {","                        elm = '<' + elm;","                    }","                    if (elm.charAt(elm.length - 1) !== '>') {","                        elm = elm + '>';","                    }","                    return elm;","                });","","                return value.join(' ').trim();","","            case 'Date':","                if (Object.prototype.toString.call(value) === '[object Date]') {","                    return value.toUTCString().replace(/GMT/, '+0000');","                }","","                value = (value || '').toString().replace(/\\r?\\n|\\r/g, ' ');","                return this._encodeWords(value);","","            default:","                value = (value || '').toString().replace(/\\r?\\n|\\r/g, ' ');","                // encodeWords only encodes if needed, otherwise the original string is returned","                return this._encodeWords(value);","        }","    }","","    /**","     * Rebuilds address object using punycode and other adjustments","     *","     * @param {Array} addresses An array of address objects","     * @param {Array} [uniqueList] An array to be populated with addresses","     * @return {String} address string","     */","    _convertAddresses(addresses, uniqueList) {","        let values = [];","","        uniqueList = uniqueList || [];","","        [].concat(addresses || []).forEach(address => {","            if (address.address) {","                address.address = this._normalizeAddress(address.address);","","                if (!address.name) {","                    values.push(address.address);","                } else if (address.name) {","                    values.push(this._encodeAddressName(address.name) + ' <' + address.address + '>');","                }","","                if (address.address) {","                    if (!uniqueList.filter(a => a.address === address.address).length) {","                        uniqueList.push(address);","                    }","                }","            } else if (address.group) {","                values.push(this._encodeAddressName(address.name) + ':' + (address.group.length ? this._convertAddresses(address.group, uniqueList) : '').trim() + ';');","            }","        });","","        return values.join(', ');","    }","","    /**","     * Normalizes an email address","     *","     * @param {Array} address An array of address objects","     * @return {String} address string","     */","    _normalizeAddress(address) {","        address = (address || '').toString().trim();","","        let lastAt = address.lastIndexOf('@');","        let user = address.substr(0, lastAt);","        let domain = address.substr(lastAt + 1);","","        // Usernames are not touched and are kept as is even if these include unicode","        // Domains are punycoded by default","        // 'jgeva.ee' will be converted to 'xn--jgeva-dua.ee'","        // non-unicode domains are left as is","","        return user + '@' + punycode.toASCII(domain.toLowerCase());","    }","","    /**","     * If needed, mime encodes the name part","     *","     * @param {String} name Name part of an address","     * @returns {String} Mime word encoded string if needed","     */","    _encodeAddressName(name) {","        if (!/^[\\w ']*$/.test(name)) {","            if (/^[\\x20-\\x7e]*$/.test(name)) {","                return '\"' + name.replace(/([\\\\\"])/g, '\\\\$1') + '\"';","            } else {","                return mimeFuncs.encodeWord(name, this._getTextEncoding(name), 52);","            }","        }","        return name;","    }","","    /**","     * If needed, mime encodes the name part","     *","     * @param {String} name Name part of an address","     * @returns {String} Mime word encoded string if needed","     */","    _encodeWords(value) {","        return mimeFuncs.encodeWords(value, this._getTextEncoding(value), 52);","    }","","    /**","     * Detects best mime encoding for a text value","     *","     * @param {String} value Value to check for","     * @return {String} either 'Q' or 'B'","     */","    _getTextEncoding(value) {","        value = (value || '').toString();","","        let encoding = this.textEncoding;","        let latinLen;","        let nonLatinLen;","","        if (!encoding) {","            // count latin alphabet symbols and 8-bit range symbols + control symbols","            // if there are more latin characters, then use quoted-printable","            // encoding, otherwise use base64","            nonLatinLen = (value.match(/[\\x00-\\x08\\x0B\\x0C\\x0E-\\x1F\\u0080-\\uFFFF]/g) || []).length; // eslint-disable-line no-control-regex","            latinLen = (value.match(/[a-z]/gi) || []).length;","            // if there are more latin symbols than binary/unicode, then prefer Q, otherwise B","            encoding = nonLatinLen < latinLen ? 'Q' : 'B';","        }","        return encoding;","    }","","    /**","     * Generates a message id","     *","     * @return {String} Random Message-ID value","     */","    _generateMessageId() {","        return '<' + [2, 2, 2, 6].reduce(","                // crux to generate UUID-like random strings","                (prev, len) => prev + '-' + crypto.randomBytes(len).toString('hex'),","                crypto.randomBytes(4).toString('hex')) + '@' +","            // try to use the domain of the FROM address or fallback to server hostname","            (this.getEnvelope().from || this.hostname || os.hostname() || 'localhost').split('@').pop() + '>';","    }","}","","module.exports = MimeNode;",""],"l":{"5":1,"6":1,"7":1,"8":1,"9":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"34":0,"36":0,"41":0,"42":0,"44":0,"45":0,"50":0,"55":0,"60":0,"66":0,"70":0,"71":0,"72":0,"79":0,"84":0,"89":0,"94":0,"99":0,"104":0,"110":0,"116":0,"122":0,"128":0,"135":0,"142":0,"147":0,"148":0,"162":0,"163":0,"164":0,"166":0,"167":0,"168":0,"180":0,"181":0,"182":0,"185":0,"187":0,"188":0,"198":0,"199":0,"202":0,"203":0,"205":0,"206":0,"207":0,"209":0,"210":0,"212":0,"216":0,"225":0,"226":0,"229":0,"230":0,"231":0,"232":0,"233":0,"234":0,"249":0,"253":0,"255":0,"256":0,"259":0,"260":0,"261":0,"266":0,"267":0,"270":0,"273":0,"275":0,"281":0,"282":0,"283":0,"285":0,"286":0,"289":0,"290":0,"291":0,"297":0,"298":0,"301":0,"317":0,"319":0,"320":0,"323":0,"324":0,"325":0,"330":0,"331":0,"334":0,"335":0,"336":0,"337":0,"339":0,"342":0,"347":0,"357":0,"358":0,"359":0,"360":0,"374":0,"375":0,"378":0,"379":0,"380":0,"382":0,"383":0,"384":0,"385":0,"387":0,"390":0,"394":0,"395":0,"396":0,"397":0,"399":0,"400":0,"402":0,"403":0,"404":0,"408":0,"409":0,"410":0,"412":0,"414":0,"417":0,"418":0,"419":0,"421":0,"423":0,"424":0,"425":0,"427":0,"432":0,"433":0,"435":0,"436":0,"437":0,"438":0,"440":0,"441":0,"442":0,"444":0,"447":0,"449":0,"450":0,"454":0,"463":0,"464":0,"466":0,"467":0,"470":0,"471":0,"475":0,"476":0,"477":0,"481":0,"483":0,"484":0,"488":0,"489":0,"490":0,"491":0,"492":0,"493":0,"494":0,"496":0,"497":0,"498":0,"499":0,"502":0,"503":0,"504":0,"508":0,"510":0,"511":0,"514":0,"516":0,"517":0,"518":0,"520":0,"521":0,"523":0,"525":0,"527":0,"528":0,"531":0,"533":0,"537":0,"539":0,"541":0,"543":0,"545":0,"547":0,"549":0,"551":0,"554":0,"557":0,"558":0,"561":0,"564":0,"574":0,"576":0,"577":0,"578":0,"580":0,"581":0,"582":0,"583":0,"585":0,"588":0,"589":0,"590":0,"591":0,"593":0,"597":0,"598":0,"599":0,"601":0,"604":0,"605":0,"606":0,"609":0,"619":0,"631":0,"635":0,"636":0,"637":0,"640":0,"641":0,"642":0,"643":0,"645":0,"646":0,"651":0,"652":0,"653":0,"654":0,"655":0,"656":0,"658":0,"659":0,"660":0,"661":0,"662":0,"664":0,"668":0,"669":0,"671":0,"676":0,"677":0,"679":0,"681":0,"684":0,"685":0,"686":0,"687":0,"690":0,"692":0,"693":0,"695":0,"698":0,"699":0,"701":0,"702":0,"705":0,"706":0,"709":0,"712":0,"715":0,"716":0,"717":0,"718":0,"719":0,"720":0,"721":0,"722":0,"724":0,"725":0,"727":0,"728":0,"729":0,"730":0,"731":0,"734":0,"735":0,"736":0,"738":0,"739":0,"740":0,"741":0,"744":0,"746":0,"748":0,"752":0,"753":0,"754":0,"756":0,"760":0,"761":0,"764":0,"765":0,"768":0,"769":0,"772":0,"773":0,"783":0,"785":0,"790":0,"791":0,"792":0,"793":0,"794":0,"795":0,"798":0,"799":0,"800":0,"804":0,"806":0,"807":0,"808":0,"809":0,"813":0,"822":0,"824":0,"825":0,"826":0,"827":0,"828":0,"831":0,"835":0,"844":0,"845":0,"848":0,"852":0,"853":0,"854":0,"855":0,"856":0,"857":0,"859":0,"860":0,"864":0,"866":0,"875":0,"877":0,"878":0,"879":0,"881":0,"890":0,"892":0,"895":0,"896":0,"897":0,"899":0,"902":0,"914":0,"916":0,"918":0,"919":0,"920":0,"921":0,"923":0,"924":0,"925":0,"926":0,"927":0,"928":0,"931":0,"932":0,"933":0,"934":0,"935":0,"936":0,"939":0,"942":0,"943":0,"944":0,"956":0,"957":0,"958":0,"959":0,"960":0,"962":0,"973":0,"978":0,"990":0,"992":0,"994":0,"995":0,"997":0,"1007":0,"1017":0,"1019":0,"1028":0,"1034":0,"1036":0,"1037":0,"1040":0,"1041":0,"1043":0,"1047":0,"1048":0,"1049":0,"1051":0,"1052":0,"1054":0,"1055":0,"1057":0,"1060":0,"1063":0,"1064":0,"1067":0,"1068":0,"1071":0,"1073":0,"1085":0,"1087":0,"1089":0,"1090":0,"1091":0,"1093":0,"1094":0,"1095":0,"1096":0,"1099":0,"1100":0,"1101":0,"1104":0,"1105":0,"1109":0,"1119":0,"1121":0,"1122":0,"1123":0,"1130":0,"1140":0,"1141":0,"1142":0,"1144":0,"1147":0,"1157":0,"1167":0,"1169":0,"1170":0,"1171":0,"1173":0,"1177":0,"1178":0,"1180":0,"1182":0,"1191":0,"1193":0,"1200":1}},"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/mime-funcs/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/mime-funcs/index.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":0,"192":0,"193":0,"194":0,"195":0,"196":0,"197":0,"198":0,"199":0,"200":0,"201":0,"202":0,"203":0,"204":0,"205":0,"206":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":0,"213":0,"214":0,"215":0,"216":0,"217":0,"218":0,"219":0,"220":0,"221":0,"222":0,"223":0,"224":0,"225":0,"226":0,"227":0,"228":0,"229":0,"230":0,"231":0,"232":0,"233":0,"234":0,"235":0,"236":0,"237":0,"238":0,"239":0,"240":0,"241":0,"242":0,"243":0,"244":0,"245":0,"246":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0],"47":[0,0,0],"48":[0,0],"49":[0,0],"50":[0,0],"51":[0,0],"52":[0,0],"53":[0,0],"54":[0,0],"55":[0,0],"56":[0,0],"57":[0,0],"58":[0,0],"59":[0,0],"60":[0,0],"61":[0,0],"62":[0,0],"63":[0,0],"64":[0,0],"65":[0,0],"66":[0,0],"67":[0,0],"68":[0,0],"69":[0,0],"70":[0,0],"71":[0,0],"72":[0,0],"73":[0,0],"74":[0,0],"75":[0,0],"76":[0,0],"77":[0,0,0],"78":[0,0],"79":[0,0],"80":[0,0],"81":[0,0],"82":[0,0],"83":[0,0],"84":[0,0],"85":[0,0],"86":[0,0],"87":[0,0],"88":[0,0],"89":[0,0],"90":[0,0],"91":[0,0],"92":[0,0],"93":[0,0],"94":[0,0],"95":[0,0],"96":[0,0],"97":[0,0],"98":[0,0],"99":[0,0],"100":[0,0],"101":[0,0],"102":[0,0],"103":[0,0],"104":[0,0],"105":[0,0],"106":[0,0],"107":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"fnMap":{"1":{"name":"(anonymous_1)","line":17,"loc":{"start":{"line":17,"column":15},"end":{"line":17,"column":23}}},"2":{"name":"(anonymous_2)","line":36,"loc":{"start":{"line":36,"column":18},"end":{"line":36,"column":36}}},"3":{"name":"(anonymous_3)","line":52,"loc":{"start":{"line":52,"column":14},"end":{"line":52,"column":50}}},"4":{"name":"(anonymous_4)","line":122,"loc":{"start":{"line":122,"column":15},"end":{"line":122,"column":52}}},"5":{"name":"(anonymous_5)","line":159,"loc":{"start":{"line":159,"column":20},"end":{"line":159,"column":33}}},"6":{"name":"(anonymous_6)","line":199,"loc":{"start":{"line":199,"column":20},"end":{"line":199,"column":43}}},"7":{"name":"(anonymous_7)","line":342,"loc":{"start":{"line":342,"column":20},"end":{"line":342,"column":26}}},"8":{"name":"(anonymous_8)","line":493,"loc":{"start":{"line":493,"column":13},"end":{"line":493,"column":43}}},"9":{"name":"(anonymous_9)","line":593,"loc":{"start":{"line":593,"column":26},"end":{"line":593,"column":32}}}},"statementMap":{"1":{"start":{"line":5,"column":0},"end":{"line":5,"column":36}},"2":{"start":{"line":6,"column":0},"end":{"line":6,"column":28}},"3":{"start":{"line":7,"column":0},"end":{"line":7,"column":42}},"4":{"start":{"line":9,"column":0},"end":{"line":608,"column":2}},"5":{"start":{"line":18,"column":8},"end":{"line":22,"column":9}},"6":{"start":{"line":19,"column":12},"end":{"line":19,"column":25}},"7":{"start":{"line":21,"column":12},"end":{"line":21,"column":24}},"8":{"start":{"line":37,"column":8},"end":{"line":40,"column":9}},"9":{"start":{"line":39,"column":12},"end":{"line":39,"column":24}},"10":{"start":{"line":41,"column":8},"end":{"line":41,"column":74}},"11":{"start":{"line":53,"column":8},"end":{"line":53,"column":95}},"12":{"start":{"line":54,"column":8},"end":{"line":54,"column":35}},"13":{"start":{"line":56,"column":8},"end":{"line":56,"column":23}},"14":{"start":{"line":57,"column":8},"end":{"line":57,"column":32}},"15":{"start":{"line":59,"column":8},"end":{"line":61,"column":9}},"16":{"start":{"line":60,"column":12},"end":{"line":60,"column":48}},"17":{"start":{"line":63,"column":8},"end":{"line":76,"column":9}},"18":{"start":{"line":65,"column":12},"end":{"line":72,"column":15}},"19":{"start":{"line":66,"column":16},"end":{"line":66,"column":71}},"20":{"start":{"line":67,"column":16},"end":{"line":71,"column":17}},"21":{"start":{"line":68,"column":20},"end":{"line":68,"column":31}},"22":{"start":{"line":70,"column":20},"end":{"line":70,"column":70}},"23":{"start":{"line":73,"column":15},"end":{"line":76,"column":9}},"24":{"start":{"line":74,"column":12},"end":{"line":74,"column":79}},"25":{"start":{"line":75,"column":12},"end":{"line":75,"column":89}},"26":{"start":{"line":78,"column":8},"end":{"line":109,"column":9}},"27":{"start":{"line":79,"column":12},"end":{"line":106,"column":13}},"28":{"start":{"line":80,"column":16},"end":{"line":80,"column":137}},"29":{"start":{"line":83,"column":16},"end":{"line":83,"column":31}},"30":{"start":{"line":84,"column":16},"end":{"line":84,"column":31}},"31":{"start":{"line":85,"column":16},"end":{"line":96,"column":17}},"32":{"start":{"line":86,"column":20},"end":{"line":86,"column":51}},"33":{"start":{"line":89,"column":20},"end":{"line":95,"column":21}},"34":{"start":{"line":90,"column":24},"end":{"line":90,"column":37}},"35":{"start":{"line":93,"column":24},"end":{"line":93,"column":57}},"36":{"start":{"line":94,"column":24},"end":{"line":94,"column":36}},"37":{"start":{"line":97,"column":16},"end":{"line":99,"column":17}},"38":{"start":{"line":98,"column":20},"end":{"line":98,"column":53}},"39":{"start":{"line":101,"column":16},"end":{"line":105,"column":17}},"40":{"start":{"line":102,"column":20},"end":{"line":102,"column":96}},"41":{"start":{"line":104,"column":20},"end":{"line":104,"column":48}},"42":{"start":{"line":107,"column":15},"end":{"line":109,"column":9}},"43":{"start":{"line":108,"column":12},"end":{"line":108,"column":45}},"44":{"start":{"line":111,"column":8},"end":{"line":111,"column":123}},"45":{"start":{"line":123,"column":8},"end":{"line":123,"column":35}},"46":{"start":{"line":125,"column":8},"end":{"line":125,"column":25}},"47":{"start":{"line":128,"column":8},"end":{"line":128,"column":72}},"48":{"start":{"line":129,"column":8},"end":{"line":131,"column":9}},"49":{"start":{"line":130,"column":12},"end":{"line":130,"column":25}},"50":{"start":{"line":134,"column":8},"end":{"line":134,"column":81}},"51":{"start":{"line":135,"column":8},"end":{"line":138,"column":9}},"52":{"start":{"line":137,"column":12},"end":{"line":137,"column":25}},"53":{"start":{"line":140,"column":8},"end":{"line":142,"column":17}},"54":{"start":{"line":143,"column":8},"end":{"line":143,"column":69}},"55":{"start":{"line":145,"column":8},"end":{"line":147,"column":68}},"56":{"start":{"line":149,"column":8},"end":{"line":149,"column":28}},"57":{"start":{"line":160,"column":8},"end":{"line":160,"column":29}},"58":{"start":{"line":162,"column":8},"end":{"line":179,"column":11}},"59":{"start":{"line":165,"column":12},"end":{"line":165,"column":49}},"60":{"start":{"line":166,"column":12},"end":{"line":178,"column":13}},"61":{"start":{"line":167,"column":16},"end":{"line":173,"column":19}},"62":{"start":{"line":168,"column":20},"end":{"line":172,"column":21}},"63":{"start":{"line":169,"column":24},"end":{"line":169,"column":86}},"64":{"start":{"line":171,"column":24},"end":{"line":171,"column":102}},"65":{"start":{"line":174,"column":19},"end":{"line":178,"column":13}},"66":{"start":{"line":175,"column":16},"end":{"line":175,"column":70}},"67":{"start":{"line":177,"column":16},"end":{"line":177,"column":54}},"68":{"start":{"line":181,"column":8},"end":{"line":181,"column":92}},"69":{"start":{"line":200,"column":8},"end":{"line":200,"column":22}},"70":{"start":{"line":201,"column":8},"end":{"line":201,"column":83}},"71":{"start":{"line":202,"column":8},"end":{"line":202,"column":26}},"72":{"start":{"line":203,"column":8},"end":{"line":203,"column":21}},"73":{"start":{"line":204,"column":8},"end":{"line":204,"column":17}},"74":{"start":{"line":205,"column":8},"end":{"line":205,"column":25}},"75":{"start":{"line":206,"column":8},"end":{"line":206,"column":19}},"76":{"start":{"line":208,"column":8},"end":{"line":208,"column":36}},"77":{"start":{"line":211,"column":8},"end":{"line":316,"column":9}},"78":{"start":{"line":214,"column":12},"end":{"line":219,"column":13}},"79":{"start":{"line":215,"column":16},"end":{"line":218,"column":19}},"80":{"start":{"line":221,"column":12},"end":{"line":226,"column":15}},"81":{"start":{"line":222,"column":16},"end":{"line":224,"column":19}},"82":{"start":{"line":225,"column":16},"end":{"line":225,"column":26}},"83":{"start":{"line":228,"column":12},"end":{"line":232,"column":13}},"84":{"start":{"line":229,"column":16},"end":{"line":231,"column":19}},"85":{"start":{"line":236,"column":12},"end":{"line":251,"column":13}},"86":{"start":{"line":238,"column":16},"end":{"line":238,"column":35}},"87":{"start":{"line":239,"column":16},"end":{"line":249,"column":17}},"88":{"start":{"line":240,"column":20},"end":{"line":240,"column":47}},"89":{"start":{"line":241,"column":20},"end":{"line":241,"column":44}},"90":{"start":{"line":242,"column":20},"end":{"line":248,"column":21}},"91":{"start":{"line":243,"column":24},"end":{"line":243,"column":56}},"92":{"start":{"line":244,"column":24},"end":{"line":244,"column":48}},"93":{"start":{"line":245,"column":24},"end":{"line":245,"column":28}},"94":{"start":{"line":247,"column":24},"end":{"line":247,"column":48}},"95":{"start":{"line":250,"column":16},"end":{"line":250,"column":43}},"96":{"start":{"line":255,"column":12},"end":{"line":255,"column":31}},"97":{"start":{"line":256,"column":12},"end":{"line":256,"column":31}},"98":{"start":{"line":257,"column":12},"end":{"line":257,"column":25}},"99":{"start":{"line":260,"column":12},"end":{"line":308,"column":13}},"100":{"start":{"line":262,"column":16},"end":{"line":262,"column":36}},"101":{"start":{"line":264,"column":16},"end":{"line":290,"column":17}},"102":{"start":{"line":265,"column":20},"end":{"line":265,"column":59}},"103":{"start":{"line":268,"column":20},"end":{"line":268,"column":79}},"104":{"start":{"line":272,"column":20},"end":{"line":289,"column":21}},"105":{"start":{"line":276,"column":24},"end":{"line":288,"column":25}},"106":{"start":{"line":277,"column":28},"end":{"line":280,"column":31}},"107":{"start":{"line":281,"column":28},"end":{"line":281,"column":38}},"108":{"start":{"line":282,"column":28},"end":{"line":282,"column":45}},"109":{"start":{"line":284,"column":28},"end":{"line":284,"column":43}},"110":{"start":{"line":285,"column":28},"end":{"line":285,"column":41}},"111":{"start":{"line":286,"column":28},"end":{"line":286,"column":38}},"112":{"start":{"line":287,"column":28},"end":{"line":287,"column":37}},"113":{"start":{"line":293,"column":16},"end":{"line":307,"column":17}},"114":{"start":{"line":294,"column":20},"end":{"line":297,"column":23}},"115":{"start":{"line":298,"column":20},"end":{"line":298,"column":106}},"116":{"start":{"line":299,"column":20},"end":{"line":304,"column":21}},"117":{"start":{"line":300,"column":24},"end":{"line":300,"column":40}},"118":{"start":{"line":301,"column":24},"end":{"line":301,"column":41}},"119":{"start":{"line":303,"column":24},"end":{"line":303,"column":39}},"120":{"start":{"line":306,"column":20},"end":{"line":306,"column":32}},"121":{"start":{"line":310,"column":12},"end":{"line":315,"column":13}},"122":{"start":{"line":311,"column":16},"end":{"line":314,"column":19}},"123":{"start":{"line":318,"column":8},"end":{"line":324,"column":12}},"124":{"start":{"line":318,"column":38},"end":{"line":324,"column":9}},"125":{"start":{"line":343,"column":8},"end":{"line":346,"column":10}},"126":{"start":{"line":347,"column":8},"end":{"line":347,"column":24}},"127":{"start":{"line":348,"column":8},"end":{"line":348,"column":23}},"128":{"start":{"line":349,"column":8},"end":{"line":349,"column":27}},"129":{"start":{"line":350,"column":8},"end":{"line":350,"column":26}},"130":{"start":{"line":351,"column":8},"end":{"line":351,"column":28}},"131":{"start":{"line":352,"column":8},"end":{"line":352,"column":16}},"132":{"start":{"line":354,"column":8},"end":{"line":388,"column":9}},"133":{"start":{"line":355,"column":12},"end":{"line":355,"column":32}},"134":{"start":{"line":356,"column":12},"end":{"line":387,"column":13}},"135":{"start":{"line":357,"column":16},"end":{"line":362,"column":17}},"136":{"start":{"line":358,"column":20},"end":{"line":358,"column":53}},"137":{"start":{"line":359,"column":20},"end":{"line":359,"column":35}},"138":{"start":{"line":360,"column":20},"end":{"line":360,"column":31}},"139":{"start":{"line":361,"column":20},"end":{"line":361,"column":29}},"140":{"start":{"line":363,"column":16},"end":{"line":363,"column":29}},"141":{"start":{"line":365,"column":16},"end":{"line":384,"column":17}},"142":{"start":{"line":366,"column":20},"end":{"line":366,"column":33}},"143":{"start":{"line":367,"column":23},"end":{"line":384,"column":17}},"144":{"start":{"line":368,"column":20},"end":{"line":368,"column":35}},"145":{"start":{"line":369,"column":20},"end":{"line":369,"column":29}},"146":{"start":{"line":370,"column":23},"end":{"line":384,"column":17}},"147":{"start":{"line":371,"column":20},"end":{"line":371,"column":34}},"148":{"start":{"line":372,"column":23},"end":{"line":384,"column":17}},"149":{"start":{"line":373,"column":20},"end":{"line":373,"column":32}},"150":{"start":{"line":374,"column":23},"end":{"line":384,"column":17}},"151":{"start":{"line":375,"column":20},"end":{"line":379,"column":21}},"152":{"start":{"line":376,"column":24},"end":{"line":376,"column":54}},"153":{"start":{"line":378,"column":24},"end":{"line":378,"column":60}},"154":{"start":{"line":380,"column":20},"end":{"line":380,"column":33}},"155":{"start":{"line":381,"column":20},"end":{"line":381,"column":31}},"156":{"start":{"line":383,"column":20},"end":{"line":383,"column":33}},"157":{"start":{"line":385,"column":16},"end":{"line":385,"column":32}},"158":{"start":{"line":390,"column":8},"end":{"line":398,"column":9}},"159":{"start":{"line":391,"column":12},"end":{"line":395,"column":13}},"160":{"start":{"line":392,"column":16},"end":{"line":392,"column":46}},"161":{"start":{"line":394,"column":16},"end":{"line":394,"column":52}},"162":{"start":{"line":396,"column":15},"end":{"line":398,"column":9}},"163":{"start":{"line":397,"column":12},"end":{"line":397,"column":61}},"164":{"start":{"line":404,"column":8},"end":{"line":429,"column":11}},"165":{"start":{"line":405,"column":12},"end":{"line":405,"column":44}},"166":{"start":{"line":406,"column":12},"end":{"line":428,"column":13}},"167":{"start":{"line":407,"column":16},"end":{"line":407,"column":55}},"168":{"start":{"line":408,"column":16},"end":{"line":408,"column":55}},"169":{"start":{"line":410,"column":16},"end":{"line":415,"column":17}},"170":{"start":{"line":411,"column":20},"end":{"line":414,"column":22}},"171":{"start":{"line":417,"column":16},"end":{"line":417,"column":45}},"172":{"start":{"line":419,"column":16},"end":{"line":422,"column":17}},"173":{"start":{"line":420,"column":20},"end":{"line":420,"column":82}},"174":{"start":{"line":421,"column":20},"end":{"line":421,"column":37}},"175":{"start":{"line":424,"column":16},"end":{"line":424,"column":62}},"176":{"start":{"line":427,"column":16},"end":{"line":427,"column":44}},"177":{"start":{"line":432,"column":8},"end":{"line":461,"column":11}},"178":{"start":{"line":433,"column":12},"end":{"line":433,"column":22}},"179":{"start":{"line":434,"column":12},"end":{"line":460,"column":13}},"180":{"start":{"line":435,"column":16},"end":{"line":435,"column":83}},"181":{"start":{"line":435,"column":63},"end":{"line":435,"column":72}},"182":{"start":{"line":437,"column":16},"end":{"line":459,"column":17}},"183":{"start":{"line":439,"column":20},"end":{"line":456,"column":29}},"184":{"start":{"line":446,"column":28},"end":{"line":446,"column":65}},"185":{"start":{"line":447,"column":28},"end":{"line":451,"column":29}},"186":{"start":{"line":448,"column":32},"end":{"line":448,"column":43}},"187":{"start":{"line":450,"column":32},"end":{"line":450,"column":75}},"188":{"start":{"line":458,"column":20},"end":{"line":458,"column":49}},"189":{"start":{"line":463,"column":8},"end":{"line":463,"column":24}},"190":{"start":{"line":473,"column":33},"end":{"line":473,"column":68}},"191":{"start":{"line":482,"column":33},"end":{"line":482,"column":68}},"192":{"start":{"line":494,"column":8},"end":{"line":494,"column":37}},"193":{"start":{"line":495,"column":8},"end":{"line":495,"column":38}},"194":{"start":{"line":497,"column":8},"end":{"line":500,"column":24}},"195":{"start":{"line":502,"column":8},"end":{"line":524,"column":9}},"196":{"start":{"line":503,"column":12},"end":{"line":503,"column":47}},"197":{"start":{"line":504,"column":12},"end":{"line":507,"column":13}},"198":{"start":{"line":505,"column":16},"end":{"line":505,"column":31}},"199":{"start":{"line":506,"column":16},"end":{"line":506,"column":22}},"200":{"start":{"line":508,"column":12},"end":{"line":517,"column":13}},"201":{"start":{"line":509,"column":16},"end":{"line":509,"column":32}},"202":{"start":{"line":510,"column":16},"end":{"line":510,"column":31}},"203":{"start":{"line":511,"column":16},"end":{"line":511,"column":35}},"204":{"start":{"line":512,"column":16},"end":{"line":512,"column":25}},"205":{"start":{"line":513,"column":19},"end":{"line":517,"column":13}},"206":{"start":{"line":514,"column":16},"end":{"line":514,"column":116}},"207":{"start":{"line":515,"column":19},"end":{"line":517,"column":13}},"208":{"start":{"line":516,"column":16},"end":{"line":516,"column":112}},"209":{"start":{"line":519,"column":12},"end":{"line":519,"column":27}},"210":{"start":{"line":520,"column":12},"end":{"line":520,"column":31}},"211":{"start":{"line":521,"column":12},"end":{"line":523,"column":13}},"212":{"start":{"line":522,"column":16},"end":{"line":522,"column":33}},"213":{"start":{"line":526,"column":8},"end":{"line":526,"column":22}},"214":{"start":{"line":537,"column":8},"end":{"line":538,"column":23}},"215":{"start":{"line":541,"column":8},"end":{"line":541,"column":43}},"216":{"start":{"line":543,"column":8},"end":{"line":569,"column":9}},"217":{"start":{"line":544,"column":12},"end":{"line":544,"column":44}},"218":{"start":{"line":547,"column":12},"end":{"line":549,"column":13}},"219":{"start":{"line":548,"column":16},"end":{"line":548,"column":57}},"220":{"start":{"line":551,"column":12},"end":{"line":551,"column":25}},"221":{"start":{"line":552,"column":12},"end":{"line":563,"column":13}},"222":{"start":{"line":553,"column":16},"end":{"line":553,"column":28}},"223":{"start":{"line":555,"column":16},"end":{"line":562,"column":17}},"224":{"start":{"line":556,"column":20},"end":{"line":556,"column":49}},"225":{"start":{"line":558,"column":20},"end":{"line":561,"column":21}},"226":{"start":{"line":559,"column":24},"end":{"line":559,"column":72}},"227":{"start":{"line":560,"column":24},"end":{"line":560,"column":37}},"228":{"start":{"line":565,"column":12},"end":{"line":567,"column":13}},"229":{"start":{"line":566,"column":16},"end":{"line":566,"column":36}},"230":{"start":{"line":568,"column":12},"end":{"line":568,"column":45}},"231":{"start":{"line":571,"column":8},"end":{"line":571,"column":21}},"232":{"start":{"line":575,"column":8},"end":{"line":575,"column":21}},"233":{"start":{"line":576,"column":8},"end":{"line":576,"column":63}},"234":{"start":{"line":578,"column":8},"end":{"line":580,"column":9}},"235":{"start":{"line":579,"column":12},"end":{"line":579,"column":28}},"236":{"start":{"line":582,"column":8},"end":{"line":588,"column":9}},"237":{"start":{"line":583,"column":12},"end":{"line":585,"column":13}},"238":{"start":{"line":584,"column":16},"end":{"line":584,"column":46}},"239":{"start":{"line":587,"column":12},"end":{"line":587,"column":29}},"240":{"start":{"line":590,"column":8},"end":{"line":590,"column":19}},"241":{"start":{"line":594,"column":8},"end":{"line":594,"column":37}},"242":{"start":{"line":596,"column":8},"end":{"line":602,"column":9}},"243":{"start":{"line":598,"column":12},"end":{"line":598,"column":42}},"244":{"start":{"line":601,"column":12},"end":{"line":601,"column":86}},"245":{"start":{"line":605,"column":8},"end":{"line":605,"column":117}},"246":{"start":{"line":605,"column":83},"end":{"line":605,"column":115}}},"branchMap":{"1":{"line":18,"type":"if","locations":[{"start":{"line":18,"column":8},"end":{"line":18,"column":8}},{"start":{"line":18,"column":8},"end":{"line":18,"column":8}}]},"2":{"line":18,"type":"binary-expr","locations":[{"start":{"line":18,"column":12},"end":{"line":18,"column":37}},{"start":{"line":18,"column":41},"end":{"line":18,"column":96}}]},"3":{"line":37,"type":"if","locations":[{"start":{"line":37,"column":8},"end":{"line":37,"column":8}},{"start":{"line":37,"column":8},"end":{"line":37,"column":8}}]},"4":{"line":53,"type":"binary-expr","locations":[{"start":{"line":53,"column":28},"end":{"line":53,"column":44}},{"start":{"line":53,"column":48},"end":{"line":53,"column":51}}]},"5":{"line":54,"type":"binary-expr","locations":[{"start":{"line":54,"column":20},"end":{"line":54,"column":29}},{"start":{"line":54,"column":33},"end":{"line":54,"column":34}}]},"6":{"line":59,"type":"if","locations":[{"start":{"line":59,"column":8},"end":{"line":59,"column":8}},{"start":{"line":59,"column":8},"end":{"line":59,"column":8}}]},"7":{"line":59,"type":"binary-expr","locations":[{"start":{"line":59,"column":12},"end":{"line":59,"column":21}},{"start":{"line":59,"column":25},"end":{"line":59,"column":57}}]},"8":{"line":63,"type":"if","locations":[{"start":{"line":63,"column":8},"end":{"line":63,"column":8}},{"start":{"line":63,"column":8},"end":{"line":63,"column":8}}]},"9":{"line":67,"type":"if","locations":[{"start":{"line":67,"column":16},"end":{"line":67,"column":16}},{"start":{"line":67,"column":16},"end":{"line":67,"column":16}}]},"10":{"line":70,"type":"cond-expr","locations":[{"start":{"line":70,"column":53},"end":{"line":70,"column":62}},{"start":{"line":70,"column":65},"end":{"line":70,"column":68}}]},"11":{"line":73,"type":"if","locations":[{"start":{"line":73,"column":15},"end":{"line":73,"column":15}},{"start":{"line":73,"column":15},"end":{"line":73,"column":15}}]},"12":{"line":74,"type":"cond-expr","locations":[{"start":{"line":74,"column":52},"end":{"line":74,"column":56}},{"start":{"line":74,"column":59},"end":{"line":74,"column":78}}]},"13":{"line":75,"type":"cond-expr","locations":[{"start":{"line":75,"column":36},"end":{"line":75,"column":84}},{"start":{"line":75,"column":87},"end":{"line":75,"column":88}}]},"14":{"line":78,"type":"if","locations":[{"start":{"line":78,"column":8},"end":{"line":78,"column":8}},{"start":{"line":78,"column":8},"end":{"line":78,"column":8}}]},"15":{"line":78,"type":"binary-expr","locations":[{"start":{"line":78,"column":12},"end":{"line":78,"column":21}},{"start":{"line":78,"column":25},"end":{"line":78,"column":105}}]},"16":{"line":78,"type":"cond-expr","locations":[{"start":{"line":78,"column":53},"end":{"line":78,"column":63}},{"start":{"line":78,"column":66},"end":{"line":78,"column":85}}]},"17":{"line":79,"type":"if","locations":[{"start":{"line":79,"column":12},"end":{"line":79,"column":12}},{"start":{"line":79,"column":12},"end":{"line":79,"column":12}}]},"18":{"line":89,"type":"if","locations":[{"start":{"line":89,"column":20},"end":{"line":89,"column":20}},{"start":{"line":89,"column":20},"end":{"line":89,"column":20}}]},"19":{"line":89,"type":"binary-expr","locations":[{"start":{"line":89,"column":24},"end":{"line":89,"column":67}},{"start":{"line":89,"column":71},"end":{"line":89,"column":78}}]},"20":{"line":97,"type":"if","locations":[{"start":{"line":97,"column":16},"end":{"line":97,"column":16}},{"start":{"line":97,"column":16},"end":{"line":97,"column":16}}]},"21":{"line":101,"type":"if","locations":[{"start":{"line":101,"column":16},"end":{"line":101,"column":16}},{"start":{"line":101,"column":16},"end":{"line":101,"column":16}}]},"22":{"line":107,"type":"if","locations":[{"start":{"line":107,"column":15},"end":{"line":107,"column":15}},{"start":{"line":107,"column":15},"end":{"line":107,"column":15}}]},"23":{"line":111,"type":"cond-expr","locations":[{"start":{"line":111,"column":112},"end":{"line":111,"column":114}},{"start":{"line":111,"column":117},"end":{"line":111,"column":121}}]},"24":{"line":123,"type":"binary-expr","locations":[{"start":{"line":123,"column":20},"end":{"line":123,"column":29}},{"start":{"line":123,"column":33},"end":{"line":123,"column":34}}]},"25":{"line":129,"type":"if","locations":[{"start":{"line":129,"column":8},"end":{"line":129,"column":8}},{"start":{"line":129,"column":8},"end":{"line":129,"column":8}}]},"26":{"line":135,"type":"if","locations":[{"start":{"line":135,"column":8},"end":{"line":135,"column":8}},{"start":{"line":135,"column":8},"end":{"line":135,"column":8}}]},"27":{"line":140,"type":"binary-expr","locations":[{"start":{"line":140,"column":45},"end":{"line":140,"column":73}},{"start":{"line":140,"column":77},"end":{"line":142,"column":9}}]},"28":{"line":143,"type":"binary-expr","locations":[{"start":{"line":143,"column":42},"end":{"line":143,"column":54}},{"start":{"line":143,"column":58},"end":{"line":143,"column":60}}]},"29":{"line":146,"type":"cond-expr","locations":[{"start":{"line":146,"column":26},"end":{"line":146,"column":53}},{"start":{"line":146,"column":56},"end":{"line":146,"column":58}}]},"30":{"line":146,"type":"binary-expr","locations":[{"start":{"line":146,"column":117},"end":{"line":146,"column":133}},{"start":{"line":146,"column":137},"end":{"line":146,"column":140}}]},"31":{"line":147,"type":"cond-expr","locations":[{"start":{"line":147,"column":39},"end":{"line":147,"column":61}},{"start":{"line":147,"column":64},"end":{"line":147,"column":66}}]},"32":{"line":162,"type":"binary-expr","locations":[{"start":{"line":162,"column":20},"end":{"line":162,"column":37}},{"start":{"line":162,"column":41},"end":{"line":162,"column":43}}]},"33":{"line":166,"type":"if","locations":[{"start":{"line":166,"column":12},"end":{"line":166,"column":12}},{"start":{"line":166,"column":12},"end":{"line":166,"column":12}}]},"34":{"line":166,"type":"binary-expr","locations":[{"start":{"line":166,"column":16},"end":{"line":166,"column":40}},{"start":{"line":166,"column":44},"end":{"line":166,"column":62}}]},"35":{"line":168,"type":"if","locations":[{"start":{"line":168,"column":20},"end":{"line":168,"column":20}},{"start":{"line":168,"column":20},"end":{"line":168,"column":20}}]},"36":{"line":168,"type":"binary-expr","locations":[{"start":{"line":168,"column":24},"end":{"line":168,"column":88}},{"start":{"line":168,"column":92},"end":{"line":168,"column":127}}]},"37":{"line":174,"type":"if","locations":[{"start":{"line":174,"column":19},"end":{"line":174,"column":19}},{"start":{"line":174,"column":19},"end":{"line":174,"column":19}}]},"38":{"line":181,"type":"cond-expr","locations":[{"start":{"line":181,"column":56},"end":{"line":181,"column":85}},{"start":{"line":181,"column":88},"end":{"line":181,"column":90}}]},"39":{"line":201,"type":"cond-expr","locations":[{"start":{"line":201,"column":52},"end":{"line":201,"column":56}},{"start":{"line":201,"column":59},"end":{"line":201,"column":82}}]},"40":{"line":201,"type":"binary-expr","locations":[{"start":{"line":201,"column":60},"end":{"line":201,"column":64}},{"start":{"line":201,"column":68},"end":{"line":201,"column":70}}]},"41":{"line":208,"type":"binary-expr","locations":[{"start":{"line":208,"column":20},"end":{"line":208,"column":29}},{"start":{"line":208,"column":33},"end":{"line":208,"column":35}}]},"42":{"line":211,"type":"if","locations":[{"start":{"line":211,"column":8},"end":{"line":211,"column":8}},{"start":{"line":211,"column":8},"end":{"line":211,"column":8}}]},"43":{"line":214,"type":"if","locations":[{"start":{"line":214,"column":12},"end":{"line":214,"column":12}},{"start":{"line":214,"column":12},"end":{"line":214,"column":12}}]},"44":{"line":228,"type":"if","locations":[{"start":{"line":228,"column":12},"end":{"line":228,"column":12}},{"start":{"line":228,"column":12},"end":{"line":228,"column":12}}]},"45":{"line":236,"type":"if","locations":[{"start":{"line":236,"column":12},"end":{"line":236,"column":12}},{"start":{"line":236,"column":12},"end":{"line":236,"column":12}}]},"46":{"line":242,"type":"if","locations":[{"start":{"line":242,"column":20},"end":{"line":242,"column":20}},{"start":{"line":242,"column":20},"end":{"line":242,"column":20}}]},"47":{"line":242,"type":"binary-expr","locations":[{"start":{"line":242,"column":24},"end":{"line":242,"column":37}},{"start":{"line":242,"column":41},"end":{"line":242,"column":54}},{"start":{"line":242,"column":58},"end":{"line":242,"column":69}}]},"48":{"line":264,"type":"if","locations":[{"start":{"line":264,"column":16},"end":{"line":264,"column":16}},{"start":{"line":264,"column":16},"end":{"line":264,"column":16}}]},"49":{"line":268,"type":"cond-expr","locations":[{"start":{"line":268,"column":40},"end":{"line":268,"column":43}},{"start":{"line":268,"column":46},"end":{"line":268,"column":78}}]},"50":{"line":272,"type":"if","locations":[{"start":{"line":272,"column":20},"end":{"line":272,"column":20}},{"start":{"line":272,"column":20},"end":{"line":272,"column":20}}]},"51":{"line":276,"type":"if","locations":[{"start":{"line":276,"column":24},"end":{"line":276,"column":24}},{"start":{"line":276,"column":24},"end":{"line":276,"column":24}}]},"52":{"line":293,"type":"if","locations":[{"start":{"line":293,"column":16},"end":{"line":293,"column":16}},{"start":{"line":293,"column":16},"end":{"line":293,"column":16}}]},"53":{"line":298,"type":"cond-expr","locations":[{"start":{"line":298,"column":57},"end":{"line":298,"column":60}},{"start":{"line":298,"column":63},"end":{"line":298,"column":105}}]},"54":{"line":299,"type":"if","locations":[{"start":{"line":299,"column":20},"end":{"line":299,"column":20}},{"start":{"line":299,"column":20},"end":{"line":299,"column":20}}]},"55":{"line":310,"type":"if","locations":[{"start":{"line":310,"column":12},"end":{"line":310,"column":12}},{"start":{"line":310,"column":12},"end":{"line":310,"column":12}}]},"56":{"line":322,"type":"cond-expr","locations":[{"start":{"line":322,"column":49},"end":{"line":322,"column":52}},{"start":{"line":322,"column":55},"end":{"line":322,"column":57}}]},"57":{"line":356,"type":"if","locations":[{"start":{"line":356,"column":12},"end":{"line":356,"column":12}},{"start":{"line":356,"column":12},"end":{"line":356,"column":12}}]},"58":{"line":357,"type":"if","locations":[{"start":{"line":357,"column":16},"end":{"line":357,"column":16}},{"start":{"line":357,"column":16},"end":{"line":357,"column":16}}]},"59":{"line":365,"type":"if","locations":[{"start":{"line":365,"column":16},"end":{"line":365,"column":16}},{"start":{"line":365,"column":16},"end":{"line":365,"column":16}}]},"60":{"line":367,"type":"if","locations":[{"start":{"line":367,"column":23},"end":{"line":367,"column":23}},{"start":{"line":367,"column":23},"end":{"line":367,"column":23}}]},"61":{"line":370,"type":"if","locations":[{"start":{"line":370,"column":23},"end":{"line":370,"column":23}},{"start":{"line":370,"column":23},"end":{"line":370,"column":23}}]},"62":{"line":370,"type":"binary-expr","locations":[{"start":{"line":370,"column":27},"end":{"line":370,"column":32}},{"start":{"line":370,"column":36},"end":{"line":370,"column":49}}]},"63":{"line":372,"type":"if","locations":[{"start":{"line":372,"column":23},"end":{"line":372,"column":23}},{"start":{"line":372,"column":23},"end":{"line":372,"column":23}}]},"64":{"line":372,"type":"binary-expr","locations":[{"start":{"line":372,"column":27},"end":{"line":372,"column":33}},{"start":{"line":372,"column":37},"end":{"line":372,"column":48}}]},"65":{"line":374,"type":"if","locations":[{"start":{"line":374,"column":23},"end":{"line":374,"column":23}},{"start":{"line":374,"column":23},"end":{"line":374,"column":23}}]},"66":{"line":374,"type":"binary-expr","locations":[{"start":{"line":374,"column":27},"end":{"line":374,"column":33}},{"start":{"line":374,"column":37},"end":{"line":374,"column":48}}]},"67":{"line":375,"type":"if","locations":[{"start":{"line":375,"column":20},"end":{"line":375,"column":20}},{"start":{"line":375,"column":20},"end":{"line":375,"column":20}}]},"68":{"line":390,"type":"if","locations":[{"start":{"line":390,"column":8},"end":{"line":390,"column":8}},{"start":{"line":390,"column":8},"end":{"line":390,"column":8}}]},"69":{"line":391,"type":"if","locations":[{"start":{"line":391,"column":12},"end":{"line":391,"column":12}},{"start":{"line":391,"column":12},"end":{"line":391,"column":12}}]},"70":{"line":396,"type":"if","locations":[{"start":{"line":396,"column":15},"end":{"line":396,"column":15}},{"start":{"line":396,"column":15},"end":{"line":396,"column":15}}]},"71":{"line":406,"type":"if","locations":[{"start":{"line":406,"column":12},"end":{"line":406,"column":12}},{"start":{"line":406,"column":12},"end":{"line":406,"column":12}}]},"72":{"line":408,"type":"binary-expr","locations":[{"start":{"line":408,"column":21},"end":{"line":408,"column":49}},{"start":{"line":408,"column":53},"end":{"line":408,"column":54}}]},"73":{"line":408,"type":"binary-expr","locations":[{"start":{"line":408,"column":28},"end":{"line":408,"column":36}},{"start":{"line":408,"column":40},"end":{"line":408,"column":48}}]},"74":{"line":410,"type":"if","locations":[{"start":{"line":410,"column":16},"end":{"line":410,"column":16}},{"start":{"line":410,"column":16},"end":{"line":410,"column":16}}]},"75":{"line":410,"type":"binary-expr","locations":[{"start":{"line":410,"column":20},"end":{"line":410,"column":47}},{"start":{"line":410,"column":51},"end":{"line":410,"column":97}}]},"76":{"line":419,"type":"if","locations":[{"start":{"line":419,"column":16},"end":{"line":419,"column":16}},{"start":{"line":419,"column":16},"end":{"line":419,"column":16}}]},"77":{"line":419,"type":"binary-expr","locations":[{"start":{"line":419,"column":20},"end":{"line":419,"column":28}},{"start":{"line":419,"column":32},"end":{"line":419,"column":59}},{"start":{"line":419,"column":64},"end":{"line":419,"column":107}}]},"78":{"line":420,"type":"binary-expr","locations":[{"start":{"line":420,"column":57},"end":{"line":420,"column":65}},{"start":{"line":420,"column":69},"end":{"line":420,"column":81}}]},"79":{"line":434,"type":"if","locations":[{"start":{"line":434,"column":12},"end":{"line":434,"column":12}},{"start":{"line":434,"column":12},"end":{"line":434,"column":12}}]},"80":{"line":434,"type":"binary-expr","locations":[{"start":{"line":434,"column":16},"end":{"line":434,"column":36}},{"start":{"line":434,"column":40},"end":{"line":434,"column":82}}]},"81":{"line":435,"type":"binary-expr","locations":[{"start":{"line":435,"column":63},"end":{"line":435,"column":66}},{"start":{"line":435,"column":70},"end":{"line":435,"column":72}}]},"82":{"line":437,"type":"if","locations":[{"start":{"line":437,"column":16},"end":{"line":437,"column":16}},{"start":{"line":437,"column":16},"end":{"line":437,"column":16}}]},"83":{"line":447,"type":"if","locations":[{"start":{"line":447,"column":28},"end":{"line":447,"column":28}},{"start":{"line":447,"column":28},"end":{"line":447,"column":28}}]},"84":{"line":450,"type":"cond-expr","locations":[{"start":{"line":450,"column":61},"end":{"line":450,"column":64}},{"start":{"line":450,"column":67},"end":{"line":450,"column":69}}]},"85":{"line":494,"type":"binary-expr","locations":[{"start":{"line":494,"column":15},"end":{"line":494,"column":18}},{"start":{"line":494,"column":22},"end":{"line":494,"column":24}}]},"86":{"line":495,"type":"binary-expr","locations":[{"start":{"line":495,"column":21},"end":{"line":495,"column":31}},{"start":{"line":495,"column":35},"end":{"line":495,"column":37}}]},"87":{"line":504,"type":"if","locations":[{"start":{"line":504,"column":12},"end":{"line":504,"column":12}},{"start":{"line":504,"column":12},"end":{"line":504,"column":12}}]},"88":{"line":508,"type":"if","locations":[{"start":{"line":508,"column":12},"end":{"line":508,"column":12}},{"start":{"line":508,"column":12},"end":{"line":508,"column":12}}]},"89":{"line":513,"type":"if","locations":[{"start":{"line":513,"column":19},"end":{"line":513,"column":19}},{"start":{"line":513,"column":19},"end":{"line":513,"column":19}}]},"90":{"line":513,"type":"binary-expr","locations":[{"start":{"line":513,"column":24},"end":{"line":513,"column":58}},{"start":{"line":513,"column":63},"end":{"line":513,"column":137}}]},"91":{"line":513,"type":"cond-expr","locations":[{"start":{"line":513,"column":95},"end":{"line":513,"column":118}},{"start":{"line":513,"column":121},"end":{"line":513,"column":122}}]},"92":{"line":513,"type":"binary-expr","locations":[{"start":{"line":513,"column":96},"end":{"line":513,"column":104}},{"start":{"line":513,"column":108},"end":{"line":513,"column":110}}]},"93":{"line":514,"type":"cond-expr","locations":[{"start":{"line":514,"column":85},"end":{"line":514,"column":108}},{"start":{"line":514,"column":111},"end":{"line":514,"column":112}}]},"94":{"line":514,"type":"binary-expr","locations":[{"start":{"line":514,"column":86},"end":{"line":514,"column":94}},{"start":{"line":514,"column":98},"end":{"line":514,"column":100}}]},"95":{"line":515,"type":"if","locations":[{"start":{"line":515,"column":19},"end":{"line":515,"column":19}},{"start":{"line":515,"column":19},"end":{"line":515,"column":19}}]},"96":{"line":516,"type":"cond-expr","locations":[{"start":{"line":516,"column":82},"end":{"line":516,"column":105}},{"start":{"line":516,"column":108},"end":{"line":516,"column":109}}]},"97":{"line":516,"type":"binary-expr","locations":[{"start":{"line":516,"column":83},"end":{"line":516,"column":91}},{"start":{"line":516,"column":95},"end":{"line":516,"column":97}}]},"98":{"line":521,"type":"if","locations":[{"start":{"line":521,"column":12},"end":{"line":521,"column":12}},{"start":{"line":521,"column":12},"end":{"line":521,"column":12}}]},"99":{"line":541,"type":"binary-expr","locations":[{"start":{"line":541,"column":26},"end":{"line":541,"column":32}},{"start":{"line":541,"column":36},"end":{"line":541,"column":37}}]},"100":{"line":547,"type":"if","locations":[{"start":{"line":547,"column":12},"end":{"line":547,"column":12}},{"start":{"line":547,"column":12},"end":{"line":547,"column":12}}]},"101":{"line":555,"type":"if","locations":[{"start":{"line":555,"column":16},"end":{"line":555,"column":16}},{"start":{"line":555,"column":16},"end":{"line":555,"column":16}}]},"102":{"line":558,"type":"if","locations":[{"start":{"line":558,"column":20},"end":{"line":558,"column":20}},{"start":{"line":558,"column":20},"end":{"line":558,"column":20}}]},"103":{"line":558,"type":"binary-expr","locations":[{"start":{"line":558,"column":24},"end":{"line":558,"column":34}},{"start":{"line":558,"column":38},"end":{"line":558,"column":48}}]},"104":{"line":565,"type":"if","locations":[{"start":{"line":565,"column":12},"end":{"line":565,"column":12}},{"start":{"line":565,"column":12},"end":{"line":565,"column":12}}]},"105":{"line":578,"type":"if","locations":[{"start":{"line":578,"column":8},"end":{"line":578,"column":8}},{"start":{"line":578,"column":8},"end":{"line":578,"column":8}}]},"106":{"line":582,"type":"if","locations":[{"start":{"line":582,"column":8},"end":{"line":582,"column":8}},{"start":{"line":582,"column":8},"end":{"line":582,"column":8}}]},"107":{"line":594,"type":"binary-expr","locations":[{"start":{"line":594,"column":15},"end":{"line":594,"column":18}},{"start":{"line":594,"column":22},"end":{"line":594,"column":24}}]}},"code":["/* eslint no-control-regex:0 */","","'use strict';","","const base64 = require('../base64');","const qp = require('../qp');","const mimeTypes = require('./mime-types');","","module.exports = {","","    /**","     * Checks if a value is plaintext string (uses only printable 7bit chars)","     *","     * @param {String} value String to be tested","     * @returns {Boolean} true if it is a plaintext string","     */","    isPlainText(value) {","        if (typeof value !== 'string' || /[\\x00-\\x08\\x0b\\x0c\\x0e-\\x1f\\u0080-\\uFFFF]/.test(value)) {","            return false;","        } else {","            return true;","        }","    },","","    /**","     * Checks if a multi line string containes lines longer than the selected value.","     *","     * Useful when detecting if a mail message needs any processing at all ","     * if only plaintext characters are used and lines are short, then there is","     * no need to encode the values in any way. If the value is plaintext but has","     * longer lines then allowed, then use format=flowed","     *","     * @param {Number} lineLength Max line length to check for","     * @returns {Boolean} Returns true if there is at least one line longer than lineLength chars","     */","    hasLongerLines(str, lineLength) {","        if (str.length > 128 * 1024) {","            // do not test strings longer than 128kB","            return true;","        }","        return new RegExp('^.{' + (lineLength + 1) + ',}', 'm').test(str);","    },","","    /**","     * Encodes a string or an Buffer to an UTF-8 MIME Word (rfc2047)","     *","     * @param {String|Buffer} data String to be encoded","     * @param {String} mimeWordEncoding='Q' Encoding for the mime word, either Q or B","     * @param {Number} [maxLength=0] If set, split mime words into several chunks if needed","     * @return {String} Single or several mime words joined together","     */","    encodeWord(data, mimeWordEncoding, maxLength) {","        mimeWordEncoding = (mimeWordEncoding || 'Q').toString().toUpperCase().trim().charAt(0);","        maxLength = maxLength || 0;","","        let encodedStr;","        let toCharset = 'UTF-8';","","        if (maxLength && maxLength > 7 + toCharset.length) {","            maxLength -= (7 + toCharset.length);","        }","","        if (mimeWordEncoding === 'Q') {","            // https://tools.ietf.org/html/rfc2047#section-5 rule (3)","            encodedStr = qp.encode(data).replace(/[^a-z0-9!*+\\-\\/=]/ig, chr => {","                let ord = chr.charCodeAt(0).toString(16).toUpperCase();","                if (chr === ' ') {","                    return '_';","                } else {","                    return '=' + (ord.length === 1 ? '0' + ord : ord);","                }","            });","        } else if (mimeWordEncoding === 'B') {","            encodedStr = typeof data === 'string' ? data : base64.encode(data);","            maxLength = maxLength ? Math.max(3, (maxLength - maxLength % 4) / 4 * 3) : 0;","        }","","        if (maxLength && (mimeWordEncoding !== 'B' ? encodedStr : base64.encode(data)).length > maxLength) {","            if (mimeWordEncoding === 'Q') {","                encodedStr = this.splitMimeEncodedString(encodedStr, maxLength).join('?= =?' + toCharset + '?' + mimeWordEncoding + '?');","            } else {","                // RFC2047 6.3 (2) states that encoded-word must include an integral number of characters, so no chopping unicode sequences","                let parts = [];","                let lpart = '';","                for (let i = 0, len = encodedStr.length; i < len; i++) {","                    let chr = encodedStr.charAt(i);","                    // check if we can add this character to the existing string","                    // without breaking byte length limit","                    if (Buffer.byteLength(lpart + chr) <= maxLength || i === 0) {","                        lpart += chr;","                    } else {","                        // we hit the length limit, so push the existing string and start over","                        parts.push(base64.encode(lpart));","                        lpart = chr;","                    }","                }","                if (lpart) {","                    parts.push(base64.encode(lpart));","                }","","                if (parts.length > 1) {","                    encodedStr = parts.join('?= =?' + toCharset + '?' + mimeWordEncoding + '?');","                } else {","                    encodedStr = parts.join('');","                }","            }","        } else if (mimeWordEncoding === 'B') {","            encodedStr = base64.encode(data);","        }","","        return '=?' + toCharset + '?' + mimeWordEncoding + '?' + encodedStr + (encodedStr.substr(-2) === '?=' ? '' : '?=');","    },","","    /**","     * Finds word sequences with non ascii text and converts these to mime words","     *","     * @param {String} value String to be encoded","     * @param {String} mimeWordEncoding='Q' Encoding for the mime word, either Q or B","     * @param {Number} [maxLength=0] If set, split mime words into several chunks if needed","     * @return {String} String with possible mime words","     */","    encodeWords(value, mimeWordEncoding, maxLength) {","        maxLength = maxLength || 0;","","        let encodedValue;","","        // find first word with a non-printable ascii in it","        let firstMatch = value.match(/(?:^|\\s)([^\\s]*[\\u0080-\\uFFFF])/);","        if (!firstMatch) {","            return value;","        }","","        // find the last word with a non-printable ascii in it","        let lastMatch = value.match(/([\\u0080-\\uFFFF][^\\s]*)[^\\u0080-\\uFFFF]*$/);","        if (!lastMatch) {","            // should not happen","            return value;","        }","","        let startIndex = firstMatch.index + (firstMatch[0].match(/[^\\s]/) || {","            index: 0","        }).index;","        let endIndex = lastMatch.index + (lastMatch[1] || '').length;","","        encodedValue =","            (startIndex ? value.substr(0, startIndex) : '') + this.encodeWord(value.substring(startIndex, endIndex), mimeWordEncoding || 'Q', maxLength) +","            (endIndex < value.length ? value.substr(endIndex) : '');","","        return encodedValue;","    },","","    /**","     * Joins parsed header value together as 'value; param1=value1; param2=value2'","     * PS: We are following RFC 822 for the list of special characters that we need to keep in quotes.","     *      Refer: https://www.w3.org/Protocols/rfc1341/4_Content-Type.html","     * @param {Object} structured Parsed header value","     * @return {String} joined header value","     */","    buildHeaderValue(structured) {","        let paramsArray = [];","","        Object.keys(structured.params || {}).forEach(param => {","            // filename might include unicode characters so it is a special case","            // other values probably do not","            let value = structured.params[param];","            if (!this.isPlainText(value) || value.length >= 75) {","                this.buildHeaderParam(param, value, 50).forEach(encodedParam => {","                    if (!/[\\s\"\\\\;:\\/=\\(\\),<>@\\[\\]\\?]|^[\\-']|'$/.test(encodedParam.value) || encodedParam.key.substr(-1) === '*') {","                        paramsArray.push(encodedParam.key + '=' + encodedParam.value);","                    } else {","                        paramsArray.push(encodedParam.key + '=' + JSON.stringify(encodedParam.value));","                    }","                });","            } else if (/[\\s'\"\\\\;:\\/=\\(\\),<>@\\[\\]\\?]|^\\-/.test(value)) {","                paramsArray.push(param + '=' + JSON.stringify(value));","            } else {","                paramsArray.push(param + '=' + value);","            }","        });","","        return structured.value + (paramsArray.length ? '; ' + paramsArray.join('; ') : '');","    },","","    /**","     * Encodes a string or an Buffer to an UTF-8 Parameter Value Continuation encoding (rfc2231)","     * Useful for splitting long parameter values.","     *","     * For example","     *      title=\"unicode string\"","     * becomes","     *     title*0*=utf-8''unicode","     *     title*1*=%20string","     *","     * @param {String|Buffer} data String to be encoded","     * @param {Number} [maxLength=50] Max length for generated chunks","     * @param {String} [fromCharset='UTF-8'] Source sharacter set","     * @return {Array} A list of encoded keys and headers","     */","    buildHeaderParam(key, data, maxLength) {","        let list = [];","        let encodedStr = typeof data === 'string' ? data : (data || '').toString();","        let encodedStrArr;","        let chr, ord;","        let line;","        let startPos = 0;","        let i, len;","","        maxLength = maxLength || 50;","","        // process ascii only text","        if (this.isPlainText(data)) {","","            // check if conversion is even needed","            if (encodedStr.length <= maxLength) {","                return [{","                    key,","                    value: encodedStr","                }];","            }","","            encodedStr = encodedStr.replace(new RegExp('.{' + maxLength + '}', 'g'), str => {","                list.push({","                    line: str","                });","                return '';","            });","","            if (encodedStr) {","                list.push({","                    line: encodedStr","                });","            }","","        } else {","","            if (/[\\uD800-\\uDBFF]/.test(encodedStr)) {","                // string containts surrogate pairs, so normalize it to an array of bytes","                encodedStrArr = [];","                for (i = 0, len = encodedStr.length; i < len; i++) {","                    chr = encodedStr.charAt(i);","                    ord = chr.charCodeAt(0);","                    if (ord >= 0xD800 && ord <= 0xDBFF && i < len - 1) {","                        chr += encodedStr.charAt(i + 1);","                        encodedStrArr.push(chr);","                        i++;","                    } else {","                        encodedStrArr.push(chr);","                    }","                }","                encodedStr = encodedStrArr;","            }","","            // first line includes the charset and language info and needs to be encoded","            // even if it does not contain any unicode characters","            line = 'utf-8\\'\\'';","            let encoded = true;","            startPos = 0;","","            // process text with unicode or special chars","            for (i = 0, len = encodedStr.length; i < len; i++) {","","                chr = encodedStr[i];","","                if (encoded) {","                    chr = this.safeEncodeURIComponent(chr);","                } else {","                    // try to urlencode current char","                    chr = chr === ' ' ? chr : this.safeEncodeURIComponent(chr);","                    // By default it is not required to encode a line, the need","                    // only appears when the string contains unicode or special chars","                    // in this case we start processing the line over and encode all chars","                    if (chr !== encodedStr[i]) {","                        // Check if it is even possible to add the encoded char to the line","                        // If not, there is no reason to use this line, just push it to the list","                        // and start a new line with the char that needs encoding","                        if ((this.safeEncodeURIComponent(line) + chr).length >= maxLength) {","                            list.push({","                                line,","                                encoded","                            });","                            line = '';","                            startPos = i - 1;","                        } else {","                            encoded = true;","                            i = startPos;","                            line = '';","                            continue;","                        }","                    }","                }","","                // if the line is already too long, push it to the list and start a new one","                if ((line + chr).length >= maxLength) {","                    list.push({","                        line,","                        encoded","                    });","                    line = chr = encodedStr[i] === ' ' ? ' ' : this.safeEncodeURIComponent(encodedStr[i]);","                    if (chr === encodedStr[i]) {","                        encoded = false;","                        startPos = i - 1;","                    } else {","                        encoded = true;","                    }","                } else {","                    line += chr;","                }","            }","","            if (line) {","                list.push({","                    line,","                    encoded","                });","            }","        }","","        return list.map((item, i) => ({","            // encoded lines: {name}*{part}*","            // unencoded lines: {name}*{part}","            // if any line needs to be encoded then the first line (part==0) is always encoded","            key: key + '*' + i + (item.encoded ? '*' : ''),","            value: item.line","        }));","    },","","    /**","     * Parses a header value with key=value arguments into a structured","     * object.","     *","     *   parseHeaderValue('content-type: text/plain; CHARSET='UTF-8'') ->","     *   {","     *     'value': 'text/plain',","     *     'params': {","     *       'charset': 'UTF-8'","     *     }","     *   }","     *","     * @param {String} str Header value","     * @return {Object} Header value as a parsed structure","     */","    parseHeaderValue(str) {","        let response = {","            value: false,","            params: {}","        };","        let key = false;","        let value = '';","        let type = 'value';","        let quote = false;","        let escaped = false;","        let chr;","","        for (let i = 0, len = str.length; i < len; i++) {","            chr = str.charAt(i);","            if (type === 'key') {","                if (chr === '=') {","                    key = value.trim().toLowerCase();","                    type = 'value';","                    value = '';","                    continue;","                }","                value += chr;","            } else {","                if (escaped) {","                    value += chr;","                } else if (chr === '\\\\') {","                    escaped = true;","                    continue;","                } else if (quote && chr === quote) {","                    quote = false;","                } else if (!quote && chr === '\"') {","                    quote = chr;","                } else if (!quote && chr === ';') {","                    if (key === false) {","                        response.value = value.trim();","                    } else {","                        response.params[key] = value.trim();","                    }","                    type = 'key';","                    value = '';","                } else {","                    value += chr;","                }","                escaped = false;","","            }","        }","","        if (type === 'value') {","            if (key === false) {","                response.value = value.trim();","            } else {","                response.params[key] = value.trim();","            }","        } else if (value.trim()) {","            response.params[value.trim().toLowerCase()] = '';","        }","","        // handle parameter value continuations","        // https://tools.ietf.org/html/rfc2231#section-3","","        // preprocess values","        Object.keys(response.params).forEach(key => {","            let actualKey, nr, match, value;","            if ((match = key.match(/(\\*(\\d+)|\\*(\\d+)\\*|\\*)$/))) {","                actualKey = key.substr(0, match.index);","                nr = Number(match[2] || match[3]) || 0;","","                if (!response.params[actualKey] || typeof response.params[actualKey] !== 'object') {","                    response.params[actualKey] = {","                        charset: false,","                        values: []","                    };","                }","","                value = response.params[key];","","                if (nr === 0 && match[0].substr(-1) === '*' && (match = value.match(/^([^']*)'[^']*'(.*)$/))) {","                    response.params[actualKey].charset = match[1] || 'iso-8859-1';","                    value = match[2];","                }","","                response.params[actualKey].values[nr] = value;","","                // remove the old reference","                delete response.params[key];","            }","        });","","        // concatenate split rfc2231 strings and convert encoded strings to mime encoded words","        Object.keys(response.params).forEach(key => {","            let value;","            if (response.params[key] && Array.isArray(response.params[key].values)) {","                value = response.params[key].values.map(val => val || '').join('');","","                if (response.params[key].charset) {","                    // convert \"%AB\" to \"=?charset?Q?=AB?=\"","                    response.params[key] = '=?' +","                        response.params[key].charset +","                        '?Q?' +","                        value.","                    // fix invalidly encoded chars","                    replace(/[=\\?_\\s]/g,","                        s => {","                            let c = s.charCodeAt(0).toString(16);","                            if (s === ' ') {","                                return '_';","                            } else {","                                return '%' + (c.length < 2 ? '0' : '') + c;","                            }","                        }","                    ).","                    // change from urlencoding to percent encoding","                    replace(/%/g, '=') +","                        '?=';","                } else {","                    response.params[key] = value;","                }","            }","        });","","        return response;","    },","","    /**","     * Returns file extension for a content type string. If no suitable extensions","     * are found, 'bin' is used as the default extension","     *","     * @param {String} mimeType Content type to be checked for","     * @return {String} File extension","     */","    detectExtension: mimeType => mimeTypes.detectExtension(mimeType),","","    /**","     * Returns content type for a file extension. If no suitable content types","     * are found, 'application/octet-stream' is used as the default content type","     *","     * @param {String} extension Extension to be checked for","     * @return {String} File extension","     */","    detectMimeType: extension => mimeTypes.detectMimeType(extension),","","    /**","     * Folds long lines, useful for folding header lines (afterSpace=false) and","     * flowed text (afterSpace=true)","     *","     * @param {String} str String to be folded","     * @param {Number} [lineLength=76] Maximum length of a line","     * @param {Boolean} afterSpace If true, leave a space in th end of a line","     * @return {String} String with folded lines","     */","    foldLines(str, lineLength, afterSpace) {","        str = (str || '').toString();","        lineLength = lineLength || 76;","","        let pos = 0,","            len = str.length,","            result = '',","            line, match;","","        while (pos < len) {","            line = str.substr(pos, lineLength);","            if (line.length < lineLength) {","                result += line;","                break;","            }","            if ((match = line.match(/^[^\\n\\r]*(\\r?\\n|\\r)/))) {","                line = match[0];","                result += line;","                pos += line.length;","                continue;","            } else if ((match = line.match(/(\\s+)[^\\s]*$/)) && match[0].length - (afterSpace ? (match[1] || '').length : 0) < line.length) {","                line = line.substr(0, line.length - (match[0].length - (afterSpace ? (match[1] || '').length : 0)));","            } else if ((match = str.substr(pos + line.length).match(/^[^\\s]+(\\s*)/))) {","                line = line + match[0].substr(0, match[0].length - (!afterSpace ? (match[1] || '').length : 0));","            }","","            result += line;","            pos += line.length;","            if (pos < len) {","                result += '\\r\\n';","            }","        }","","        return result;","    },","","    /**","     * Splits a mime encoded string. Needed for dividing mime words into smaller chunks","     *","     * @param {String} str Mime encoded string to be split up","     * @param {Number} maxlen Maximum length of characters for one part (minimum 12)","     * @return {Array} Split string","     */","    splitMimeEncodedString: (str, maxlen) => {","        let curLine, match, chr, done,","            lines = [];","","        // require at least 12 symbols to fit possible 4 octet UTF-8 sequences","        maxlen = Math.max(maxlen || 0, 12);","","        while (str.length) {","            curLine = str.substr(0, maxlen);","","            // move incomplete escaped char back to main","            if ((match = curLine.match(/\\=[0-9A-F]?$/i))) {","                curLine = curLine.substr(0, match.index);","            }","","            done = false;","            while (!done) {","                done = true;","                // check if not middle of a unicode char sequence","                if ((match = str.substr(curLine.length).match(/^\\=([0-9A-F]{2})/i))) {","                    chr = parseInt(match[1], 16);","                    // invalid sequence, move one char back anc recheck","                    if (chr < 0xC2 && chr > 0x7F) {","                        curLine = curLine.substr(0, curLine.length - 3);","                        done = false;","                    }","                }","            }","","            if (curLine.length) {","                lines.push(curLine);","            }","            str = str.substr(curLine.length);","        }","","        return lines;","    },","","    encodeURICharComponent: chr => {","        let res = '';","        let ord = chr.charCodeAt(0).toString(16).toUpperCase();","","        if (ord.length % 2) {","            ord = '0' + ord;","        }","","        if (ord.length > 2) {","            for (let i = 0, len = ord.length / 2; i < len; i++) {","                res += '%' + ord.substr(i, 2);","            }","        } else {","            res += '%' + ord;","        }","","        return res;","    },","","    safeEncodeURIComponent(str) {","        str = (str || '').toString();","","        try {","            // might throw if we try to encode invalid sequences, eg. partial emoji","            str = encodeURIComponent(str);","        } catch (E) {","            // should never run","            return str.replace(/[^\\x00-\\x1F *'()<>@,;:\\\\\"\\[\\]?=\\u007F-\\uFFFF]+/g, '');","        }","","        // ensure chars that are not handled by encodeURICompent are converted as well","        return str.replace(/[\\x00-\\x1F *'()<>@,;:\\\\\"\\[\\]?=\\u007F-\\uFFFF]/g, chr => this.encodeURICharComponent(chr));","    }","","};",""],"l":{"5":1,"6":1,"7":1,"9":1,"18":0,"19":0,"21":0,"37":0,"39":0,"41":0,"53":0,"54":0,"56":0,"57":0,"59":0,"60":0,"63":0,"65":0,"66":0,"67":0,"68":0,"70":0,"73":0,"74":0,"75":0,"78":0,"79":0,"80":0,"83":0,"84":0,"85":0,"86":0,"89":0,"90":0,"93":0,"94":0,"97":0,"98":0,"101":0,"102":0,"104":0,"107":0,"108":0,"111":0,"123":0,"125":0,"128":0,"129":0,"130":0,"134":0,"135":0,"137":0,"140":0,"143":0,"145":0,"149":0,"160":0,"162":0,"165":0,"166":0,"167":0,"168":0,"169":0,"171":0,"174":0,"175":0,"177":0,"181":0,"200":0,"201":0,"202":0,"203":0,"204":0,"205":0,"206":0,"208":0,"211":0,"214":0,"215":0,"221":0,"222":0,"225":0,"228":0,"229":0,"236":0,"238":0,"239":0,"240":0,"241":0,"242":0,"243":0,"244":0,"245":0,"247":0,"250":0,"255":0,"256":0,"257":0,"260":0,"262":0,"264":0,"265":0,"268":0,"272":0,"276":0,"277":0,"281":0,"282":0,"284":0,"285":0,"286":0,"287":0,"293":0,"294":0,"298":0,"299":0,"300":0,"301":0,"303":0,"306":0,"310":0,"311":0,"318":0,"343":0,"347":0,"348":0,"349":0,"350":0,"351":0,"352":0,"354":0,"355":0,"356":0,"357":0,"358":0,"359":0,"360":0,"361":0,"363":0,"365":0,"366":0,"367":0,"368":0,"369":0,"370":0,"371":0,"372":0,"373":0,"374":0,"375":0,"376":0,"378":0,"380":0,"381":0,"383":0,"385":0,"390":0,"391":0,"392":0,"394":0,"396":0,"397":0,"404":0,"405":0,"406":0,"407":0,"408":0,"410":0,"411":0,"417":0,"419":0,"420":0,"421":0,"424":0,"427":0,"432":0,"433":0,"434":0,"435":0,"437":0,"439":0,"446":0,"447":0,"448":0,"450":0,"458":0,"463":0,"473":0,"482":0,"494":0,"495":0,"497":0,"502":0,"503":0,"504":0,"505":0,"506":0,"508":0,"509":0,"510":0,"511":0,"512":0,"513":0,"514":0,"515":0,"516":0,"519":0,"520":0,"521":0,"522":0,"526":0,"537":0,"541":0,"543":0,"544":0,"547":0,"548":0,"551":0,"552":0,"553":0,"555":0,"556":0,"558":0,"559":0,"560":0,"565":0,"566":0,"568":0,"571":0,"575":0,"576":0,"578":0,"579":0,"582":0,"583":0,"584":0,"587":0,"590":0,"594":0,"596":0,"598":0,"601":0,"605":0}},"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/base64/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/base64/index.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"encode","line":11,"loc":{"start":{"line":11,"column":0},"end":{"line":11,"column":24}}},"2":{"name":"wrap","line":26,"loc":{"start":{"line":26,"column":0},"end":{"line":26,"column":31}}},"3":{"name":"(anonymous_3)","line":54,"loc":{"start":{"line":54,"column":15},"end":{"line":54,"column":25}}},"4":{"name":"(anonymous_4)","line":70,"loc":{"start":{"line":70,"column":14},"end":{"line":70,"column":38}}},"5":{"name":"(anonymous_5)","line":113,"loc":{"start":{"line":113,"column":10},"end":{"line":113,"column":17}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":46}},"2":{"start":{"line":11,"column":0},"end":{"line":17,"column":1}},"3":{"start":{"line":12,"column":4},"end":{"line":14,"column":5}},"4":{"start":{"line":13,"column":8},"end":{"line":13,"column":45}},"5":{"start":{"line":16,"column":4},"end":{"line":16,"column":37}},"6":{"start":{"line":26,"column":0},"end":{"line":44,"column":1}},"7":{"start":{"line":27,"column":4},"end":{"line":27,"column":33}},"8":{"start":{"line":28,"column":4},"end":{"line":28,"column":34}},"9":{"start":{"line":30,"column":4},"end":{"line":32,"column":5}},"10":{"start":{"line":31,"column":8},"end":{"line":31,"column":19}},"11":{"start":{"line":34,"column":4},"end":{"line":34,"column":20}},"12":{"start":{"line":35,"column":4},"end":{"line":35,"column":16}},"13":{"start":{"line":36,"column":4},"end":{"line":36,"column":40}},"14":{"start":{"line":37,"column":4},"end":{"line":41,"column":5}},"15":{"start":{"line":38,"column":8},"end":{"line":38,"column":123}},"16":{"start":{"line":39,"column":8},"end":{"line":39,"column":34}},"17":{"start":{"line":40,"column":8},"end":{"line":40,"column":27}},"18":{"start":{"line":43,"column":4},"end":{"line":43,"column":38}},"19":{"start":{"line":55,"column":8},"end":{"line":55,"column":16}},"20":{"start":{"line":57,"column":8},"end":{"line":57,"column":37}},"21":{"start":{"line":59,"column":8},"end":{"line":61,"column":9}},"22":{"start":{"line":60,"column":12},"end":{"line":60,"column":68}},"23":{"start":{"line":63,"column":8},"end":{"line":63,"column":27}},"24":{"start":{"line":64,"column":8},"end":{"line":64,"column":37}},"25":{"start":{"line":66,"column":8},"end":{"line":66,"column":28}},"26":{"start":{"line":67,"column":8},"end":{"line":67,"column":29}},"27":{"start":{"line":71,"column":8},"end":{"line":71,"column":16}},"28":{"start":{"line":73,"column":8},"end":{"line":75,"column":9}},"29":{"start":{"line":74,"column":12},"end":{"line":74,"column":48}},"30":{"start":{"line":77,"column":8},"end":{"line":79,"column":9}},"31":{"start":{"line":78,"column":12},"end":{"line":78,"column":26}},"32":{"start":{"line":81,"column":8},"end":{"line":81,"column":40}},"33":{"start":{"line":83,"column":8},"end":{"line":86,"column":9}},"34":{"start":{"line":84,"column":12},"end":{"line":84,"column":65}},"35":{"start":{"line":85,"column":12},"end":{"line":85,"column":41}},"36":{"start":{"line":88,"column":8},"end":{"line":93,"column":9}},"37":{"start":{"line":89,"column":12},"end":{"line":89,"column":80}},"38":{"start":{"line":90,"column":12},"end":{"line":90,"column":68}},"39":{"start":{"line":92,"column":12},"end":{"line":92,"column":41}},"40":{"start":{"line":95,"column":8},"end":{"line":95,"column":44}},"41":{"start":{"line":97,"column":8},"end":{"line":103,"column":9}},"42":{"start":{"line":98,"column":12},"end":{"line":98,"column":53}},"43":{"start":{"line":99,"column":12},"end":{"line":102,"column":15}},"44":{"start":{"line":100,"column":16},"end":{"line":100,"column":41}},"45":{"start":{"line":101,"column":16},"end":{"line":101,"column":33}},"46":{"start":{"line":105,"column":8},"end":{"line":108,"column":9}},"47":{"start":{"line":106,"column":12},"end":{"line":106,"column":43}},"48":{"start":{"line":107,"column":12},"end":{"line":107,"column":27}},"49":{"start":{"line":110,"column":8},"end":{"line":110,"column":15}},"50":{"start":{"line":114,"column":8},"end":{"line":116,"column":9}},"51":{"start":{"line":115,"column":12},"end":{"line":115,"column":58}},"52":{"start":{"line":118,"column":8},"end":{"line":123,"column":9}},"53":{"start":{"line":119,"column":12},"end":{"line":119,"column":73}},"54":{"start":{"line":120,"column":12},"end":{"line":120,"column":53}},"55":{"start":{"line":121,"column":12},"end":{"line":121,"column":46}},"56":{"start":{"line":122,"column":12},"end":{"line":122,"column":31}},"57":{"start":{"line":124,"column":8},"end":{"line":124,"column":15}},"58":{"start":{"line":129,"column":0},"end":{"line":133,"column":2}}},"branchMap":{"1":{"line":12,"type":"if","locations":[{"start":{"line":12,"column":4},"end":{"line":12,"column":4}},{"start":{"line":12,"column":4},"end":{"line":12,"column":4}}]},"2":{"line":27,"type":"binary-expr","locations":[{"start":{"line":27,"column":11},"end":{"line":27,"column":14}},{"start":{"line":27,"column":18},"end":{"line":27,"column":20}}]},"3":{"line":28,"type":"binary-expr","locations":[{"start":{"line":28,"column":17},"end":{"line":28,"column":27}},{"start":{"line":28,"column":31},"end":{"line":28,"column":33}}]},"4":{"line":30,"type":"if","locations":[{"start":{"line":30,"column":4},"end":{"line":30,"column":4}},{"start":{"line":30,"column":4},"end":{"line":30,"column":4}}]},"5":{"line":57,"type":"binary-expr","locations":[{"start":{"line":57,"column":23},"end":{"line":57,"column":30}},{"start":{"line":57,"column":34},"end":{"line":57,"column":36}}]},"6":{"line":59,"type":"if","locations":[{"start":{"line":59,"column":8},"end":{"line":59,"column":8}},{"start":{"line":59,"column":8},"end":{"line":59,"column":8}}]},"7":{"line":60,"type":"binary-expr","locations":[{"start":{"line":60,"column":38},"end":{"line":60,"column":61}},{"start":{"line":60,"column":65},"end":{"line":60,"column":67}}]},"8":{"line":73,"type":"if","locations":[{"start":{"line":73,"column":8},"end":{"line":73,"column":8}},{"start":{"line":73,"column":8},"end":{"line":73,"column":8}}]},"9":{"line":77,"type":"if","locations":[{"start":{"line":77,"column":8},"end":{"line":77,"column":8}},{"start":{"line":77,"column":8},"end":{"line":77,"column":8}}]},"10":{"line":77,"type":"binary-expr","locations":[{"start":{"line":77,"column":12},"end":{"line":77,"column":18}},{"start":{"line":77,"column":22},"end":{"line":77,"column":35}}]},"11":{"line":83,"type":"if","locations":[{"start":{"line":83,"column":8},"end":{"line":83,"column":8}},{"start":{"line":83,"column":8},"end":{"line":83,"column":8}}]},"12":{"line":83,"type":"binary-expr","locations":[{"start":{"line":83,"column":12},"end":{"line":83,"column":32}},{"start":{"line":83,"column":36},"end":{"line":83,"column":63}}]},"13":{"line":88,"type":"if","locations":[{"start":{"line":88,"column":8},"end":{"line":88,"column":8}},{"start":{"line":88,"column":8},"end":{"line":88,"column":8}}]},"14":{"line":97,"type":"if","locations":[{"start":{"line":97,"column":8},"end":{"line":97,"column":8}},{"start":{"line":97,"column":8},"end":{"line":97,"column":8}}]},"15":{"line":105,"type":"if","locations":[{"start":{"line":105,"column":8},"end":{"line":105,"column":8}},{"start":{"line":105,"column":8},"end":{"line":105,"column":8}}]},"16":{"line":114,"type":"if","locations":[{"start":{"line":114,"column":8},"end":{"line":114,"column":8}},{"start":{"line":114,"column":8},"end":{"line":114,"column":8}}]},"17":{"line":114,"type":"binary-expr","locations":[{"start":{"line":114,"column":12},"end":{"line":114,"column":32}},{"start":{"line":114,"column":36},"end":{"line":114,"column":63}}]},"18":{"line":118,"type":"if","locations":[{"start":{"line":118,"column":8},"end":{"line":118,"column":8}},{"start":{"line":118,"column":8},"end":{"line":118,"column":8}}]}},"code":["'use strict';","","const Transform = require('stream').Transform;","","/**"," * Encodes a Buffer into a base64 encoded string"," *"," * @param {Buffer} buffer Buffer to convert"," * @returns {String} base64 encoded string"," */","function encode(buffer) {","    if (typeof buffer === 'string') {","        buffer = new Buffer(buffer, 'utf-8');","    }","","    return buffer.toString('base64');","}","","/**"," * Adds soft line breaks to a base64 string"," *"," * @param {String} str base64 encoded string that might need line wrapping"," * @param {Number} [lineLength=76] Maximum allowed length for a line"," * @returns {String} Soft-wrapped base64 encoded string"," */","function wrap(str, lineLength) {","    str = (str || '').toString();","    lineLength = lineLength || 76;","","    if (str.length <= lineLength) {","        return str;","    }","","    let result = [];","    let pos = 0;","    let chunkLength = lineLength * 1024;","    while (pos < str.length) {","        let wrappedLines = str.substr(pos, chunkLength).replace(new RegExp('.{' + lineLength + '}', 'g'), '$&\\r\\n').trim();","        result.push(wrappedLines);","        pos += chunkLength;","    }","","    return result.join('\\r\\n').trim();","}","","/**"," * Creates a transform stream for encoding data to base64 encoding"," *"," * @constructor"," * @param {Object} options Stream options"," * @param {Number} [options.lineLength=76] Maximum lenght for lines, set to false to disable wrapping"," */","class Encoder extends Transform {","    constructor(options) {","        super();","        // init Transform","        this.options = options || {};","","        if (this.options.lineLength !== false) {","            this.options.lineLength = this.options.lineLength || 76;","        }","","        this._curLine = '';","        this._remainingBytes = false;","","        this.inputBytes = 0;","        this.outputBytes = 0;","    }","","    _transform(chunk, encoding, done) {","        let b64;","","        if (encoding !== 'buffer') {","            chunk = new Buffer(chunk, encoding);","        }","","        if (!chunk || !chunk.length) {","            return done();","        }","","        this.inputBytes += chunk.length;","","        if (this._remainingBytes && this._remainingBytes.length) {","            chunk = Buffer.concat([this._remainingBytes, chunk]);","            this._remainingBytes = false;","        }","","        if (chunk.length % 3) {","            this._remainingBytes = chunk.slice(chunk.length - chunk.length % 3);","            chunk = chunk.slice(0, chunk.length - chunk.length % 3);","        } else {","            this._remainingBytes = false;","        }","","        b64 = this._curLine + encode(chunk);","","        if (this.options.lineLength) {","            b64 = wrap(b64, this.options.lineLength);","            b64 = b64.replace(/(^|\\n)([^\\n]*)$/, (match, lineBreak, lastLine) => {","                this._curLine = lastLine;","                return lineBreak;","            });","        }","","        if (b64) {","            this.outputBytes += b64.length;","            this.push(b64);","        }","","        done();","    }","","    _flush(done) {","        if (this._remainingBytes && this._remainingBytes.length) {","            this._curLine += encode(this._remainingBytes);","        }","","        if (this._curLine) {","            this._curLine = wrap(this._curLine, this.options.lineLength);","            this.outputBytes += this._curLine.length;","            this.push(this._curLine, 'ascii');","            this._curLine = '';","        }","        done();","    }","}","","// expose to the world","module.exports = {","    encode,","    wrap,","    Encoder","};",""],"l":{"3":1,"11":1,"12":0,"13":0,"16":0,"26":1,"27":0,"28":0,"30":0,"31":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"43":0,"55":0,"57":0,"59":0,"60":0,"63":0,"64":0,"66":0,"67":0,"71":0,"73":0,"74":0,"77":0,"78":0,"81":0,"83":0,"84":0,"85":0,"88":0,"89":0,"90":0,"92":0,"95":0,"97":0,"98":0,"99":0,"100":0,"101":0,"105":0,"106":0,"107":0,"110":0,"114":0,"115":0,"118":0,"119":0,"120":0,"121":0,"122":0,"124":0,"129":1}},"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/qp/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/qp/index.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":1,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":1,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0,0,0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0,0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"fnMap":{"1":{"name":"encode","line":11,"loc":{"start":{"line":11,"column":0},"end":{"line":11,"column":24}}},"2":{"name":"wrap","line":48,"loc":{"start":{"line":48,"column":0},"end":{"line":48,"column":31}}},"3":{"name":"checkRanges","line":133,"loc":{"start":{"line":133,"column":0},"end":{"line":133,"column":33}}},"4":{"name":"(anonymous_4)","line":156,"loc":{"start":{"line":156,"column":15},"end":{"line":156,"column":25}}},"5":{"name":"(anonymous_5)","line":172,"loc":{"start":{"line":172,"column":14},"end":{"line":172,"column":38}}},"6":{"name":"(anonymous_6)","line":207,"loc":{"start":{"line":207,"column":10},"end":{"line":207,"column":17}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":46}},"2":{"start":{"line":11,"column":0},"end":{"line":39,"column":1}},"3":{"start":{"line":12,"column":4},"end":{"line":14,"column":5}},"4":{"start":{"line":13,"column":8},"end":{"line":13,"column":45}},"5":{"start":{"line":17,"column":4},"end":{"line":24,"column":6}},"6":{"start":{"line":25,"column":4},"end":{"line":25,"column":20}},"7":{"start":{"line":26,"column":4},"end":{"line":26,"column":12}},"8":{"start":{"line":28,"column":4},"end":{"line":36,"column":5}},"9":{"start":{"line":29,"column":8},"end":{"line":29,"column":24}},"10":{"start":{"line":31,"column":8},"end":{"line":34,"column":9}},"11":{"start":{"line":32,"column":12},"end":{"line":32,"column":47}},"12":{"start":{"line":33,"column":12},"end":{"line":33,"column":21}},"13":{"start":{"line":35,"column":8},"end":{"line":35,"column":81}},"14":{"start":{"line":38,"column":4},"end":{"line":38,"column":18}},"15":{"start":{"line":48,"column":0},"end":{"line":124,"column":1}},"16":{"start":{"line":49,"column":4},"end":{"line":49,"column":33}},"17":{"start":{"line":50,"column":4},"end":{"line":50,"column":34}},"18":{"start":{"line":52,"column":4},"end":{"line":54,"column":5}},"19":{"start":{"line":53,"column":8},"end":{"line":53,"column":19}},"20":{"start":{"line":56,"column":4},"end":{"line":56,"column":16}},"21":{"start":{"line":57,"column":4},"end":{"line":57,"column":25}},"22":{"start":{"line":58,"column":4},"end":{"line":58,"column":26}},"23":{"start":{"line":59,"column":4},"end":{"line":59,"column":48}},"24":{"start":{"line":60,"column":4},"end":{"line":60,"column":20}},"25":{"start":{"line":63,"column":4},"end":{"line":121,"column":5}},"26":{"start":{"line":64,"column":8},"end":{"line":64,"column":43}},"27":{"start":{"line":65,"column":8},"end":{"line":70,"column":9}},"28":{"start":{"line":66,"column":12},"end":{"line":66,"column":65}},"29":{"start":{"line":67,"column":12},"end":{"line":67,"column":27}},"30":{"start":{"line":68,"column":12},"end":{"line":68,"column":31}},"31":{"start":{"line":69,"column":12},"end":{"line":69,"column":21}},"32":{"start":{"line":72,"column":8},"end":{"line":106,"column":9}},"33":{"start":{"line":74,"column":12},"end":{"line":74,"column":27}},"34":{"start":{"line":75,"column":12},"end":{"line":75,"column":31}},"35":{"start":{"line":76,"column":12},"end":{"line":76,"column":21}},"36":{"start":{"line":77,"column":15},"end":{"line":106,"column":9}},"37":{"start":{"line":79,"column":12},"end":{"line":79,"column":71}},"38":{"start":{"line":80,"column":12},"end":{"line":80,"column":27}},"39":{"start":{"line":81,"column":12},"end":{"line":81,"column":31}},"40":{"start":{"line":82,"column":12},"end":{"line":82,"column":21}},"41":{"start":{"line":83,"column":15},"end":{"line":106,"column":9}},"42":{"start":{"line":85,"column":12},"end":{"line":85,"column":71}},"43":{"start":{"line":86,"column":15},"end":{"line":106,"column":9}},"44":{"start":{"line":89,"column":12},"end":{"line":91,"column":13}},"45":{"start":{"line":90,"column":16},"end":{"line":90,"column":69}},"46":{"start":{"line":94,"column":12},"end":{"line":105,"column":13}},"47":{"start":{"line":95,"column":16},"end":{"line":95,"column":59}},"48":{"start":{"line":96,"column":16},"end":{"line":98,"column":17}},"49":{"start":{"line":97,"column":20},"end":{"line":97,"column":26}},"50":{"start":{"line":100,"column":16},"end":{"line":100,"column":55}},"51":{"start":{"line":102,"column":16},"end":{"line":104,"column":17}},"52":{"start":{"line":103,"column":20},"end":{"line":103,"column":26}},"53":{"start":{"line":108,"column":8},"end":{"line":118,"column":9}},"54":{"start":{"line":109,"column":12},"end":{"line":113,"column":13}},"55":{"start":{"line":110,"column":16},"end":{"line":110,"column":55}},"56":{"start":{"line":111,"column":19},"end":{"line":113,"column":13}},"57":{"start":{"line":112,"column":16},"end":{"line":112,"column":55}},"58":{"start":{"line":114,"column":12},"end":{"line":114,"column":31}},"59":{"start":{"line":115,"column":12},"end":{"line":115,"column":28}},"60":{"start":{"line":117,"column":12},"end":{"line":117,"column":31}},"61":{"start":{"line":120,"column":8},"end":{"line":120,"column":23}},"62":{"start":{"line":123,"column":4},"end":{"line":123,"column":18}},"63":{"start":{"line":133,"column":0},"end":{"line":146,"column":1}},"64":{"start":{"line":134,"column":4},"end":{"line":144,"column":5}},"65":{"start":{"line":135,"column":8},"end":{"line":137,"column":9}},"66":{"start":{"line":136,"column":12},"end":{"line":136,"column":21}},"67":{"start":{"line":138,"column":8},"end":{"line":140,"column":9}},"68":{"start":{"line":139,"column":12},"end":{"line":139,"column":24}},"69":{"start":{"line":141,"column":8},"end":{"line":143,"column":9}},"70":{"start":{"line":142,"column":12},"end":{"line":142,"column":24}},"71":{"start":{"line":145,"column":4},"end":{"line":145,"column":17}},"72":{"start":{"line":157,"column":8},"end":{"line":157,"column":16}},"73":{"start":{"line":160,"column":8},"end":{"line":160,"column":37}},"74":{"start":{"line":162,"column":8},"end":{"line":164,"column":9}},"75":{"start":{"line":163,"column":12},"end":{"line":163,"column":68}},"76":{"start":{"line":166,"column":8},"end":{"line":166,"column":27}},"77":{"start":{"line":168,"column":8},"end":{"line":168,"column":28}},"78":{"start":{"line":169,"column":8},"end":{"line":169,"column":29}},"79":{"start":{"line":173,"column":8},"end":{"line":173,"column":15}},"80":{"start":{"line":175,"column":8},"end":{"line":177,"column":9}},"81":{"start":{"line":176,"column":12},"end":{"line":176,"column":48}},"82":{"start":{"line":179,"column":8},"end":{"line":181,"column":9}},"83":{"start":{"line":180,"column":12},"end":{"line":180,"column":26}},"84":{"start":{"line":183,"column":8},"end":{"line":183,"column":40}},"85":{"start":{"line":185,"column":8},"end":{"line":202,"column":9}},"86":{"start":{"line":186,"column":12},"end":{"line":186,"column":47}},"87":{"start":{"line":187,"column":12},"end":{"line":187,"column":51}},"88":{"start":{"line":188,"column":12},"end":{"line":191,"column":15}},"89":{"start":{"line":189,"column":16},"end":{"line":189,"column":41}},"90":{"start":{"line":190,"column":16},"end":{"line":190,"column":33}},"91":{"start":{"line":193,"column":12},"end":{"line":196,"column":13}},"92":{"start":{"line":194,"column":16},"end":{"line":194,"column":46}},"93":{"start":{"line":195,"column":16},"end":{"line":195,"column":30}},"94":{"start":{"line":199,"column":12},"end":{"line":199,"column":31}},"95":{"start":{"line":200,"column":12},"end":{"line":200,"column":42}},"96":{"start":{"line":201,"column":12},"end":{"line":201,"column":35}},"97":{"start":{"line":204,"column":8},"end":{"line":204,"column":15}},"98":{"start":{"line":208,"column":8},"end":{"line":211,"column":9}},"99":{"start":{"line":209,"column":12},"end":{"line":209,"column":53}},"100":{"start":{"line":210,"column":12},"end":{"line":210,"column":46}},"101":{"start":{"line":212,"column":8},"end":{"line":212,"column":15}},"102":{"start":{"line":217,"column":0},"end":{"line":221,"column":2}}},"branchMap":{"1":{"line":12,"type":"if","locations":[{"start":{"line":12,"column":4},"end":{"line":12,"column":4}},{"start":{"line":12,"column":4},"end":{"line":12,"column":4}}]},"2":{"line":31,"type":"if","locations":[{"start":{"line":31,"column":8},"end":{"line":31,"column":8}},{"start":{"line":31,"column":8},"end":{"line":31,"column":8}}]},"3":{"line":31,"type":"binary-expr","locations":[{"start":{"line":31,"column":12},"end":{"line":31,"column":36}},{"start":{"line":31,"column":40},"end":{"line":31,"column":144}}]},"4":{"line":31,"type":"binary-expr","locations":[{"start":{"line":31,"column":43},"end":{"line":31,"column":55}},{"start":{"line":31,"column":59},"end":{"line":31,"column":71}},{"start":{"line":31,"column":77},"end":{"line":31,"column":90}},{"start":{"line":31,"column":94},"end":{"line":31,"column":116}},{"start":{"line":31,"column":120},"end":{"line":31,"column":142}}]},"5":{"line":35,"type":"cond-expr","locations":[{"start":{"line":35,"column":38},"end":{"line":35,"column":41}},{"start":{"line":35,"column":44},"end":{"line":35,"column":46}}]},"6":{"line":49,"type":"binary-expr","locations":[{"start":{"line":49,"column":11},"end":{"line":49,"column":14}},{"start":{"line":49,"column":18},"end":{"line":49,"column":20}}]},"7":{"line":50,"type":"binary-expr","locations":[{"start":{"line":50,"column":17},"end":{"line":50,"column":27}},{"start":{"line":50,"column":31},"end":{"line":50,"column":33}}]},"8":{"line":52,"type":"if","locations":[{"start":{"line":52,"column":4},"end":{"line":52,"column":4}},{"start":{"line":52,"column":4},"end":{"line":52,"column":4}}]},"9":{"line":65,"type":"if","locations":[{"start":{"line":65,"column":8},"end":{"line":65,"column":8}},{"start":{"line":65,"column":8},"end":{"line":65,"column":8}}]},"10":{"line":72,"type":"if","locations":[{"start":{"line":72,"column":8},"end":{"line":72,"column":8}},{"start":{"line":72,"column":8},"end":{"line":72,"column":8}}]},"11":{"line":77,"type":"if","locations":[{"start":{"line":77,"column":15},"end":{"line":77,"column":15}},{"start":{"line":77,"column":15},"end":{"line":77,"column":15}}]},"12":{"line":83,"type":"if","locations":[{"start":{"line":83,"column":15},"end":{"line":83,"column":15}},{"start":{"line":83,"column":15},"end":{"line":83,"column":15}}]},"13":{"line":83,"type":"binary-expr","locations":[{"start":{"line":83,"column":19},"end":{"line":83,"column":56}},{"start":{"line":83,"column":61},"end":{"line":83,"column":128}}]},"14":{"line":86,"type":"if","locations":[{"start":{"line":86,"column":15},"end":{"line":86,"column":15}},{"start":{"line":86,"column":15},"end":{"line":86,"column":15}}]},"15":{"line":89,"type":"if","locations":[{"start":{"line":89,"column":12},"end":{"line":89,"column":12}},{"start":{"line":89,"column":12},"end":{"line":89,"column":12}}]},"16":{"line":94,"type":"binary-expr","locations":[{"start":{"line":94,"column":19},"end":{"line":94,"column":34}},{"start":{"line":94,"column":38},"end":{"line":94,"column":61}},{"start":{"line":94,"column":65},"end":{"line":94,"column":103}},{"start":{"line":94,"column":108},"end":{"line":94,"column":145}}]},"17":{"line":96,"type":"if","locations":[{"start":{"line":96,"column":16},"end":{"line":96,"column":16}},{"start":{"line":96,"column":16},"end":{"line":96,"column":16}}]},"18":{"line":102,"type":"if","locations":[{"start":{"line":102,"column":16},"end":{"line":102,"column":16}},{"start":{"line":102,"column":16},"end":{"line":102,"column":16}}]},"19":{"line":108,"type":"if","locations":[{"start":{"line":108,"column":8},"end":{"line":108,"column":8}},{"start":{"line":108,"column":8},"end":{"line":108,"column":8}}]},"20":{"line":108,"type":"binary-expr","locations":[{"start":{"line":108,"column":12},"end":{"line":108,"column":35}},{"start":{"line":108,"column":39},"end":{"line":108,"column":63}}]},"21":{"line":109,"type":"if","locations":[{"start":{"line":109,"column":12},"end":{"line":109,"column":12}},{"start":{"line":109,"column":12},"end":{"line":109,"column":12}}]},"22":{"line":109,"type":"binary-expr","locations":[{"start":{"line":109,"column":16},"end":{"line":109,"column":42}},{"start":{"line":109,"column":46},"end":{"line":109,"column":74}}]},"23":{"line":111,"type":"if","locations":[{"start":{"line":111,"column":19},"end":{"line":111,"column":19}},{"start":{"line":111,"column":19},"end":{"line":111,"column":19}}]},"24":{"line":135,"type":"if","locations":[{"start":{"line":135,"column":8},"end":{"line":135,"column":8}},{"start":{"line":135,"column":8},"end":{"line":135,"column":8}}]},"25":{"line":138,"type":"if","locations":[{"start":{"line":138,"column":8},"end":{"line":138,"column":8}},{"start":{"line":138,"column":8},"end":{"line":138,"column":8}}]},"26":{"line":138,"type":"binary-expr","locations":[{"start":{"line":138,"column":12},"end":{"line":138,"column":34}},{"start":{"line":138,"column":38},"end":{"line":138,"column":57}}]},"27":{"line":141,"type":"if","locations":[{"start":{"line":141,"column":8},"end":{"line":141,"column":8}},{"start":{"line":141,"column":8},"end":{"line":141,"column":8}}]},"28":{"line":141,"type":"binary-expr","locations":[{"start":{"line":141,"column":12},"end":{"line":141,"column":34}},{"start":{"line":141,"column":38},"end":{"line":141,"column":56}},{"start":{"line":141,"column":60},"end":{"line":141,"column":78}}]},"29":{"line":160,"type":"binary-expr","locations":[{"start":{"line":160,"column":23},"end":{"line":160,"column":30}},{"start":{"line":160,"column":34},"end":{"line":160,"column":36}}]},"30":{"line":162,"type":"if","locations":[{"start":{"line":162,"column":8},"end":{"line":162,"column":8}},{"start":{"line":162,"column":8},"end":{"line":162,"column":8}}]},"31":{"line":163,"type":"binary-expr","locations":[{"start":{"line":163,"column":38},"end":{"line":163,"column":61}},{"start":{"line":163,"column":65},"end":{"line":163,"column":67}}]},"32":{"line":175,"type":"if","locations":[{"start":{"line":175,"column":8},"end":{"line":175,"column":8}},{"start":{"line":175,"column":8},"end":{"line":175,"column":8}}]},"33":{"line":179,"type":"if","locations":[{"start":{"line":179,"column":8},"end":{"line":179,"column":8}},{"start":{"line":179,"column":8},"end":{"line":179,"column":8}}]},"34":{"line":179,"type":"binary-expr","locations":[{"start":{"line":179,"column":12},"end":{"line":179,"column":18}},{"start":{"line":179,"column":22},"end":{"line":179,"column":35}}]},"35":{"line":185,"type":"if","locations":[{"start":{"line":185,"column":8},"end":{"line":185,"column":8}},{"start":{"line":185,"column":8},"end":{"line":185,"column":8}}]},"36":{"line":193,"type":"if","locations":[{"start":{"line":193,"column":12},"end":{"line":193,"column":12}},{"start":{"line":193,"column":12},"end":{"line":193,"column":12}}]},"37":{"line":208,"type":"if","locations":[{"start":{"line":208,"column":8},"end":{"line":208,"column":8}},{"start":{"line":208,"column":8},"end":{"line":208,"column":8}}]}},"code":["'use strict';","","const Transform = require('stream').Transform;","","/**"," * Encodes a Buffer into a Quoted-Printable encoded string"," *"," * @param {Buffer} buffer Buffer to convert"," * @returns {String} Quoted-Printable encoded string"," */","function encode(buffer) {","    if (typeof buffer === 'string') {","        buffer = new Buffer(buffer, 'utf-8');","    }","","    // usable characters that do not need encoding","    let ranges = [","        // https://tools.ietf.org/html/rfc2045#section-6.7","        [0x09], // <TAB>","        [0x0A], // <LF>","        [0x0D], // <CR>","        [0x20, 0x3C], // <SP>!\"#$%&'()*+,-./0123456789:;","        [0x3E, 0x7E] // >?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}","    ];","    let result = '';","    let ord;","","    for (let i = 0, len = buffer.length; i < len; i++) {","        ord = buffer[i];","        // if the char is in allowed range, then keep as is, unless it is a WS in the end of a line","        if (checkRanges(ord, ranges) && !((ord === 0x20 || ord === 0x09) && (i === len - 1 || buffer[i + 1] === 0x0a || buffer[i + 1] === 0x0d))) {","            result += String.fromCharCode(ord);","            continue;","        }","        result += '=' + (ord < 0x10 ? '0' : '') + ord.toString(16).toUpperCase();","    }","","    return result;","}","","/**"," * Adds soft line breaks to a Quoted-Printable string"," *"," * @param {String} str Quoted-Printable encoded string that might need line wrapping"," * @param {Number} [lineLength=76] Maximum allowed length for a line"," * @returns {String} Soft-wrapped Quoted-Printable encoded string"," */","function wrap(str, lineLength) {","    str = (str || '').toString();","    lineLength = lineLength || 76;","","    if (str.length <= lineLength) {","        return str;","    }","","    let pos = 0;","    let len = str.length;","    let match, code, line;","    let lineMargin = Math.floor(lineLength / 3);","    let result = '';","","    // insert soft linebreaks where needed","    while (pos < len) {","        line = str.substr(pos, lineLength);","        if ((match = line.match(/\\r\\n/))) {","            line = line.substr(0, match.index + match[0].length);","            result += line;","            pos += line.length;","            continue;","        }","","        if (line.substr(-1) === '\\n') {","            // nothing to change here","            result += line;","            pos += line.length;","            continue;","        } else if ((match = line.substr(-lineMargin).match(/\\n.*?$/))) {","            // truncate to nearest line break","            line = line.substr(0, line.length - (match[0].length - 1));","            result += line;","            pos += line.length;","            continue;","        } else if (line.length > lineLength - lineMargin && (match = line.substr(-lineMargin).match(/[ \\t\\.,!\\?][^ \\t\\.,!\\?]*$/))) {","            // truncate to nearest space","            line = line.substr(0, line.length - (match[0].length - 1));","        } else if (line.match(/\\=[\\da-f]{0,2}$/i)) {","","            // push incomplete encoding sequences to the next line","            if ((match = line.match(/\\=[\\da-f]{0,1}$/i))) {","                line = line.substr(0, line.length - match[0].length);","            }","","            // ensure that utf-8 sequences are not split","            while (line.length > 3 && line.length < len - pos && !line.match(/^(?:=[\\da-f]{2}){1,4}$/i) && (match = line.match(/\\=[\\da-f]{2}$/ig))) {","                code = parseInt(match[0].substr(1, 2), 16);","                if (code < 128) {","                    break;","                }","","                line = line.substr(0, line.length - 3);","","                if (code >= 0xC0) {","                    break;","                }","            }","        }","","        if (pos + line.length < len && line.substr(-1) !== '\\n') {","            if (line.length === lineLength && line.match(/\\=[\\da-f]{2}$/i)) {","                line = line.substr(0, line.length - 3);","            } else if (line.length === lineLength) {","                line = line.substr(0, line.length - 1);","            }","            pos += line.length;","            line += '=\\r\\n';","        } else {","            pos += line.length;","        }","","        result += line;","    }","","    return result;","}","","/**"," * Helper function to check if a number is inside provided ranges"," *"," * @param {Number} nr Number to check for"," * @param {Array} ranges An Array of allowed values"," * @returns {Boolean} True if the value was found inside allowed ranges, false otherwise"," */","function checkRanges(nr, ranges) {","    for (let i = ranges.length - 1; i >= 0; i--) {","        if (!ranges[i].length) {","            continue;","        }","        if (ranges[i].length === 1 && nr === ranges[i][0]) {","            return true;","        }","        if (ranges[i].length === 2 && nr >= ranges[i][0] && nr <= ranges[i][1]) {","            return true;","        }","    }","    return false;","}","","/**"," * Creates a transform stream for encoding data to Quoted-Printable encoding"," *"," * @constructor"," * @param {Object} options Stream options"," * @param {Number} [options.lineLength=76] Maximum lenght for lines, set to false to disable wrapping"," */","class Encoder extends Transform {","    constructor(options) {","        super();","","        // init Transform","        this.options = options || {};","","        if (this.options.lineLength !== false) {","            this.options.lineLength = this.options.lineLength || 76;","        }","","        this._curLine = '';","","        this.inputBytes = 0;","        this.outputBytes = 0;","    }","","    _transform(chunk, encoding, done) {","        let qp;","","        if (encoding !== 'buffer') {","            chunk = new Buffer(chunk, encoding);","        }","","        if (!chunk || !chunk.length) {","            return done();","        }","","        this.inputBytes += chunk.length;","","        if (this.options.lineLength) {","            qp = this._curLine + encode(chunk);","            qp = wrap(qp, this.options.lineLength);","            qp = qp.replace(/(^|\\n)([^\\n]*)$/, (match, lineBreak, lastLine) => {","                this._curLine = lastLine;","                return lineBreak;","            });","","            if (qp) {","                this.outputBytes += qp.length;","                this.push(qp);","            }","","        } else {","            qp = encode(chunk);","            this.outputBytes += qp.length;","            this.push(qp, 'ascii');","        }","","        done();","    }","","    _flush(done) {","        if (this._curLine) {","            this.outputBytes += this._curLine.length;","            this.push(this._curLine, 'ascii');","        }","        done();","    }","}","","// expose to the world","module.exports = {","    encode,","    wrap,","    Encoder","};",""],"l":{"3":1,"11":1,"12":0,"13":0,"17":0,"25":0,"26":0,"28":0,"29":0,"31":0,"32":0,"33":0,"35":0,"38":0,"48":1,"49":0,"50":0,"52":0,"53":0,"56":0,"57":0,"58":0,"59":0,"60":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"72":0,"74":0,"75":0,"76":0,"77":0,"79":0,"80":0,"81":0,"82":0,"83":0,"85":0,"86":0,"89":0,"90":0,"94":0,"95":0,"96":0,"97":0,"100":0,"102":0,"103":0,"108":0,"109":0,"110":0,"111":0,"112":0,"114":0,"115":0,"117":0,"120":0,"123":0,"133":1,"134":0,"135":0,"136":0,"138":0,"139":0,"141":0,"142":0,"145":0,"157":0,"160":0,"162":0,"163":0,"166":0,"168":0,"169":0,"173":0,"175":0,"176":0,"179":0,"180":0,"183":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"193":0,"194":0,"195":0,"199":0,"200":0,"201":0,"204":0,"208":0,"209":0,"210":0,"212":0,"217":1}},"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/addressparser/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/addressparser/index.js","s":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":1,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":1},"b":{"1":[0,0],"2":[0,0,0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0,0],"22":[0,0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0,0],"42":[0,0],"43":[0,0],"44":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"fnMap":{"1":{"name":"_handleAddress","line":9,"loc":{"start":{"line":9,"column":0},"end":{"line":9,"column":32}}},"2":{"name":"(anonymous_2)","line":76,"loc":{"start":{"line":76,"column":32},"end":{"line":76,"column":51}}},"3":{"name":"(anonymous_3)","line":143,"loc":{"start":{"line":143,"column":15},"end":{"line":143,"column":21}}},"4":{"name":"(anonymous_4)","line":177,"loc":{"start":{"line":177,"column":12},"end":{"line":177,"column":15}}},"5":{"name":"(anonymous_5)","line":199,"loc":{"start":{"line":199,"column":13},"end":{"line":199,"column":19}}},"6":{"name":"addressparser","line":260,"loc":{"start":{"line":260,"column":0},"end":{"line":260,"column":28}}}},"statementMap":{"1":{"start":{"line":9,"column":0},"end":{"line":134,"column":1}},"2":{"start":{"line":10,"column":4},"end":{"line":10,"column":14}},"3":{"start":{"line":11,"column":4},"end":{"line":11,"column":24}},"4":{"start":{"line":12,"column":4},"end":{"line":12,"column":23}},"5":{"start":{"line":13,"column":4},"end":{"line":13,"column":16}},"6":{"start":{"line":14,"column":4},"end":{"line":14,"column":23}},"7":{"start":{"line":15,"column":4},"end":{"line":20,"column":6}},"8":{"start":{"line":21,"column":4},"end":{"line":21,"column":10}},"9":{"start":{"line":22,"column":4},"end":{"line":22,"column":12}},"10":{"start":{"line":25,"column":4},"end":{"line":51,"column":5}},"11":{"start":{"line":26,"column":8},"end":{"line":26,"column":26}},"12":{"start":{"line":27,"column":8},"end":{"line":50,"column":9}},"13":{"start":{"line":28,"column":12},"end":{"line":41,"column":13}},"14":{"start":{"line":30,"column":20},"end":{"line":30,"column":38}},"15":{"start":{"line":31,"column":20},"end":{"line":31,"column":26}},"16":{"start":{"line":33,"column":20},"end":{"line":33,"column":38}},"17":{"start":{"line":34,"column":20},"end":{"line":34,"column":26}},"18":{"start":{"line":36,"column":20},"end":{"line":36,"column":36}},"19":{"start":{"line":37,"column":20},"end":{"line":37,"column":35}},"20":{"start":{"line":38,"column":20},"end":{"line":38,"column":26}},"21":{"start":{"line":40,"column":20},"end":{"line":40,"column":35}},"22":{"start":{"line":42,"column":15},"end":{"line":50,"column":9}},"23":{"start":{"line":43,"column":12},"end":{"line":48,"column":13}},"24":{"start":{"line":47,"column":16},"end":{"line":47,"column":68}},"25":{"start":{"line":49,"column":12},"end":{"line":49,"column":42}},"26":{"start":{"line":54,"column":4},"end":{"line":57,"column":5}},"27":{"start":{"line":55,"column":8},"end":{"line":55,"column":33}},"28":{"start":{"line":56,"column":8},"end":{"line":56,"column":26}},"29":{"start":{"line":59,"column":4},"end":{"line":131,"column":5}},"30":{"start":{"line":61,"column":8},"end":{"line":61,"column":40}},"31":{"start":{"line":62,"column":8},"end":{"line":65,"column":11}},"32":{"start":{"line":68,"column":8},"end":{"line":95,"column":9}},"33":{"start":{"line":69,"column":12},"end":{"line":74,"column":13}},"34":{"start":{"line":70,"column":16},"end":{"line":73,"column":17}},"35":{"start":{"line":71,"column":20},"end":{"line":71,"column":58}},"36":{"start":{"line":72,"column":20},"end":{"line":72,"column":26}},"37":{"start":{"line":76,"column":12},"end":{"line":83,"column":14}},"38":{"start":{"line":77,"column":16},"end":{"line":82,"column":17}},"39":{"start":{"line":78,"column":20},"end":{"line":78,"column":52}},"40":{"start":{"line":79,"column":20},"end":{"line":79,"column":31}},"41":{"start":{"line":81,"column":20},"end":{"line":81,"column":35}},"42":{"start":{"line":86,"column":12},"end":{"line":94,"column":13}},"43":{"start":{"line":87,"column":16},"end":{"line":93,"column":17}},"44":{"start":{"line":89,"column":20},"end":{"line":89,"column":106}},"45":{"start":{"line":90,"column":20},"end":{"line":92,"column":21}},"46":{"start":{"line":91,"column":24},"end":{"line":91,"column":30}},"47":{"start":{"line":98,"column":8},"end":{"line":101,"column":9}},"48":{"start":{"line":99,"column":12},"end":{"line":99,"column":37}},"49":{"start":{"line":100,"column":12},"end":{"line":100,"column":30}},"50":{"start":{"line":104,"column":8},"end":{"line":106,"column":9}},"51":{"start":{"line":105,"column":12},"end":{"line":105,"column":65}},"52":{"start":{"line":109,"column":8},"end":{"line":109,"column":40}},"53":{"start":{"line":110,"column":8},"end":{"line":110,"column":46}},"54":{"start":{"line":112,"column":8},"end":{"line":130,"column":9}},"55":{"start":{"line":113,"column":12},"end":{"line":113,"column":22}},"56":{"start":{"line":115,"column":12},"end":{"line":118,"column":14}},"57":{"start":{"line":120,"column":12},"end":{"line":127,"column":13}},"58":{"start":{"line":121,"column":16},"end":{"line":125,"column":17}},"59":{"start":{"line":122,"column":20},"end":{"line":122,"column":38}},"60":{"start":{"line":124,"column":20},"end":{"line":124,"column":41}},"61":{"start":{"line":129,"column":12},"end":{"line":129,"column":36}},"62":{"start":{"line":133,"column":4},"end":{"line":133,"column":21}},"63":{"start":{"line":144,"column":8},"end":{"line":144,"column":42}},"64":{"start":{"line":145,"column":8},"end":{"line":145,"column":34}},"65":{"start":{"line":146,"column":8},"end":{"line":146,"column":36}},"66":{"start":{"line":147,"column":8},"end":{"line":147,"column":25}},"67":{"start":{"line":148,"column":8},"end":{"line":148,"column":29}},"68":{"start":{"line":150,"column":8},"end":{"line":150,"column":23}},"69":{"start":{"line":154,"column":8},"end":{"line":167,"column":10}},"70":{"start":{"line":178,"column":8},"end":{"line":178,"column":27}},"71":{"start":{"line":179,"column":8},"end":{"line":182,"column":9}},"72":{"start":{"line":180,"column":12},"end":{"line":180,"column":37}},"73":{"start":{"line":181,"column":12},"end":{"line":181,"column":32}},"74":{"start":{"line":184,"column":8},"end":{"line":189,"column":11}},"75":{"start":{"line":185,"column":12},"end":{"line":185,"column":62}},"76":{"start":{"line":186,"column":12},"end":{"line":188,"column":13}},"77":{"start":{"line":187,"column":16},"end":{"line":187,"column":32}},"78":{"start":{"line":191,"column":8},"end":{"line":191,"column":20}},"79":{"start":{"line":200,"column":8},"end":{"line":222,"column":9}},"80":{"start":{"line":201,"column":12},"end":{"line":201,"column":33}},"81":{"start":{"line":202,"column":15},"end":{"line":222,"column":9}},"82":{"start":{"line":203,"column":12},"end":{"line":206,"column":14}},"83":{"start":{"line":207,"column":12},"end":{"line":207,"column":38}},"84":{"start":{"line":208,"column":12},"end":{"line":208,"column":29}},"85":{"start":{"line":209,"column":12},"end":{"line":209,"column":40}},"86":{"start":{"line":210,"column":12},"end":{"line":210,"column":33}},"87":{"start":{"line":211,"column":12},"end":{"line":211,"column":19}},"88":{"start":{"line":212,"column":15},"end":{"line":222,"column":9}},"89":{"start":{"line":213,"column":12},"end":{"line":216,"column":14}},"90":{"start":{"line":217,"column":12},"end":{"line":217,"column":38}},"91":{"start":{"line":218,"column":12},"end":{"line":218,"column":29}},"92":{"start":{"line":219,"column":12},"end":{"line":219,"column":57}},"93":{"start":{"line":220,"column":12},"end":{"line":220,"column":33}},"94":{"start":{"line":221,"column":12},"end":{"line":221,"column":19}},"95":{"start":{"line":224,"column":8},"end":{"line":227,"column":9}},"96":{"start":{"line":225,"column":12},"end":{"line":225,"column":32}},"97":{"start":{"line":226,"column":12},"end":{"line":226,"column":19}},"98":{"start":{"line":229,"column":8},"end":{"line":235,"column":9}},"99":{"start":{"line":230,"column":12},"end":{"line":233,"column":14}},"100":{"start":{"line":234,"column":12},"end":{"line":234,"column":38}},"101":{"start":{"line":237,"column":8},"end":{"line":239,"column":9}},"102":{"start":{"line":238,"column":12},"end":{"line":238,"column":36}},"103":{"start":{"line":241,"column":8},"end":{"line":241,"column":31}},"104":{"start":{"line":242,"column":8},"end":{"line":242,"column":29}},"105":{"start":{"line":260,"column":0},"end":{"line":291,"column":1}},"106":{"start":{"line":261,"column":4},"end":{"line":261,"column":39}},"107":{"start":{"line":262,"column":4},"end":{"line":262,"column":38}},"108":{"start":{"line":264,"column":4},"end":{"line":264,"column":23}},"109":{"start":{"line":265,"column":4},"end":{"line":265,"column":21}},"110":{"start":{"line":266,"column":4},"end":{"line":266,"column":29}},"111":{"start":{"line":268,"column":4},"end":{"line":277,"column":7}},"112":{"start":{"line":269,"column":8},"end":{"line":276,"column":9}},"113":{"start":{"line":270,"column":12},"end":{"line":272,"column":13}},"114":{"start":{"line":271,"column":16},"end":{"line":271,"column":40}},"115":{"start":{"line":273,"column":12},"end":{"line":273,"column":25}},"116":{"start":{"line":275,"column":12},"end":{"line":275,"column":32}},"117":{"start":{"line":279,"column":4},"end":{"line":281,"column":5}},"118":{"start":{"line":280,"column":8},"end":{"line":280,"column":32}},"119":{"start":{"line":283,"column":4},"end":{"line":288,"column":7}},"120":{"start":{"line":284,"column":8},"end":{"line":284,"column":42}},"121":{"start":{"line":285,"column":8},"end":{"line":287,"column":9}},"122":{"start":{"line":286,"column":12},"end":{"line":286,"column":62}},"123":{"start":{"line":290,"column":4},"end":{"line":290,"column":27}},"124":{"start":{"line":294,"column":0},"end":{"line":294,"column":31}}},"branchMap":{"1":{"line":27,"type":"if","locations":[{"start":{"line":27,"column":8},"end":{"line":27,"column":8}},{"start":{"line":27,"column":8},"end":{"line":27,"column":8}}]},"2":{"line":28,"type":"switch","locations":[{"start":{"line":29,"column":16},"end":{"line":31,"column":26}},{"start":{"line":32,"column":16},"end":{"line":34,"column":26}},{"start":{"line":35,"column":16},"end":{"line":38,"column":26}},{"start":{"line":39,"column":16},"end":{"line":40,"column":35}}]},"3":{"line":42,"type":"if","locations":[{"start":{"line":42,"column":15},"end":{"line":42,"column":15}},{"start":{"line":42,"column":15},"end":{"line":42,"column":15}}]},"4":{"line":43,"type":"if","locations":[{"start":{"line":43,"column":12},"end":{"line":43,"column":12}},{"start":{"line":43,"column":12},"end":{"line":43,"column":12}}]},"5":{"line":54,"type":"if","locations":[{"start":{"line":54,"column":4},"end":{"line":54,"column":4}},{"start":{"line":54,"column":4},"end":{"line":54,"column":4}}]},"6":{"line":54,"type":"binary-expr","locations":[{"start":{"line":54,"column":8},"end":{"line":54,"column":25}},{"start":{"line":54,"column":29},"end":{"line":54,"column":48}}]},"7":{"line":59,"type":"if","locations":[{"start":{"line":59,"column":4},"end":{"line":59,"column":4}},{"start":{"line":59,"column":4},"end":{"line":59,"column":4}}]},"8":{"line":63,"type":"binary-expr","locations":[{"start":{"line":63,"column":18},"end":{"line":63,"column":27}},{"start":{"line":63,"column":32},"end":{"line":63,"column":39}},{"start":{"line":63,"column":43},"end":{"line":63,"column":55}}]},"9":{"line":64,"type":"cond-expr","locations":[{"start":{"line":64,"column":39},"end":{"line":64,"column":74}},{"start":{"line":64,"column":77},"end":{"line":64,"column":79}}]},"10":{"line":68,"type":"if","locations":[{"start":{"line":68,"column":8},"end":{"line":68,"column":8}},{"start":{"line":68,"column":8},"end":{"line":68,"column":8}}]},"11":{"line":68,"type":"binary-expr","locations":[{"start":{"line":68,"column":12},"end":{"line":68,"column":32}},{"start":{"line":68,"column":36},"end":{"line":68,"column":52}}]},"12":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":16},"end":{"line":70,"column":16}},{"start":{"line":70,"column":16},"end":{"line":70,"column":16}}]},"13":{"line":77,"type":"if","locations":[{"start":{"line":77,"column":16},"end":{"line":77,"column":16}},{"start":{"line":77,"column":16},"end":{"line":77,"column":16}}]},"14":{"line":86,"type":"if","locations":[{"start":{"line":86,"column":12},"end":{"line":86,"column":12}},{"start":{"line":86,"column":12},"end":{"line":86,"column":12}}]},"15":{"line":90,"type":"if","locations":[{"start":{"line":90,"column":20},"end":{"line":90,"column":20}},{"start":{"line":90,"column":20},"end":{"line":90,"column":20}}]},"16":{"line":98,"type":"if","locations":[{"start":{"line":98,"column":8},"end":{"line":98,"column":8}},{"start":{"line":98,"column":8},"end":{"line":98,"column":8}}]},"17":{"line":98,"type":"binary-expr","locations":[{"start":{"line":98,"column":12},"end":{"line":98,"column":29}},{"start":{"line":98,"column":33},"end":{"line":98,"column":52}}]},"18":{"line":104,"type":"if","locations":[{"start":{"line":104,"column":8},"end":{"line":104,"column":8}},{"start":{"line":104,"column":8},"end":{"line":104,"column":8}}]},"19":{"line":112,"type":"if","locations":[{"start":{"line":112,"column":8},"end":{"line":112,"column":8}},{"start":{"line":112,"column":8},"end":{"line":112,"column":8}}]},"20":{"line":112,"type":"binary-expr","locations":[{"start":{"line":112,"column":12},"end":{"line":112,"column":25}},{"start":{"line":112,"column":29},"end":{"line":112,"column":36}}]},"21":{"line":116,"type":"binary-expr","locations":[{"start":{"line":116,"column":25},"end":{"line":116,"column":37}},{"start":{"line":116,"column":41},"end":{"line":116,"column":50}},{"start":{"line":116,"column":54},"end":{"line":116,"column":56}}]},"22":{"line":117,"type":"binary-expr","locations":[{"start":{"line":117,"column":22},"end":{"line":117,"column":31}},{"start":{"line":117,"column":35},"end":{"line":117,"column":47}},{"start":{"line":117,"column":51},"end":{"line":117,"column":53}}]},"23":{"line":120,"type":"if","locations":[{"start":{"line":120,"column":12},"end":{"line":120,"column":12}},{"start":{"line":120,"column":12},"end":{"line":120,"column":12}}]},"24":{"line":121,"type":"if","locations":[{"start":{"line":121,"column":16},"end":{"line":121,"column":16}},{"start":{"line":121,"column":16},"end":{"line":121,"column":16}}]},"25":{"line":121,"type":"binary-expr","locations":[{"start":{"line":121,"column":21},"end":{"line":121,"column":36}},{"start":{"line":121,"column":40},"end":{"line":121,"column":42}}]},"26":{"line":144,"type":"binary-expr","locations":[{"start":{"line":144,"column":20},"end":{"line":144,"column":23}},{"start":{"line":144,"column":27},"end":{"line":144,"column":29}}]},"27":{"line":185,"type":"binary-expr","locations":[{"start":{"line":185,"column":26},"end":{"line":185,"column":36}},{"start":{"line":185,"column":40},"end":{"line":185,"column":42}}]},"28":{"line":186,"type":"if","locations":[{"start":{"line":186,"column":12},"end":{"line":186,"column":12}},{"start":{"line":186,"column":12},"end":{"line":186,"column":12}}]},"29":{"line":200,"type":"if","locations":[{"start":{"line":200,"column":8},"end":{"line":200,"column":8}},{"start":{"line":200,"column":8},"end":{"line":200,"column":8}}]},"30":{"line":200,"type":"binary-expr","locations":[{"start":{"line":200,"column":13},"end":{"line":200,"column":34}},{"start":{"line":200,"column":38},"end":{"line":200,"column":50}},{"start":{"line":200,"column":55},"end":{"line":200,"column":67}}]},"31":{"line":202,"type":"if","locations":[{"start":{"line":202,"column":15},"end":{"line":202,"column":15}},{"start":{"line":202,"column":15},"end":{"line":202,"column":15}}]},"32":{"line":202,"type":"binary-expr","locations":[{"start":{"line":202,"column":19},"end":{"line":202,"column":41}},{"start":{"line":202,"column":45},"end":{"line":202,"column":75}}]},"33":{"line":212,"type":"if","locations":[{"start":{"line":212,"column":15},"end":{"line":212,"column":15}},{"start":{"line":212,"column":15},"end":{"line":212,"column":15}}]},"34":{"line":212,"type":"binary-expr","locations":[{"start":{"line":212,"column":19},"end":{"line":212,"column":42}},{"start":{"line":212,"column":46},"end":{"line":212,"column":67}}]},"35":{"line":224,"type":"if","locations":[{"start":{"line":224,"column":8},"end":{"line":224,"column":8}},{"start":{"line":224,"column":8},"end":{"line":224,"column":8}}]},"36":{"line":224,"type":"binary-expr","locations":[{"start":{"line":224,"column":12},"end":{"line":224,"column":25}},{"start":{"line":224,"column":29},"end":{"line":224,"column":41}}]},"37":{"line":229,"type":"if","locations":[{"start":{"line":229,"column":8},"end":{"line":229,"column":8}},{"start":{"line":229,"column":8},"end":{"line":229,"column":8}}]},"38":{"line":237,"type":"if","locations":[{"start":{"line":237,"column":8},"end":{"line":237,"column":8}},{"start":{"line":237,"column":8},"end":{"line":237,"column":8}}]},"39":{"line":237,"type":"binary-expr","locations":[{"start":{"line":237,"column":12},"end":{"line":237,"column":24}},{"start":{"line":237,"column":28},"end":{"line":237,"column":40}}]},"40":{"line":269,"type":"if","locations":[{"start":{"line":269,"column":8},"end":{"line":269,"column":8}},{"start":{"line":269,"column":8},"end":{"line":269,"column":8}}]},"41":{"line":269,"type":"binary-expr","locations":[{"start":{"line":269,"column":12},"end":{"line":269,"column":37}},{"start":{"line":269,"column":42},"end":{"line":269,"column":61}},{"start":{"line":269,"column":65},"end":{"line":269,"column":84}}]},"42":{"line":270,"type":"if","locations":[{"start":{"line":270,"column":12},"end":{"line":270,"column":12}},{"start":{"line":270,"column":12},"end":{"line":270,"column":12}}]},"43":{"line":279,"type":"if","locations":[{"start":{"line":279,"column":4},"end":{"line":279,"column":4}},{"start":{"line":279,"column":4},"end":{"line":279,"column":4}}]},"44":{"line":285,"type":"if","locations":[{"start":{"line":285,"column":8},"end":{"line":285,"column":8}},{"start":{"line":285,"column":8},"end":{"line":285,"column":8}}]}},"code":["'use strict';","","/**"," * Converts tokens for a single address into an address object"," *"," * @param {Array} tokens Tokens object"," * @return {Object} Address object"," */","function _handleAddress(tokens) {","    let token;","    let isGroup = false;","    let state = 'text';","    let address;","    let addresses = [];","    let data = {","        address: [],","        comment: [],","        group: [],","        text: []","    };","    let i;","    let len;","","    // Filter out <addresses>, (comments) and regular text","    for (i = 0, len = tokens.length; i < len; i++) {","        token = tokens[i];","        if (token.type === 'operator') {","            switch (token.value) {","                case '<':","                    state = 'address';","                    break;","                case '(':","                    state = 'comment';","                    break;","                case ':':","                    state = 'group';","                    isGroup = true;","                    break;","                default:","                    state = 'text';","            }","        } else if (token.value) {","            if (state === 'address') {","                // handle use case where unquoted name includes a \"<\"","                // Apple Mail truncates everything between an unexpected < and an address","                // and so will we","                token.value = token.value.replace(/^[^<]*<\\s*/, '');","            }","            data[state].push(token.value);","        }","    }","","    // If there is no text but a comment, replace the two","    if (!data.text.length && data.comment.length) {","        data.text = data.comment;","        data.comment = [];","    }","","    if (isGroup) {","        // http://tools.ietf.org/html/rfc2822#appendix-A.1.3","        data.text = data.text.join(' ');","        addresses.push({","            name: data.text || (address && address.name),","            group: data.group.length ? addressparser(data.group.join(',')) : []","        });","    } else {","        // If no address was found, try to detect one from regular text","        if (!data.address.length && data.text.length) {","            for (i = data.text.length - 1; i >= 0; i--) {","                if (data.text[i].match(/^[^@\\s]+@[^@\\s]+$/)) {","                    data.address = data.text.splice(i, 1);","                    break;","                }","            }","","            let _regexHandler = function (address) {","                if (!data.address.length) {","                    data.address = [address.trim()];","                    return ' ';","                } else {","                    return address;","                }","            };","","            // still no address","            if (!data.address.length) {","                for (i = data.text.length - 1; i >= 0; i--) {","                    // fixed the regex to parse email address correctly when email address has more than one @","                    data.text[i] = data.text[i].replace(/\\s*\\b[^@\\s]+@[^\\s]+\\b\\s*/, _regexHandler).trim();","                    if (data.address.length) {","                        break;","                    }","                }","            }","        }","","        // If there's still is no text but a comment exixts, replace the two","        if (!data.text.length && data.comment.length) {","            data.text = data.comment;","            data.comment = [];","        }","","        // Keep only the first address occurence, push others to regular text","        if (data.address.length > 1) {","            data.text = data.text.concat(data.address.splice(1));","        }","","        // Join values with spaces","        data.text = data.text.join(' ');","        data.address = data.address.join(' ');","","        if (!data.address && isGroup) {","            return [];","        } else {","            address = {","                address: data.address || data.text || '',","                name: data.text || data.address || ''","            };","","            if (address.address === address.name) {","                if ((address.address || '').match(/@/)) {","                    address.name = '';","                } else {","                    address.address = '';","                }","","            }","","            addresses.push(address);","        }","    }","","    return addresses;","}","","/**"," * Creates a Tokenizer object for tokenizing address field strings"," *"," * @constructor"," * @param {String} str Address field string"," */","class Tokenizer {","    constructor(str) {","        this.str = (str || '').toString();","        this.operatorCurrent = '';","        this.operatorExpecting = '';","        this.node = null;","        this.escaped = false;","","        this.list = [];","        /**","         * Operator tokens and which tokens are expected to end the sequence","         */","        this.operators = {","            '\"': '\"',","            '(': ')',","            '<': '>',","            ',': '',","            ':': ';',","            // Semicolons are not a legal delimiter per the RFC2822 grammar other","            // than for terminating a group, but they are also not valid for any","            // other use in this context.  Given that some mail clients have","            // historically allowed the semicolon as a delimiter equivalent to the","            // comma in their UI, it makes sense to treat them the same as a comma","            // when used outside of a group.","            ';': ''","        };","    }","","","","    /**","     * Tokenizes the original input string","     *","     * @return {Array} An array of operator|text tokens","     */","    tokenize() {","        let chr, list = [];","        for (let i = 0, len = this.str.length; i < len; i++) {","            chr = this.str.charAt(i);","            this.checkChar(chr);","        }","","        this.list.forEach(node => {","            node.value = (node.value || '').toString().trim();","            if (node.value) {","                list.push(node);","            }","        });","","        return list;","    }","","    /**","     * Checks if a character is an operator or text and acts accordingly","     *","     * @param {String} chr Character from the address field","     */","    checkChar(chr) {","        if ((chr in this.operators || chr === '\\\\') && this.escaped) {","            this.escaped = false;","        } else if (this.operatorExpecting && chr === this.operatorExpecting) {","            this.node = {","                type: 'operator',","                value: chr","            };","            this.list.push(this.node);","            this.node = null;","            this.operatorExpecting = '';","            this.escaped = false;","            return;","        } else if (!this.operatorExpecting && chr in this.operators) {","            this.node = {","                type: 'operator',","                value: chr","            };","            this.list.push(this.node);","            this.node = null;","            this.operatorExpecting = this.operators[chr];","            this.escaped = false;","            return;","        }","","        if (!this.escaped && chr === '\\\\') {","            this.escaped = true;","            return;","        }","","        if (!this.node) {","            this.node = {","                type: 'text',","                value: ''","            };","            this.list.push(this.node);","        }","","        if (this.escaped && chr !== '\\\\') {","            this.node.value += '\\\\';","        }","","        this.node.value += chr;","        this.escaped = false;","    }","}","","/**"," * Parses structured e-mail addresses from an address field"," *"," * Example:"," *"," *    'Name <address@domain>'"," *"," * will be converted to"," *"," *     [{name: 'Name', address: 'address@domain'}]"," *"," * @param {String} str Address field"," * @return {Array} An array of address objects"," */","function addressparser(str) {","    let tokenizer = new Tokenizer(str);","    let tokens = tokenizer.tokenize();","","    let addresses = [];","    let address = [];","    let parsedAddresses = [];","","    tokens.forEach(token => {","        if (token.type === 'operator' && (token.value === ',' || token.value === ';')) {","            if (address.length) {","                addresses.push(address);","            }","            address = [];","        } else {","            address.push(token);","        }","    });","","    if (address.length) {","        addresses.push(address);","    }","","    addresses.forEach(address => {","        address = _handleAddress(address);","        if (address.length) {","            parsedAddresses = parsedAddresses.concat(address);","        }","    });","","    return parsedAddresses;","}","","// expose to the world","module.exports = addressparser;",""],"l":{"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"21":0,"22":0,"25":0,"26":0,"27":0,"28":0,"30":0,"31":0,"33":0,"34":0,"36":0,"37":0,"38":0,"40":0,"42":0,"43":0,"47":0,"49":0,"54":0,"55":0,"56":0,"59":0,"61":0,"62":0,"68":0,"69":0,"70":0,"71":0,"72":0,"76":0,"77":0,"78":0,"79":0,"81":0,"86":0,"87":0,"89":0,"90":0,"91":0,"98":0,"99":0,"100":0,"104":0,"105":0,"109":0,"110":0,"112":0,"113":0,"115":0,"120":0,"121":0,"122":0,"124":0,"129":0,"133":0,"144":0,"145":0,"146":0,"147":0,"148":0,"150":0,"154":0,"178":0,"179":0,"180":0,"181":0,"184":0,"185":0,"186":0,"187":0,"191":0,"200":0,"201":0,"202":0,"203":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":0,"213":0,"217":0,"218":0,"219":0,"220":0,"221":0,"224":0,"225":0,"226":0,"229":0,"230":0,"234":0,"237":0,"238":0,"241":0,"242":0,"260":1,"261":0,"262":0,"264":0,"265":0,"266":0,"268":0,"269":0,"270":0,"271":0,"273":0,"275":0,"279":0,"280":0,"283":0,"284":0,"285":0,"286":0,"290":0,"294":1}},"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/mime-node/last-newline.js":{"path":"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/mime-node/last-newline.js","s":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"(anonymous_1)","line":6,"loc":{"start":{"line":6,"column":15},"end":{"line":6,"column":18}}},"2":{"name":"(anonymous_2)","line":11,"loc":{"start":{"line":11,"column":14},"end":{"line":11,"column":38}}},"3":{"name":"(anonymous_3)","line":20,"loc":{"start":{"line":20,"column":10},"end":{"line":20,"column":17}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":46}},"2":{"start":{"line":7,"column":8},"end":{"line":7,"column":16}},"3":{"start":{"line":8,"column":8},"end":{"line":8,"column":30}},"4":{"start":{"line":12,"column":8},"end":{"line":14,"column":9}},"5":{"start":{"line":13,"column":12},"end":{"line":13,"column":52}},"6":{"start":{"line":16,"column":8},"end":{"line":16,"column":25}},"7":{"start":{"line":17,"column":8},"end":{"line":17,"column":15}},"8":{"start":{"line":21,"column":8},"end":{"line":23,"column":9}},"9":{"start":{"line":22,"column":12},"end":{"line":22,"column":26}},"10":{"start":{"line":24,"column":8},"end":{"line":27,"column":9}},"11":{"start":{"line":25,"column":12},"end":{"line":25,"column":41}},"12":{"start":{"line":26,"column":12},"end":{"line":26,"column":26}},"13":{"start":{"line":28,"column":8},"end":{"line":28,"column":39}},"14":{"start":{"line":29,"column":8},"end":{"line":29,"column":22}},"15":{"start":{"line":33,"column":0},"end":{"line":33,"column":29}}},"branchMap":{"1":{"line":12,"type":"if","locations":[{"start":{"line":12,"column":8},"end":{"line":12,"column":8}},{"start":{"line":12,"column":8},"end":{"line":12,"column":8}}]},"2":{"line":21,"type":"if","locations":[{"start":{"line":21,"column":8},"end":{"line":21,"column":8}},{"start":{"line":21,"column":8},"end":{"line":21,"column":8}}]},"3":{"line":24,"type":"if","locations":[{"start":{"line":24,"column":8},"end":{"line":24,"column":8}},{"start":{"line":24,"column":8},"end":{"line":24,"column":8}}]}},"code":["'use strict';","","const Transform = require('stream').Transform;","","class LastNewline extends Transform {","    constructor() {","        super();","        this.lastByte = false;","    }","","    _transform(chunk, encoding, done) {","        if (chunk.length) {","            this.lastByte = chunk[chunk.length - 1];","        }","","        this.push(chunk);","        done();","    }","","    _flush(done) {","        if (this.lastByte === 0x0A) {","            return done();","        }","        if (this.lastByte === 0x0D) {","            this.push(Buffer.from('\\n'));","            return done();","        }","        this.push(Buffer.from('\\r\\n'));","        return done();","    }","}","","module.exports = LastNewline;",""],"l":{"3":1,"7":0,"8":0,"12":0,"13":0,"16":0,"17":0,"21":0,"22":0,"24":0,"25":0,"26":0,"28":0,"29":0,"33":1}},"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/dkim/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/dkim/index.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"fnMap":{"1":{"name":"(anonymous_1)","line":33,"loc":{"start":{"line":33,"column":15},"end":{"line":33,"column":46}}},"2":{"name":"(anonymous_2)","line":66,"loc":{"start":{"line":66,"column":11},"end":{"line":66,"column":14}}},"3":{"name":"(anonymous_3)","line":73,"loc":{"start":{"line":73,"column":19},"end":{"line":73,"column":22}}},"4":{"name":"(anonymous_4)","line":86,"loc":{"start":{"line":86,"column":17},"end":{"line":86,"column":20}}},"5":{"name":"(anonymous_5)","line":106,"loc":{"start":{"line":106,"column":20},"end":{"line":106,"column":23}}},"6":{"name":"(anonymous_6)","line":135,"loc":{"start":{"line":135,"column":20},"end":{"line":135,"column":23}}},"7":{"name":"(anonymous_7)","line":158,"loc":{"start":{"line":158,"column":14},"end":{"line":158,"column":17}}},"8":{"name":"(anonymous_8)","line":199,"loc":{"start":{"line":199,"column":15},"end":{"line":199,"column":25}}},"9":{"name":"(anonymous_9)","line":208,"loc":{"start":{"line":208,"column":8},"end":{"line":208,"column":30}}}},"statementMap":{"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":50}},"2":{"start":{"line":7,"column":0},"end":{"line":7,"column":46}},"3":{"start":{"line":8,"column":0},"end":{"line":8,"column":31}},"4":{"start":{"line":9,"column":0},"end":{"line":9,"column":50}},"5":{"start":{"line":10,"column":0},"end":{"line":10,"column":25}},"6":{"start":{"line":11,"column":0},"end":{"line":11,"column":29}},"7":{"start":{"line":12,"column":0},"end":{"line":12,"column":33}},"8":{"start":{"line":14,"column":0},"end":{"line":14,"column":27}},"9":{"start":{"line":15,"column":0},"end":{"line":15,"column":36}},"10":{"start":{"line":34,"column":8},"end":{"line":34,"column":37}},"11":{"start":{"line":35,"column":8},"end":{"line":35,"column":25}},"12":{"start":{"line":37,"column":8},"end":{"line":37,"column":84}},"13":{"start":{"line":38,"column":8},"end":{"line":38,"column":59}},"14":{"start":{"line":40,"column":8},"end":{"line":40,"column":55}},"15":{"start":{"line":42,"column":8},"end":{"line":42,"column":25}},"16":{"start":{"line":43,"column":8},"end":{"line":43,"column":26}},"17":{"start":{"line":44,"column":8},"end":{"line":44,"column":25}},"18":{"start":{"line":45,"column":8},"end":{"line":45,"column":146}},"19":{"start":{"line":46,"column":8},"end":{"line":46,"column":27}},"20":{"start":{"line":48,"column":8},"end":{"line":48,"column":29}},"21":{"start":{"line":49,"column":8},"end":{"line":49,"column":30}},"22":{"start":{"line":50,"column":8},"end":{"line":50,"column":28}},"23":{"start":{"line":51,"column":8},"end":{"line":51,"column":33}},"24":{"start":{"line":53,"column":8},"end":{"line":53,"column":27}},"25":{"start":{"line":54,"column":8},"end":{"line":54,"column":29}},"26":{"start":{"line":55,"column":8},"end":{"line":55,"column":39}},"27":{"start":{"line":57,"column":8},"end":{"line":57,"column":29}},"28":{"start":{"line":59,"column":8},"end":{"line":63,"column":11}},"29":{"start":{"line":60,"column":12},"end":{"line":60,"column":32}},"30":{"start":{"line":61,"column":12},"end":{"line":61,"column":27}},"31":{"start":{"line":62,"column":12},"end":{"line":62,"column":38}},"32":{"start":{"line":67,"column":8},"end":{"line":69,"column":9}},"33":{"start":{"line":68,"column":12},"end":{"line":68,"column":19}},"34":{"start":{"line":70,"column":8},"end":{"line":70,"column":47}},"35":{"start":{"line":70,"column":40},"end":{"line":70,"column":45}},"36":{"start":{"line":75,"column":8},"end":{"line":75,"column":57}},"37":{"start":{"line":76,"column":8},"end":{"line":79,"column":11}},"38":{"start":{"line":77,"column":12},"end":{"line":77,"column":27}},"39":{"start":{"line":78,"column":12},"end":{"line":78,"column":43}},"40":{"start":{"line":80,"column":8},"end":{"line":82,"column":11}},"41":{"start":{"line":81,"column":12},"end":{"line":81,"column":27}},"42":{"start":{"line":83,"column":8},"end":{"line":83,"column":37}},"43":{"start":{"line":87,"column":8},"end":{"line":89,"column":9}},"44":{"start":{"line":88,"column":12},"end":{"line":88,"column":19}},"45":{"start":{"line":91,"column":8},"end":{"line":96,"column":9}},"46":{"start":{"line":92,"column":12},"end":{"line":94,"column":13}},"47":{"start":{"line":93,"column":16},"end":{"line":93,"column":41}},"48":{"start":{"line":95,"column":12},"end":{"line":95,"column":42}},"49":{"start":{"line":97,"column":8},"end":{"line":97,"column":48}},"50":{"start":{"line":98,"column":8},"end":{"line":102,"column":9}},"51":{"start":{"line":99,"column":12},"end":{"line":101,"column":15}},"52":{"start":{"line":100,"column":16},"end":{"line":100,"column":37}},"53":{"start":{"line":103,"column":8},"end":{"line":103,"column":49}},"54":{"start":{"line":103,"column":27},"end":{"line":103,"column":47}},"55":{"start":{"line":107,"column":8},"end":{"line":107,"column":23}},"56":{"start":{"line":108,"column":8},"end":{"line":125,"column":10}},"57":{"start":{"line":109,"column":12},"end":{"line":112,"column":13}},"58":{"start":{"line":110,"column":16},"end":{"line":110,"column":58}},"59":{"start":{"line":111,"column":16},"end":{"line":111,"column":64}},"60":{"start":{"line":111,"column":42},"end":{"line":111,"column":62}},"61":{"start":{"line":113,"column":12},"end":{"line":113,"column":42}},"62":{"start":{"line":114,"column":12},"end":{"line":120,"column":15}},"63":{"start":{"line":121,"column":12},"end":{"line":123,"column":13}},"64":{"start":{"line":122,"column":16},"end":{"line":122,"column":67}},"65":{"start":{"line":124,"column":12},"end":{"line":124,"column":45}},"66":{"start":{"line":127,"column":8},"end":{"line":129,"column":9}},"67":{"start":{"line":128,"column":12},"end":{"line":128,"column":33}},"68":{"start":{"line":131,"column":8},"end":{"line":131,"column":50}},"69":{"start":{"line":132,"column":8},"end":{"line":132,"column":29}},"70":{"start":{"line":136,"column":8},"end":{"line":136,"column":38}},"71":{"start":{"line":138,"column":8},"end":{"line":138,"column":58}},"72":{"start":{"line":139,"column":8},"end":{"line":151,"column":11}},"73":{"start":{"line":140,"column":12},"end":{"line":140,"column":27}},"74":{"start":{"line":142,"column":12},"end":{"line":142,"column":48}},"75":{"start":{"line":143,"column":12},"end":{"line":147,"column":15}},"76":{"start":{"line":144,"column":16},"end":{"line":146,"column":17}},"77":{"start":{"line":148,"column":12},"end":{"line":148,"column":32}},"78":{"start":{"line":150,"column":12},"end":{"line":150,"column":43}},"79":{"start":{"line":152,"column":8},"end":{"line":154,"column":11}},"80":{"start":{"line":153,"column":12},"end":{"line":153,"column":36}},"81":{"start":{"line":155,"column":8},"end":{"line":155,"column":42}},"82":{"start":{"line":159,"column":8},"end":{"line":159,"column":42}},"83":{"start":{"line":160,"column":8},"end":{"line":162,"column":11}},"84":{"start":{"line":164,"column":8},"end":{"line":166,"column":11}},"85":{"start":{"line":165,"column":12},"end":{"line":165,"column":33}},"86":{"start":{"line":168,"column":8},"end":{"line":170,"column":11}},"87":{"start":{"line":169,"column":12},"end":{"line":169,"column":34}},"88":{"start":{"line":172,"column":8},"end":{"line":184,"column":11}},"89":{"start":{"line":173,"column":12},"end":{"line":173,"column":22}},"90":{"start":{"line":174,"column":12},"end":{"line":176,"column":13}},"91":{"start":{"line":175,"column":16},"end":{"line":175,"column":23}},"92":{"start":{"line":177,"column":12},"end":{"line":183,"column":13}},"93":{"start":{"line":178,"column":16},"end":{"line":178,"column":40}},"94":{"start":{"line":179,"column":16},"end":{"line":179,"column":46}},"95":{"start":{"line":180,"column":16},"end":{"line":182,"column":17}},"96":{"start":{"line":181,"column":20},"end":{"line":181,"column":51}},"97":{"start":{"line":186,"column":8},"end":{"line":191,"column":11}},"98":{"start":{"line":187,"column":12},"end":{"line":189,"column":13}},"99":{"start":{"line":188,"column":16},"end":{"line":188,"column":23}},"100":{"start":{"line":190,"column":12},"end":{"line":190,"column":36}},"101":{"start":{"line":193,"column":8},"end":{"line":193,"column":43}},"102":{"start":{"line":194,"column":8},"end":{"line":194,"column":57}},"103":{"start":{"line":194,"column":27},"end":{"line":194,"column":55}},"104":{"start":{"line":200,"column":8},"end":{"line":200,"column":37}},"105":{"start":{"line":201,"column":8},"end":{"line":205,"column":11}},"106":{"start":{"line":209,"column":8},"end":{"line":209,"column":39}},"107":{"start":{"line":210,"column":8},"end":{"line":210,"column":32}},"108":{"start":{"line":211,"column":8},"end":{"line":211,"column":31}},"109":{"start":{"line":213,"column":8},"end":{"line":219,"column":9}},"110":{"start":{"line":214,"column":12},"end":{"line":214,"column":31}},"111":{"start":{"line":215,"column":12},"end":{"line":215,"column":44}},"112":{"start":{"line":216,"column":15},"end":{"line":219,"column":9}},"113":{"start":{"line":217,"column":12},"end":{"line":217,"column":44}},"114":{"start":{"line":218,"column":12},"end":{"line":218,"column":44}},"115":{"start":{"line":221,"column":8},"end":{"line":221,"column":35}},"116":{"start":{"line":222,"column":8},"end":{"line":232,"column":9}},"117":{"start":{"line":223,"column":12},"end":{"line":223,"column":25}},"118":{"start":{"line":224,"column":12},"end":{"line":226,"column":15}},"119":{"start":{"line":225,"column":16},"end":{"line":225,"column":49}},"120":{"start":{"line":227,"column":12},"end":{"line":231,"column":15}},"121":{"start":{"line":228,"column":16},"end":{"line":230,"column":17}},"122":{"start":{"line":229,"column":20},"end":{"line":229,"column":53}},"123":{"start":{"line":234,"column":8},"end":{"line":234,"column":77}},"124":{"start":{"line":235,"column":8},"end":{"line":242,"column":11}},"125":{"start":{"line":236,"column":12},"end":{"line":236,"column":32}},"126":{"start":{"line":237,"column":12},"end":{"line":241,"column":13}},"127":{"start":{"line":238,"column":16},"end":{"line":240,"column":19}},"128":{"start":{"line":239,"column":20},"end":{"line":239,"column":48}},"129":{"start":{"line":244,"column":8},"end":{"line":244,"column":22}},"130":{"start":{"line":248,"column":0},"end":{"line":248,"column":22}}},"branchMap":{"1":{"line":34,"type":"binary-expr","locations":[{"start":{"line":34,"column":23},"end":{"line":34,"column":30}},{"start":{"line":34,"column":34},"end":{"line":34,"column":36}}]},"2":{"line":37,"type":"binary-expr","locations":[{"start":{"line":37,"column":29},"end":{"line":37,"column":63}},{"start":{"line":37,"column":67},"end":{"line":37,"column":83}}]},"3":{"line":38,"type":"binary-expr","locations":[{"start":{"line":38,"column":24},"end":{"line":38,"column":45}},{"start":{"line":38,"column":49},"end":{"line":38,"column":58}}]},"4":{"line":40,"type":"binary-expr","locations":[{"start":{"line":40,"column":24},"end":{"line":40,"column":45}},{"start":{"line":40,"column":49},"end":{"line":40,"column":54}}]},"5":{"line":45,"type":"cond-expr","locations":[{"start":{"line":45,"column":41},"end":{"line":45,"column":137}},{"start":{"line":45,"column":140},"end":{"line":45,"column":145}}]},"6":{"line":67,"type":"if","locations":[{"start":{"line":67,"column":8},"end":{"line":67,"column":8}},{"start":{"line":67,"column":8},"end":{"line":67,"column":8}}]},"7":{"line":67,"type":"binary-expr","locations":[{"start":{"line":67,"column":12},"end":{"line":67,"column":23}},{"start":{"line":67,"column":27},"end":{"line":67,"column":42}}]},"8":{"line":87,"type":"if","locations":[{"start":{"line":87,"column":8},"end":{"line":87,"column":8}},{"start":{"line":87,"column":8},"end":{"line":87,"column":8}}]},"9":{"line":91,"type":"if","locations":[{"start":{"line":91,"column":8},"end":{"line":91,"column":8}},{"start":{"line":91,"column":8},"end":{"line":91,"column":8}}]},"10":{"line":92,"type":"if","locations":[{"start":{"line":92,"column":12},"end":{"line":92,"column":12}},{"start":{"line":92,"column":12},"end":{"line":92,"column":12}}]},"11":{"line":98,"type":"if","locations":[{"start":{"line":98,"column":8},"end":{"line":98,"column":8}},{"start":{"line":98,"column":8},"end":{"line":98,"column":8}}]},"12":{"line":109,"type":"if","locations":[{"start":{"line":109,"column":12},"end":{"line":109,"column":12}},{"start":{"line":109,"column":12},"end":{"line":109,"column":12}}]},"13":{"line":121,"type":"if","locations":[{"start":{"line":121,"column":12},"end":{"line":121,"column":12}},{"start":{"line":121,"column":12},"end":{"line":121,"column":12}}]},"14":{"line":127,"type":"if","locations":[{"start":{"line":127,"column":8},"end":{"line":127,"column":8}},{"start":{"line":127,"column":8},"end":{"line":127,"column":8}}]},"15":{"line":127,"type":"binary-expr","locations":[{"start":{"line":127,"column":12},"end":{"line":127,"column":25}},{"start":{"line":127,"column":29},"end":{"line":127,"column":41}}]},"16":{"line":174,"type":"if","locations":[{"start":{"line":174,"column":12},"end":{"line":174,"column":12}},{"start":{"line":174,"column":12},"end":{"line":174,"column":12}}]},"17":{"line":180,"type":"if","locations":[{"start":{"line":180,"column":16},"end":{"line":180,"column":16}},{"start":{"line":180,"column":16},"end":{"line":180,"column":16}}]},"18":{"line":180,"type":"binary-expr","locations":[{"start":{"line":180,"column":20},"end":{"line":180,"column":55}},{"start":{"line":180,"column":59},"end":{"line":180,"column":73}}]},"19":{"line":187,"type":"if","locations":[{"start":{"line":187,"column":12},"end":{"line":187,"column":12}},{"start":{"line":187,"column":12},"end":{"line":187,"column":12}}]},"20":{"line":200,"type":"binary-expr","locations":[{"start":{"line":200,"column":23},"end":{"line":200,"column":30}},{"start":{"line":200,"column":34},"end":{"line":200,"column":36}}]},"21":{"line":201,"type":"binary-expr","locations":[{"start":{"line":201,"column":30},"end":{"line":201,"column":47}},{"start":{"line":201,"column":51},"end":{"line":205,"column":9}}]},"22":{"line":213,"type":"if","locations":[{"start":{"line":213,"column":8},"end":{"line":213,"column":8}},{"start":{"line":213,"column":8},"end":{"line":213,"column":8}}]},"23":{"line":216,"type":"if","locations":[{"start":{"line":216,"column":15},"end":{"line":216,"column":15}},{"start":{"line":216,"column":15},"end":{"line":216,"column":15}}]},"24":{"line":222,"type":"if","locations":[{"start":{"line":222,"column":8},"end":{"line":222,"column":8}},{"start":{"line":222,"column":8},"end":{"line":222,"column":8}}]},"25":{"line":222,"type":"binary-expr","locations":[{"start":{"line":222,"column":12},"end":{"line":222,"column":24}},{"start":{"line":222,"column":28},"end":{"line":222,"column":60}}]},"26":{"line":224,"type":"binary-expr","locations":[{"start":{"line":224,"column":24},"end":{"line":224,"column":36}},{"start":{"line":224,"column":40},"end":{"line":224,"column":42}}]},"27":{"line":227,"type":"binary-expr","locations":[{"start":{"line":227,"column":24},"end":{"line":227,"column":36}},{"start":{"line":227,"column":40},"end":{"line":227,"column":42}}]},"28":{"line":228,"type":"if","locations":[{"start":{"line":228,"column":16},"end":{"line":228,"column":16}},{"start":{"line":228,"column":16},"end":{"line":228,"column":16}}]},"29":{"line":237,"type":"if","locations":[{"start":{"line":237,"column":12},"end":{"line":237,"column":12}},{"start":{"line":237,"column":12},"end":{"line":237,"column":12}}]}},"code":["'use strict';","","// FIXME:","// replace this Transform mess with a method that pipes input argument to output argument","","const MessageParser = require('./message-parser');","const RelaxedBody = require('./relaxed-body');","const sign = require('./sign');","const PassThrough = require('stream').PassThrough;","const fs = require('fs');","const path = require('path');","const crypto = require('crypto');","","const DKIM_ALGO = 'sha256';","const MAX_MESSAGE_SIZE = 128 * 1024; // buffer messages larger than this to disk","","/*","// Usage:","","let dkim = new DKIM({","    domainName: 'example.com',","    keySelector: 'key-selector',","    privateKey,","    cacheDir: '/tmp'","});","dkim.sign(input).pipe(process.stdout);","","// Where inputStream is a rfc822 message (either a stream, string or Buffer)","// and outputStream is a DKIM signed rfc822 message","*/","","class DKIMSigner {","    constructor(options, keys, input, output) {","        this.options = options || {};","        this.keys = keys;","","        this.cacheTreshold = Number(this.options.cacheTreshold) || MAX_MESSAGE_SIZE;","        this.hashAlgo = this.options.hashAlgo || DKIM_ALGO;","","        this.cacheDir = this.options.cacheDir || false;","","        this.chunks = [];","        this.chunklen = 0;","        this.readPos = 0;","        this.cachePath = this.cacheDir ? path.join(this.cacheDir, 'message.' + Date.now() + '-' + crypto.randomBytes(14).toString('hex')) : false;","        this.cache = false;","","        this.headers = false;","        this.bodyHash = false;","        this.parser = false;","        this.relaxedBody = false;","","        this.input = input;","        this.output = output;","        this.output.usingCache = false;","","        this.errored = false;","","        this.input.on('error', err => {","            this.errored = true;","            this.cleanup();","            output.emit('error', err);","        });","    }","","    cleanup() {","        if (!this.cache || !this.cachePath) {","            return;","        }","        fs.unlink(this.cachePath, () => false);","    }","","    createReadCache() {","        // pipe remainings to cache file","        this.cache = fs.createReadStream(this.cachePath);","        this.cache.once('error', err => {","            this.cleanup();","            this.output.emit('error', err);","        });","        this.cache.once('close', () => {","            this.cleanup();","        });","        this.cache.pipe(this.output);","    }","","    sendNextChunk() {","        if (this.errored) {","            return;","        }","","        if (this.readPos >= this.chunks.length) {","            if (!this.cache) {","                return this.output.end();","            }","            return this.createReadCache();","        }","        let chunk = this.chunks[this.readPos++];","        if (this.output.write(chunk) === false) {","            return this.output.once('drain', () => {","                this.sendNextChunk();","            });","        }","        setImmediate(() => this.sendNextChunk());","    }","","    sendSignedOutput() {","        let keyPos = 0;","        let signNextKey = () => {","            if (keyPos >= this.keys.length) {","                this.output.write(this.parser.rawHeaders);","                return setImmediate(() => this.sendNextChunk());","            }","            let key = this.keys[keyPos++];","            let dkimField = sign(this.headers, this.hashAlgo, this.bodyHash, {","                domainName: key.domainName,","                keySelector: key.keySelector,","                privateKey: key.privateKey,","                headerFieldNames: this.options.headerFieldNames,","                skipFields: this.options.skipFields","            });","            if (dkimField) {","                this.output.write(Buffer.from(dkimField + '\\r\\n'));","            }","            return setImmediate(signNextKey);","        };","","        if (this.bodyHash && this.headers) {","            return signNextKey();","        }","","        this.output.write(this.parser.rawHeaders);","        this.sendNextChunk();","    }","","    createWriteCache() {","        this.output.usingCache = true;","        // pipe remainings to cache file","        this.cache = fs.createWriteStream(this.cachePath);","        this.cache.once('error', err => {","            this.cleanup();","            // drain input","            this.relaxedBody.unpipe(this.cache);","            this.relaxedBody.on('readable', () => {","                while (this.relaxedBody.read() !== null) {","                    // do nothing","                }","            });","            this.errored = true;","            // emit error","            this.output.emit('error', err);","        });","        this.cache.once('close', () => {","            this.sendSignedOutput();","        });","        this.relaxedBody.pipe(this.cache);","    }","","    signStream() {","        this.parser = new MessageParser();","        this.relaxedBody = new RelaxedBody({","            hashAlgo: this.hashAlgo","        });","","        this.parser.on('headers', value => {","            this.headers = value;","        });","","        this.relaxedBody.on('hash', value => {","            this.bodyHash = value;","        });","","        this.relaxedBody.on('readable', () => {","            let chunk;","            if (this.cache) {","                return;","            }","            while ((chunk = this.relaxedBody.read()) !== null) {","                this.chunks.push(chunk);","                this.chunklen += chunk.length;","                if (this.chunklen >= this.cacheTreshold && this.cachePath) {","                    return this.createWriteCache();","                }","            }","        });","","        this.relaxedBody.on('end', () => {","            if (this.cache) {","                return;","            }","            this.sendSignedOutput();","        });","","        this.parser.pipe(this.relaxedBody);","        setImmediate(() => this.input.pipe(this.parser));","    }","}","","class DKIM {","    constructor(options) {","        this.options = options || {};","        this.keys = [].concat(this.options.keys || {","            domainName: options.domainName,","            keySelector: options.keySelector,","            privateKey: options.privateKey","        });","    }","","    sign(input, extraOptions) {","        let output = new PassThrough();","        let inputStream = input;","        let writeValue = false;","","        if (Buffer.isBuffer(input)) {","            writeValue = input;","            inputStream = new PassThrough();","        } else if (typeof input === 'string') {","            writeValue = Buffer.from(input);","            inputStream = new PassThrough();","        }","","        let options = this.options;","        if (extraOptions && Object.keys(extraOptions).length) {","            options = {};","            Object.keys(this.options || {}).forEach(key => {","                options[key] = this.options[key];","            });","            Object.keys(extraOptions || {}).forEach(key => {","                if (!(key in options)) {","                    options[key] = extraOptions[key];","                }","            });","        }","","        let signer = new DKIMSigner(options, this.keys, inputStream, output);","        setImmediate(() => {","            signer.signStream();","            if (writeValue) {","                setImmediate(() => {","                    inputStream.end(writeValue);","                });","            }","        });","","        return output;","    }","}","","module.exports = DKIM;",""],"l":{"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"14":1,"15":1,"34":0,"35":0,"37":0,"38":0,"40":0,"42":0,"43":0,"44":0,"45":0,"46":0,"48":0,"49":0,"50":0,"51":0,"53":0,"54":0,"55":0,"57":0,"59":0,"60":0,"61":0,"62":0,"67":0,"68":0,"70":0,"75":0,"76":0,"77":0,"78":0,"80":0,"81":0,"83":0,"87":0,"88":0,"91":0,"92":0,"93":0,"95":0,"97":0,"98":0,"99":0,"100":0,"103":0,"107":0,"108":0,"109":0,"110":0,"111":0,"113":0,"114":0,"121":0,"122":0,"124":0,"127":0,"128":0,"131":0,"132":0,"136":0,"138":0,"139":0,"140":0,"142":0,"143":0,"144":0,"148":0,"150":0,"152":0,"153":0,"155":0,"159":0,"160":0,"164":0,"165":0,"168":0,"169":0,"172":0,"173":0,"174":0,"175":0,"177":0,"178":0,"179":0,"180":0,"181":0,"186":0,"187":0,"188":0,"190":0,"193":0,"194":0,"200":0,"201":0,"209":0,"210":0,"211":0,"213":0,"214":0,"215":0,"216":0,"217":0,"218":0,"221":0,"222":0,"223":0,"224":0,"225":0,"227":0,"228":0,"229":0,"234":0,"235":0,"236":0,"237":0,"238":0,"239":0,"244":0,"248":1}},"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/dkim/message-parser.js":{"path":"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/dkim/message-parser.js","s":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"fnMap":{"1":{"name":"(anonymous_1)","line":11,"loc":{"start":{"line":11,"column":15},"end":{"line":11,"column":25}}},"2":{"name":"(anonymous_2)","line":26,"loc":{"start":{"line":26,"column":19},"end":{"line":26,"column":26}}},"3":{"name":"(anonymous_3)","line":48,"loc":{"start":{"line":48,"column":16},"end":{"line":48,"column":23}}},"4":{"name":"(anonymous_4)","line":103,"loc":{"start":{"line":103,"column":14},"end":{"line":103,"column":42}}},"5":{"name":"(anonymous_5)","line":128,"loc":{"start":{"line":128,"column":10},"end":{"line":128,"column":21}}},"6":{"name":"(anonymous_6)","line":138,"loc":{"start":{"line":138,"column":16},"end":{"line":138,"column":19}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":46}},"2":{"start":{"line":12,"column":8},"end":{"line":12,"column":23}},"3":{"start":{"line":13,"column":8},"end":{"line":13,"column":41}},"4":{"start":{"line":14,"column":8},"end":{"line":14,"column":35}},"5":{"start":{"line":15,"column":8},"end":{"line":15,"column":29}},"6":{"start":{"line":16,"column":8},"end":{"line":16,"column":31}},"7":{"start":{"line":17,"column":8},"end":{"line":17,"column":32}},"8":{"start":{"line":18,"column":8},"end":{"line":18,"column":26}},"9":{"start":{"line":27,"column":8},"end":{"line":27,"column":42}},"10":{"start":{"line":28,"column":8},"end":{"line":28,"column":49}},"11":{"start":{"line":31,"column":8},"end":{"line":33,"column":9}},"12":{"start":{"line":32,"column":12},"end":{"line":32,"column":58}},"13":{"start":{"line":36,"column":8},"end":{"line":38,"column":9}},"14":{"start":{"line":37,"column":12},"end":{"line":37,"column":62}},"15":{"start":{"line":49,"column":8},"end":{"line":51,"column":9}},"16":{"start":{"line":50,"column":12},"end":{"line":50,"column":24}},"17":{"start":{"line":53,"column":8},"end":{"line":53,"column":42}},"18":{"start":{"line":54,"column":8},"end":{"line":54,"column":26}},"19":{"start":{"line":55,"column":8},"end":{"line":55,"column":28}},"20":{"start":{"line":56,"column":8},"end":{"line":78,"column":9}},"21":{"start":{"line":57,"column":12},"end":{"line":57,"column":20}},"22":{"start":{"line":58,"column":12},"end":{"line":62,"column":13}},"23":{"start":{"line":59,"column":16},"end":{"line":59,"column":40}},"24":{"start":{"line":61,"column":16},"end":{"line":61,"column":38}},"25":{"start":{"line":63,"column":12},"end":{"line":77,"column":13}},"26":{"start":{"line":64,"column":16},"end":{"line":64,"column":86}},"27":{"start":{"line":65,"column":16},"end":{"line":65,"column":104}},"28":{"start":{"line":66,"column":16},"end":{"line":76,"column":17}},"29":{"start":{"line":67,"column":20},"end":{"line":67,"column":46}},"30":{"start":{"line":68,"column":20},"end":{"line":68,"column":46}},"31":{"start":{"line":69,"column":20},"end":{"line":69,"column":50}},"32":{"start":{"line":70,"column":20},"end":{"line":70,"column":26}},"33":{"start":{"line":71,"column":23},"end":{"line":76,"column":17}},"34":{"start":{"line":72,"column":20},"end":{"line":72,"column":46}},"35":{"start":{"line":73,"column":20},"end":{"line":73,"column":46}},"36":{"start":{"line":74,"column":20},"end":{"line":74,"column":50}},"37":{"start":{"line":75,"column":20},"end":{"line":75,"column":26}},"38":{"start":{"line":80,"column":8},"end":{"line":95,"column":9}},"39":{"start":{"line":81,"column":12},"end":{"line":81,"column":61}},"40":{"start":{"line":82,"column":12},"end":{"line":82,"column":81}},"41":{"start":{"line":83,"column":12},"end":{"line":83,"column":37}},"42":{"start":{"line":84,"column":12},"end":{"line":84,"column":54}},"43":{"start":{"line":85,"column":12},"end":{"line":90,"column":13}},"44":{"start":{"line":86,"column":16},"end":{"line":86,"column":50}},"45":{"start":{"line":87,"column":16},"end":{"line":87,"column":46}},"46":{"start":{"line":89,"column":16},"end":{"line":89,"column":53}},"47":{"start":{"line":89,"column":35},"end":{"line":89,"column":51}},"48":{"start":{"line":91,"column":12},"end":{"line":91,"column":25}},"49":{"start":{"line":93,"column":12},"end":{"line":93,"column":44}},"50":{"start":{"line":94,"column":12},"end":{"line":94,"column":41}},"51":{"start":{"line":98,"column":8},"end":{"line":98,"column":35}},"52":{"start":{"line":100,"column":8},"end":{"line":100,"column":21}},"53":{"start":{"line":104,"column":8},"end":{"line":106,"column":9}},"54":{"start":{"line":105,"column":12},"end":{"line":105,"column":30}},"55":{"start":{"line":108,"column":8},"end":{"line":110,"column":9}},"56":{"start":{"line":109,"column":12},"end":{"line":109,"column":48}},"57":{"start":{"line":112,"column":8},"end":{"line":112,"column":25}},"58":{"start":{"line":114,"column":8},"end":{"line":118,"column":9}},"59":{"start":{"line":115,"column":12},"end":{"line":115,"column":52}},"60":{"start":{"line":117,"column":12},"end":{"line":117,"column":31}},"61":{"start":{"line":120,"column":8},"end":{"line":123,"column":9}},"62":{"start":{"line":121,"column":12},"end":{"line":121,"column":42}},"63":{"start":{"line":122,"column":12},"end":{"line":122,"column":29}},"64":{"start":{"line":125,"column":8},"end":{"line":125,"column":31}},"65":{"start":{"line":129,"column":8},"end":{"line":134,"column":9}},"66":{"start":{"line":130,"column":12},"end":{"line":130,"column":75}},"67":{"start":{"line":131,"column":12},"end":{"line":131,"column":42}},"68":{"start":{"line":132,"column":12},"end":{"line":132,"column":29}},"69":{"start":{"line":133,"column":12},"end":{"line":133,"column":37}},"70":{"start":{"line":135,"column":8},"end":{"line":135,"column":19}},"71":{"start":{"line":139,"column":8},"end":{"line":139,"column":70}},"72":{"start":{"line":140,"column":8},"end":{"line":145,"column":9}},"73":{"start":{"line":141,"column":12},"end":{"line":144,"column":13}},"74":{"start":{"line":142,"column":16},"end":{"line":142,"column":48}},"75":{"start":{"line":143,"column":16},"end":{"line":143,"column":35}},"76":{"start":{"line":146,"column":8},"end":{"line":149,"column":12}},"77":{"start":{"line":146,"column":36},"end":{"line":146,"column":47}},"78":{"start":{"line":146,"column":62},"end":{"line":149,"column":9}},"79":{"start":{"line":153,"column":0},"end":{"line":153,"column":31}}},"branchMap":{"1":{"line":49,"type":"if","locations":[{"start":{"line":49,"column":8},"end":{"line":49,"column":8}},{"start":{"line":49,"column":8},"end":{"line":49,"column":8}}]},"2":{"line":58,"type":"if","locations":[{"start":{"line":58,"column":12},"end":{"line":58,"column":12}},{"start":{"line":58,"column":12},"end":{"line":58,"column":12}}]},"3":{"line":63,"type":"if","locations":[{"start":{"line":63,"column":12},"end":{"line":63,"column":12}},{"start":{"line":63,"column":12},"end":{"line":63,"column":12}}]},"4":{"line":63,"type":"binary-expr","locations":[{"start":{"line":63,"column":16},"end":{"line":63,"column":28}},{"start":{"line":63,"column":32},"end":{"line":63,"column":33}}]},"5":{"line":64,"type":"cond-expr","locations":[{"start":{"line":64,"column":42},"end":{"line":64,"column":63}},{"start":{"line":64,"column":66},"end":{"line":64,"column":85}}]},"6":{"line":65,"type":"cond-expr","locations":[{"start":{"line":65,"column":35},"end":{"line":65,"column":94}},{"start":{"line":65,"column":98},"end":{"line":65,"column":103}}]},"7":{"line":65,"type":"cond-expr","locations":[{"start":{"line":65,"column":51},"end":{"line":65,"column":72}},{"start":{"line":65,"column":75},"end":{"line":65,"column":94}}]},"8":{"line":66,"type":"if","locations":[{"start":{"line":66,"column":16},"end":{"line":66,"column":16}},{"start":{"line":66,"column":16},"end":{"line":66,"column":16}}]},"9":{"line":71,"type":"if","locations":[{"start":{"line":71,"column":23},"end":{"line":71,"column":23}},{"start":{"line":71,"column":23},"end":{"line":71,"column":23}}]},"10":{"line":71,"type":"binary-expr","locations":[{"start":{"line":71,"column":27},"end":{"line":71,"column":39}},{"start":{"line":71,"column":43},"end":{"line":71,"column":55}}]},"11":{"line":80,"type":"if","locations":[{"start":{"line":80,"column":8},"end":{"line":80,"column":8}},{"start":{"line":80,"column":8},"end":{"line":80,"column":8}}]},"12":{"line":85,"type":"if","locations":[{"start":{"line":85,"column":12},"end":{"line":85,"column":12}},{"start":{"line":85,"column":12},"end":{"line":85,"column":12}}]},"13":{"line":104,"type":"if","locations":[{"start":{"line":104,"column":8},"end":{"line":104,"column":8}},{"start":{"line":104,"column":8},"end":{"line":104,"column":8}}]},"14":{"line":104,"type":"binary-expr","locations":[{"start":{"line":104,"column":12},"end":{"line":104,"column":18}},{"start":{"line":104,"column":22},"end":{"line":104,"column":35}}]},"15":{"line":108,"type":"if","locations":[{"start":{"line":108,"column":8},"end":{"line":108,"column":8}},{"start":{"line":108,"column":8},"end":{"line":108,"column":8}}]},"16":{"line":120,"type":"if","locations":[{"start":{"line":120,"column":8},"end":{"line":120,"column":8}},{"start":{"line":120,"column":8},"end":{"line":120,"column":8}}]},"17":{"line":129,"type":"if","locations":[{"start":{"line":129,"column":8},"end":{"line":129,"column":8}},{"start":{"line":129,"column":8},"end":{"line":129,"column":8}}]},"18":{"line":139,"type":"binary-expr","locations":[{"start":{"line":139,"column":21},"end":{"line":139,"column":36}},{"start":{"line":139,"column":40},"end":{"line":139,"column":42}}]},"19":{"line":141,"type":"if","locations":[{"start":{"line":141,"column":12},"end":{"line":141,"column":12}},{"start":{"line":141,"column":12},"end":{"line":141,"column":12}}]}},"code":["'use strict';","","const Transform = require('stream').Transform;","","/**"," * MessageParser instance is a transform stream that separates message headers"," * from the rest of the body. Headers are emitted with the 'headers' event. Message"," * body is passed on as the resulting stream."," */","class MessageParser extends Transform {","    constructor(options) {","        super(options);","        this.lastBytes = Buffer.alloc(4);","        this.headersParsed = false;","        this.headerBytes = 0;","        this.headerChunks = [];","        this.rawHeaders = false;","        this.bodySize = 0;","    }","","    /**","     * Keeps count of the last 4 bytes in order to detect line breaks on chunk boundaries","     *","     * @param {Buffer} data Next data chunk from the stream","     */","    updateLastBytes(data) {","        let lblen = this.lastBytes.length;","        let nblen = Math.min(data.length, lblen);","","        // shift existing bytes","        for (let i = 0, len = lblen - nblen; i < len; i++) {","            this.lastBytes[i] = this.lastBytes[i + nblen];","        }","","        // add new bytes","        for (let i = 1; i <= nblen; i++) {","            this.lastBytes[lblen - i] = data[data.length - i];","        }","    }","","    /**","     * Finds and removes message headers from the remaining body. We want to keep","     * headers separated until final delivery to be able to modify these","     *","     * @param {Buffer} data Next chunk of data","     * @return {Boolean} Returns true if headers are already found or false otherwise","     */","    checkHeaders(data) {","        if (this.headersParsed) {","            return true;","        }","","        let lblen = this.lastBytes.length;","        let headerPos = 0;","        this.curLinePos = 0;","        for (let i = 0, len = this.lastBytes.length + data.length; i < len; i++) {","            let chr;","            if (i < lblen) {","                chr = this.lastBytes[i];","            } else {","                chr = data[i - lblen];","            }","            if (chr === 0x0A && i) {","                let pr1 = i - 1 < lblen ? this.lastBytes[i - 1] : data[i - 1 - lblen];","                let pr2 = i > 1 ? (i - 2 < lblen ? this.lastBytes[i - 2] : data[i - 2 - lblen]) : false;","                if (pr1 === 0x0A) {","                    this.headersParsed = true;","                    headerPos = i - lblen + 1;","                    this.headerBytes += headerPos;","                    break;","                } else if (pr1 === 0x0D && pr2 === 0x0A) {","                    this.headersParsed = true;","                    headerPos = i - lblen + 1;","                    this.headerBytes += headerPos;","                    break;","                }","            }","        }","","        if (this.headersParsed) {","            this.headerChunks.push(data.slice(0, headerPos));","            this.rawHeaders = Buffer.concat(this.headerChunks, this.headerBytes);","            this.headerChunks = null;","            this.emit('headers', this.parseHeaders());","            if (data.length - 1 > headerPos) {","                let chunk = data.slice(headerPos);","                this.bodySize += chunk.length;","                // this would be the first chunk of data sent downstream","                setImmediate(() => this.push(chunk));","            }","            return false;","        } else {","            this.headerBytes += data.length;","            this.headerChunks.push(data);","        }","","        // store last 4 bytes to catch header break","        this.updateLastBytes(data);","","        return false;","    }","","    _transform(chunk, encoding, callback) {","        if (!chunk || !chunk.length) {","            return callback();","        }","","        if (typeof chunk === 'string') {","            chunk = new Buffer(chunk, encoding);","        }","","        let headersFound;","","        try {","            headersFound = this.checkHeaders(chunk);","        } catch (E) {","            return callback(E);","        }","","        if (headersFound) {","            this.bodySize += chunk.length;","            this.push(chunk);","        }","","        setImmediate(callback);","    }","","    _flush(callback) {","        if (this.headerChunks) {","            let chunk = Buffer.concat(this.headerChunks, this.headerBytes);","            this.bodySize += chunk.length;","            this.push(chunk);","            this.headerChunks = null;","        }","        callback();","    }","","    parseHeaders() {","        let lines = (this.rawHeaders || '').toString().split(/\\r?\\n/);","        for (let i = lines.length - 1; i > 0; i--) {","            if (/^\\s/.test(lines[i])) {","                lines[i - 1] += '\\n' + lines[i];","                lines.splice(i, 1);","            }","        }","        return lines.filter(line => line.trim()).map(line => ({","            key: line.substr(0, line.indexOf(':')).trim().toLowerCase(),","            line","        }));","    }","}","","module.exports = MessageParser;",""],"l":{"3":1,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"27":0,"28":0,"31":0,"32":0,"36":0,"37":0,"49":0,"50":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"61":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"89":0,"91":0,"93":0,"94":0,"98":0,"100":0,"104":0,"105":0,"108":0,"109":0,"112":0,"114":0,"115":0,"117":0,"120":0,"121":0,"122":0,"125":0,"129":0,"130":0,"131":0,"132":0,"133":0,"135":0,"139":0,"140":0,"141":0,"142":0,"143":0,"146":0,"153":1}},"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/dkim/relaxed-body.js":{"path":"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/dkim/relaxed-body.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0,0],"6":[0,0],"7":[0,0,0],"8":[0,0],"9":[0,0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0,0,0,0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0,0],"23":[0,0],"24":[0,0,0],"25":[0,0],"26":[0,0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"(anonymous_1)","line":9,"loc":{"start":{"line":9,"column":15},"end":{"line":9,"column":25}}},"2":{"name":"(anonymous_2)","line":22,"loc":{"start":{"line":22,"column":14},"end":{"line":22,"column":22}}},"3":{"name":"(anonymous_3)","line":119,"loc":{"start":{"line":119,"column":14},"end":{"line":119,"column":42}}},"4":{"name":"(anonymous_4)","line":136,"loc":{"start":{"line":136,"column":10},"end":{"line":136,"column":21}}}},"statementMap":{"1":{"start":{"line":5,"column":0},"end":{"line":5,"column":46}},"2":{"start":{"line":6,"column":0},"end":{"line":6,"column":33}},"3":{"start":{"line":10,"column":8},"end":{"line":10,"column":16}},"4":{"start":{"line":11,"column":8},"end":{"line":11,"column":32}},"5":{"start":{"line":12,"column":8},"end":{"line":12,"column":30}},"6":{"start":{"line":13,"column":8},"end":{"line":13,"column":32}},"7":{"start":{"line":14,"column":8},"end":{"line":14,"column":70}},"8":{"start":{"line":15,"column":8},"end":{"line":15,"column":28}},"9":{"start":{"line":16,"column":8},"end":{"line":16,"column":28}},"10":{"start":{"line":18,"column":8},"end":{"line":18,"column":35}},"11":{"start":{"line":19,"column":8},"end":{"line":19,"column":53}},"12":{"start":{"line":23,"column":8},"end":{"line":23,"column":20}},"13":{"start":{"line":26,"column":8},"end":{"line":26,"column":31}},"14":{"start":{"line":31,"column":8},"end":{"line":31,"column":27}},"15":{"start":{"line":32,"column":8},"end":{"line":75,"column":9}},"16":{"start":{"line":33,"column":12},"end":{"line":33,"column":29}},"17":{"start":{"line":35,"column":12},"end":{"line":49,"column":13}},"18":{"start":{"line":37,"column":19},"end":{"line":49,"column":13}},"19":{"start":{"line":39,"column":16},"end":{"line":39,"column":31}},"20":{"start":{"line":40,"column":19},"end":{"line":49,"column":13}},"21":{"start":{"line":42,"column":19},"end":{"line":49,"column":13}},"22":{"start":{"line":44,"column":16},"end":{"line":44,"column":31}},"23":{"start":{"line":45,"column":16},"end":{"line":48,"column":17}},"24":{"start":{"line":47,"column":20},"end":{"line":47,"column":26}},"25":{"start":{"line":51,"column":12},"end":{"line":65,"column":13}},"26":{"start":{"line":54,"column":16},"end":{"line":64,"column":17}},"27":{"start":{"line":57,"column":20},"end":{"line":57,"column":63}},"28":{"start":{"line":58,"column":20},"end":{"line":58,"column":27}},"29":{"start":{"line":59,"column":23},"end":{"line":64,"column":17}},"30":{"start":{"line":61,"column":20},"end":{"line":61,"column":61}},"31":{"start":{"line":62,"column":20},"end":{"line":62,"column":34}},"32":{"start":{"line":63,"column":20},"end":{"line":63,"column":26}},"33":{"start":{"line":67,"column":12},"end":{"line":69,"column":13}},"34":{"start":{"line":68,"column":16},"end":{"line":68,"column":25}},"35":{"start":{"line":72,"column":12},"end":{"line":72,"column":66}},"36":{"start":{"line":73,"column":12},"end":{"line":73,"column":42}},"37":{"start":{"line":74,"column":12},"end":{"line":74,"column":18}},"38":{"start":{"line":77,"column":8},"end":{"line":77,"column":43}},"39":{"start":{"line":78,"column":8},"end":{"line":99,"column":9}},"40":{"start":{"line":80,"column":12},"end":{"line":98,"column":13}},"41":{"start":{"line":81,"column":16},"end":{"line":97,"column":17}},"42":{"start":{"line":83,"column":20},"end":{"line":83,"column":39}},"43":{"start":{"line":84,"column":20},"end":{"line":84,"column":26}},"44":{"start":{"line":85,"column":23},"end":{"line":97,"column":17}},"45":{"start":{"line":87,"column":20},"end":{"line":87,"column":39}},"46":{"start":{"line":88,"column":20},"end":{"line":88,"column":26}},"47":{"start":{"line":89,"column":23},"end":{"line":97,"column":17}},"48":{"start":{"line":91,"column":20},"end":{"line":91,"column":39}},"49":{"start":{"line":92,"column":20},"end":{"line":92,"column":26}},"50":{"start":{"line":93,"column":23},"end":{"line":97,"column":17}},"51":{"start":{"line":95,"column":20},"end":{"line":95,"column":39}},"52":{"start":{"line":96,"column":20},"end":{"line":96,"column":26}},"53":{"start":{"line":101,"column":8},"end":{"line":111,"column":9}},"54":{"start":{"line":102,"column":12},"end":{"line":102,"column":79}},"55":{"start":{"line":103,"column":12},"end":{"line":103,"column":43}},"56":{"start":{"line":104,"column":12},"end":{"line":107,"column":40}},"57":{"start":{"line":108,"column":12},"end":{"line":108,"column":51}},"58":{"start":{"line":109,"column":15},"end":{"line":111,"column":9}},"59":{"start":{"line":110,"column":12},"end":{"line":110,"column":43}},"60":{"start":{"line":113,"column":8},"end":{"line":115,"column":9}},"61":{"start":{"line":114,"column":12},"end":{"line":114,"column":40}},"62":{"start":{"line":116,"column":8},"end":{"line":116,"column":36}},"63":{"start":{"line":120,"column":8},"end":{"line":122,"column":9}},"64":{"start":{"line":121,"column":12},"end":{"line":121,"column":30}},"65":{"start":{"line":124,"column":8},"end":{"line":126,"column":9}},"66":{"start":{"line":125,"column":12},"end":{"line":125,"column":48}},"67":{"start":{"line":128,"column":8},"end":{"line":128,"column":31}},"68":{"start":{"line":130,"column":8},"end":{"line":130,"column":40}},"69":{"start":{"line":131,"column":8},"end":{"line":131,"column":25}},"70":{"start":{"line":133,"column":8},"end":{"line":133,"column":19}},"71":{"start":{"line":138,"column":8},"end":{"line":141,"column":9}},"72":{"start":{"line":140,"column":12},"end":{"line":140,"column":54}},"73":{"start":{"line":142,"column":8},"end":{"line":146,"column":9}},"74":{"start":{"line":144,"column":12},"end":{"line":144,"column":43}},"75":{"start":{"line":147,"column":8},"end":{"line":147,"column":111}},"76":{"start":{"line":148,"column":8},"end":{"line":148,"column":19}},"77":{"start":{"line":152,"column":0},"end":{"line":152,"column":29}}},"branchMap":{"1":{"line":11,"type":"binary-expr","locations":[{"start":{"line":11,"column":18},"end":{"line":11,"column":25}},{"start":{"line":11,"column":29},"end":{"line":11,"column":31}}]},"2":{"line":14,"type":"binary-expr","locations":[{"start":{"line":14,"column":42},"end":{"line":14,"column":58}},{"start":{"line":14,"column":62},"end":{"line":14,"column":68}}]},"3":{"line":19,"type":"cond-expr","locations":[{"start":{"line":19,"column":42},"end":{"line":19,"column":44}},{"start":{"line":19,"column":47},"end":{"line":19,"column":52}}]},"4":{"line":35,"type":"if","locations":[{"start":{"line":35,"column":12},"end":{"line":35,"column":12}},{"start":{"line":35,"column":12},"end":{"line":35,"column":12}}]},"5":{"line":35,"type":"binary-expr","locations":[{"start":{"line":35,"column":16},"end":{"line":35,"column":32}},{"start":{"line":35,"column":37},"end":{"line":35,"column":47}},{"start":{"line":35,"column":51},"end":{"line":35,"column":61}}]},"6":{"line":37,"type":"if","locations":[{"start":{"line":37,"column":19},"end":{"line":37,"column":19}},{"start":{"line":37,"column":19},"end":{"line":37,"column":19}}]},"7":{"line":37,"type":"binary-expr","locations":[{"start":{"line":37,"column":23},"end":{"line":37,"column":39}},{"start":{"line":37,"column":44},"end":{"line":37,"column":54}},{"start":{"line":37,"column":58},"end":{"line":37,"column":68}}]},"8":{"line":40,"type":"if","locations":[{"start":{"line":40,"column":19},"end":{"line":40,"column":19}},{"start":{"line":40,"column":19},"end":{"line":40,"column":19}}]},"9":{"line":40,"type":"binary-expr","locations":[{"start":{"line":40,"column":23},"end":{"line":40,"column":39}},{"start":{"line":40,"column":44},"end":{"line":40,"column":54}},{"start":{"line":40,"column":58},"end":{"line":40,"column":68}}]},"10":{"line":42,"type":"if","locations":[{"start":{"line":42,"column":19},"end":{"line":42,"column":19}},{"start":{"line":42,"column":19},"end":{"line":42,"column":19}}]},"11":{"line":42,"type":"binary-expr","locations":[{"start":{"line":42,"column":23},"end":{"line":42,"column":39}},{"start":{"line":42,"column":43},"end":{"line":42,"column":59}}]},"12":{"line":45,"type":"if","locations":[{"start":{"line":45,"column":16},"end":{"line":45,"column":16}},{"start":{"line":45,"column":16},"end":{"line":45,"column":16}}]},"13":{"line":51,"type":"if","locations":[{"start":{"line":51,"column":12},"end":{"line":51,"column":12}},{"start":{"line":51,"column":12},"end":{"line":51,"column":12}}]},"14":{"line":54,"type":"if","locations":[{"start":{"line":54,"column":16},"end":{"line":54,"column":16}},{"start":{"line":54,"column":16},"end":{"line":54,"column":16}}]},"15":{"line":54,"type":"binary-expr","locations":[{"start":{"line":54,"column":21},"end":{"line":54,"column":37}},{"start":{"line":54,"column":42},"end":{"line":54,"column":57}},{"start":{"line":54,"column":61},"end":{"line":54,"column":91}},{"start":{"line":55,"column":21},"end":{"line":55,"column":37}},{"start":{"line":55,"column":42},"end":{"line":55,"column":57}},{"start":{"line":55,"column":61},"end":{"line":55,"column":90}}]},"16":{"line":59,"type":"if","locations":[{"start":{"line":59,"column":23},"end":{"line":59,"column":23}},{"start":{"line":59,"column":23},"end":{"line":59,"column":23}}]},"17":{"line":59,"type":"binary-expr","locations":[{"start":{"line":59,"column":27},"end":{"line":59,"column":43}},{"start":{"line":59,"column":47},"end":{"line":59,"column":63}}]},"18":{"line":67,"type":"if","locations":[{"start":{"line":67,"column":12},"end":{"line":67,"column":12}},{"start":{"line":67,"column":12},"end":{"line":67,"column":12}}]},"19":{"line":78,"type":"if","locations":[{"start":{"line":78,"column":8},"end":{"line":78,"column":8}},{"start":{"line":78,"column":8},"end":{"line":78,"column":8}}]},"20":{"line":78,"type":"binary-expr","locations":[{"start":{"line":78,"column":12},"end":{"line":78,"column":17}},{"start":{"line":78,"column":21},"end":{"line":78,"column":33}}]},"21":{"line":81,"type":"if","locations":[{"start":{"line":81,"column":16},"end":{"line":81,"column":16}},{"start":{"line":81,"column":16},"end":{"line":81,"column":16}}]},"22":{"line":81,"type":"binary-expr","locations":[{"start":{"line":81,"column":20},"end":{"line":81,"column":21}},{"start":{"line":81,"column":25},"end":{"line":81,"column":42}},{"start":{"line":81,"column":46},"end":{"line":81,"column":67}}]},"23":{"line":85,"type":"if","locations":[{"start":{"line":85,"column":23},"end":{"line":85,"column":23}},{"start":{"line":85,"column":23},"end":{"line":85,"column":23}}]},"24":{"line":85,"type":"binary-expr","locations":[{"start":{"line":85,"column":27},"end":{"line":85,"column":28}},{"start":{"line":85,"column":32},"end":{"line":85,"column":49}},{"start":{"line":85,"column":53},"end":{"line":85,"column":74}}]},"25":{"line":89,"type":"if","locations":[{"start":{"line":89,"column":23},"end":{"line":89,"column":23}},{"start":{"line":89,"column":23},"end":{"line":89,"column":23}}]},"26":{"line":89,"type":"binary-expr","locations":[{"start":{"line":89,"column":27},"end":{"line":89,"column":28}},{"start":{"line":89,"column":32},"end":{"line":89,"column":49}},{"start":{"line":89,"column":53},"end":{"line":89,"column":74}}]},"27":{"line":93,"type":"if","locations":[{"start":{"line":93,"column":23},"end":{"line":93,"column":23}},{"start":{"line":93,"column":23},"end":{"line":93,"column":23}}]},"28":{"line":101,"type":"if","locations":[{"start":{"line":101,"column":8},"end":{"line":101,"column":8}},{"start":{"line":101,"column":8},"end":{"line":101,"column":8}}]},"29":{"line":102,"type":"cond-expr","locations":[{"start":{"line":102,"column":48},"end":{"line":102,"column":72}},{"start":{"line":102,"column":75},"end":{"line":102,"column":77}}]},"30":{"line":109,"type":"if","locations":[{"start":{"line":109,"column":15},"end":{"line":109,"column":15}},{"start":{"line":109,"column":15},"end":{"line":109,"column":15}}]},"31":{"line":113,"type":"if","locations":[{"start":{"line":113,"column":8},"end":{"line":113,"column":8}},{"start":{"line":113,"column":8},"end":{"line":113,"column":8}}]},"32":{"line":120,"type":"if","locations":[{"start":{"line":120,"column":8},"end":{"line":120,"column":8}},{"start":{"line":120,"column":8},"end":{"line":120,"column":8}}]},"33":{"line":120,"type":"binary-expr","locations":[{"start":{"line":120,"column":12},"end":{"line":120,"column":18}},{"start":{"line":120,"column":22},"end":{"line":120,"column":35}}]},"34":{"line":124,"type":"if","locations":[{"start":{"line":124,"column":8},"end":{"line":124,"column":8}},{"start":{"line":124,"column":8},"end":{"line":124,"column":8}}]},"35":{"line":138,"type":"if","locations":[{"start":{"line":138,"column":8},"end":{"line":138,"column":8}},{"start":{"line":138,"column":8},"end":{"line":138,"column":8}}]},"36":{"line":138,"type":"binary-expr","locations":[{"start":{"line":138,"column":12},"end":{"line":138,"column":42}},{"start":{"line":138,"column":46},"end":{"line":138,"column":65}}]},"37":{"line":142,"type":"if","locations":[{"start":{"line":142,"column":8},"end":{"line":142,"column":8}},{"start":{"line":142,"column":8},"end":{"line":142,"column":8}}]},"38":{"line":147,"type":"cond-expr","locations":[{"start":{"line":147,"column":71},"end":{"line":147,"column":101}},{"start":{"line":147,"column":104},"end":{"line":147,"column":109}}]}},"code":["'use strict';","","// streams through a message body and calculates relaxed body hash","","const Transform = require('stream').Transform;","const crypto = require('crypto');","","class RelaxedBody extends Transform {","    constructor(options) {","        super();","        options = options || {};","        this.chunkBuffer = [];","        this.chunkBufferLen = 0;","        this.bodyHash = crypto.createHash(options.hashAlgo || 'sha1');","        this.remainder = '';","        this.byteLength = 0;","","        this.debug = options.debug;","        this._debugBody = options.debug ? [] : false;","    }","","    updateHash(chunk) {","        let bodyStr;","","        // find next remainder","        let nextRemainder = '';","","","        // This crux finds and removes the spaces from the last line and the newline characters after the last non-empty line","        // If we get another chunk that does not match this description then we can restore the previously processed data","        let state = 'file';","        for (let i = chunk.length - 1; i >= 0; i--) {","            let c = chunk[i];","","            if (state === 'file' && (c === 0x0A || c === 0x0D)) {","                // do nothing, found \\n or \\r at the end of chunk, stil end of file","            } else if (state === 'file' && (c === 0x09 || c === 0x20)) {","                // switch to line ending mode, this is the last non-empty line","                state = 'line';","            } else if (state === 'line' && (c === 0x09 || c === 0x20)) {","                // do nothing, found ' ' or \\t at the end of line, keep processing the last non-empty line","            } else if (state === 'file' || state === 'line') {","                // non line/file ending character found, switch to body mode","                state = 'body';","                if (i === chunk.length - 1) {","                    // final char is not part of line end or file end, so do nothing","                    break;","                }","            }","","            if (i === 0) {","                // reached to the beginning of the chunk, check if it is still about the ending","                // and if the remainder also matches","                if ((state === 'file' && (!this.remainder || /[\\r\\n]$/.test(this.remainder))) ||","                    (state === 'line' && (!this.remainder || /[ \\t]$/.test(this.remainder)))) {","                    // keep everything","                    this.remainder += chunk.toString('binary');","                    return;","                } else if (state === 'line' || state === 'file') {","                    // process existing remainder as normal line but store the current chunk","                    nextRemainder = chunk.toString('binary');","                    chunk = false;","                    break;","                }","            }","","            if (state !== 'body') {","                continue;","            }","","            // reached first non ending byte","            nextRemainder = chunk.slice(i + 1).toString('binary');","            chunk = chunk.slice(0, i + 1);","            break;","        }","","        let needsFixing = !!this.remainder;","        if (chunk && !needsFixing) {","            // check if we even need to change anything","            for (let i = 0, len = chunk.length; i < len; i++) {","                if (i && chunk[i] === 0x0A && chunk[i - 1] !== 0x0D) {","                    // missing \\r before \\n","                    needsFixing = true;","                    break;","                } else if (i && chunk[i] === 0x0D && chunk[i - 1] === 0x20) {","                    // trailing WSP found","                    needsFixing = true;","                    break;","                } else if (i && chunk[i] === 0x20 && chunk[i - 1] === 0x20) {","                    // multiple spaces found, needs to be replaced with just one","                    needsFixing = true;","                    break;","                } else if (chunk[i] === 0x09) {","                    // TAB found, needs to be replaced with a space","                    needsFixing = true;","                    break;","                }","            }","        }","","        if (needsFixing) {","            bodyStr = this.remainder + (chunk ? chunk.toString('binary') : '');","            this.remainder = nextRemainder;","            bodyStr = bodyStr.replace(/\\r?\\n/g, '\\n') // use js line endings","                .replace(/[ \\t]*$/mg, '') // remove line endings, rtrim","                .replace(/[ \\t]+/mg, ' ') // single spaces","                .replace(/\\n/g, '\\r\\n'); // restore rfc822 line endings","            chunk = Buffer.from(bodyStr, 'binary');","        } else if (nextRemainder) {","            this.remainder = nextRemainder;","        }","","        if (this.debug) {","            this._debugBody.push(chunk);","        }","        this.bodyHash.update(chunk);","    }","","    _transform(chunk, encoding, callback) {","        if (!chunk || !chunk.length) {","            return callback();","        }","","        if (typeof chunk === 'string') {","            chunk = new Buffer(chunk, encoding);","        }","","        this.updateHash(chunk);","","        this.byteLength += chunk.length;","        this.push(chunk);","","        callback();","    }","","    _flush(callback) {","        // generate final hash and emit it","        if (/[\\r\\n]$/.test(this.remainder) && this.byteLength > 2) {","            // add terminating line end","            this.bodyHash.update(Buffer.from('\\r\\n'));","        }","        if (!this.byteLength) {","            // emit empty line buffer to keep the stream flowing","            this.push(Buffer.from('\\r\\n'));","            // this.bodyHash.update(Buffer.from('\\r\\n'));","        }","        this.emit('hash', this.bodyHash.digest('base64'), this.debug ? Buffer.concat(this._debugBody) : false);","        callback();","    }","}","","module.exports = RelaxedBody;",""],"l":{"5":1,"6":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"18":0,"19":0,"23":0,"26":0,"31":0,"32":0,"33":0,"35":0,"37":0,"39":0,"40":0,"42":0,"44":0,"45":0,"47":0,"51":0,"54":0,"57":0,"58":0,"59":0,"61":0,"62":0,"63":0,"67":0,"68":0,"72":0,"73":0,"74":0,"77":0,"78":0,"80":0,"81":0,"83":0,"84":0,"85":0,"87":0,"88":0,"89":0,"91":0,"92":0,"93":0,"95":0,"96":0,"101":0,"102":0,"103":0,"104":0,"108":0,"109":0,"110":0,"113":0,"114":0,"116":0,"120":0,"121":0,"124":0,"125":0,"128":0,"130":0,"131":0,"133":0,"138":0,"140":0,"142":0,"144":0,"147":0,"148":0,"152":1}},"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/dkim/sign.js":{"path":"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/dkim/sign.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":1,"19":1,"20":0,"21":0,"22":1,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":1,"43":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"generateDKIMHeader","line":52,"loc":{"start":{"line":52,"column":0},"end":{"line":52,"column":85}}},"2":{"name":"relaxedHeaders","line":67,"loc":{"start":{"line":67,"column":0},"end":{"line":67,"column":57}}},"3":{"name":"relaxedHeaderLine","line":103,"loc":{"start":{"line":103,"column":0},"end":{"line":103,"column":33}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":43}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":33}},"4":{"start":{"line":19,"column":0},"end":{"line":48,"column":2}},"5":{"start":{"line":20,"column":4},"end":{"line":20,"column":28}},"6":{"start":{"line":23,"column":4},"end":{"line":28,"column":34}},"7":{"start":{"line":30,"column":4},"end":{"line":30,"column":67}},"8":{"start":{"line":32,"column":4},"end":{"line":32,"column":90}},"9":{"start":{"line":33,"column":4},"end":{"line":33,"column":137}},"10":{"start":{"line":35,"column":4},"end":{"line":35,"column":26}},"11":{"start":{"line":37,"column":4},"end":{"line":37,"column":89}},"12":{"start":{"line":39,"column":4},"end":{"line":39,"column":66}},"13":{"start":{"line":40,"column":4},"end":{"line":40,"column":51}},"14":{"start":{"line":41,"column":4},"end":{"line":45,"column":5}},"15":{"start":{"line":42,"column":8},"end":{"line":42,"column":62}},"16":{"start":{"line":44,"column":8},"end":{"line":44,"column":21}},"17":{"start":{"line":47,"column":4},"end":{"line":47,"column":91}},"18":{"start":{"line":50,"column":0},"end":{"line":50,"column":47}},"19":{"start":{"line":52,"column":0},"end":{"line":65,"column":1}},"20":{"start":{"line":53,"column":4},"end":{"line":62,"column":17}},"21":{"start":{"line":64,"column":4},"end":{"line":64,"column":75}},"22":{"start":{"line":67,"column":0},"end":{"line":101,"column":1}},"23":{"start":{"line":68,"column":4},"end":{"line":68,"column":35}},"24":{"start":{"line":69,"column":4},"end":{"line":69,"column":25}},"25":{"start":{"line":70,"column":4},"end":{"line":70,"column":33}},"26":{"start":{"line":72,"column":4},"end":{"line":74,"column":7}},"27":{"start":{"line":73,"column":8},"end":{"line":73,"column":31}},"28":{"start":{"line":76,"column":4},"end":{"line":78,"column":7}},"29":{"start":{"line":76,"column":64},"end":{"line":76,"column":87}},"30":{"start":{"line":77,"column":8},"end":{"line":77,"column":41}},"31":{"start":{"line":80,"column":4},"end":{"line":86,"column":5}},"32":{"start":{"line":81,"column":8},"end":{"line":81,"column":30}},"33":{"start":{"line":83,"column":8},"end":{"line":85,"column":9}},"34":{"start":{"line":84,"column":12},"end":{"line":84,"column":69}},"35":{"start":{"line":88,"column":4},"end":{"line":88,"column":25}},"36":{"start":{"line":89,"column":4},"end":{"line":89,"column":20}},"37":{"start":{"line":90,"column":4},"end":{"line":95,"column":7}},"38":{"start":{"line":91,"column":8},"end":{"line":94,"column":9}},"39":{"start":{"line":92,"column":12},"end":{"line":92,"column":31}},"40":{"start":{"line":93,"column":12},"end":{"line":93,"column":68}},"41":{"start":{"line":97,"column":4},"end":{"line":100,"column":6}},"42":{"start":{"line":103,"column":0},"end":{"line":105,"column":1}},"43":{"start":{"line":104,"column":4},"end":{"line":104,"column":96}}},"branchMap":{"1":{"line":20,"type":"binary-expr","locations":[{"start":{"line":20,"column":14},"end":{"line":20,"column":21}},{"start":{"line":20,"column":25},"end":{"line":20,"column":27}}]},"2":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":21},"end":{"line":30,"column":45}},{"start":{"line":30,"column":49},"end":{"line":30,"column":66}}]},"3":{"line":72,"type":"binary-expr","locations":[{"start":{"line":72,"column":5},"end":{"line":72,"column":15}},{"start":{"line":72,"column":19},"end":{"line":72,"column":21}}]},"4":{"line":76,"type":"binary-expr","locations":[{"start":{"line":76,"column":5},"end":{"line":76,"column":15}},{"start":{"line":76,"column":19},"end":{"line":76,"column":21}}]},"5":{"line":83,"type":"if","locations":[{"start":{"line":83,"column":8},"end":{"line":83,"column":8}},{"start":{"line":83,"column":8},"end":{"line":83,"column":8}}]},"6":{"line":83,"type":"binary-expr","locations":[{"start":{"line":83,"column":12},"end":{"line":83,"column":40}},{"start":{"line":83,"column":44},"end":{"line":83,"column":71}}]},"7":{"line":91,"type":"if","locations":[{"start":{"line":91,"column":8},"end":{"line":91,"column":8}},{"start":{"line":91,"column":8},"end":{"line":91,"column":8}}]}},"code":["'use strict';","","const punycode = require('punycode');","const mimeFuncs = require('../mime-funcs');","const crypto = require('crypto');","","/**"," * Returns DKIM signature header line"," *"," * @param {Object} headers Parsed headers object from MessageParser"," * @param {String} bodyHash Base64 encoded hash of the message"," * @param {Object} options DKIM options"," * @param {String} options.domainName Domain name to be signed for"," * @param {String} options.keySelector DKIM key selector to use"," * @param {String} options.privateKey DKIM private key to use"," * @return {String} Complete header line"," */","","module.exports = (headers, hashAlgo, bodyHash, options) => {","    options = options || {};","","    // all listed fields from RFC4871 #5.5","    let defaultFieldNames = 'From:Sender:Reply-To:Subject:Date:Message-ID:To:' +","        'Cc:MIME-Version:Content-Type:Content-Transfer-Encoding:Content-ID:' +","        'Content-Description:Resent-Date:Resent-From:Resent-Sender:' +","        'Resent-To:Resent-Cc:Resent-Message-ID:In-Reply-To:References:' +","        'List-Id:List-Help:List-Unsubscribe:List-Subscribe:List-Post:' +","        'List-Owner:List-Archive';","","    let fieldNames = options.headerFieldNames || defaultFieldNames;","","    let canonicalizedHeaderData = relaxedHeaders(headers, fieldNames, options.skipFields);","    let dkimHeader = generateDKIMHeader(options.domainName, options.keySelector, canonicalizedHeaderData.fieldNames, hashAlgo, bodyHash);","","    let signer, signature;","","    canonicalizedHeaderData.headers += 'dkim-signature:' + relaxedHeaderLine(dkimHeader);","","    signer = crypto.createSign(('rsa-' + hashAlgo).toUpperCase());","    signer.update(canonicalizedHeaderData.headers);","    try {","        signature = signer.sign(options.privateKey, 'base64');","    } catch (E) {","        return false;","    }","","    return dkimHeader + signature.replace(/(^.{73}|.{75}(?!\\r?\\n|\\r))/g, '$&\\r\\n ').trim();","};","","module.exports.relaxedHeaders = relaxedHeaders;","","function generateDKIMHeader(domainName, keySelector, fieldNames, hashAlgo, bodyHash) {","    let dkim = [","        'v=1',","        'a=rsa-' + hashAlgo,","        'c=relaxed/relaxed',","        'd=' + punycode.toASCII(domainName),","        'q=dns/txt',","        's=' + keySelector,","        'bh=' + bodyHash,","        'h=' + fieldNames","    ].join('; ');","","    return mimeFuncs.foldLines('DKIM-Signature: ' + dkim, 76) + ';\\r\\n b=';","}","","function relaxedHeaders(headers, fieldNames, skipFields) {","    let includedFields = new Set();","    let skip = new Set();","    let headerFields = new Map();","","    (skipFields || '').toLowerCase().split(':').forEach(field => {","        skip.add(field.trim());","    });","","    (fieldNames || '').toLowerCase().split(':').filter(field => !skip.has(field.trim())).forEach(field => {","        includedFields.add(field.trim());","    });","","    for (let i = headers.length - 1; i >= 0; i--) {","        let line = headers[i];","        // only include the first value from bottom to top","        if (includedFields.has(line.key) && !headerFields.has(line.key)) {","            headerFields.set(line.key, relaxedHeaderLine(line.line));","        }","    }","","    let headersList = [];","    let fields = [];","    includedFields.forEach(field => {","        if (headerFields.has(field)) {","            fields.push(field);","            headersList.push(field + ':' + headerFields.get(field));","        }","    });","","    return {","        headers: headersList.join('\\r\\n') + '\\r\\n',","        fieldNames: fields.join(':')","    };","}","","function relaxedHeaderLine(line) {","    return line.substr(line.indexOf(':') + 1).replace(/\\r?\\n/g, '').replace(/\\s+/g, ' ').trim();","}",""],"l":{"3":1,"4":1,"5":1,"19":1,"20":0,"23":0,"30":0,"32":0,"33":0,"35":0,"37":0,"39":0,"40":0,"41":0,"42":0,"44":0,"47":0,"50":1,"52":1,"53":0,"64":0,"67":1,"68":0,"69":0,"70":0,"72":0,"73":0,"76":0,"77":0,"80":0,"81":0,"83":0,"84":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"97":0,"103":1,"104":0}},"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/smtp-connection/http-proxy-client.js":{"path":"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/smtp-connection/http-proxy-client.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"httpProxyClient","line":23,"loc":{"start":{"line":23,"column":0},"end":{"line":23,"column":79}}},"2":{"name":"(anonymous_2)","line":47,"loc":{"start":{"line":47,"column":24},"end":{"line":47,"column":39}}}},"statementMap":{"1":{"start":{"line":7,"column":0},"end":{"line":7,"column":27}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":27}},"3":{"start":{"line":9,"column":0},"end":{"line":9,"column":30}},"4":{"start":{"line":23,"column":0},"end":{"line":124,"column":1}},"5":{"start":{"line":24,"column":4},"end":{"line":24,"column":39}},"6":{"start":{"line":27,"column":4},"end":{"line":27,"column":16}},"7":{"start":{"line":28,"column":4},"end":{"line":28,"column":16}},"8":{"start":{"line":29,"column":4},"end":{"line":29,"column":15}},"9":{"start":{"line":31,"column":4},"end":{"line":34,"column":6}},"10":{"start":{"line":36,"column":4},"end":{"line":42,"column":5}},"11":{"start":{"line":38,"column":8},"end":{"line":38,"column":43}},"12":{"start":{"line":39,"column":8},"end":{"line":39,"column":40}},"13":{"start":{"line":41,"column":8},"end":{"line":41,"column":40}},"14":{"start":{"line":46,"column":4},"end":{"line":46,"column":25}},"15":{"start":{"line":47,"column":4},"end":{"line":58,"column":6}},"16":{"start":{"line":48,"column":8},"end":{"line":50,"column":9}},"17":{"start":{"line":49,"column":12},"end":{"line":49,"column":19}},"18":{"start":{"line":51,"column":8},"end":{"line":51,"column":24}},"19":{"start":{"line":52,"column":8},"end":{"line":56,"column":9}},"20":{"start":{"line":53,"column":12},"end":{"line":53,"column":29}},"21":{"start":{"line":57,"column":8},"end":{"line":57,"column":22}},"22":{"start":{"line":60,"column":4},"end":{"line":121,"column":7}},"23":{"start":{"line":61,"column":8},"end":{"line":63,"column":9}},"24":{"start":{"line":62,"column":12},"end":{"line":62,"column":19}},"25":{"start":{"line":65,"column":8},"end":{"line":68,"column":10}},"26":{"start":{"line":69,"column":8},"end":{"line":71,"column":9}},"27":{"start":{"line":70,"column":12},"end":{"line":70,"column":101}},"28":{"start":{"line":73,"column":8},"end":{"line":81,"column":24}},"29":{"start":{"line":78,"column":47},"end":{"line":78,"column":75}},"30":{"start":{"line":83,"column":8},"end":{"line":83,"column":25}},"31":{"start":{"line":84,"column":8},"end":{"line":119,"column":10}},"32":{"start":{"line":85,"column":12},"end":{"line":85,"column":22}},"33":{"start":{"line":86,"column":12},"end":{"line":86,"column":26}},"34":{"start":{"line":88,"column":12},"end":{"line":90,"column":13}},"35":{"start":{"line":89,"column":16},"end":{"line":89,"column":23}},"36":{"start":{"line":92,"column":12},"end":{"line":92,"column":48}},"37":{"start":{"line":93,"column":12},"end":{"line":118,"column":13}},"38":{"start":{"line":94,"column":16},"end":{"line":94,"column":60}},"39":{"start":{"line":96,"column":16},"end":{"line":96,"column":74}},"40":{"start":{"line":97,"column":16},"end":{"line":97,"column":57}},"41":{"start":{"line":98,"column":16},"end":{"line":100,"column":17}},"42":{"start":{"line":99,"column":20},"end":{"line":99,"column":68}},"43":{"start":{"line":103,"column":16},"end":{"line":103,"column":32}},"44":{"start":{"line":106,"column":16},"end":{"line":106,"column":64}},"45":{"start":{"line":107,"column":16},"end":{"line":114,"column":17}},"46":{"start":{"line":108,"column":20},"end":{"line":112,"column":21}},"47":{"start":{"line":109,"column":24},"end":{"line":109,"column":41}},"48":{"start":{"line":113,"column":20},"end":{"line":113,"column":113}},"49":{"start":{"line":116,"column":16},"end":{"line":116,"column":62}},"50":{"start":{"line":117,"column":16},"end":{"line":117,"column":46}},"51":{"start":{"line":120,"column":8},"end":{"line":120,"column":40}},"52":{"start":{"line":123,"column":4},"end":{"line":123,"column":40}},"53":{"start":{"line":126,"column":0},"end":{"line":126,"column":33}}},"branchMap":{"1":{"line":33,"type":"cond-expr","locations":[{"start":{"line":33,"column":35},"end":{"line":33,"column":53}},{"start":{"line":33,"column":57},"end":{"line":33,"column":95}}]},"2":{"line":33,"type":"cond-expr","locations":[{"start":{"line":33,"column":87},"end":{"line":33,"column":90}},{"start":{"line":33,"column":93},"end":{"line":33,"column":95}}]},"3":{"line":36,"type":"if","locations":[{"start":{"line":36,"column":4},"end":{"line":36,"column":4}},{"start":{"line":36,"column":4},"end":{"line":36,"column":4}}]},"4":{"line":48,"type":"if","locations":[{"start":{"line":48,"column":8},"end":{"line":48,"column":8}},{"start":{"line":48,"column":8},"end":{"line":48,"column":8}}]},"5":{"line":61,"type":"if","locations":[{"start":{"line":61,"column":8},"end":{"line":61,"column":8}},{"start":{"line":61,"column":8},"end":{"line":61,"column":8}}]},"6":{"line":69,"type":"if","locations":[{"start":{"line":69,"column":8},"end":{"line":69,"column":8}},{"start":{"line":69,"column":8},"end":{"line":69,"column":8}}]},"7":{"line":88,"type":"if","locations":[{"start":{"line":88,"column":12},"end":{"line":88,"column":12}},{"start":{"line":88,"column":12},"end":{"line":88,"column":12}}]},"8":{"line":93,"type":"if","locations":[{"start":{"line":93,"column":12},"end":{"line":93,"column":12}},{"start":{"line":93,"column":12},"end":{"line":93,"column":12}}]},"9":{"line":98,"type":"if","locations":[{"start":{"line":98,"column":16},"end":{"line":98,"column":16}},{"start":{"line":98,"column":16},"end":{"line":98,"column":16}}]},"10":{"line":107,"type":"if","locations":[{"start":{"line":107,"column":16},"end":{"line":107,"column":16}},{"start":{"line":107,"column":16},"end":{"line":107,"column":16}}]},"11":{"line":107,"type":"binary-expr","locations":[{"start":{"line":107,"column":20},"end":{"line":107,"column":26}},{"start":{"line":107,"column":30},"end":{"line":107,"column":64}}]},"12":{"line":107,"type":"binary-expr","locations":[{"start":{"line":107,"column":31},"end":{"line":107,"column":39}},{"start":{"line":107,"column":43},"end":{"line":107,"column":45}}]},"13":{"line":113,"type":"binary-expr","locations":[{"start":{"line":113,"column":79},"end":{"line":113,"column":84}},{"start":{"line":113,"column":88},"end":{"line":113,"column":103}},{"start":{"line":113,"column":107},"end":{"line":113,"column":109}}]}},"code":["'use strict';","","/**"," * Minimal HTTP/S proxy client"," */","","const net = require('net');","const tls = require('tls');","const urllib = require('url');","","/**"," * Establishes proxied connection to destinationPort"," *"," * httpProxyClient(\"http://localhost:3128/\", 80, \"google.com\", function(err, socket){"," *     socket.write(\"GET / HTTP/1.0\\r\\n\\r\\n\");"," * });"," *"," * @param {String} proxyUrl proxy configuration, etg \"http://proxy.host:3128/\""," * @param {Number} destinationPort Port to open in destination host"," * @param {String} destinationHost Destination hostname"," * @param {Function} callback Callback to run with the rocket object once connection is established"," */","function httpProxyClient(proxyUrl, destinationPort, destinationHost, callback) {","    let proxy = urllib.parse(proxyUrl);","","    // create a socket connection to the proxy server","    let options;","    let connect;","    let socket;","","    options = {","        host: proxy.hostname,","        port: Number(proxy.port) ? Number(proxy.port) : (proxy.protocol === 'https:' ? 443 : 80)","    };","","    if (proxy.protocol === 'https:') {","        // we can use untrusted proxies as long as we verify actual SMTP certificates","        options.rejectUnauthorized = false;","        connect = tls.connect.bind(tls);","    } else {","        connect = net.connect.bind(net);","    }","","    // Error harness for initial connection. Once connection is established, the responsibility","    // to handle errors is passed to whoever uses this socket","    let finished = false;","    let tempSocketErr = function (err) {","        if (finished) {","            return;","        }","        finished = true;","        try {","            socket.destroy();","        } catch (E) {","            // ignore","        }","        callback(err);","    };","","    socket = connect(options, () => {","        if (finished) {","            return;","        }","","        let reqHeaders = {","            Host: destinationHost + ':' + destinationPort,","            Connection: 'close'","        };","        if (proxy.auth) {","            reqHeaders['Proxy-Authorization'] = 'Basic ' + new Buffer(proxy.auth).toString('base64');","        }","","        socket.write(","            // HTTP method","            'CONNECT ' + destinationHost + ':' + destinationPort + ' HTTP/1.1\\r\\n' +","","            // HTTP request headers","            Object.keys(reqHeaders).map(key => key + ': ' + reqHeaders[key]).join('\\r\\n') +","","            // End request","            '\\r\\n\\r\\n');","","        let headers = '';","        let onSocketData = chunk => {","            let match;","            let remainder;","","            if (finished) {","                return;","            }","","            headers += chunk.toString('binary');","            if ((match = headers.match(/\\r\\n\\r\\n/))) {","                socket.removeListener('data', onSocketData);","","                remainder = headers.substr(match.index + match[0].length);","                headers = headers.substr(0, match.index);","                if (remainder) {","                    socket.unshift(new Buffer(remainder, 'binary'));","                }","","                // proxy connection is now established","                finished = true;","","                // check response code","                match = headers.match(/^HTTP\\/\\d+\\.\\d+ (\\d+)/i);","                if (!match || (match[1] || '').charAt(0) !== '2') {","                    try {","                        socket.destroy();","                    } catch (E) {","                        // ignore","                    }","                    return callback(new Error('Invalid response from proxy' + (match && ': ' + match[1] || '')));","                }","","                socket.removeListener('error', tempSocketErr);","                return callback(null, socket);","            }","        };","        socket.on('data', onSocketData);","    });","","    socket.once('error', tempSocketErr);","}","","module.exports = httpProxyClient;",""],"l":{"7":1,"8":1,"9":1,"23":1,"24":0,"27":0,"28":0,"29":0,"31":0,"36":0,"38":0,"39":0,"41":0,"46":0,"47":0,"48":0,"49":0,"51":0,"52":0,"53":0,"57":0,"60":0,"61":0,"62":0,"65":0,"69":0,"70":0,"73":0,"78":0,"83":0,"84":0,"85":0,"86":0,"88":0,"89":0,"92":0,"93":0,"94":0,"96":0,"97":0,"98":0,"99":0,"103":0,"106":0,"107":0,"108":0,"109":0,"113":0,"116":0,"117":0,"120":0,"123":0,"126":1}},"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/mailer/mail-message.js":{"path":"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/mailer/mail-message.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0,0],"35":[0,0],"36":[0,0],"37":[0,0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0],"47":[0,0],"48":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},"fnMap":{"1":{"name":"(anonymous_1)","line":7,"loc":{"start":{"line":7,"column":15},"end":{"line":7,"column":30}}},"2":{"name":"(anonymous_2)","line":44,"loc":{"start":{"line":44,"column":18},"end":{"line":44,"column":28}}},"3":{"name":"(anonymous_3)","line":48,"loc":{"start":{"line":48,"column":14},"end":{"line":48,"column":25}}},"4":{"name":"(anonymous_4)","line":127,"loc":{"start":{"line":127,"column":19},"end":{"line":127,"column":22}}},"5":{"name":"(anonymous_5)","line":134,"loc":{"start":{"line":134,"column":22},"end":{"line":134,"column":25}}},"6":{"name":"(anonymous_6)","line":154,"loc":{"start":{"line":154,"column":18},"end":{"line":154,"column":21}}},"7":{"name":"(anonymous_7)","line":168,"loc":{"start":{"line":168,"column":19},"end":{"line":168,"column":30}}},"8":{"name":"(anonymous_8)","line":192,"loc":{"start":{"line":192,"column":18},"end":{"line":192,"column":24}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":41}},"3":{"start":{"line":8,"column":8},"end":{"line":8,"column":29}},"4":{"start":{"line":9,"column":8},"end":{"line":9,"column":23}},"5":{"start":{"line":10,"column":8},"end":{"line":10,"column":28}},"6":{"start":{"line":12,"column":8},"end":{"line":12,"column":26}},"7":{"start":{"line":13,"column":8},"end":{"line":13,"column":43}},"8":{"start":{"line":14,"column":8},"end":{"line":14,"column":46}},"9":{"start":{"line":16,"column":8},"end":{"line":18,"column":11}},"10":{"start":{"line":17,"column":12},"end":{"line":17,"column":39}},"11":{"start":{"line":20,"column":8},"end":{"line":20,"column":52}},"12":{"start":{"line":23,"column":8},"end":{"line":34,"column":11}},"13":{"start":{"line":24,"column":12},"end":{"line":33,"column":13}},"14":{"start":{"line":25,"column":16},"end":{"line":25,"column":47}},"15":{"start":{"line":26,"column":19},"end":{"line":33,"column":13}},"16":{"start":{"line":28,"column":16},"end":{"line":32,"column":19}},"17":{"start":{"line":29,"column":20},"end":{"line":31,"column":21}},"18":{"start":{"line":30,"column":24},"end":{"line":30,"column":71}},"19":{"start":{"line":37,"column":8},"end":{"line":41,"column":11}},"20":{"start":{"line":38,"column":12},"end":{"line":40,"column":13}},"21":{"start":{"line":39,"column":16},"end":{"line":39,"column":46}},"22":{"start":{"line":45,"column":8},"end":{"line":45,"column":46}},"23":{"start":{"line":49,"column":8},"end":{"line":54,"column":10}},"24":{"start":{"line":56,"column":8},"end":{"line":60,"column":9}},"25":{"start":{"line":57,"column":12},"end":{"line":59,"column":15}},"26":{"start":{"line":58,"column":16},"end":{"line":58,"column":55}},"27":{"start":{"line":62,"column":8},"end":{"line":66,"column":9}},"28":{"start":{"line":63,"column":12},"end":{"line":65,"column":15}},"29":{"start":{"line":64,"column":16},"end":{"line":64,"column":54}},"30":{"start":{"line":68,"column":8},"end":{"line":68,"column":38}},"31":{"start":{"line":70,"column":8},"end":{"line":70,"column":75}},"32":{"start":{"line":72,"column":8},"end":{"line":85,"column":11}},"33":{"start":{"line":73,"column":12},"end":{"line":73,"column":22}},"34":{"start":{"line":74,"column":12},"end":{"line":78,"column":13}},"35":{"start":{"line":75,"column":16},"end":{"line":75,"column":136}},"36":{"start":{"line":76,"column":19},"end":{"line":78,"column":13}},"37":{"start":{"line":77,"column":16},"end":{"line":77,"column":86}},"38":{"start":{"line":79,"column":12},"end":{"line":83,"column":13}},"39":{"start":{"line":80,"column":16},"end":{"line":80,"column":43}},"40":{"start":{"line":81,"column":19},"end":{"line":83,"column":13}},"41":{"start":{"line":82,"column":16},"end":{"line":82,"column":42}},"42":{"start":{"line":87,"column":8},"end":{"line":87,"column":55}},"43":{"start":{"line":88,"column":8},"end":{"line":92,"column":11}},"44":{"start":{"line":89,"column":12},"end":{"line":91,"column":13}},"45":{"start":{"line":90,"column":16},"end":{"line":90,"column":64}},"46":{"start":{"line":94,"column":8},"end":{"line":94,"column":20}},"47":{"start":{"line":95,"column":8},"end":{"line":122,"column":10}},"48":{"start":{"line":96,"column":12},"end":{"line":98,"column":13}},"49":{"start":{"line":97,"column":16},"end":{"line":97,"column":49}},"50":{"start":{"line":99,"column":12},"end":{"line":99,"column":35}},"51":{"start":{"line":100,"column":12},"end":{"line":102,"column":13}},"52":{"start":{"line":101,"column":16},"end":{"line":101,"column":37}},"53":{"start":{"line":103,"column":12},"end":{"line":121,"column":15}},"54":{"start":{"line":104,"column":16},"end":{"line":106,"column":17}},"55":{"start":{"line":105,"column":20},"end":{"line":105,"column":41}},"56":{"start":{"line":108,"column":16},"end":{"line":110,"column":18}},"57":{"start":{"line":111,"column":16},"end":{"line":117,"column":17}},"58":{"start":{"line":112,"column":20},"end":{"line":116,"column":23}},"59":{"start":{"line":113,"column":24},"end":{"line":115,"column":25}},"60":{"start":{"line":114,"column":28},"end":{"line":114,"column":62}},"61":{"start":{"line":119,"column":16},"end":{"line":119,"column":40}},"62":{"start":{"line":120,"column":16},"end":{"line":120,"column":30}},"63":{"start":{"line":124,"column":8},"end":{"line":124,"column":42}},"64":{"start":{"line":124,"column":27},"end":{"line":124,"column":40}},"65":{"start":{"line":128,"column":8},"end":{"line":130,"column":9}},"66":{"start":{"line":129,"column":12},"end":{"line":129,"column":19}},"67":{"start":{"line":131,"column":8},"end":{"line":131,"column":62}},"68":{"start":{"line":135,"column":8},"end":{"line":137,"column":9}},"69":{"start":{"line":136,"column":12},"end":{"line":136,"column":19}},"70":{"start":{"line":138,"column":8},"end":{"line":151,"column":9}},"71":{"start":{"line":140,"column":16},"end":{"line":140,"column":68}},"72":{"start":{"line":141,"column":16},"end":{"line":141,"column":68}},"73":{"start":{"line":142,"column":16},"end":{"line":142,"column":61}},"74":{"start":{"line":143,"column":16},"end":{"line":143,"column":22}},"75":{"start":{"line":145,"column":16},"end":{"line":145,"column":67}},"76":{"start":{"line":146,"column":16},"end":{"line":146,"column":67}},"77":{"start":{"line":147,"column":16},"end":{"line":147,"column":60}},"78":{"start":{"line":148,"column":16},"end":{"line":148,"column":22}},"79":{"start":{"line":155,"column":8},"end":{"line":157,"column":9}},"80":{"start":{"line":156,"column":12},"end":{"line":156,"column":19}},"81":{"start":{"line":159,"column":8},"end":{"line":165,"column":9}},"82":{"start":{"line":160,"column":12},"end":{"line":164,"column":15}},"83":{"start":{"line":161,"column":16},"end":{"line":163,"column":19}},"84":{"start":{"line":162,"column":20},"end":{"line":162,"column":66}},"85":{"start":{"line":170,"column":8},"end":{"line":189,"column":12}},"86":{"start":{"line":170,"column":49},"end":{"line":189,"column":9}},"87":{"start":{"line":173,"column":16},"end":{"line":175,"column":17}},"88":{"start":{"line":174,"column":20},"end":{"line":174,"column":54}},"89":{"start":{"line":176,"column":16},"end":{"line":187,"column":18}},"90":{"start":{"line":179,"column":24},"end":{"line":181,"column":25}},"91":{"start":{"line":180,"column":28},"end":{"line":180,"column":62}},"92":{"start":{"line":182,"column":24},"end":{"line":184,"column":25}},"93":{"start":{"line":183,"column":28},"end":{"line":183,"column":118}},"94":{"start":{"line":185,"column":24},"end":{"line":185,"column":34}},"95":{"start":{"line":193,"column":8},"end":{"line":193,"column":48}},"96":{"start":{"line":194,"column":8},"end":{"line":196,"column":9}},"97":{"start":{"line":195,"column":12},"end":{"line":195,"column":35}},"98":{"start":{"line":197,"column":8},"end":{"line":199,"column":9}},"99":{"start":{"line":198,"column":12},"end":{"line":198,"column":42}},"100":{"start":{"line":201,"column":8},"end":{"line":201,"column":38}},"101":{"start":{"line":206,"column":0},"end":{"line":206,"column":29}}},"branchMap":{"1":{"line":12,"type":"binary-expr","locations":[{"start":{"line":12,"column":15},"end":{"line":12,"column":19}},{"start":{"line":12,"column":23},"end":{"line":12,"column":25}}]},"2":{"line":13,"type":"binary-expr","locations":[{"start":{"line":13,"column":22},"end":{"line":13,"column":36}},{"start":{"line":13,"column":40},"end":{"line":13,"column":42}}]},"3":{"line":14,"type":"binary-expr","locations":[{"start":{"line":14,"column":23},"end":{"line":14,"column":39}},{"start":{"line":14,"column":43},"end":{"line":14,"column":45}}]},"4":{"line":20,"type":"binary-expr","locations":[{"start":{"line":20,"column":28},"end":{"line":20,"column":45}},{"start":{"line":20,"column":49},"end":{"line":20,"column":51}}]},"5":{"line":24,"type":"if","locations":[{"start":{"line":24,"column":12},"end":{"line":24,"column":12}},{"start":{"line":24,"column":12},"end":{"line":24,"column":12}}]},"6":{"line":26,"type":"if","locations":[{"start":{"line":26,"column":19},"end":{"line":26,"column":19}},{"start":{"line":26,"column":19},"end":{"line":26,"column":19}}]},"7":{"line":29,"type":"if","locations":[{"start":{"line":29,"column":20},"end":{"line":29,"column":20}},{"start":{"line":29,"column":20},"end":{"line":29,"column":20}}]},"8":{"line":38,"type":"if","locations":[{"start":{"line":38,"column":12},"end":{"line":38,"column":12}},{"start":{"line":38,"column":12},"end":{"line":38,"column":12}}]},"9":{"line":56,"type":"if","locations":[{"start":{"line":56,"column":8},"end":{"line":56,"column":8}},{"start":{"line":56,"column":8},"end":{"line":56,"column":8}}]},"10":{"line":56,"type":"binary-expr","locations":[{"start":{"line":56,"column":12},"end":{"line":56,"column":34}},{"start":{"line":56,"column":38},"end":{"line":56,"column":67}}]},"11":{"line":62,"type":"if","locations":[{"start":{"line":62,"column":8},"end":{"line":62,"column":8}},{"start":{"line":62,"column":8},"end":{"line":62,"column":8}}]},"12":{"line":62,"type":"binary-expr","locations":[{"start":{"line":62,"column":12},"end":{"line":62,"column":33}},{"start":{"line":62,"column":37},"end":{"line":62,"column":65}}]},"13":{"line":74,"type":"if","locations":[{"start":{"line":74,"column":12},"end":{"line":74,"column":12}},{"start":{"line":74,"column":12},"end":{"line":74,"column":12}}]},"14":{"line":75,"type":"binary-expr","locations":[{"start":{"line":75,"column":34},"end":{"line":75,"column":128}},{"start":{"line":75,"column":132},"end":{"line":75,"column":134}}]},"15":{"line":75,"type":"cond-expr","locations":[{"start":{"line":75,"column":106},"end":{"line":75,"column":116}},{"start":{"line":75,"column":119},"end":{"line":75,"column":126}}]},"16":{"line":76,"type":"if","locations":[{"start":{"line":76,"column":19},"end":{"line":76,"column":19}},{"start":{"line":76,"column":19},"end":{"line":76,"column":19}}]},"17":{"line":77,"type":"binary-expr","locations":[{"start":{"line":77,"column":34},"end":{"line":77,"column":78}},{"start":{"line":77,"column":82},"end":{"line":77,"column":84}}]},"18":{"line":79,"type":"if","locations":[{"start":{"line":79,"column":12},"end":{"line":79,"column":12}},{"start":{"line":79,"column":12},"end":{"line":79,"column":12}}]},"19":{"line":79,"type":"binary-expr","locations":[{"start":{"line":79,"column":16},"end":{"line":79,"column":21}},{"start":{"line":79,"column":25},"end":{"line":79,"column":37}}]},"20":{"line":81,"type":"if","locations":[{"start":{"line":81,"column":19},"end":{"line":81,"column":19}},{"start":{"line":81,"column":19},"end":{"line":81,"column":19}}]},"21":{"line":89,"type":"if","locations":[{"start":{"line":89,"column":12},"end":{"line":89,"column":12}},{"start":{"line":89,"column":12},"end":{"line":89,"column":12}}]},"22":{"line":96,"type":"if","locations":[{"start":{"line":96,"column":12},"end":{"line":96,"column":12}},{"start":{"line":96,"column":12},"end":{"line":96,"column":12}}]},"23":{"line":100,"type":"if","locations":[{"start":{"line":100,"column":12},"end":{"line":100,"column":12}},{"start":{"line":100,"column":12},"end":{"line":100,"column":12}}]},"24":{"line":100,"type":"binary-expr","locations":[{"start":{"line":100,"column":16},"end":{"line":100,"column":24}},{"start":{"line":100,"column":28},"end":{"line":100,"column":45}}]},"25":{"line":104,"type":"if","locations":[{"start":{"line":104,"column":16},"end":{"line":104,"column":16}},{"start":{"line":104,"column":16},"end":{"line":104,"column":16}}]},"26":{"line":111,"type":"if","locations":[{"start":{"line":111,"column":16},"end":{"line":111,"column":16}},{"start":{"line":111,"column":16},"end":{"line":111,"column":16}}]},"27":{"line":111,"type":"binary-expr","locations":[{"start":{"line":111,"column":20},"end":{"line":111,"column":36}},{"start":{"line":111,"column":40},"end":{"line":111,"column":76}},{"start":{"line":111,"column":80},"end":{"line":111,"column":114}}]},"28":{"line":113,"type":"if","locations":[{"start":{"line":113,"column":24},"end":{"line":113,"column":24}},{"start":{"line":113,"column":24},"end":{"line":113,"column":24}}]},"29":{"line":113,"type":"binary-expr","locations":[{"start":{"line":113,"column":28},"end":{"line":113,"column":42}},{"start":{"line":113,"column":46},"end":{"line":113,"column":95}}]},"30":{"line":128,"type":"if","locations":[{"start":{"line":128,"column":8},"end":{"line":128,"column":8}},{"start":{"line":128,"column":8},"end":{"line":128,"column":8}}]},"31":{"line":128,"type":"binary-expr","locations":[{"start":{"line":128,"column":12},"end":{"line":128,"column":25}},{"start":{"line":128,"column":29},"end":{"line":128,"column":47}}]},"32":{"line":135,"type":"if","locations":[{"start":{"line":135,"column":8},"end":{"line":135,"column":8}},{"start":{"line":135,"column":8},"end":{"line":135,"column":8}}]},"33":{"line":135,"type":"binary-expr","locations":[{"start":{"line":135,"column":12},"end":{"line":135,"column":25}},{"start":{"line":135,"column":29},"end":{"line":135,"column":48}}]},"34":{"line":138,"type":"switch","locations":[{"start":{"line":139,"column":12},"end":{"line":143,"column":22}},{"start":{"line":144,"column":12},"end":{"line":148,"column":22}},{"start":{"line":149,"column":12},"end":{"line":149,"column":20}}]},"35":{"line":138,"type":"binary-expr","locations":[{"start":{"line":138,"column":17},"end":{"line":138,"column":35}},{"start":{"line":138,"column":39},"end":{"line":138,"column":41}}]},"36":{"line":155,"type":"if","locations":[{"start":{"line":155,"column":8},"end":{"line":155,"column":8}},{"start":{"line":155,"column":8},"end":{"line":155,"column":8}}]},"37":{"line":155,"type":"binary-expr","locations":[{"start":{"line":155,"column":12},"end":{"line":155,"column":25}},{"start":{"line":155,"column":29},"end":{"line":155,"column":44}},{"start":{"line":155,"column":48},"end":{"line":155,"column":82}}]},"38":{"line":159,"type":"if","locations":[{"start":{"line":159,"column":8},"end":{"line":159,"column":8}},{"start":{"line":159,"column":8},"end":{"line":159,"column":8}}]},"39":{"line":159,"type":"binary-expr","locations":[{"start":{"line":159,"column":12},"end":{"line":159,"column":26}},{"start":{"line":159,"column":30},"end":{"line":159,"column":64}}]},"40":{"line":172,"type":"binary-expr","locations":[{"start":{"line":172,"column":29},"end":{"line":172,"column":42}},{"start":{"line":172,"column":46},"end":{"line":172,"column":48}}]},"41":{"line":173,"type":"if","locations":[{"start":{"line":173,"column":16},"end":{"line":173,"column":16}},{"start":{"line":173,"column":16},"end":{"line":173,"column":16}}]},"42":{"line":178,"type":"binary-expr","locations":[{"start":{"line":178,"column":37},"end":{"line":178,"column":42}},{"start":{"line":178,"column":46},"end":{"line":178,"column":48}}]},"43":{"line":179,"type":"if","locations":[{"start":{"line":179,"column":24},"end":{"line":179,"column":24}},{"start":{"line":179,"column":24},"end":{"line":179,"column":24}}]},"44":{"line":182,"type":"if","locations":[{"start":{"line":182,"column":24},"end":{"line":182,"column":24}},{"start":{"line":182,"column":24},"end":{"line":182,"column":24}}]},"45":{"line":182,"type":"binary-expr","locations":[{"start":{"line":182,"column":28},"end":{"line":182,"column":33}},{"start":{"line":182,"column":37},"end":{"line":182,"column":46}}]},"46":{"line":183,"type":"cond-expr","locations":[{"start":{"line":183,"column":85},"end":{"line":183,"column":111}},{"start":{"line":183,"column":114},"end":{"line":183,"column":116}}]},"47":{"line":194,"type":"if","locations":[{"start":{"line":194,"column":8},"end":{"line":194,"column":8}},{"start":{"line":194,"column":8},"end":{"line":194,"column":8}}]},"48":{"line":197,"type":"if","locations":[{"start":{"line":197,"column":8},"end":{"line":197,"column":8}},{"start":{"line":197,"column":8},"end":{"line":197,"column":8}}]}},"code":["'use strict';","","const shared = require('../shared');","const MimeNode = require('../mime-node');","","class MailMessage {","    constructor(mailer, data) {","        this.mailer = mailer;","        this.data = {};","        this.message = null;","","        data = data || {};","        let options = mailer.options || {};","        let defaults = mailer._defaults || {};","","        Object.keys(data).forEach(key => {","            this.data[key] = data[key];","        });","","        this.data.headers = this.data.headers || {};","","        // apply defaults","        Object.keys(defaults).forEach(key => {","            if (!(key in this.data)) {","                this.data[key] = defaults[key];","            } else if (key === 'headers') {","                // headers is a special case. Allow setting individual default headers","                Object.keys(defaults.headers).forEach(key => {","                    if (!(key in this.data.headers)) {","                        this.data.headers[key] = defaults.headers[key];","                    }","                });","            }","        });","","        // force specific keys from transporter options","        ['disableFileAccess', 'disableUrlAccess'].forEach(key => {","            if (key in options) {","                this.data[key] = options[key];","            }","        });","    }","","    resolveContent(...args) {","        return shared.resolveContent(...args);","    }","","    resolveAll(callback) {","        let keys = [","            [this.data, 'html'],","            [this.data, 'text'],","            [this.data, 'watchHtml'],","            [this.data, 'icalEvent']","        ];","","        if (this.data.alternatives && this.data.alternatives.length) {","            this.data.alternatives.forEach((alternative, i) => {","                keys.push([this.data.alternatives, i]);","            });","        }","","        if (this.data.attachments && this.data.attachments.length) {","            this.data.attachments.forEach((alternative, i) => {","                keys.push([this.data.attachments, i]);","            });","        }","","        let mimeNode = new MimeNode();","","        let addressKeys = ['from', 'to', 'cc', 'bcc', 'sender', 'replyTo'];","","        addressKeys.forEach(address => {","            let value;","            if (this.message) {","                value = [].concat(mimeNode._parseAddresses(this.message.getHeader(address === 'replyTo' ? 'reply-to' : address)) || []);","            } else if (this.data[address]) {","                value = [].concat(mimeNode._parseAddresses(this.data[address]) || []);","            }","            if (value && value.length) {","                this.data[address] = value;","            } else if (address in this.data) {","                this.data[address] = null;","            }","","        });","","        let singleKeys = ['from', 'sender', 'replyTo'];","        singleKeys.forEach(address => {","            if (this.data[address]) {","                this.data[address] = this.data[address].shift();","            }","        });","","        let pos = 0;","        let resolveNext = () => {","            if (pos >= keys.length) {","                return callback(null, this.data);","            }","            let args = keys[pos++];","            if (!args[0] || !args[0][args[1]]) {","                return resolveNext();","            }","            shared.resolveContent(...args, (err, value) => {","                if (err) {","                    return callback(err);","                }","","                let node = {","                    content: value","                };","                if (args[0][args[1]] && typeof args[0][args[1]] === 'object' && !Buffer.isBuffer(args[0][args[1]])) {","                    Object.keys(args[0][args[1]]).forEach(key => {","                        if (!(key in node) && !['content', 'path', 'href', 'raw'].includes(key)) {","                            node[key] = args[0][args[1]][key];","                        }","                    });","                }","","                args[0][args[1]] = node;","                resolveNext();","            });","        };","","        setImmediate(() => resolveNext());","    }","","    setMailerHeader() {","        if (!this.message || !this.data.xMailer) {","            return;","        }","        this.message.setHeader('X-Mailer', this.data.xMailer);","    }","","    setPriorityHeaders() {","        if (!this.message || !this.data.priority) {","            return;","        }","        switch ((this.data.priority || '').toString().toLowerCase()) {","            case 'high':","                this.message.setHeader('X-Priority', '1 (Highest)');","                this.message.setHeader('X-MSMail-Priority', 'High');","                this.message.setHeader('Importance', 'High');","                break;","            case 'low':","                this.message.setHeader('X-Priority', '5 (Lowest)');","                this.message.setHeader('X-MSMail-Priority', 'Low');","                this.message.setHeader('Importance', 'Low');","                break;","            default:","                // do not add anything, since all messages are 'Normal' by default","        }","    }","","    setListHeaders() {","        if (!this.message || !this.data.list || typeof this.data.list !== 'object') {","            return;","        }","        // add optional List-* headers","        if (this.data.list && typeof this.data.list === 'object') {","            this._getListHeaders(this.data.list).forEach(listHeader => {","                listHeader.value.forEach(value => {","                    this.message.addHeader(listHeader.key, value);","                });","            });","        }","    }","","    _getListHeaders(listData) {","        // make sure an url looks like <protocol:url>","        return Object.keys(listData).map(key => ({","            key: 'list-' + key.toLowerCase().trim(),","            value: [].concat(listData[key] || []).map(value => {","                if (typeof value === 'string') {","                    return this._formatListUrl(value);","                }","                return {","                    prepared: true,","                    value: [].concat(value || []).map(value => {","                        if (typeof value === 'string') {","                            return this._formatListUrl(value);","                        }","                        if (value && value.url) {","                            return this._formatListUrl(value.url) + (value.comment ? ' (' + value.comment + ')' : '');","                        }","                        return '';","                    }).join(', ')","                };","            })","        }));","    }","","    _formatListUrl(url) {","        url = url.replace(/[\\s<]+|[\\s>]+/g, '');","        if (/^(https?|mailto|ftp):/.test(url)) {","            return '<' + url + '>';","        }","        if (/^[^@]+@[^@]+$/.test(url)) {","            return '<mailto:' + url + '>';","        }","","        return '<http://' + url + '>';","    }","","}","","module.exports = MailMessage;",""],"l":{"3":1,"4":1,"8":0,"9":0,"10":0,"12":0,"13":0,"14":0,"16":0,"17":0,"20":0,"23":0,"24":0,"25":0,"26":0,"28":0,"29":0,"30":0,"37":0,"38":0,"39":0,"45":0,"49":0,"56":0,"57":0,"58":0,"62":0,"63":0,"64":0,"68":0,"70":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"79":0,"80":0,"81":0,"82":0,"87":0,"88":0,"89":0,"90":0,"94":0,"95":0,"96":0,"97":0,"99":0,"100":0,"101":0,"103":0,"104":0,"105":0,"108":0,"111":0,"112":0,"113":0,"114":0,"119":0,"120":0,"124":0,"128":0,"129":0,"131":0,"135":0,"136":0,"138":0,"140":0,"141":0,"142":0,"143":0,"145":0,"146":0,"147":0,"148":0,"155":0,"156":0,"159":0,"160":0,"161":0,"162":0,"170":0,"173":0,"174":0,"176":0,"179":0,"180":0,"182":0,"183":0,"185":0,"193":0,"194":0,"195":0,"197":0,"198":0,"201":0,"206":1}},"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/smtp-pool/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/smtp-pool/index.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":0,"192":0,"193":0,"194":0,"195":0,"196":0,"197":0,"198":0,"199":0,"200":0,"201":0,"202":0,"203":0,"204":0,"205":0,"206":0,"207":0,"208":0,"209":0,"210":0,"211":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0],"47":[0,0],"48":[0,0],"49":[0,0],"50":[0,0],"51":[0,0],"52":[0,0],"53":[0,0],"54":[0,0],"55":[0,0],"56":[0,0],"57":[0,0],"58":[0,0],"59":[0,0],"60":[0,0],"61":[0,0],"62":[0,0],"63":[0,0],"64":[0,0],"65":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},"fnMap":{"1":{"name":"(anonymous_1)","line":17,"loc":{"start":{"line":17,"column":15},"end":{"line":17,"column":25}}},"2":{"name":"(anonymous_2)","line":88,"loc":{"start":{"line":88,"column":13},"end":{"line":88,"column":33}}},"3":{"name":"(anonymous_3)","line":99,"loc":{"start":{"line":99,"column":8},"end":{"line":99,"column":25}}},"4":{"name":"(anonymous_4)","line":122,"loc":{"start":{"line":122,"column":9},"end":{"line":122,"column":12}}},"5":{"name":"(anonymous_5)","line":186,"loc":{"start":{"line":186,"column":20},"end":{"line":186,"column":23}}},"6":{"name":"(anonymous_6)","line":268,"loc":{"start":{"line":268,"column":21},"end":{"line":268,"column":24}}},"7":{"name":"(anonymous_7)","line":370,"loc":{"start":{"line":370,"column":23},"end":{"line":370,"column":26}}},"8":{"name":"(anonymous_8)","line":383,"loc":{"start":{"line":383,"column":21},"end":{"line":383,"column":34}}},"9":{"name":"(anonymous_9)","line":396,"loc":{"start":{"line":396,"column":19},"end":{"line":396,"column":30}}},"10":{"name":"(anonymous_10)","line":420,"loc":{"start":{"line":420,"column":19},"end":{"line":420,"column":22}}},"11":{"name":"(anonymous_11)","line":436,"loc":{"start":{"line":436,"column":10},"end":{"line":436,"column":13}}},"12":{"name":"(anonymous_12)","line":445,"loc":{"start":{"line":445,"column":10},"end":{"line":445,"column":21}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":39}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":48}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":53}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":43}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":36}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":50}},"7":{"start":{"line":18,"column":8},"end":{"line":18,"column":16}},"8":{"start":{"line":20,"column":8},"end":{"line":20,"column":32}},"9":{"start":{"line":21,"column":8},"end":{"line":25,"column":9}},"10":{"start":{"line":22,"column":12},"end":{"line":24,"column":14}},"11":{"start":{"line":27,"column":8},"end":{"line":27,"column":20}},"12":{"start":{"line":28,"column":8},"end":{"line":28,"column":38}},"13":{"start":{"line":30,"column":8},"end":{"line":32,"column":9}},"14":{"start":{"line":31,"column":12},"end":{"line":31,"column":47}},"15":{"start":{"line":34,"column":8},"end":{"line":37,"column":9}},"16":{"start":{"line":35,"column":12},"end":{"line":35,"column":61}},"17":{"start":{"line":36,"column":12},"end":{"line":36,"column":49}},"18":{"start":{"line":39,"column":8},"end":{"line":44,"column":10}},"19":{"start":{"line":46,"column":8},"end":{"line":46,"column":71}},"20":{"start":{"line":47,"column":8},"end":{"line":47,"column":67}},"21":{"start":{"line":49,"column":8},"end":{"line":51,"column":11}},"22":{"start":{"line":54,"column":8},"end":{"line":54,"column":58}},"23":{"start":{"line":56,"column":8},"end":{"line":56,"column":34}},"24":{"start":{"line":57,"column":8},"end":{"line":57,"column":83}},"25":{"start":{"line":59,"column":8},"end":{"line":66,"column":10}},"26":{"start":{"line":67,"column":8},"end":{"line":67,"column":29}},"27":{"start":{"line":68,"column":8},"end":{"line":68,"column":25}},"28":{"start":{"line":69,"column":8},"end":{"line":69,"column":31}},"29":{"start":{"line":70,"column":8},"end":{"line":70,"column":36}},"30":{"start":{"line":72,"column":8},"end":{"line":72,"column":27}},"31":{"start":{"line":74,"column":8},"end":{"line":78,"column":11}},"32":{"start":{"line":75,"column":12},"end":{"line":77,"column":13}},"33":{"start":{"line":76,"column":16},"end":{"line":76,"column":34}},"34":{"start":{"line":90,"column":8},"end":{"line":90,"column":57}},"35":{"start":{"line":90,"column":34},"end":{"line":90,"column":55}},"36":{"start":{"line":100,"column":8},"end":{"line":102,"column":9}},"37":{"start":{"line":101,"column":12},"end":{"line":101,"column":25}},"38":{"start":{"line":104,"column":8},"end":{"line":107,"column":11}},"39":{"start":{"line":109,"column":8},"end":{"line":111,"column":9}},"40":{"start":{"line":110,"column":12},"end":{"line":110,"column":32}},"41":{"start":{"line":113,"column":8},"end":{"line":113,"column":52}},"42":{"start":{"line":113,"column":27},"end":{"line":113,"column":50}},"43":{"start":{"line":115,"column":8},"end":{"line":115,"column":20}},"44":{"start":{"line":123,"column":8},"end":{"line":123,"column":23}},"45":{"start":{"line":124,"column":8},"end":{"line":124,"column":43}},"46":{"start":{"line":125,"column":8},"end":{"line":125,"column":28}},"47":{"start":{"line":128,"column":8},"end":{"line":128,"column":46}},"48":{"start":{"line":130,"column":8},"end":{"line":132,"column":9}},"49":{"start":{"line":131,"column":12},"end":{"line":131,"column":19}},"50":{"start":{"line":135,"column":8},"end":{"line":145,"column":9}},"51":{"start":{"line":136,"column":12},"end":{"line":144,"column":13}},"52":{"start":{"line":137,"column":16},"end":{"line":137,"column":50}},"53":{"start":{"line":138,"column":16},"end":{"line":138,"column":35}},"54":{"start":{"line":139,"column":16},"end":{"line":143,"column":60}},"55":{"start":{"line":147,"column":8},"end":{"line":151,"column":9}},"56":{"start":{"line":148,"column":12},"end":{"line":150,"column":42}},"57":{"start":{"line":153,"column":8},"end":{"line":155,"column":9}},"58":{"start":{"line":154,"column":12},"end":{"line":154,"column":19}},"59":{"start":{"line":158,"column":8},"end":{"line":178,"column":10}},"60":{"start":{"line":159,"column":12},"end":{"line":164,"column":13}},"61":{"start":{"line":160,"column":16},"end":{"line":162,"column":52}},"62":{"start":{"line":163,"column":16},"end":{"line":163,"column":23}},"63":{"start":{"line":165,"column":12},"end":{"line":165,"column":44}},"64":{"start":{"line":166,"column":12},"end":{"line":176,"column":13}},"65":{"start":{"line":167,"column":16},"end":{"line":175,"column":17}},"66":{"start":{"line":168,"column":20},"end":{"line":168,"column":76}},"67":{"start":{"line":170,"column":20},"end":{"line":174,"column":79}},"68":{"start":{"line":177,"column":12},"end":{"line":177,"column":42}},"69":{"start":{"line":179,"column":8},"end":{"line":179,"column":38}},"70":{"start":{"line":187,"column":8},"end":{"line":187,"column":23}},"71":{"start":{"line":188,"column":8},"end":{"line":188,"column":19}},"72":{"start":{"line":191,"column":8},"end":{"line":193,"column":9}},"73":{"start":{"line":192,"column":12},"end":{"line":192,"column":19}},"74":{"start":{"line":196,"column":8},"end":{"line":203,"column":9}},"75":{"start":{"line":197,"column":12},"end":{"line":201,"column":13}},"76":{"start":{"line":199,"column":16},"end":{"line":199,"column":35}},"77":{"start":{"line":200,"column":16},"end":{"line":200,"column":34}},"78":{"start":{"line":202,"column":12},"end":{"line":202,"column":19}},"79":{"start":{"line":206,"column":8},"end":{"line":211,"column":9}},"80":{"start":{"line":207,"column":12},"end":{"line":210,"column":13}},"81":{"start":{"line":208,"column":16},"end":{"line":208,"column":50}},"82":{"start":{"line":209,"column":16},"end":{"line":209,"column":22}},"83":{"start":{"line":213,"column":8},"end":{"line":215,"column":9}},"84":{"start":{"line":214,"column":12},"end":{"line":214,"column":50}},"85":{"start":{"line":217,"column":8},"end":{"line":221,"column":9}},"86":{"start":{"line":219,"column":12},"end":{"line":219,"column":32}},"87":{"start":{"line":220,"column":12},"end":{"line":220,"column":19}},"88":{"start":{"line":224,"column":8},"end":{"line":227,"column":9}},"89":{"start":{"line":225,"column":12},"end":{"line":225,"column":31}},"90":{"start":{"line":226,"column":12},"end":{"line":226,"column":30}},"91":{"start":{"line":229,"column":8},"end":{"line":229,"column":64}},"92":{"start":{"line":230,"column":8},"end":{"line":230,"column":116}},"93":{"start":{"line":232,"column":8},"end":{"line":232,"column":37}},"94":{"start":{"line":234,"column":8},"end":{"line":239,"column":105}},"95":{"start":{"line":241,"column":8},"end":{"line":246,"column":9}},"96":{"start":{"line":242,"column":12},"end":{"line":242,"column":38}},"97":{"start":{"line":243,"column":12},"end":{"line":245,"column":13}},"98":{"start":{"line":244,"column":16},"end":{"line":244,"column":56}},"99":{"start":{"line":248,"column":8},"end":{"line":262,"column":11}},"100":{"start":{"line":250,"column":12},"end":{"line":261,"column":13}},"101":{"start":{"line":251,"column":16},"end":{"line":259,"column":17}},"102":{"start":{"line":252,"column":20},"end":{"line":252,"column":46}},"103":{"start":{"line":254,"column":20},"end":{"line":258,"column":79}},"104":{"start":{"line":260,"column":16},"end":{"line":260,"column":46}},"105":{"start":{"line":269,"column":8},"end":{"line":269,"column":48}},"106":{"start":{"line":271,"column":8},"end":{"line":271,"column":50}},"107":{"start":{"line":273,"column":8},"end":{"line":277,"column":59}},"108":{"start":{"line":280,"column":8},"end":{"line":294,"column":11}},"109":{"start":{"line":281,"column":12},"end":{"line":285,"column":65}},"110":{"start":{"line":287,"column":12},"end":{"line":293,"column":13}},"111":{"start":{"line":289,"column":16},"end":{"line":289,"column":29}},"112":{"start":{"line":292,"column":16},"end":{"line":292,"column":40}},"113":{"start":{"line":297,"column":8},"end":{"line":329,"column":11}},"114":{"start":{"line":298,"column":12},"end":{"line":310,"column":13}},"115":{"start":{"line":299,"column":16},"end":{"line":303,"column":73}},"116":{"start":{"line":305,"column":16},"end":{"line":309,"column":75}},"117":{"start":{"line":312,"column":12},"end":{"line":323,"column":13}},"118":{"start":{"line":313,"column":16},"end":{"line":321,"column":17}},"119":{"start":{"line":314,"column":20},"end":{"line":314,"column":56}},"120":{"start":{"line":316,"column":20},"end":{"line":320,"column":79}},"121":{"start":{"line":322,"column":16},"end":{"line":322,"column":46}},"122":{"start":{"line":326,"column":12},"end":{"line":326,"column":47}},"123":{"start":{"line":328,"column":12},"end":{"line":328,"column":39}},"124":{"start":{"line":331,"column":8},"end":{"line":360,"column":11}},"125":{"start":{"line":332,"column":12},"end":{"line":336,"column":59}},"126":{"start":{"line":338,"column":12},"end":{"line":338,"column":47}},"127":{"start":{"line":340,"column":12},"end":{"line":359,"column":13}},"128":{"start":{"line":344,"column":16},"end":{"line":356,"column":23}},"129":{"start":{"line":345,"column":20},"end":{"line":354,"column":21}},"130":{"start":{"line":346,"column":24},"end":{"line":351,"column":109}},"131":{"start":{"line":352,"column":24},"end":{"line":352,"column":67}},"132":{"start":{"line":353,"column":24},"end":{"line":353,"column":54}},"133":{"start":{"line":355,"column":20},"end":{"line":355,"column":47}},"134":{"start":{"line":358,"column":16},"end":{"line":358,"column":43}},"135":{"start":{"line":362,"column":8},"end":{"line":362,"column":43}},"136":{"start":{"line":364,"column":8},"end":{"line":364,"column":26}},"137":{"start":{"line":371,"column":8},"end":{"line":375,"column":9}},"138":{"start":{"line":372,"column":12},"end":{"line":372,"column":25}},"139":{"start":{"line":374,"column":12},"end":{"line":374,"column":59}},"140":{"start":{"line":374,"column":29},"end":{"line":374,"column":52}},"141":{"start":{"line":384,"column":8},"end":{"line":384,"column":58}},"142":{"start":{"line":386,"column":8},"end":{"line":388,"column":9}},"143":{"start":{"line":387,"column":12},"end":{"line":387,"column":47}},"144":{"start":{"line":397,"column":8},"end":{"line":399,"column":9}},"145":{"start":{"line":398,"column":12},"end":{"line":398,"column":30}},"146":{"start":{"line":401,"column":8},"end":{"line":401,"column":29}},"147":{"start":{"line":403,"column":8},"end":{"line":405,"column":9}},"148":{"start":{"line":404,"column":12},"end":{"line":404,"column":30}},"149":{"start":{"line":407,"column":8},"end":{"line":407,"column":47}},"150":{"start":{"line":409,"column":8},"end":{"line":414,"column":9}},"151":{"start":{"line":410,"column":12},"end":{"line":410,"column":42}},"152":{"start":{"line":411,"column":15},"end":{"line":414,"column":9}},"153":{"start":{"line":412,"column":12},"end":{"line":412,"column":139}},"154":{"start":{"line":412,"column":55},"end":{"line":412,"column":77}},"155":{"start":{"line":413,"column":12},"end":{"line":413,"column":45}},"156":{"start":{"line":421,"column":8},"end":{"line":421,"column":46}},"157":{"start":{"line":422,"column":8},"end":{"line":422,"column":39}},"158":{"start":{"line":423,"column":8},"end":{"line":423,"column":36}},"159":{"start":{"line":424,"column":8},"end":{"line":424,"column":43}},"160":{"start":{"line":427,"column":8},"end":{"line":430,"column":9}},"161":{"start":{"line":428,"column":12},"end":{"line":428,"column":53}},"162":{"start":{"line":429,"column":12},"end":{"line":429,"column":29}},"163":{"start":{"line":437,"column":8},"end":{"line":437,"column":27}},"164":{"start":{"line":446,"column":8},"end":{"line":446,"column":20}},"165":{"start":{"line":448,"column":8},"end":{"line":452,"column":9}},"166":{"start":{"line":449,"column":12},"end":{"line":451,"column":15}},"167":{"start":{"line":450,"column":16},"end":{"line":450,"column":67}},"168":{"start":{"line":454,"column":8},"end":{"line":454,"column":47}},"169":{"start":{"line":456,"column":8},"end":{"line":529,"column":11}},"170":{"start":{"line":457,"column":12},"end":{"line":459,"column":13}},"171":{"start":{"line":458,"column":16},"end":{"line":458,"column":37}},"172":{"start":{"line":461,"column":12},"end":{"line":461,"column":39}},"173":{"start":{"line":462,"column":12},"end":{"line":475,"column":13}},"174":{"start":{"line":463,"column":16},"end":{"line":470,"column":180}},"175":{"start":{"line":471,"column":16},"end":{"line":471,"column":56}},"176":{"start":{"line":472,"column":16},"end":{"line":474,"column":19}},"177":{"start":{"line":473,"column":20},"end":{"line":473,"column":54}},"178":{"start":{"line":477,"column":12},"end":{"line":477,"column":57}},"179":{"start":{"line":478,"column":12},"end":{"line":478,"column":33}},"180":{"start":{"line":480,"column":12},"end":{"line":487,"column":15}},"181":{"start":{"line":481,"column":16},"end":{"line":483,"column":17}},"182":{"start":{"line":482,"column":20},"end":{"line":482,"column":27}},"183":{"start":{"line":484,"column":16},"end":{"line":484,"column":32}},"184":{"start":{"line":485,"column":16},"end":{"line":485,"column":35}},"185":{"start":{"line":486,"column":16},"end":{"line":486,"column":37}},"186":{"start":{"line":489,"column":12},"end":{"line":495,"column":15}},"187":{"start":{"line":490,"column":16},"end":{"line":492,"column":17}},"188":{"start":{"line":491,"column":20},"end":{"line":491,"column":27}},"189":{"start":{"line":493,"column":16},"end":{"line":493,"column":32}},"190":{"start":{"line":494,"column":16},"end":{"line":494,"column":64}},"191":{"start":{"line":497,"column":12},"end":{"line":504,"column":14}},"192":{"start":{"line":498,"column":16},"end":{"line":500,"column":17}},"193":{"start":{"line":499,"column":20},"end":{"line":499,"column":27}},"194":{"start":{"line":501,"column":16},"end":{"line":501,"column":32}},"195":{"start":{"line":502,"column":16},"end":{"line":502,"column":34}},"196":{"start":{"line":503,"column":16},"end":{"line":503,"column":44}},"197":{"start":{"line":506,"column":12},"end":{"line":528,"column":15}},"198":{"start":{"line":507,"column":16},"end":{"line":509,"column":17}},"199":{"start":{"line":508,"column":20},"end":{"line":508,"column":27}},"200":{"start":{"line":511,"column":16},"end":{"line":527,"column":17}},"201":{"start":{"line":512,"column":20},"end":{"line":524,"column":23}},"202":{"start":{"line":513,"column":24},"end":{"line":515,"column":25}},"203":{"start":{"line":514,"column":28},"end":{"line":514,"column":35}},"204":{"start":{"line":517,"column":24},"end":{"line":521,"column":25}},"205":{"start":{"line":518,"column":28},"end":{"line":518,"column":44}},"206":{"start":{"line":519,"column":28},"end":{"line":519,"column":47}},"207":{"start":{"line":520,"column":28},"end":{"line":520,"column":49}},"208":{"start":{"line":523,"column":24},"end":{"line":523,"column":35}},"209":{"start":{"line":526,"column":20},"end":{"line":526,"column":31}},"210":{"start":{"line":531,"column":8},"end":{"line":531,"column":23}},"211":{"start":{"line":536,"column":0},"end":{"line":536,"column":26}}},"branchMap":{"1":{"line":20,"type":"binary-expr","locations":[{"start":{"line":20,"column":18},"end":{"line":20,"column":25}},{"start":{"line":20,"column":29},"end":{"line":20,"column":31}}]},"2":{"line":21,"type":"if","locations":[{"start":{"line":21,"column":8},"end":{"line":21,"column":8}},{"start":{"line":21,"column":8},"end":{"line":21,"column":8}}]},"3":{"line":30,"type":"if","locations":[{"start":{"line":30,"column":8},"end":{"line":30,"column":8}},{"start":{"line":30,"column":8},"end":{"line":30,"column":8}}]},"4":{"line":34,"type":"if","locations":[{"start":{"line":34,"column":8},"end":{"line":34,"column":8}},{"start":{"line":34,"column":8},"end":{"line":34,"column":8}}]},"5":{"line":36,"type":"binary-expr","locations":[{"start":{"line":36,"column":22},"end":{"line":36,"column":29}},{"start":{"line":36,"column":33},"end":{"line":36,"column":48}}]},"6":{"line":43,"type":"binary-expr","locations":[{"start":{"line":43,"column":12},"end":{"line":43,"column":19}},{"start":{"line":43,"column":23},"end":{"line":43,"column":41}}]},"7":{"line":46,"type":"binary-expr","locations":[{"start":{"line":46,"column":38},"end":{"line":46,"column":65}},{"start":{"line":46,"column":69},"end":{"line":46,"column":70}}]},"8":{"line":47,"type":"binary-expr","locations":[{"start":{"line":47,"column":35},"end":{"line":47,"column":59}},{"start":{"line":47,"column":63},"end":{"line":47,"column":66}}]},"9":{"line":50,"type":"binary-expr","locations":[{"start":{"line":50,"column":23},"end":{"line":50,"column":45}},{"start":{"line":50,"column":49},"end":{"line":50,"column":60}}]},"10":{"line":64,"type":"binary-expr","locations":[{"start":{"line":64,"column":19},"end":{"line":64,"column":49}},{"start":{"line":64,"column":53},"end":{"line":64,"column":57}}]},"11":{"line":65,"type":"binary-expr","locations":[{"start":{"line":65,"column":19},"end":{"line":65,"column":49}},{"start":{"line":65,"column":53},"end":{"line":65,"column":54}}]},"12":{"line":75,"type":"if","locations":[{"start":{"line":75,"column":12},"end":{"line":75,"column":12}},{"start":{"line":75,"column":12},"end":{"line":75,"column":12}}]},"13":{"line":100,"type":"if","locations":[{"start":{"line":100,"column":8},"end":{"line":100,"column":8}},{"start":{"line":100,"column":8},"end":{"line":100,"column":8}}]},"14":{"line":109,"type":"if","locations":[{"start":{"line":109,"column":8},"end":{"line":109,"column":8}},{"start":{"line":109,"column":8},"end":{"line":109,"column":8}}]},"15":{"line":109,"type":"binary-expr","locations":[{"start":{"line":109,"column":12},"end":{"line":109,"column":23}},{"start":{"line":109,"column":27},"end":{"line":109,"column":76}}]},"16":{"line":130,"type":"if","locations":[{"start":{"line":130,"column":8},"end":{"line":130,"column":8}},{"start":{"line":130,"column":8},"end":{"line":130,"column":8}}]},"17":{"line":130,"type":"binary-expr","locations":[{"start":{"line":130,"column":12},"end":{"line":130,"column":16}},{"start":{"line":130,"column":20},"end":{"line":130,"column":39}}]},"18":{"line":136,"type":"if","locations":[{"start":{"line":136,"column":12},"end":{"line":136,"column":12}},{"start":{"line":136,"column":12},"end":{"line":136,"column":12}}]},"19":{"line":136,"type":"binary-expr","locations":[{"start":{"line":136,"column":16},"end":{"line":136,"column":36}},{"start":{"line":136,"column":40},"end":{"line":136,"column":70}}]},"20":{"line":147,"type":"if","locations":[{"start":{"line":147,"column":8},"end":{"line":147,"column":8}},{"start":{"line":147,"column":8},"end":{"line":147,"column":8}}]},"21":{"line":147,"type":"binary-expr","locations":[{"start":{"line":147,"column":12},"end":{"line":147,"column":15}},{"start":{"line":147,"column":19},"end":{"line":147,"column":44}}]},"22":{"line":153,"type":"if","locations":[{"start":{"line":153,"column":8},"end":{"line":153,"column":8}},{"start":{"line":153,"column":8},"end":{"line":153,"column":8}}]},"23":{"line":159,"type":"if","locations":[{"start":{"line":159,"column":12},"end":{"line":159,"column":12}},{"start":{"line":159,"column":12},"end":{"line":159,"column":12}}]},"24":{"line":166,"type":"if","locations":[{"start":{"line":166,"column":12},"end":{"line":166,"column":12}},{"start":{"line":166,"column":12},"end":{"line":166,"column":12}}]},"25":{"line":166,"type":"binary-expr","locations":[{"start":{"line":166,"column":16},"end":{"line":166,"column":21}},{"start":{"line":166,"column":25},"end":{"line":166,"column":61}}]},"26":{"line":191,"type":"if","locations":[{"start":{"line":191,"column":8},"end":{"line":191,"column":8}},{"start":{"line":191,"column":8},"end":{"line":191,"column":8}}]},"27":{"line":196,"type":"if","locations":[{"start":{"line":196,"column":8},"end":{"line":196,"column":8}},{"start":{"line":196,"column":8},"end":{"line":196,"column":8}}]},"28":{"line":197,"type":"if","locations":[{"start":{"line":197,"column":12},"end":{"line":197,"column":12}},{"start":{"line":197,"column":12},"end":{"line":197,"column":12}}]},"29":{"line":207,"type":"if","locations":[{"start":{"line":207,"column":12},"end":{"line":207,"column":12}},{"start":{"line":207,"column":12},"end":{"line":207,"column":12}}]},"30":{"line":213,"type":"if","locations":[{"start":{"line":213,"column":8},"end":{"line":213,"column":8}},{"start":{"line":213,"column":8},"end":{"line":213,"column":8}}]},"31":{"line":213,"type":"binary-expr","locations":[{"start":{"line":213,"column":12},"end":{"line":213,"column":23}},{"start":{"line":213,"column":27},"end":{"line":213,"column":81}}]},"32":{"line":217,"type":"if","locations":[{"start":{"line":217,"column":8},"end":{"line":217,"column":8}},{"start":{"line":217,"column":8},"end":{"line":217,"column":8}}]},"33":{"line":224,"type":"if","locations":[{"start":{"line":224,"column":8},"end":{"line":224,"column":8}},{"start":{"line":224,"column":8},"end":{"line":224,"column":8}}]},"34":{"line":224,"type":"binary-expr","locations":[{"start":{"line":224,"column":12},"end":{"line":224,"column":24}},{"start":{"line":224,"column":28},"end":{"line":224,"column":76}}]},"35":{"line":230,"type":"binary-expr","locations":[{"start":{"line":230,"column":27},"end":{"line":230,"column":85}},{"start":{"line":230,"column":89},"end":{"line":230,"column":91}}]},"36":{"line":241,"type":"if","locations":[{"start":{"line":241,"column":8},"end":{"line":241,"column":8}},{"start":{"line":241,"column":8},"end":{"line":241,"column":8}}]},"37":{"line":243,"type":"if","locations":[{"start":{"line":243,"column":12},"end":{"line":243,"column":12}},{"start":{"line":243,"column":12},"end":{"line":243,"column":12}}]},"38":{"line":250,"type":"if","locations":[{"start":{"line":250,"column":12},"end":{"line":250,"column":12}},{"start":{"line":250,"column":12},"end":{"line":250,"column":12}}]},"39":{"line":287,"type":"if","locations":[{"start":{"line":287,"column":12},"end":{"line":287,"column":12}},{"start":{"line":287,"column":12},"end":{"line":287,"column":12}}]},"40":{"line":298,"type":"if","locations":[{"start":{"line":298,"column":12},"end":{"line":298,"column":12}},{"start":{"line":298,"column":12},"end":{"line":298,"column":12}}]},"41":{"line":312,"type":"if","locations":[{"start":{"line":312,"column":12},"end":{"line":312,"column":12}},{"start":{"line":312,"column":12},"end":{"line":312,"column":12}}]},"42":{"line":340,"type":"if","locations":[{"start":{"line":340,"column":12},"end":{"line":340,"column":12}},{"start":{"line":340,"column":12},"end":{"line":340,"column":12}}]},"43":{"line":345,"type":"if","locations":[{"start":{"line":345,"column":20},"end":{"line":345,"column":20}},{"start":{"line":345,"column":20},"end":{"line":345,"column":20}}]},"44":{"line":371,"type":"if","locations":[{"start":{"line":371,"column":8},"end":{"line":371,"column":8}},{"start":{"line":371,"column":8},"end":{"line":371,"column":8}}]},"45":{"line":386,"type":"if","locations":[{"start":{"line":386,"column":8},"end":{"line":386,"column":8}},{"start":{"line":386,"column":8},"end":{"line":386,"column":8}}]},"46":{"line":397,"type":"if","locations":[{"start":{"line":397,"column":8},"end":{"line":397,"column":8}},{"start":{"line":397,"column":8},"end":{"line":397,"column":8}}]},"47":{"line":403,"type":"if","locations":[{"start":{"line":403,"column":8},"end":{"line":403,"column":8}},{"start":{"line":403,"column":8},"end":{"line":403,"column":8}}]},"48":{"line":409,"type":"if","locations":[{"start":{"line":409,"column":8},"end":{"line":409,"column":8}},{"start":{"line":409,"column":8},"end":{"line":409,"column":8}}]},"49":{"line":411,"type":"if","locations":[{"start":{"line":411,"column":15},"end":{"line":411,"column":15}},{"start":{"line":411,"column":15},"end":{"line":411,"column":15}}]},"50":{"line":448,"type":"if","locations":[{"start":{"line":448,"column":8},"end":{"line":448,"column":8}},{"start":{"line":448,"column":8},"end":{"line":448,"column":8}}]},"51":{"line":448,"type":"binary-expr","locations":[{"start":{"line":448,"column":12},"end":{"line":448,"column":21}},{"start":{"line":448,"column":25},"end":{"line":448,"column":54}}]},"52":{"line":457,"type":"if","locations":[{"start":{"line":457,"column":12},"end":{"line":457,"column":12}},{"start":{"line":457,"column":12},"end":{"line":457,"column":12}}]},"53":{"line":462,"type":"if","locations":[{"start":{"line":462,"column":12},"end":{"line":462,"column":12}},{"start":{"line":462,"column":12},"end":{"line":462,"column":12}}]},"54":{"line":462,"type":"binary-expr","locations":[{"start":{"line":462,"column":16},"end":{"line":462,"column":29}},{"start":{"line":462,"column":33},"end":{"line":462,"column":57}}]},"55":{"line":467,"type":"binary-expr","locations":[{"start":{"line":467,"column":30},"end":{"line":467,"column":42}},{"start":{"line":467,"column":46},"end":{"line":467,"column":48}}]},"56":{"line":468,"type":"binary-expr","locations":[{"start":{"line":468,"column":30},"end":{"line":468,"column":42}},{"start":{"line":468,"column":46},"end":{"line":468,"column":48}}]},"57":{"line":470,"type":"binary-expr","locations":[{"start":{"line":470,"column":140},"end":{"line":470,"column":152}},{"start":{"line":470,"column":156},"end":{"line":470,"column":158}}]},"58":{"line":470,"type":"binary-expr","locations":[{"start":{"line":470,"column":160},"end":{"line":470,"column":172}},{"start":{"line":470,"column":176},"end":{"line":470,"column":178}}]},"59":{"line":481,"type":"if","locations":[{"start":{"line":481,"column":16},"end":{"line":481,"column":16}},{"start":{"line":481,"column":16},"end":{"line":481,"column":16}}]},"60":{"line":490,"type":"if","locations":[{"start":{"line":490,"column":16},"end":{"line":490,"column":16}},{"start":{"line":490,"column":16},"end":{"line":490,"column":16}}]},"61":{"line":498,"type":"if","locations":[{"start":{"line":498,"column":16},"end":{"line":498,"column":16}},{"start":{"line":498,"column":16},"end":{"line":498,"column":16}}]},"62":{"line":507,"type":"if","locations":[{"start":{"line":507,"column":16},"end":{"line":507,"column":16}},{"start":{"line":507,"column":16},"end":{"line":507,"column":16}}]},"63":{"line":511,"type":"if","locations":[{"start":{"line":511,"column":16},"end":{"line":511,"column":16}},{"start":{"line":511,"column":16},"end":{"line":511,"column":16}}]},"64":{"line":513,"type":"if","locations":[{"start":{"line":513,"column":24},"end":{"line":513,"column":24}},{"start":{"line":513,"column":24},"end":{"line":513,"column":24}}]},"65":{"line":517,"type":"if","locations":[{"start":{"line":517,"column":24},"end":{"line":517,"column":24}},{"start":{"line":517,"column":24},"end":{"line":517,"column":24}}]}},"code":["'use strict';","","const EventEmitter = require('events');","const PoolResource = require('./pool-resource');","const SMTPConnection = require('../smtp-connection');","const wellKnown = require('../well-known');","const shared = require('../shared');","const packageData = require('../../package.json');","","/**"," * Creates a SMTP pool transport object for Nodemailer"," *"," * @constructor"," * @param {Object} options SMTP Connection options"," */","class SMTPPool extends EventEmitter {","    constructor(options) {","        super();","","        options = options || {};","        if (typeof options === 'string') {","            options = {","                url: options","            };","        }","","        let urlData;","        let service = options.service;","","        if (typeof options.getSocket === 'function') {","            this.getSocket = options.getSocket;","        }","","        if (options.url) {","            urlData = shared.parseConnectionUrl(options.url);","            service = service || urlData.service;","        }","","        this.options = shared.assign(","            false, // create new object","            options, // regular options","            urlData, // url options","            service && wellKnown(service) // wellknown options","        );","","        this.options.maxConnections = this.options.maxConnections || 5;","        this.options.maxMessages = this.options.maxMessages || 100;","","        this.logger = shared.getLogger(this.options, {","            component: this.options.component || 'smtp-pool'","        });","","        // temporary object","        let connection = new SMTPConnection(this.options);","","        this.name = 'SMTP (pool)';","        this.version = packageData.version + '[client:' + connection.version + ']';","","        this._rateLimit = {","            counter: 0,","            timeout: null,","            waiting: [],","            checkpoint: false,","            delta: Number(this.options.rateDelta) || 1000,","            limit: Number(this.options.rateLimit) || 0","        };","        this._closed = false;","        this._queue = [];","        this._connections = [];","        this._connectionCounter = 0;","","        this.idling = true;","","        setImmediate(() => {","            if (this.idling) {","                this.emit('idle');","            }","        });","    }","","    /**","     * Placeholder function for creating proxy sockets. This method immediatelly returns","     * without a socket","     *","     * @param {Object} options Connection options","     * @param {Function} callback Callback function to run with the socket keys","     */","    getSocket(options, callback) {","        // return immediatelly","        return setImmediate(() => callback(null, false));","    }","","    /**","     * Queues an e-mail to be sent using the selected settings","     *","     * @param {Object} mail Mail object","     * @param {Function} callback Callback function","     */","    send(mail, callback) {","        if (this._closed) {","            return false;","        }","","        this._queue.push({","            mail,","            callback","        });","","        if (this.idling && this._queue.length >= this.options.maxConnections) {","            this.idling = false;","        }","","        setImmediate(() => this._processMessages());","","        return true;","    }","","    /**","     * Closes all connections in the pool. If there is a message being sent, the connection","     * is closed later","     */","    close() {","        let connection;","        let len = this._connections.length;","        this._closed = true;","","        // clear rate limit timer if it exists","        clearTimeout(this._rateLimit.timeout);","","        if (!len && !this._queue.length) {","            return;","        }","","        // remove all available connections","        for (let i = len - 1; i >= 0; i--) {","            if (this._connections[i] && this._connections[i].available) {","                connection = this._connections[i];","                connection.close();","                this.logger.info({","                    tnx: 'connection',","                    cid: connection.id,","                    action: 'removed'","                }, 'Connection #%s removed', connection.id);","            }","        }","","        if (len && !this._connections.length) {","            this.logger.debug({","                tnx: 'connection'","            }, 'All connections removed');","        }","","        if (!this._queue.length) {","            return;","        }","","        // make sure that entire queue would be cleaned","        let invokeCallbacks = () => {","            if (!this._queue.length) {","                this.logger.debug({","                    tnx: 'connection'","                }, 'Pending queue entries cleared');","                return;","            }","            let entry = this._queue.shift();","            if (entry && typeof entry.callback === 'function') {","                try {","                    entry.callback(new Error('Connection pool was closed'));","                } catch (E) {","                    this.logger.error({","                        err: E,","                        tnx: 'callback',","                        cid: connection.id","                    }, 'Callback error for #%s: %s', connection.id, E.message);","                }","            }","            setImmediate(invokeCallbacks);","        };","        setImmediate(invokeCallbacks);","    }","","    /**","     * Check the queue and available connections. If there is a message to be sent and there is","     * an available connection, then use this connection to send the mail","     */","    _processMessages() {","        let connection;","        let i, len;","","        // do nothing if already closed","        if (this._closed) {","            return;","        }","","        // do nothing if queue is empty","        if (!this._queue.length) {","            if (!this.idling) {","                // no pending jobs","                this.idling = true;","                this.emit('idle');","            }","            return;","        }","","        // find first available connection","        for (i = 0, len = this._connections.length; i < len; i++) {","            if (this._connections[i].available) {","                connection = this._connections[i];","                break;","            }","        }","","        if (!connection && this._connections.length < this.options.maxConnections) {","            connection = this._createConnection();","        }","","        if (!connection) {","            // no more free connection slots available","            this.idling = false;","            return;","        }","","        // check if there is free space in the processing queue","        if (!this.idling && this._queue.length < this.options.maxConnections) {","            this.idling = true;","            this.emit('idle');","        }","","        let entry = connection.queueEntry = this._queue.shift();","        entry.messageId = (connection.queueEntry.mail.message.getHeader('message-id') || '').replace(/[<>\\s]/g, '');","","        connection.available = false;","","        this.logger.debug({","            tnx: 'pool',","            cid: connection.id,","            messageId: entry.messageId,","            action: 'assign'","        }, 'Assigned message <%s> to #%s (%s)', entry.messageId, connection.id, connection.messages + 1);","","        if (this._rateLimit.limit) {","            this._rateLimit.counter++;","            if (!this._rateLimit.checkpoint) {","                this._rateLimit.checkpoint = Date.now();","            }","        }","","        connection.send(entry.mail, (err, info) => {","            // only process callback if current handler is not changed","            if (entry === connection.queueEntry) {","                try {","                    entry.callback(err, info);","                } catch (E) {","                    this.logger.error({","                        err: E,","                        tnx: 'callback',","                        cid: connection.id","                    }, 'Callback error for #%s: %s', connection.id, E.message);","                }","                connection.queueEntry = false;","            }","        });","    }","","    /**","     * Creates a new pool resource","     */","    _createConnection() {","        let connection = new PoolResource(this);","","        connection.id = ++this._connectionCounter;","","        this.logger.info({","            tnx: 'pool',","            cid: connection.id,","            action: 'conection'","        }, 'Created new pool resource #%s', connection.id);","","        // resource comes available","        connection.on('available', () => {","            this.logger.debug({","                tnx: 'connection',","                cid: connection.id,","                action: 'available'","            }, 'Connection #%s became available', connection.id);","","            if (this._closed) {","                // if already closed run close() that will remove this connections from connections list","                this.close();","            } else {","                // check if there's anything else to send","                this._processMessages();","            }","        });","","        // resource is terminated with an error","        connection.once('error', err => {","            if (err.code !== 'EMAXLIMIT') {","                this.logger.error({","                    err,","                    tnx: 'pool',","                    cid: connection.id","                }, 'Pool Error for #%s: %s', connection.id, err.message);","            } else {","                this.logger.debug({","                    tnx: 'pool',","                    cid: connection.id,","                    action: 'maxlimit'","                }, 'Max messages limit exchausted for #%s', connection.id);","            }","","            if (connection.queueEntry) {","                try {","                    connection.queueEntry.callback(err);","                } catch (E) {","                    this.logger.error({","                        err: E,","                        tnx: 'callback',","                        cid: connection.id","                    }, 'Callback error for #%s: %s', connection.id, E.message);","                }","                connection.queueEntry = false;","            }","","            // remove the erroneus connection from connections list","            this._removeConnection(connection);","","            this._continueProcessing();","        });","","        connection.once('close', () => {","            this.logger.info({","                tnx: 'connection',","                cid: connection.id,","                action: 'closed'","            }, 'Connection #%s was closed', connection.id);","","            this._removeConnection(connection);","","            if (connection.queueEntry) {","                // If the connection closed when sending, add the message to the queue again","                // Note that we must wait a bit.. because the callback of the 'error' handler might be called","                // in the next event loop","                setTimeout(() => {","                    if (connection.queueEntry) {","                        this.logger.debug({","                            tnx: 'pool',","                            cid: connection.id,","                            messageId: connection.queueEntry.messageId,","                            action: 'requeue'","                        }, 'Re-queued message <%s> for #%s', connection.queueEntry.messageId, connection.id);","                        this._queue.unshift(connection.queueEntry);","                        connection.queueEntry = false;","                    }","                    this._continueProcessing();","                }, 50);","            } else {","                this._continueProcessing();","            }","        });","","        this._connections.push(connection);","","        return connection;","    }","","    /**","     * Continue to process message if the pool hasn't closed","     */","    _continueProcessing() {","        if (this._closed) {","            this.close();","        } else {","            setTimeout(() => this._processMessages(), 100);","        }","    }","","    /**","     * Remove resource from pool","     *","     * @param {Object} connection The PoolResource to remove","     */","    _removeConnection(connection) {","        let index = this._connections.indexOf(connection);","","        if (index !== -1) {","            this._connections.splice(index, 1);","        }","    }","","    /**","     * Checks if connections have hit current rate limit and if so, queues the availability callback","     *","     * @param {Function} callback Callback function to run once rate limiter has been cleared","     */","    _checkRateLimit(callback) {","        if (!this._rateLimit.limit) {","            return callback();","        }","","        let now = Date.now();","","        if (this._rateLimit.counter < this._rateLimit.limit) {","            return callback();","        }","","        this._rateLimit.waiting.push(callback);","","        if (this._rateLimit.checkpoint <= now - this._rateLimit.delta) {","            return this._clearRateLimit();","        } else if (!this._rateLimit.timeout) {","            this._rateLimit.timeout = setTimeout(() => this._clearRateLimit(), this._rateLimit.delta - (now - this._rateLimit.checkpoint));","            this._rateLimit.checkpoint = now;","        }","    }","","    /**","     * Clears current rate limit limitation and runs paused callback","     */","    _clearRateLimit() {","        clearTimeout(this._rateLimit.timeout);","        this._rateLimit.timeout = null;","        this._rateLimit.counter = 0;","        this._rateLimit.checkpoint = false;","","        // resume all paused connections","        while (this._rateLimit.waiting.length) {","            let cb = this._rateLimit.waiting.shift();","            setImmediate(cb);","        }","    }","","    /**","     * Returns true if there are free slots in the queue","     */","    isIdle() {","        return this.idling;","    }","","    /**","     * Verifies SMTP configuration","     *","     * @param {Function} callback Callback function","     */","    verify(callback) {","        let promise;","","        if (!callback && typeof Promise === 'function') {","            promise = new Promise((resolve, reject) => {","                callback = shared.callbackPromise(resolve, reject);","            });","        }","","        let auth = new PoolResource(this).auth;","","        this.getSocket(this.options, (err, socketOptions) => {","            if (err) {","                return callback(err);","            }","","            let options = this.options;","            if (socketOptions && socketOptions.connection) {","                this.logger.info({","                    tnx: 'proxy',","                    remoteAddress: socketOptions.connection.remoteAddress,","                    remotePort: socketOptions.connection.remotePort,","                    destHost: options.host || '',","                    destPort: options.port || '',","                    action: 'connected'","                }, 'Using proxied socket from %s:%s to %s:%s', socketOptions.connection.remoteAddress, socketOptions.connection.remotePort, options.host || '', options.port || '');","                options = shared.assign(false, options);","                Object.keys(socketOptions).forEach(key => {","                    options[key] = socketOptions[key];","                });","            }","","            let connection = new SMTPConnection(options);","            let returned = false;","","            connection.once('error', err => {","                if (returned) {","                    return;","                }","                returned = true;","                connection.close();","                return callback(err);","            });","","            connection.once('end', () => {","                if (returned) {","                    return;","                }","                returned = true;","                return callback(new Error('Connection closed'));","            });","","            let finalize = () => {","                if (returned) {","                    return;","                }","                returned = true;","                connection.quit();","                return callback(null, true);","            };","","            connection.connect(() => {","                if (returned) {","                    return;","                }","","                if (auth) {","                    connection.login(auth, err => {","                        if (returned) {","                            return;","                        }","","                        if (err) {","                            returned = true;","                            connection.close();","                            return callback(err);","                        }","","                        finalize();","                    });","                } else {","                    finalize();","                }","            });","        });","","        return promise;","    }","}","","// expose to the world","module.exports = SMTPPool;",""],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"18":0,"20":0,"21":0,"22":0,"27":0,"28":0,"30":0,"31":0,"34":0,"35":0,"36":0,"39":0,"46":0,"47":0,"49":0,"54":0,"56":0,"57":0,"59":0,"67":0,"68":0,"69":0,"70":0,"72":0,"74":0,"75":0,"76":0,"90":0,"100":0,"101":0,"104":0,"109":0,"110":0,"113":0,"115":0,"123":0,"124":0,"125":0,"128":0,"130":0,"131":0,"135":0,"136":0,"137":0,"138":0,"139":0,"147":0,"148":0,"153":0,"154":0,"158":0,"159":0,"160":0,"163":0,"165":0,"166":0,"167":0,"168":0,"170":0,"177":0,"179":0,"187":0,"188":0,"191":0,"192":0,"196":0,"197":0,"199":0,"200":0,"202":0,"206":0,"207":0,"208":0,"209":0,"213":0,"214":0,"217":0,"219":0,"220":0,"224":0,"225":0,"226":0,"229":0,"230":0,"232":0,"234":0,"241":0,"242":0,"243":0,"244":0,"248":0,"250":0,"251":0,"252":0,"254":0,"260":0,"269":0,"271":0,"273":0,"280":0,"281":0,"287":0,"289":0,"292":0,"297":0,"298":0,"299":0,"305":0,"312":0,"313":0,"314":0,"316":0,"322":0,"326":0,"328":0,"331":0,"332":0,"338":0,"340":0,"344":0,"345":0,"346":0,"352":0,"353":0,"355":0,"358":0,"362":0,"364":0,"371":0,"372":0,"374":0,"384":0,"386":0,"387":0,"397":0,"398":0,"401":0,"403":0,"404":0,"407":0,"409":0,"410":0,"411":0,"412":0,"413":0,"421":0,"422":0,"423":0,"424":0,"427":0,"428":0,"429":0,"437":0,"446":0,"448":0,"449":0,"450":0,"454":0,"456":0,"457":0,"458":0,"461":0,"462":0,"463":0,"471":0,"472":0,"473":0,"477":0,"478":0,"480":0,"481":0,"482":0,"484":0,"485":0,"486":0,"489":0,"490":0,"491":0,"493":0,"494":0,"497":0,"498":0,"499":0,"501":0,"502":0,"503":0,"506":0,"507":0,"508":0,"511":0,"512":0,"513":0,"514":0,"517":0,"518":0,"519":0,"520":0,"523":0,"526":0,"531":0,"536":1}},"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/smtp-pool/pool-resource.js":{"path":"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/smtp-pool/pool-resource.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"(anonymous_1)","line":15,"loc":{"start":{"line":15,"column":15},"end":{"line":15,"column":22}}},"2":{"name":"(anonymous_2)","line":63,"loc":{"start":{"line":63,"column":11},"end":{"line":63,"column":22}}},"3":{"name":"(anonymous_3)","line":154,"loc":{"start":{"line":154,"column":8},"end":{"line":154,"column":25}}},"4":{"name":"(anonymous_4)","line":218,"loc":{"start":{"line":218,"column":9},"end":{"line":218,"column":12}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":53}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":43}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":38}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":39}},"5":{"start":{"line":16,"column":8},"end":{"line":16,"column":16}},"6":{"start":{"line":18,"column":8},"end":{"line":18,"column":25}},"7":{"start":{"line":19,"column":8},"end":{"line":19,"column":36}},"8":{"start":{"line":20,"column":8},"end":{"line":20,"column":39}},"9":{"start":{"line":22,"column":8},"end":{"line":49,"column":9}},"10":{"start":{"line":23,"column":12},"end":{"line":48,"column":13}},"11":{"start":{"line":26,"column":24},"end":{"line":26,"column":81}},"12":{"start":{"line":27,"column":24},"end":{"line":27,"column":143}},"13":{"start":{"line":28,"column":24},"end":{"line":33,"column":26}},"14":{"start":{"line":34,"column":24},"end":{"line":34,"column":91}},"15":{"start":{"line":34,"column":52},"end":{"line":34,"column":89}},"16":{"start":{"line":35,"column":24},"end":{"line":35,"column":75}},"17":{"start":{"line":35,"column":50},"end":{"line":35,"column":73}},"18":{"start":{"line":36,"column":24},"end":{"line":36,"column":30}},"19":{"start":{"line":39,"column":20},"end":{"line":47,"column":22}},"20":{"start":{"line":51,"column":8},"end":{"line":51,"column":33}},"21":{"start":{"line":52,"column":8},"end":{"line":52,"column":32}},"22":{"start":{"line":54,"column":8},"end":{"line":54,"column":26}},"23":{"start":{"line":55,"column":8},"end":{"line":55,"column":30}},"24":{"start":{"line":64,"column":8},"end":{"line":145,"column":11}},"25":{"start":{"line":65,"column":12},"end":{"line":67,"column":13}},"26":{"start":{"line":66,"column":16},"end":{"line":66,"column":37}},"27":{"start":{"line":69,"column":12},"end":{"line":69,"column":33}},"28":{"start":{"line":70,"column":12},"end":{"line":70,"column":39}},"29":{"start":{"line":71,"column":12},"end":{"line":85,"column":13}},"30":{"start":{"line":72,"column":16},"end":{"line":79,"column":180}},"31":{"start":{"line":81,"column":16},"end":{"line":81,"column":49}},"32":{"start":{"line":82,"column":16},"end":{"line":84,"column":19}},"33":{"start":{"line":83,"column":20},"end":{"line":83,"column":54}},"34":{"start":{"line":87,"column":12},"end":{"line":87,"column":58}},"35":{"start":{"line":89,"column":12},"end":{"line":96,"column":15}},"36":{"start":{"line":90,"column":16},"end":{"line":90,"column":40}},"37":{"start":{"line":91,"column":16},"end":{"line":93,"column":17}},"38":{"start":{"line":92,"column":20},"end":{"line":92,"column":27}},"39":{"start":{"line":94,"column":16},"end":{"line":94,"column":32}},"40":{"start":{"line":95,"column":16},"end":{"line":95,"column":37}},"41":{"start":{"line":98,"column":12},"end":{"line":116,"column":15}},"42":{"start":{"line":99,"column":16},"end":{"line":99,"column":29}},"43":{"start":{"line":100,"column":16},"end":{"line":102,"column":17}},"44":{"start":{"line":101,"column":20},"end":{"line":101,"column":27}},"45":{"start":{"line":103,"column":16},"end":{"line":103,"column":32}},"46":{"start":{"line":104,"column":16},"end":{"line":115,"column":33}},"47":{"start":{"line":105,"column":20},"end":{"line":107,"column":21}},"48":{"start":{"line":106,"column":24},"end":{"line":106,"column":31}},"49":{"start":{"line":109,"column":20},"end":{"line":109,"column":67}},"50":{"start":{"line":110,"column":20},"end":{"line":113,"column":21}},"51":{"start":{"line":112,"column":24},"end":{"line":112,"column":42}},"52":{"start":{"line":114,"column":20},"end":{"line":114,"column":34}},"53":{"start":{"line":118,"column":12},"end":{"line":144,"column":15}},"54":{"start":{"line":119,"column":16},"end":{"line":121,"column":17}},"55":{"start":{"line":120,"column":20},"end":{"line":120,"column":27}},"56":{"start":{"line":123,"column":16},"end":{"line":143,"column":17}},"57":{"start":{"line":124,"column":20},"end":{"line":138,"column":23}},"58":{"start":{"line":125,"column":24},"end":{"line":127,"column":25}},"59":{"start":{"line":126,"column":28},"end":{"line":126,"column":35}},"60":{"start":{"line":128,"column":24},"end":{"line":128,"column":40}},"61":{"start":{"line":130,"column":24},"end":{"line":134,"column":25}},"62":{"start":{"line":131,"column":28},"end":{"line":131,"column":52}},"63":{"start":{"line":132,"column":28},"end":{"line":132,"column":52}},"64":{"start":{"line":133,"column":28},"end":{"line":133,"column":49}},"65":{"start":{"line":136,"column":24},"end":{"line":136,"column":47}},"66":{"start":{"line":137,"column":24},"end":{"line":137,"column":45}},"67":{"start":{"line":140,"column":20},"end":{"line":140,"column":36}},"68":{"start":{"line":141,"column":20},"end":{"line":141,"column":43}},"69":{"start":{"line":142,"column":20},"end":{"line":142,"column":48}},"70":{"start":{"line":155,"column":8},"end":{"line":162,"column":9}},"71":{"start":{"line":156,"column":12},"end":{"line":161,"column":15}},"72":{"start":{"line":157,"column":16},"end":{"line":159,"column":17}},"73":{"start":{"line":158,"column":20},"end":{"line":158,"column":41}},"74":{"start":{"line":160,"column":16},"end":{"line":160,"column":49}},"75":{"start":{"line":164,"column":8},"end":{"line":164,"column":50}},"76":{"start":{"line":165,"column":8},"end":{"line":165,"column":49}},"77":{"start":{"line":167,"column":8},"end":{"line":167,"column":54}},"78":{"start":{"line":168,"column":8},"end":{"line":170,"column":9}},"79":{"start":{"line":169,"column":12},"end":{"line":169,"column":79}},"80":{"start":{"line":171,"column":8},"end":{"line":175,"column":94}},"81":{"start":{"line":177,"column":8},"end":{"line":179,"column":9}},"82":{"start":{"line":178,"column":12},"end":{"line":178,"column":41}},"83":{"start":{"line":181,"column":8},"end":{"line":212,"column":11}},"84":{"start":{"line":182,"column":12},"end":{"line":182,"column":28}},"85":{"start":{"line":184,"column":12},"end":{"line":188,"column":13}},"86":{"start":{"line":185,"column":16},"end":{"line":185,"column":40}},"87":{"start":{"line":186,"column":16},"end":{"line":186,"column":40}},"88":{"start":{"line":187,"column":16},"end":{"line":187,"column":37}},"89":{"start":{"line":190,"column":12},"end":{"line":193,"column":14}},"90":{"start":{"line":194,"column":12},"end":{"line":194,"column":39}},"91":{"start":{"line":196,"column":12},"end":{"line":209,"column":15}},"92":{"start":{"line":197,"column":16},"end":{"line":197,"column":24}},"93":{"start":{"line":198,"column":16},"end":{"line":208,"column":17}},"94":{"start":{"line":199,"column":20},"end":{"line":199,"column":58}},"95":{"start":{"line":200,"column":20},"end":{"line":200,"column":43}},"96":{"start":{"line":201,"column":20},"end":{"line":201,"column":44}},"97":{"start":{"line":202,"column":20},"end":{"line":202,"column":44}},"98":{"start":{"line":204,"column":20},"end":{"line":207,"column":23}},"99":{"start":{"line":205,"column":24},"end":{"line":205,"column":46}},"100":{"start":{"line":206,"column":24},"end":{"line":206,"column":47}},"101":{"start":{"line":211,"column":12},"end":{"line":211,"column":33}},"102":{"start":{"line":219,"column":8},"end":{"line":219,"column":32}},"103":{"start":{"line":220,"column":8},"end":{"line":222,"column":9}},"104":{"start":{"line":221,"column":12},"end":{"line":221,"column":50}},"105":{"start":{"line":223,"column":8},"end":{"line":225,"column":9}},"106":{"start":{"line":224,"column":12},"end":{"line":224,"column":36}},"107":{"start":{"line":226,"column":8},"end":{"line":226,"column":27}},"108":{"start":{"line":230,"column":0},"end":{"line":230,"column":30}}},"branchMap":{"1":{"line":22,"type":"if","locations":[{"start":{"line":22,"column":8},"end":{"line":22,"column":8}},{"start":{"line":22,"column":8},"end":{"line":22,"column":8}}]},"2":{"line":23,"type":"switch","locations":[{"start":{"line":24,"column":16},"end":{"line":37,"column":21}},{"start":{"line":38,"column":16},"end":{"line":47,"column":22}}]},"3":{"line":23,"type":"binary-expr","locations":[{"start":{"line":23,"column":21},"end":{"line":23,"column":43}},{"start":{"line":23,"column":47},"end":{"line":23,"column":49}}]},"4":{"line":27,"type":"binary-expr","locations":[{"start":{"line":27,"column":51},"end":{"line":27,"column":67}},{"start":{"line":27,"column":71},"end":{"line":27,"column":114}},{"start":{"line":27,"column":118},"end":{"line":27,"column":142}}]},"5":{"line":43,"type":"binary-expr","locations":[{"start":{"line":43,"column":34},"end":{"line":43,"column":56}},{"start":{"line":43,"column":60},"end":{"line":43,"column":62}}]},"6":{"line":46,"type":"binary-expr","locations":[{"start":{"line":46,"column":32},"end":{"line":46,"column":85}},{"start":{"line":46,"column":89},"end":{"line":46,"column":94}}]},"7":{"line":46,"type":"binary-expr","locations":[{"start":{"line":46,"column":33},"end":{"line":46,"column":57}},{"start":{"line":46,"column":61},"end":{"line":46,"column":63}}]},"8":{"line":65,"type":"if","locations":[{"start":{"line":65,"column":12},"end":{"line":65,"column":12}},{"start":{"line":65,"column":12},"end":{"line":65,"column":12}}]},"9":{"line":71,"type":"if","locations":[{"start":{"line":71,"column":12},"end":{"line":71,"column":12}},{"start":{"line":71,"column":12},"end":{"line":71,"column":12}}]},"10":{"line":71,"type":"binary-expr","locations":[{"start":{"line":71,"column":16},"end":{"line":71,"column":29}},{"start":{"line":71,"column":33},"end":{"line":71,"column":57}}]},"11":{"line":76,"type":"binary-expr","locations":[{"start":{"line":76,"column":30},"end":{"line":76,"column":42}},{"start":{"line":76,"column":46},"end":{"line":76,"column":48}}]},"12":{"line":77,"type":"binary-expr","locations":[{"start":{"line":77,"column":30},"end":{"line":77,"column":42}},{"start":{"line":77,"column":46},"end":{"line":77,"column":48}}]},"13":{"line":79,"type":"binary-expr","locations":[{"start":{"line":79,"column":140},"end":{"line":79,"column":152}},{"start":{"line":79,"column":156},"end":{"line":79,"column":158}}]},"14":{"line":79,"type":"binary-expr","locations":[{"start":{"line":79,"column":160},"end":{"line":79,"column":172}},{"start":{"line":79,"column":176},"end":{"line":79,"column":178}}]},"15":{"line":91,"type":"if","locations":[{"start":{"line":91,"column":16},"end":{"line":91,"column":16}},{"start":{"line":91,"column":16},"end":{"line":91,"column":16}}]},"16":{"line":100,"type":"if","locations":[{"start":{"line":100,"column":16},"end":{"line":100,"column":16}},{"start":{"line":100,"column":16},"end":{"line":100,"column":16}}]},"17":{"line":105,"type":"if","locations":[{"start":{"line":105,"column":20},"end":{"line":105,"column":20}},{"start":{"line":105,"column":20},"end":{"line":105,"column":20}}]},"18":{"line":110,"type":"if","locations":[{"start":{"line":110,"column":20},"end":{"line":110,"column":20}},{"start":{"line":110,"column":20},"end":{"line":110,"column":20}}]},"19":{"line":110,"type":"binary-expr","locations":[{"start":{"line":110,"column":24},"end":{"line":110,"column":39}},{"start":{"line":110,"column":43},"end":{"line":110,"column":66}},{"start":{"line":110,"column":70},"end":{"line":110,"column":103}}]},"20":{"line":119,"type":"if","locations":[{"start":{"line":119,"column":16},"end":{"line":119,"column":16}},{"start":{"line":119,"column":16},"end":{"line":119,"column":16}}]},"21":{"line":123,"type":"if","locations":[{"start":{"line":123,"column":16},"end":{"line":123,"column":16}},{"start":{"line":123,"column":16},"end":{"line":123,"column":16}}]},"22":{"line":125,"type":"if","locations":[{"start":{"line":125,"column":24},"end":{"line":125,"column":24}},{"start":{"line":125,"column":24},"end":{"line":125,"column":24}}]},"23":{"line":130,"type":"if","locations":[{"start":{"line":130,"column":24},"end":{"line":130,"column":24}},{"start":{"line":130,"column":24},"end":{"line":130,"column":24}}]},"24":{"line":155,"type":"if","locations":[{"start":{"line":155,"column":8},"end":{"line":155,"column":8}},{"start":{"line":155,"column":8},"end":{"line":155,"column":8}}]},"25":{"line":157,"type":"if","locations":[{"start":{"line":157,"column":16},"end":{"line":157,"column":16}},{"start":{"line":157,"column":16},"end":{"line":157,"column":16}}]},"26":{"line":167,"type":"binary-expr","locations":[{"start":{"line":167,"column":35},"end":{"line":167,"column":46}},{"start":{"line":167,"column":50},"end":{"line":167,"column":52}}]},"27":{"line":168,"type":"if","locations":[{"start":{"line":168,"column":8},"end":{"line":168,"column":8}},{"start":{"line":168,"column":8},"end":{"line":168,"column":8}}]},"28":{"line":177,"type":"if","locations":[{"start":{"line":177,"column":8},"end":{"line":177,"column":8}},{"start":{"line":177,"column":8},"end":{"line":177,"column":8}}]},"29":{"line":184,"type":"if","locations":[{"start":{"line":184,"column":12},"end":{"line":184,"column":12}},{"start":{"line":184,"column":12},"end":{"line":184,"column":12}}]},"30":{"line":198,"type":"if","locations":[{"start":{"line":198,"column":16},"end":{"line":198,"column":16}},{"start":{"line":198,"column":16},"end":{"line":198,"column":16}}]},"31":{"line":220,"type":"if","locations":[{"start":{"line":220,"column":8},"end":{"line":220,"column":8}},{"start":{"line":220,"column":8},"end":{"line":220,"column":8}}]},"32":{"line":220,"type":"binary-expr","locations":[{"start":{"line":220,"column":12},"end":{"line":220,"column":21}},{"start":{"line":220,"column":25},"end":{"line":220,"column":41}}]},"33":{"line":223,"type":"if","locations":[{"start":{"line":223,"column":8},"end":{"line":223,"column":8}},{"start":{"line":223,"column":8},"end":{"line":223,"column":8}}]}},"code":["'use strict';","","const SMTPConnection = require('../smtp-connection');","const assign = require('../shared').assign;","const XOAuth2 = require('../xoauth2');","const EventEmitter = require('events');","","/**"," * Creates an element for the pool"," *"," * @constructor"," * @param {Object} options SMTPPool instance"," */","class PoolResource extends EventEmitter {","    constructor(pool) {","        super();","","        this.pool = pool;","        this.options = pool.options;","        this.logger = this.pool.logger;","","        if (this.options.auth) {","            switch ((this.options.auth.type || '').toString().toUpperCase()) {","                case 'OAUTH2':","                    {","                        let oauth2 = new XOAuth2(this.options.auth, this.logger);","                        oauth2.provisionCallback = this.pool.mailer && this.pool.mailer.get('oauth2_provision_cb') || oauth2.provisionCallback;","                        this.auth = {","                            type: 'OAUTH2',","                            user: this.options.auth.user,","                            oauth2,","                            method: 'XOAUTH2'","                        };","                        oauth2.on('token', token => this.pool.mailer.emit('token', token));","                        oauth2.on('error', err => this.emit('error', err));","                        break;","                    }","                default:","                    this.auth = {","                        type: 'LOGIN',","                        user: this.options.auth.user,","                        credentials: {","                            user: this.options.auth.user || '',","                            pass: this.options.auth.pass","                        },","                        method: (this.options.auth.method || '').trim().toUpperCase() || false","                    };","            }","        }","","        this._connection = false;","        this._connected = false;","","        this.messages = 0;","        this.available = true;","    }","","    /**","     * Initiates a connection to the SMTP server","     *","     * @param {Function} callback Callback function to run once the connection is established or failed","     */","    connect(callback) {","        this.pool.getSocket(this.options, (err, socketOptions) => {","            if (err) {","                return callback(err);","            }","","            let returned = false;","            let options = this.options;","            if (socketOptions && socketOptions.connection) {","                this.logger.info({","                    tnx: 'proxy',","                    remoteAddress: socketOptions.connection.remoteAddress,","                    remotePort: socketOptions.connection.remotePort,","                    destHost: options.host || '',","                    destPort: options.port || '',","                    action: 'connected'","                }, 'Using proxied socket from %s:%s to %s:%s', socketOptions.connection.remoteAddress, socketOptions.connection.remotePort, options.host || '', options.port || '');","","                options = assign(false, options);","                Object.keys(socketOptions).forEach(key => {","                    options[key] = socketOptions[key];","                });","            }","","            this.connection = new SMTPConnection(options);","","            this.connection.once('error', err => {","                this.emit('error', err);","                if (returned) {","                    return;","                }","                returned = true;","                return callback(err);","            });","","            this.connection.once('end', () => {","                this.close();","                if (returned) {","                    return;","                }","                returned = true;","                setTimeout(() => {","                    if (returned) {","                        return;","                    }","                    // still have not returned, this means we have an unexpected connection close","                    let err = new Error('Unexpected socket close');","                    if (this.connection && this.connection._socket && this.connection._socket.upgrading) {","                        // starttls connection errors","                        err.code = 'ETLS';","                    }","                    callback(err);","                }, 1000).unref();","            });","","            this.connection.connect(() => {","                if (returned) {","                    return;","                }","","                if (this.auth) {","                    this.connection.login(this.auth, err => {","                        if (returned) {","                            return;","                        }","                        returned = true;","","                        if (err) {","                            this.connection.close();","                            this.emit('error', err);","                            return callback(err);","                        }","","                        this._connected = true;","                        callback(null, true);","                    });","                } else {","                    returned = true;","                    this._connected = true;","                    return callback(null, true);","                }","            });","        });","    }","","    /**","     * Sends an e-mail to be sent using the selected settings","     *","     * @param {Object} mail Mail object","     * @param {Function} callback Callback function","     */","    send(mail, callback) {","        if (!this._connected) {","            return this.connect(err => {","                if (err) {","                    return callback(err);","                }","                return this.send(mail, callback);","            });","        }","","        let envelope = mail.message.getEnvelope();","        let messageId = mail.message.messageId();","","        let recipients = [].concat(envelope.to || []);","        if (recipients.length > 3) {","            recipients.push('...and ' + recipients.splice(2).length + ' more');","        }","        this.logger.info({","            tnx: 'send',","            messageId,","            cid: this.id","        }, 'Sending message %s using #%s to <%s>', messageId, this.id, recipients.join(', '));","","        if (mail.data.dsn) {","            envelope.dsn = mail.data.dsn;","        }","","        this.connection.send(envelope, mail.message.createReadStream(), (err, info) => {","            this.messages++;","","            if (err) {","                this.connection.close();","                this.emit('error', err);","                return callback(err);","            }","","            info.envelope = {","                from: envelope.from,","                to: envelope.to","            };","            info.messageId = messageId;","","            setImmediate(() => {","                let err;","                if (this.messages >= this.options.maxMessages) {","                    err = new Error('Resource exhausted');","                    err.code = 'EMAXLIMIT';","                    this.connection.close();","                    this.emit('error', err);","                } else {","                    this.pool._checkRateLimit(() => {","                        this.available = true;","                        this.emit('available');","                    });","                }","            });","","            callback(null, info);","        });","    }","","    /**","     * Closes the connection","     */","    close() {","        this._connected = false;","        if (this.auth && this.auth.oauth2) {","            this.auth.oauth2.removeAllListeners();","        }","        if (this.connection) {","            this.connection.close();","        }","        this.emit('close');","    }","}","","module.exports = PoolResource;",""],"l":{"3":1,"4":1,"5":1,"6":1,"16":0,"18":0,"19":0,"20":0,"22":0,"23":0,"26":0,"27":0,"28":0,"34":0,"35":0,"36":0,"39":0,"51":0,"52":0,"54":0,"55":0,"64":0,"65":0,"66":0,"69":0,"70":0,"71":0,"72":0,"81":0,"82":0,"83":0,"87":0,"89":0,"90":0,"91":0,"92":0,"94":0,"95":0,"98":0,"99":0,"100":0,"101":0,"103":0,"104":0,"105":0,"106":0,"109":0,"110":0,"112":0,"114":0,"118":0,"119":0,"120":0,"123":0,"124":0,"125":0,"126":0,"128":0,"130":0,"131":0,"132":0,"133":0,"136":0,"137":0,"140":0,"141":0,"142":0,"155":0,"156":0,"157":0,"158":0,"160":0,"164":0,"165":0,"167":0,"168":0,"169":0,"171":0,"177":0,"178":0,"181":0,"182":0,"184":0,"185":0,"186":0,"187":0,"190":0,"194":0,"196":0,"197":0,"198":0,"199":0,"200":0,"201":0,"202":0,"204":0,"205":0,"206":0,"211":0,"219":0,"220":0,"221":0,"223":0,"224":0,"226":0,"230":1}},"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/smtp-connection/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/smtp-connection/index.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":0,"192":0,"193":0,"194":0,"195":0,"196":0,"197":0,"198":0,"199":0,"200":0,"201":0,"202":0,"203":0,"204":0,"205":0,"206":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":0,"213":0,"214":0,"215":0,"216":0,"217":0,"218":0,"219":0,"220":0,"221":0,"222":0,"223":0,"224":0,"225":0,"226":0,"227":0,"228":0,"229":0,"230":0,"231":0,"232":0,"233":0,"234":0,"235":0,"236":0,"237":0,"238":0,"239":0,"240":0,"241":0,"242":0,"243":0,"244":0,"245":0,"246":0,"247":0,"248":0,"249":0,"250":0,"251":0,"252":0,"253":0,"254":0,"255":0,"256":0,"257":0,"258":0,"259":0,"260":0,"261":0,"262":0,"263":0,"264":0,"265":0,"266":0,"267":0,"268":0,"269":0,"270":0,"271":0,"272":0,"273":0,"274":0,"275":0,"276":0,"277":0,"278":0,"279":0,"280":0,"281":0,"282":0,"283":0,"284":0,"285":0,"286":0,"287":0,"288":0,"289":0,"290":0,"291":0,"292":0,"293":0,"294":0,"295":0,"296":0,"297":0,"298":0,"299":0,"300":0,"301":0,"302":0,"303":0,"304":0,"305":0,"306":0,"307":0,"308":0,"309":0,"310":0,"311":0,"312":0,"313":0,"314":0,"315":0,"316":0,"317":0,"318":0,"319":0,"320":0,"321":0,"322":0,"323":0,"324":0,"325":0,"326":0,"327":0,"328":0,"329":0,"330":0,"331":0,"332":0,"333":0,"334":0,"335":0,"336":0,"337":0,"338":0,"339":0,"340":0,"341":0,"342":0,"343":0,"344":0,"345":0,"346":0,"347":0,"348":0,"349":0,"350":0,"351":0,"352":0,"353":0,"354":0,"355":0,"356":0,"357":0,"358":0,"359":0,"360":0,"361":0,"362":0,"363":0,"364":0,"365":0,"366":0,"367":0,"368":0,"369":0,"370":0,"371":0,"372":0,"373":0,"374":0,"375":0,"376":0,"377":0,"378":0,"379":0,"380":0,"381":0,"382":0,"383":0,"384":0,"385":0,"386":0,"387":0,"388":0,"389":0,"390":0,"391":0,"392":0,"393":0,"394":0,"395":0,"396":0,"397":0,"398":0,"399":0,"400":0,"401":0,"402":0,"403":0,"404":0,"405":0,"406":0,"407":0,"408":0,"409":0,"410":0,"411":0,"412":0,"413":0,"414":0,"415":0,"416":0,"417":0,"418":0,"419":0,"420":0,"421":0,"422":0,"423":0,"424":0,"425":0,"426":0,"427":0,"428":0,"429":0,"430":0,"431":0,"432":0,"433":0,"434":0,"435":0,"436":0,"437":0,"438":0,"439":0,"440":0,"441":0,"442":0,"443":0,"444":0,"445":0,"446":0,"447":0,"448":0,"449":0,"450":0,"451":0,"452":0,"453":0,"454":0,"455":0,"456":0,"457":0,"458":0,"459":0,"460":0,"461":0,"462":0,"463":0,"464":0,"465":0,"466":0,"467":0,"468":0,"469":0,"470":0,"471":0,"472":0,"473":0,"474":0,"475":0,"476":0,"477":0,"478":0,"479":0,"480":0,"481":0,"482":0,"483":0,"484":0,"485":0,"486":0,"487":0,"488":0,"489":0,"490":0,"491":0,"492":0,"493":0,"494":0,"495":0,"496":0,"497":0,"498":0,"499":0,"500":0,"501":0,"502":0,"503":0,"504":0,"505":0,"506":0,"507":0,"508":0,"509":0,"510":0,"511":0,"512":0,"513":0,"514":0,"515":0,"516":0,"517":0,"518":0,"519":0,"520":0,"521":0,"522":0,"523":0,"524":0,"525":0,"526":0,"527":0,"528":0,"529":0,"530":0,"531":0,"532":0,"533":0,"534":0,"535":0,"536":0,"537":0,"538":0,"539":0,"540":0,"541":0,"542":0,"543":0,"544":0,"545":0,"546":0,"547":0,"548":0,"549":0,"550":0,"551":0,"552":0,"553":0,"554":0,"555":0,"556":0,"557":0,"558":0,"559":0,"560":0,"561":0,"562":0,"563":0,"564":0,"565":0,"566":0,"567":0,"568":0,"569":0,"570":0,"571":0,"572":0,"573":0,"574":0,"575":0,"576":0,"577":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0,0],"30":[0,0],"31":[0,0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0,0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0],"47":[0,0],"48":[0,0],"49":[0,0],"50":[0,0],"51":[0,0,0],"52":[0,0],"53":[0,0],"54":[0,0,0],"55":[0,0],"56":[0,0],"57":[0,0],"58":[0,0],"59":[0,0],"60":[0,0],"61":[0,0],"62":[0,0],"63":[0,0],"64":[0,0],"65":[0,0],"66":[0,0,0],"67":[0,0],"68":[0,0],"69":[0,0],"70":[0,0],"71":[0,0],"72":[0,0],"73":[0,0],"74":[0,0],"75":[0,0],"76":[0,0],"77":[0,0],"78":[0,0],"79":[0,0],"80":[0,0],"81":[0,0],"82":[0,0],"83":[0,0],"84":[0,0],"85":[0,0],"86":[0,0],"87":[0,0],"88":[0,0],"89":[0,0],"90":[0,0,0,0],"91":[0,0],"92":[0,0,0,0],"93":[0,0],"94":[0,0],"95":[0,0],"96":[0,0],"97":[0,0],"98":[0,0],"99":[0,0],"100":[0,0],"101":[0,0],"102":[0,0],"103":[0,0],"104":[0,0],"105":[0,0],"106":[0,0],"107":[0,0],"108":[0,0],"109":[0,0],"110":[0,0],"111":[0,0],"112":[0,0],"113":[0,0],"114":[0,0,0],"115":[0,0],"116":[0,0,0,0],"117":[0,0],"118":[0,0],"119":[0,0],"120":[0,0,0],"121":[0,0],"122":[0,0],"123":[0,0],"124":[0,0],"125":[0,0,0],"126":[0,0],"127":[0,0],"128":[0,0],"129":[0,0],"130":[0,0],"131":[0,0],"132":[0,0],"133":[0,0],"134":[0,0],"135":[0,0],"136":[0,0],"137":[0,0],"138":[0,0],"139":[0,0],"140":[0,0],"141":[0,0],"142":[0,0],"143":[0,0],"144":[0,0,0,0],"145":[0,0],"146":[0,0],"147":[0,0],"148":[0,0],"149":[0,0],"150":[0,0],"151":[0,0],"152":[0,0],"153":[0,0],"154":[0,0],"155":[0,0],"156":[0,0],"157":[0,0],"158":[0,0],"159":[0,0],"160":[0,0],"161":[0,0],"162":[0,0],"163":[0,0],"164":[0,0],"165":[0,0],"166":[0,0],"167":[0,0],"168":[0,0],"169":[0,0],"170":[0,0],"171":[0,0],"172":[0,0],"173":[0,0,0],"174":[0,0],"175":[0,0],"176":[0,0],"177":[0,0],"178":[0,0,0],"179":[0,0],"180":[0,0],"181":[0,0],"182":[0,0],"183":[0,0],"184":[0,0],"185":[0,0],"186":[0,0],"187":[0,0],"188":[0,0],"189":[0,0],"190":[0,0],"191":[0,0],"192":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0},"fnMap":{"1":{"name":"(anonymous_1)","line":45,"loc":{"start":{"line":45,"column":15},"end":{"line":45,"column":25}}},"2":{"name":"(anonymous_2)","line":176,"loc":{"start":{"line":176,"column":11},"end":{"line":176,"column":29}}},"3":{"name":"(anonymous_3)","line":259,"loc":{"start":{"line":259,"column":8},"end":{"line":259,"column":11}}},"4":{"name":"(anonymous_4)","line":267,"loc":{"start":{"line":267,"column":9},"end":{"line":267,"column":12}}},"5":{"name":"(anonymous_5)","line":305,"loc":{"start":{"line":305,"column":9},"end":{"line":305,"column":30}}},"6":{"name":"(anonymous_6)","line":366,"loc":{"start":{"line":366,"column":8},"end":{"line":366,"column":34}}},"7":{"name":"(anonymous_7)","line":380,"loc":{"start":{"line":380,"column":23},"end":{"line":380,"column":35}}},"8":{"name":"(anonymous_8)","line":419,"loc":{"start":{"line":419,"column":9},"end":{"line":419,"column":20}}},"9":{"name":"(anonymous_9)","line":436,"loc":{"start":{"line":436,"column":14},"end":{"line":436,"column":17}}},"10":{"name":"(anonymous_10)","line":487,"loc":{"start":{"line":487,"column":11},"end":{"line":487,"column":19}}},"11":{"name":"(anonymous_11)","line":519,"loc":{"start":{"line":519,"column":12},"end":{"line":519,"column":39}}},"12":{"name":"(anonymous_12)","line":551,"loc":{"start":{"line":551,"column":16},"end":{"line":551,"column":51}}},"13":{"name":"(anonymous_13)","line":586,"loc":{"start":{"line":586,"column":12},"end":{"line":586,"column":15}}},"14":{"name":"(anonymous_14)","line":605,"loc":{"start":{"line":605,"column":10},"end":{"line":605,"column":13}}},"15":{"name":"(anonymous_15)","line":614,"loc":{"start":{"line":614,"column":14},"end":{"line":614,"column":17}}},"16":{"name":"(anonymous_16)","line":621,"loc":{"start":{"line":621,"column":12},"end":{"line":621,"column":15}}},"17":{"name":"(anonymous_17)","line":635,"loc":{"start":{"line":635,"column":22},"end":{"line":635,"column":33}}},"18":{"name":"(anonymous_18)","line":681,"loc":{"start":{"line":681,"column":20},"end":{"line":681,"column":23}}},"19":{"name":"(anonymous_19)","line":718,"loc":{"start":{"line":718,"column":16},"end":{"line":718,"column":22}}},"20":{"name":"(anonymous_20)","line":746,"loc":{"start":{"line":746,"column":16},"end":{"line":746,"column":37}}},"21":{"name":"(anonymous_21)","line":831,"loc":{"start":{"line":831,"column":19},"end":{"line":831,"column":28}}},"22":{"name":"(anonymous_22)","line":879,"loc":{"start":{"line":879,"column":21},"end":{"line":879,"column":24}}},"23":{"name":"(anonymous_23)","line":894,"loc":{"start":{"line":894,"column":21},"end":{"line":894,"column":32}}},"24":{"name":"(anonymous_24)","line":948,"loc":{"start":{"line":948,"column":19},"end":{"line":948,"column":25}}},"25":{"name":"(anonymous_25)","line":971,"loc":{"start":{"line":971,"column":15},"end":{"line":971,"column":21}}},"26":{"name":"(anonymous_26)","line":988,"loc":{"start":{"line":988,"column":15},"end":{"line":988,"column":21}}},"27":{"name":"(anonymous_27)","line":1070,"loc":{"start":{"line":1070,"column":15},"end":{"line":1070,"column":21}}},"28":{"name":"(anonymous_28)","line":1086,"loc":{"start":{"line":1086,"column":19},"end":{"line":1086,"column":25}}},"29":{"name":"(anonymous_29)","line":1127,"loc":{"start":{"line":1127,"column":26},"end":{"line":1127,"column":42}}},"30":{"name":"(anonymous_30)","line":1149,"loc":{"start":{"line":1149,"column":24},"end":{"line":1149,"column":40}}},"31":{"name":"(anonymous_31)","line":1182,"loc":{"start":{"line":1182,"column":29},"end":{"line":1182,"column":45}}},"32":{"name":"(anonymous_32)","line":1204,"loc":{"start":{"line":1204,"column":26},"end":{"line":1204,"column":42}}},"33":{"name":"(anonymous_33)","line":1222,"loc":{"start":{"line":1222,"column":23},"end":{"line":1222,"column":48}}},"34":{"name":"(anonymous_34)","line":1266,"loc":{"start":{"line":1266,"column":15},"end":{"line":1266,"column":31}}},"35":{"name":"(anonymous_35)","line":1307,"loc":{"start":{"line":1307,"column":15},"end":{"line":1307,"column":31}}},"36":{"name":"(anonymous_36)","line":1352,"loc":{"start":{"line":1352,"column":15},"end":{"line":1352,"column":31}}},"37":{"name":"(anonymous_37)","line":1377,"loc":{"start":{"line":1377,"column":21},"end":{"line":1377,"column":37}}},"38":{"name":"(anonymous_38)","line":1396,"loc":{"start":{"line":1396,"column":21},"end":{"line":1396,"column":55}}},"39":{"name":"(anonymous_39)","line":1415,"loc":{"start":{"line":1415,"column":23},"end":{"line":1415,"column":43}}},"40":{"name":"(anonymous_40)","line":1433,"loc":{"start":{"line":1433,"column":16},"end":{"line":1433,"column":19}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":50}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":52}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":27}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":27}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":25}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":33}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":44}},"8":{"start":{"line":10,"column":0},"end":{"line":10,"column":50}},"9":{"start":{"line":11,"column":0},"end":{"line":11,"column":36}},"10":{"start":{"line":14,"column":0},"end":{"line":14,"column":41}},"11":{"start":{"line":15,"column":0},"end":{"line":15,"column":38}},"12":{"start":{"line":16,"column":0},"end":{"line":16,"column":35}},"13":{"start":{"line":46,"column":8},"end":{"line":46,"column":23}},"14":{"start":{"line":48,"column":8},"end":{"line":48,"column":78}},"15":{"start":{"line":49,"column":8},"end":{"line":49,"column":28}},"16":{"start":{"line":51,"column":8},"end":{"line":51,"column":37}},"17":{"start":{"line":53,"column":8},"end":{"line":53,"column":54}},"18":{"start":{"line":54,"column":8},"end":{"line":54,"column":53}},"19":{"start":{"line":56,"column":8},"end":{"line":56,"column":77}},"20":{"start":{"line":57,"column":8},"end":{"line":57,"column":53}},"21":{"start":{"line":59,"column":8},"end":{"line":62,"column":9}},"22":{"start":{"line":61,"column":12},"end":{"line":61,"column":41}},"23":{"start":{"line":64,"column":8},"end":{"line":64,"column":61}},"24":{"start":{"line":66,"column":8},"end":{"line":69,"column":11}},"25":{"start":{"line":75,"column":8},"end":{"line":75,"column":43}},"26":{"start":{"line":81,"column":8},"end":{"line":81,"column":35}},"27":{"start":{"line":87,"column":8},"end":{"line":87,"column":31}},"28":{"start":{"line":94,"column":8},"end":{"line":94,"column":46}},"29":{"start":{"line":100,"column":8},"end":{"line":100,"column":29}},"30":{"start":{"line":106,"column":8},"end":{"line":106,"column":33}},"31":{"start":{"line":108,"column":8},"end":{"line":108,"column":40}},"32":{"start":{"line":114,"column":8},"end":{"line":114,"column":29}},"33":{"start":{"line":120,"column":8},"end":{"line":120,"column":33}},"34":{"start":{"line":126,"column":8},"end":{"line":126,"column":31}},"35":{"start":{"line":132,"column":8},"end":{"line":132,"column":39}},"36":{"start":{"line":138,"column":8},"end":{"line":138,"column":33}},"37":{"start":{"line":144,"column":8},"end":{"line":144,"column":35}},"38":{"start":{"line":145,"column":8},"end":{"line":145,"column":34}},"39":{"start":{"line":151,"column":8},"end":{"line":151,"column":38}},"40":{"start":{"line":157,"column":8},"end":{"line":157,"column":40}},"41":{"start":{"line":163,"column":8},"end":{"line":163,"column":32}},"42":{"start":{"line":169,"column":8},"end":{"line":169,"column":30}},"43":{"start":{"line":177,"column":8},"end":{"line":184,"column":9}},"44":{"start":{"line":178,"column":12},"end":{"line":183,"column":15}},"45":{"start":{"line":179,"column":16},"end":{"line":181,"column":46}},"46":{"start":{"line":182,"column":16},"end":{"line":182,"column":34}},"47":{"start":{"line":186,"column":8},"end":{"line":189,"column":10}},"48":{"start":{"line":191,"column":8},"end":{"line":193,"column":9}},"49":{"start":{"line":192,"column":12},"end":{"line":192,"column":58}},"50":{"start":{"line":195,"column":8},"end":{"line":245,"column":9}},"51":{"start":{"line":197,"column":12},"end":{"line":197,"column":51}},"52":{"start":{"line":198,"column":12},"end":{"line":208,"column":13}},"53":{"start":{"line":199,"column":16},"end":{"line":205,"column":20}},"54":{"start":{"line":199,"column":35},"end":{"line":205,"column":18}},"55":{"start":{"line":200,"column":20},"end":{"line":203,"column":21}},"56":{"start":{"line":201,"column":24},"end":{"line":201,"column":122}},"57":{"start":{"line":202,"column":24},"end":{"line":202,"column":31}},"58":{"start":{"line":204,"column":20},"end":{"line":204,"column":38}},"59":{"start":{"line":207,"column":16},"end":{"line":207,"column":54}},"60":{"start":{"line":207,"column":35},"end":{"line":207,"column":52}},"61":{"start":{"line":209,"column":15},"end":{"line":245,"column":9}},"62":{"start":{"line":211,"column":12},"end":{"line":211,"column":47}},"63":{"start":{"line":212,"column":12},"end":{"line":219,"column":13}},"64":{"start":{"line":213,"column":16},"end":{"line":216,"column":19}},"65":{"start":{"line":214,"column":20},"end":{"line":214,"column":52}},"66":{"start":{"line":215,"column":20},"end":{"line":215,"column":38}},"67":{"start":{"line":218,"column":16},"end":{"line":218,"column":90}},"68":{"start":{"line":218,"column":42},"end":{"line":218,"column":88}},"69":{"start":{"line":220,"column":15},"end":{"line":245,"column":9}},"70":{"start":{"line":222,"column":12},"end":{"line":226,"column":13}},"71":{"start":{"line":223,"column":16},"end":{"line":225,"column":19}},"72":{"start":{"line":224,"column":20},"end":{"line":224,"column":54}},"73":{"start":{"line":227,"column":12},"end":{"line":234,"column":13}},"74":{"start":{"line":228,"column":16},"end":{"line":231,"column":19}},"75":{"start":{"line":229,"column":20},"end":{"line":229,"column":52}},"76":{"start":{"line":230,"column":20},"end":{"line":230,"column":38}},"77":{"start":{"line":233,"column":16},"end":{"line":233,"column":90}},"78":{"start":{"line":233,"column":42},"end":{"line":233,"column":88}},"79":{"start":{"line":237,"column":12},"end":{"line":244,"column":13}},"80":{"start":{"line":238,"column":16},"end":{"line":241,"column":19}},"81":{"start":{"line":239,"column":20},"end":{"line":239,"column":52}},"82":{"start":{"line":240,"column":20},"end":{"line":240,"column":38}},"83":{"start":{"line":243,"column":16},"end":{"line":243,"column":90}},"84":{"start":{"line":243,"column":42},"end":{"line":243,"column":88}},"85":{"start":{"line":247,"column":8},"end":{"line":249,"column":65}},"86":{"start":{"line":248,"column":12},"end":{"line":248,"column":76}},"87":{"start":{"line":251,"column":8},"end":{"line":253,"column":11}},"88":{"start":{"line":252,"column":12},"end":{"line":252,"column":61}},"89":{"start":{"line":260,"column":8},"end":{"line":260,"column":34}},"90":{"start":{"line":261,"column":8},"end":{"line":261,"column":47}},"91":{"start":{"line":268,"column":8},"end":{"line":268,"column":46}},"92":{"start":{"line":269,"column":8},"end":{"line":269,"column":44}},"93":{"start":{"line":270,"column":8},"end":{"line":270,"column":35}},"94":{"start":{"line":273,"column":8},"end":{"line":275,"column":9}},"95":{"start":{"line":274,"column":12},"end":{"line":274,"column":19}},"96":{"start":{"line":276,"column":8},"end":{"line":276,"column":29}},"97":{"start":{"line":278,"column":8},"end":{"line":278,"column":32}},"98":{"start":{"line":280,"column":8},"end":{"line":283,"column":9}},"99":{"start":{"line":282,"column":12},"end":{"line":282,"column":36}},"100":{"start":{"line":285,"column":8},"end":{"line":287,"column":71}},"101":{"start":{"line":289,"column":8},"end":{"line":289,"column":73}},"102":{"start":{"line":291,"column":8},"end":{"line":297,"column":9}},"103":{"start":{"line":292,"column":12},"end":{"line":296,"column":13}},"104":{"start":{"line":293,"column":16},"end":{"line":293,"column":44}},"105":{"start":{"line":299,"column":8},"end":{"line":299,"column":24}},"106":{"start":{"line":306,"column":8},"end":{"line":306,"column":36}},"107":{"start":{"line":309,"column":8},"end":{"line":309,"column":94}},"108":{"start":{"line":310,"column":8},"end":{"line":315,"column":9}},"109":{"start":{"line":311,"column":12},"end":{"line":311,"column":41}},"110":{"start":{"line":312,"column":15},"end":{"line":315,"column":9}},"111":{"start":{"line":314,"column":12},"end":{"line":314,"column":88}},"112":{"start":{"line":317,"column":8},"end":{"line":326,"column":9}},"113":{"start":{"line":318,"column":12},"end":{"line":325,"column":13}},"114":{"start":{"line":319,"column":16},"end":{"line":322,"column":18}},"115":{"start":{"line":324,"column":16},"end":{"line":324,"column":128}},"116":{"start":{"line":328,"column":8},"end":{"line":354,"column":9}},"117":{"start":{"line":330,"column":16},"end":{"line":330,"column":58}},"118":{"start":{"line":331,"column":16},"end":{"line":331,"column":23}},"119":{"start":{"line":333,"column":16},"end":{"line":335,"column":19}},"120":{"start":{"line":334,"column":20},"end":{"line":334,"column":63}},"121":{"start":{"line":336,"column":16},"end":{"line":336,"column":48}},"122":{"start":{"line":337,"column":16},"end":{"line":337,"column":23}},"123":{"start":{"line":339,"column":16},"end":{"line":341,"column":19}},"124":{"start":{"line":340,"column":20},"end":{"line":340,"column":60}},"125":{"start":{"line":342,"column":16},"end":{"line":346,"column":78}},"126":{"start":{"line":347,"column":16},"end":{"line":347,"column":23}},"127":{"start":{"line":349,"column":16},"end":{"line":351,"column":19}},"128":{"start":{"line":350,"column":20},"end":{"line":350,"column":61}},"129":{"start":{"line":352,"column":16},"end":{"line":352,"column":51}},"130":{"start":{"line":353,"column":16},"end":{"line":353,"column":23}},"131":{"start":{"line":356,"column":8},"end":{"line":356,"column":126}},"132":{"start":{"line":367,"column":8},"end":{"line":369,"column":9}},"133":{"start":{"line":368,"column":12},"end":{"line":368,"column":86}},"134":{"start":{"line":372,"column":8},"end":{"line":376,"column":9}},"135":{"start":{"line":373,"column":12},"end":{"line":375,"column":15}},"136":{"start":{"line":374,"column":16},"end":{"line":374,"column":132}},"137":{"start":{"line":379,"column":8},"end":{"line":379,"column":29}},"138":{"start":{"line":380,"column":8},"end":{"line":387,"column":10}},"139":{"start":{"line":381,"column":12},"end":{"line":383,"column":13}},"140":{"start":{"line":382,"column":16},"end":{"line":382,"column":23}},"141":{"start":{"line":384,"column":12},"end":{"line":384,"column":28}},"142":{"start":{"line":386,"column":12},"end":{"line":386,"column":31}},"143":{"start":{"line":389,"column":8},"end":{"line":391,"column":9}},"144":{"start":{"line":390,"column":12},"end":{"line":390,"column":98}},"145":{"start":{"line":390,"column":39},"end":{"line":390,"column":96}},"146":{"start":{"line":393,"column":8},"end":{"line":411,"column":11}},"147":{"start":{"line":394,"column":12},"end":{"line":396,"column":13}},"148":{"start":{"line":395,"column":16},"end":{"line":395,"column":37}},"149":{"start":{"line":397,"column":12},"end":{"line":403,"column":15}},"150":{"start":{"line":398,"column":16},"end":{"line":400,"column":17}},"151":{"start":{"line":399,"column":20},"end":{"line":399,"column":41}},"152":{"start":{"line":401,"column":16},"end":{"line":401,"column":36}},"153":{"start":{"line":402,"column":16},"end":{"line":402,"column":44}},"154":{"start":{"line":404,"column":12},"end":{"line":409,"column":13}},"155":{"start":{"line":405,"column":16},"end":{"line":405,"column":37}},"156":{"start":{"line":407,"column":16},"end":{"line":407,"column":38}},"157":{"start":{"line":408,"column":16},"end":{"line":408,"column":29}},"158":{"start":{"line":420,"column":8},"end":{"line":420,"column":34}},"159":{"start":{"line":421,"column":8},"end":{"line":427,"column":11}},"160":{"start":{"line":422,"column":12},"end":{"line":424,"column":13}},"161":{"start":{"line":423,"column":16},"end":{"line":423,"column":119}},"162":{"start":{"line":425,"column":12},"end":{"line":425,"column":35}},"163":{"start":{"line":426,"column":12},"end":{"line":426,"column":40}},"164":{"start":{"line":437,"column":8},"end":{"line":437,"column":46}},"165":{"start":{"line":439,"column":8},"end":{"line":445,"column":141}},"166":{"start":{"line":447,"column":8},"end":{"line":451,"column":9}},"167":{"start":{"line":449,"column":12},"end":{"line":449,"column":25}},"168":{"start":{"line":450,"column":12},"end":{"line":450,"column":19}},"169":{"start":{"line":453,"column":8},"end":{"line":453,"column":33}},"170":{"start":{"line":456,"column":8},"end":{"line":456,"column":48}},"171":{"start":{"line":457,"column":8},"end":{"line":457,"column":51}},"172":{"start":{"line":458,"column":8},"end":{"line":458,"column":49}},"173":{"start":{"line":459,"column":8},"end":{"line":459,"column":47}},"174":{"start":{"line":461,"column":8},"end":{"line":461,"column":62}},"175":{"start":{"line":461,"column":41},"end":{"line":461,"column":60}},"176":{"start":{"line":462,"column":8},"end":{"line":462,"column":70}},"177":{"start":{"line":462,"column":46},"end":{"line":462,"column":68}},"178":{"start":{"line":463,"column":8},"end":{"line":463,"column":54}},"179":{"start":{"line":463,"column":39},"end":{"line":463,"column":52}},"180":{"start":{"line":465,"column":8},"end":{"line":465,"column":78}},"181":{"start":{"line":466,"column":8},"end":{"line":466,"column":60}},"182":{"start":{"line":466,"column":41},"end":{"line":466,"column":58}},"183":{"start":{"line":468,"column":8},"end":{"line":473,"column":61}},"184":{"start":{"line":470,"column":12},"end":{"line":472,"column":13}},"185":{"start":{"line":471,"column":16},"end":{"line":471,"column":85}},"186":{"start":{"line":475,"column":8},"end":{"line":475,"column":57}},"187":{"start":{"line":478,"column":8},"end":{"line":478,"column":30}},"188":{"start":{"line":488,"column":8},"end":{"line":490,"column":9}},"189":{"start":{"line":489,"column":12},"end":{"line":489,"column":19}},"190":{"start":{"line":492,"column":8},"end":{"line":492,"column":52}},"191":{"start":{"line":493,"column":8},"end":{"line":493,"column":60}},"192":{"start":{"line":494,"column":8},"end":{"line":494,"column":21}},"193":{"start":{"line":496,"column":8},"end":{"line":496,"column":38}},"194":{"start":{"line":498,"column":8},"end":{"line":507,"column":9}},"195":{"start":{"line":499,"column":12},"end":{"line":505,"column":13}},"196":{"start":{"line":500,"column":16},"end":{"line":500,"column":79}},"197":{"start":{"line":501,"column":16},"end":{"line":504,"column":17}},"198":{"start":{"line":502,"column":20},"end":{"line":502,"column":91}},"199":{"start":{"line":503,"column":20},"end":{"line":503,"column":29}},"200":{"start":{"line":506,"column":12},"end":{"line":506,"column":47}},"201":{"start":{"line":509,"column":8},"end":{"line":509,"column":32}},"202":{"start":{"line":520,"column":8},"end":{"line":520,"column":46}},"203":{"start":{"line":521,"column":8},"end":{"line":521,"column":44}},"204":{"start":{"line":523,"column":8},"end":{"line":528,"column":9}},"205":{"start":{"line":527,"column":12},"end":{"line":527,"column":19}},"206":{"start":{"line":530,"column":8},"end":{"line":530,"column":58}},"207":{"start":{"line":532,"column":8},"end":{"line":534,"column":10}},"208":{"start":{"line":535,"column":8},"end":{"line":537,"column":9}},"209":{"start":{"line":536,"column":12},"end":{"line":536,"column":35}},"210":{"start":{"line":538,"column":8},"end":{"line":540,"column":9}},"211":{"start":{"line":539,"column":12},"end":{"line":539,"column":35}},"212":{"start":{"line":541,"column":8},"end":{"line":543,"column":9}},"213":{"start":{"line":542,"column":12},"end":{"line":542,"column":36}},"214":{"start":{"line":545,"column":8},"end":{"line":545,"column":45}},"215":{"start":{"line":547,"column":8},"end":{"line":547,"column":32}},"216":{"start":{"line":548,"column":8},"end":{"line":548,"column":21}},"217":{"start":{"line":552,"column":8},"end":{"line":552,"column":16}},"218":{"start":{"line":554,"column":8},"end":{"line":558,"column":9}},"219":{"start":{"line":555,"column":12},"end":{"line":555,"column":26}},"220":{"start":{"line":557,"column":12},"end":{"line":557,"column":37}},"221":{"start":{"line":560,"column":8},"end":{"line":562,"column":9}},"222":{"start":{"line":561,"column":12},"end":{"line":561,"column":28}},"223":{"start":{"line":564,"column":8},"end":{"line":567,"column":9}},"224":{"start":{"line":565,"column":12},"end":{"line":565,"column":36}},"225":{"start":{"line":566,"column":12},"end":{"line":566,"column":43}},"226":{"start":{"line":569,"column":8},"end":{"line":569,"column":110}},"227":{"start":{"line":570,"column":8},"end":{"line":572,"column":9}},"228":{"start":{"line":571,"column":12},"end":{"line":571,"column":44}},"229":{"start":{"line":574,"column":8},"end":{"line":576,"column":9}},"230":{"start":{"line":575,"column":12},"end":{"line":575,"column":34}},"231":{"start":{"line":578,"column":8},"end":{"line":578,"column":19}},"232":{"start":{"line":587,"column":8},"end":{"line":589,"column":32}},"233":{"start":{"line":591,"column":8},"end":{"line":595,"column":9}},"234":{"start":{"line":592,"column":12},"end":{"line":592,"column":101}},"235":{"start":{"line":593,"column":15},"end":{"line":595,"column":9}},"236":{"start":{"line":594,"column":12},"end":{"line":594,"column":108}},"237":{"start":{"line":597,"column":8},"end":{"line":597,"column":24}},"238":{"start":{"line":606,"column":8},"end":{"line":606,"column":24}},"239":{"start":{"line":615,"column":8},"end":{"line":615,"column":79}},"240":{"start":{"line":622,"column":8},"end":{"line":624,"column":9}},"241":{"start":{"line":623,"column":12},"end":{"line":623,"column":19}},"242":{"start":{"line":625,"column":8},"end":{"line":625,"column":31}},"243":{"start":{"line":626,"column":8},"end":{"line":626,"column":25}},"244":{"start":{"line":640,"column":8},"end":{"line":640,"column":48}},"245":{"start":{"line":641,"column":8},"end":{"line":641,"column":51}},"246":{"start":{"line":643,"column":8},"end":{"line":643,"column":39}},"247":{"start":{"line":644,"column":8},"end":{"line":647,"column":10}},"248":{"start":{"line":649,"column":8},"end":{"line":651,"column":11}},"249":{"start":{"line":650,"column":12},"end":{"line":650,"column":46}},"250":{"start":{"line":653,"column":8},"end":{"line":653,"column":30}},"251":{"start":{"line":654,"column":8},"end":{"line":663,"column":11}},"252":{"start":{"line":655,"column":12},"end":{"line":655,"column":31}},"253":{"start":{"line":656,"column":12},"end":{"line":656,"column":35}},"254":{"start":{"line":657,"column":12},"end":{"line":657,"column":66}},"255":{"start":{"line":657,"column":45},"end":{"line":657,"column":64}},"256":{"start":{"line":659,"column":12},"end":{"line":659,"column":52}},"257":{"start":{"line":660,"column":12},"end":{"line":660,"column":50}},"258":{"start":{"line":662,"column":12},"end":{"line":662,"column":40}},"259":{"start":{"line":665,"column":8},"end":{"line":665,"column":86}},"260":{"start":{"line":665,"column":40},"end":{"line":665,"column":84}},"261":{"start":{"line":666,"column":8},"end":{"line":666,"column":70}},"262":{"start":{"line":666,"column":46},"end":{"line":666,"column":68}},"263":{"start":{"line":667,"column":8},"end":{"line":667,"column":54}},"264":{"start":{"line":667,"column":39},"end":{"line":667,"column":52}},"265":{"start":{"line":669,"column":8},"end":{"line":669,"column":78}},"266":{"start":{"line":670,"column":8},"end":{"line":670,"column":60}},"267":{"start":{"line":670,"column":41},"end":{"line":670,"column":58}},"268":{"start":{"line":673,"column":8},"end":{"line":673,"column":29}},"269":{"start":{"line":682,"column":8},"end":{"line":684,"column":9}},"270":{"start":{"line":683,"column":12},"end":{"line":683,"column":25}},"271":{"start":{"line":686,"column":8},"end":{"line":686,"column":91}},"272":{"start":{"line":688,"column":8},"end":{"line":691,"column":9}},"273":{"start":{"line":690,"column":12},"end":{"line":690,"column":19}},"274":{"start":{"line":693,"column":8},"end":{"line":697,"column":9}},"275":{"start":{"line":694,"column":12},"end":{"line":696,"column":42}},"276":{"start":{"line":699,"column":8},"end":{"line":701,"column":9}},"277":{"start":{"line":700,"column":12},"end":{"line":700,"column":60}},"278":{"start":{"line":700,"column":31},"end":{"line":700,"column":58}},"279":{"start":{"line":703,"column":8},"end":{"line":703,"column":51}},"280":{"start":{"line":705,"column":8},"end":{"line":710,"column":9}},"281":{"start":{"line":706,"column":12},"end":{"line":706,"column":35}},"282":{"start":{"line":707,"column":12},"end":{"line":707,"column":60}},"283":{"start":{"line":707,"column":31},"end":{"line":707,"column":58}},"284":{"start":{"line":709,"column":12},"end":{"line":709,"column":93}},"285":{"start":{"line":719,"column":8},"end":{"line":722,"column":9}},"286":{"start":{"line":721,"column":12},"end":{"line":721,"column":19}},"287":{"start":{"line":724,"column":8},"end":{"line":726,"column":9}},"288":{"start":{"line":725,"column":12},"end":{"line":725,"column":32}},"289":{"start":{"line":728,"column":8},"end":{"line":732,"column":9}},"290":{"start":{"line":729,"column":12},"end":{"line":731,"column":61}},"291":{"start":{"line":734,"column":8},"end":{"line":734,"column":62}},"292":{"start":{"line":747,"column":8},"end":{"line":747,"column":22}},"293":{"start":{"line":748,"column":8},"end":{"line":748,"column":32}},"294":{"start":{"line":750,"column":8},"end":{"line":750,"column":40}},"295":{"start":{"line":751,"column":8},"end":{"line":751,"column":130}},"296":{"start":{"line":753,"column":8},"end":{"line":753,"column":123}},"297":{"start":{"line":753,"column":73},"end":{"line":753,"column":121}},"298":{"start":{"line":755,"column":8},"end":{"line":757,"column":9}},"299":{"start":{"line":756,"column":12},"end":{"line":756,"column":99}},"300":{"start":{"line":759,"column":8},"end":{"line":761,"column":9}},"301":{"start":{"line":760,"column":12},"end":{"line":760,"column":131}},"302":{"start":{"line":765,"column":8},"end":{"line":767,"column":9}},"303":{"start":{"line":766,"column":12},"end":{"line":766,"column":31}},"304":{"start":{"line":769,"column":8},"end":{"line":779,"column":9}},"305":{"start":{"line":770,"column":12},"end":{"line":772,"column":13}},"306":{"start":{"line":771,"column":16},"end":{"line":771,"column":139}},"307":{"start":{"line":776,"column":12},"end":{"line":778,"column":13}},"308":{"start":{"line":777,"column":16},"end":{"line":777,"column":35}},"309":{"start":{"line":782,"column":8},"end":{"line":782,"column":87}},"310":{"start":{"line":783,"column":8},"end":{"line":783,"column":37}},"311":{"start":{"line":784,"column":8},"end":{"line":784,"column":43}},"312":{"start":{"line":785,"column":8},"end":{"line":785,"column":37}},"313":{"start":{"line":787,"column":8},"end":{"line":793,"column":9}},"314":{"start":{"line":788,"column":12},"end":{"line":792,"column":13}},"315":{"start":{"line":789,"column":16},"end":{"line":789,"column":78}},"316":{"start":{"line":791,"column":16},"end":{"line":791,"column":108}},"317":{"start":{"line":795,"column":8},"end":{"line":797,"column":11}},"318":{"start":{"line":796,"column":12},"end":{"line":796,"column":44}},"319":{"start":{"line":801,"column":8},"end":{"line":804,"column":9}},"320":{"start":{"line":802,"column":12},"end":{"line":802,"column":34}},"321":{"start":{"line":803,"column":12},"end":{"line":803,"column":39}},"322":{"start":{"line":808,"column":8},"end":{"line":811,"column":9}},"323":{"start":{"line":809,"column":12},"end":{"line":809,"column":39}},"324":{"start":{"line":810,"column":12},"end":{"line":810,"column":39}},"325":{"start":{"line":813,"column":8},"end":{"line":815,"column":9}},"326":{"start":{"line":814,"column":12},"end":{"line":814,"column":53}},"327":{"start":{"line":819,"column":8},"end":{"line":826,"column":9}},"328":{"start":{"line":820,"column":12},"end":{"line":822,"column":13}},"329":{"start":{"line":821,"column":16},"end":{"line":821,"column":79}},"330":{"start":{"line":823,"column":12},"end":{"line":825,"column":13}},"331":{"start":{"line":824,"column":16},"end":{"line":824,"column":83}},"332":{"start":{"line":828,"column":8},"end":{"line":828,"column":115}},"333":{"start":{"line":832,"column":8},"end":{"line":832,"column":87}},"334":{"start":{"line":833,"column":8},"end":{"line":844,"column":9}},"335":{"start":{"line":834,"column":12},"end":{"line":843,"column":13}},"336":{"start":{"line":837,"column":20},"end":{"line":837,"column":33}},"337":{"start":{"line":838,"column":20},"end":{"line":838,"column":26}},"338":{"start":{"line":841,"column":20},"end":{"line":841,"column":33}},"339":{"start":{"line":842,"column":20},"end":{"line":842,"column":26}},"340":{"start":{"line":846,"column":8},"end":{"line":848,"column":9}},"341":{"start":{"line":847,"column":12},"end":{"line":847,"column":59}},"342":{"start":{"line":850,"column":8},"end":{"line":850,"column":73}},"343":{"start":{"line":852,"column":8},"end":{"line":852,"column":43}},"344":{"start":{"line":853,"column":8},"end":{"line":864,"column":9}},"345":{"start":{"line":854,"column":12},"end":{"line":856,"column":13}},"346":{"start":{"line":855,"column":16},"end":{"line":855,"column":43}},"347":{"start":{"line":857,"column":12},"end":{"line":857,"column":61}},"348":{"start":{"line":857,"column":37},"end":{"line":857,"column":59}},"349":{"start":{"line":858,"column":12},"end":{"line":858,"column":71}},"350":{"start":{"line":859,"column":12},"end":{"line":859,"column":76}},"351":{"start":{"line":859,"column":50},"end":{"line":859,"column":74}},"352":{"start":{"line":860,"column":12},"end":{"line":862,"column":13}},"353":{"start":{"line":861,"column":16},"end":{"line":861,"column":79}},"354":{"start":{"line":863,"column":12},"end":{"line":863,"column":38}},"355":{"start":{"line":866,"column":8},"end":{"line":866,"column":74}},"356":{"start":{"line":867,"column":8},"end":{"line":869,"column":9}},"357":{"start":{"line":868,"column":12},"end":{"line":868,"column":38}},"358":{"start":{"line":871,"column":8},"end":{"line":876,"column":10}},"359":{"start":{"line":880,"column":8},"end":{"line":880,"column":22}},"360":{"start":{"line":883,"column":8},"end":{"line":890,"column":9}},"361":{"start":{"line":884,"column":12},"end":{"line":886,"column":13}},"362":{"start":{"line":885,"column":16},"end":{"line":885,"column":85}},"363":{"start":{"line":887,"column":12},"end":{"line":889,"column":13}},"364":{"start":{"line":888,"column":16},"end":{"line":888,"column":83}},"365":{"start":{"line":891,"column":8},"end":{"line":891,"column":57}},"366":{"start":{"line":895,"column":8},"end":{"line":895,"column":42}},"367":{"start":{"line":896,"column":8},"end":{"line":896,"column":22}},"368":{"start":{"line":898,"column":8},"end":{"line":909,"column":9}},"369":{"start":{"line":899,"column":12},"end":{"line":904,"column":15}},"370":{"start":{"line":900,"column":16},"end":{"line":900,"column":69}},"371":{"start":{"line":901,"column":16},"end":{"line":903,"column":19}},"372":{"start":{"line":902,"column":20},"end":{"line":902,"column":76}},"373":{"start":{"line":906,"column":12},"end":{"line":908,"column":15}},"374":{"start":{"line":907,"column":16},"end":{"line":907,"column":54}},"375":{"start":{"line":911,"column":8},"end":{"line":913,"column":11}},"376":{"start":{"line":915,"column":8},"end":{"line":926,"column":9}},"377":{"start":{"line":916,"column":12},"end":{"line":916,"column":42}},"378":{"start":{"line":917,"column":12},"end":{"line":924,"column":15}},"379":{"start":{"line":918,"column":16},"end":{"line":918,"column":26}},"380":{"start":{"line":919,"column":16},"end":{"line":923,"column":17}},"381":{"start":{"line":920,"column":20},"end":{"line":922,"column":71}},"382":{"start":{"line":925,"column":12},"end":{"line":925,"column":39}},"383":{"start":{"line":928,"column":8},"end":{"line":934,"column":11}},"384":{"start":{"line":929,"column":12},"end":{"line":933,"column":122}},"385":{"start":{"line":936,"column":8},"end":{"line":936,"column":26}},"386":{"start":{"line":949,"column":8},"end":{"line":949,"column":44}},"387":{"start":{"line":951,"column":8},"end":{"line":954,"column":9}},"388":{"start":{"line":952,"column":12},"end":{"line":952,"column":104}},"389":{"start":{"line":953,"column":12},"end":{"line":953,"column":19}},"390":{"start":{"line":956,"column":8},"end":{"line":962,"column":9}},"391":{"start":{"line":957,"column":12},"end":{"line":957,"column":57}},"392":{"start":{"line":958,"column":12},"end":{"line":958,"column":51}},"393":{"start":{"line":960,"column":12},"end":{"line":960,"column":57}},"394":{"start":{"line":961,"column":12},"end":{"line":961,"column":51}},"395":{"start":{"line":972,"column":8},"end":{"line":975,"column":9}},"396":{"start":{"line":973,"column":12},"end":{"line":973,"column":101}},"397":{"start":{"line":974,"column":12},"end":{"line":974,"column":19}},"398":{"start":{"line":977,"column":8},"end":{"line":977,"column":30}},"399":{"start":{"line":989,"column":8},"end":{"line":989,"column":18}},"400":{"start":{"line":991,"column":8},"end":{"line":994,"column":9}},"401":{"start":{"line":992,"column":12},"end":{"line":992,"column":106}},"402":{"start":{"line":993,"column":12},"end":{"line":993,"column":19}},"403":{"start":{"line":996,"column":8},"end":{"line":1006,"column":9}},"404":{"start":{"line":997,"column":12},"end":{"line":1000,"column":13}},"405":{"start":{"line":998,"column":16},"end":{"line":998,"column":137}},"406":{"start":{"line":999,"column":16},"end":{"line":999,"column":23}},"407":{"start":{"line":1003,"column":12},"end":{"line":1003,"column":57}},"408":{"start":{"line":1004,"column":12},"end":{"line":1004,"column":51}},"409":{"start":{"line":1005,"column":12},"end":{"line":1005,"column":19}},"410":{"start":{"line":1009,"column":8},"end":{"line":1013,"column":9}},"411":{"start":{"line":1010,"column":12},"end":{"line":1010,"column":42}},"412":{"start":{"line":1011,"column":12},"end":{"line":1011,"column":61}},"413":{"start":{"line":1012,"column":12},"end":{"line":1012,"column":19}},"414":{"start":{"line":1016,"column":8},"end":{"line":1018,"column":9}},"415":{"start":{"line":1017,"column":12},"end":{"line":1017,"column":55}},"416":{"start":{"line":1021,"column":8},"end":{"line":1023,"column":9}},"417":{"start":{"line":1022,"column":12},"end":{"line":1022,"column":50}},"418":{"start":{"line":1026,"column":8},"end":{"line":1028,"column":9}},"419":{"start":{"line":1027,"column":12},"end":{"line":1027,"column":55}},"420":{"start":{"line":1031,"column":8},"end":{"line":1033,"column":9}},"421":{"start":{"line":1032,"column":12},"end":{"line":1032,"column":57}},"422":{"start":{"line":1036,"column":8},"end":{"line":1038,"column":9}},"423":{"start":{"line":1037,"column":12},"end":{"line":1037,"column":46}},"424":{"start":{"line":1041,"column":8},"end":{"line":1043,"column":9}},"425":{"start":{"line":1042,"column":12},"end":{"line":1042,"column":46}},"426":{"start":{"line":1046,"column":8},"end":{"line":1048,"column":9}},"427":{"start":{"line":1047,"column":12},"end":{"line":1047,"column":49}},"428":{"start":{"line":1051,"column":8},"end":{"line":1053,"column":9}},"429":{"start":{"line":1052,"column":12},"end":{"line":1052,"column":48}},"430":{"start":{"line":1056,"column":8},"end":{"line":1059,"column":9}},"431":{"start":{"line":1057,"column":12},"end":{"line":1057,"column":51}},"432":{"start":{"line":1058,"column":12},"end":{"line":1058,"column":57}},"433":{"start":{"line":1061,"column":8},"end":{"line":1061,"column":29}},"434":{"start":{"line":1071,"column":8},"end":{"line":1074,"column":9}},"435":{"start":{"line":1072,"column":12},"end":{"line":1072,"column":106}},"436":{"start":{"line":1073,"column":12},"end":{"line":1073,"column":19}},"437":{"start":{"line":1076,"column":8},"end":{"line":1076,"column":29}},"438":{"start":{"line":1087,"column":8},"end":{"line":1096,"column":9}},"439":{"start":{"line":1088,"column":12},"end":{"line":1093,"column":13}},"440":{"start":{"line":1089,"column":16},"end":{"line":1091,"column":70}},"441":{"start":{"line":1092,"column":16},"end":{"line":1092,"column":44}},"442":{"start":{"line":1094,"column":12},"end":{"line":1094,"column":106}},"443":{"start":{"line":1095,"column":12},"end":{"line":1095,"column":19}},"444":{"start":{"line":1098,"column":8},"end":{"line":1115,"column":11}},"445":{"start":{"line":1099,"column":12},"end":{"line":1102,"column":13}},"446":{"start":{"line":1100,"column":16},"end":{"line":1100,"column":118}},"447":{"start":{"line":1101,"column":16},"end":{"line":1101,"column":23}},"448":{"start":{"line":1104,"column":12},"end":{"line":1106,"column":52}},"449":{"start":{"line":1108,"column":12},"end":{"line":1114,"column":13}},"450":{"start":{"line":1110,"column":16},"end":{"line":1110,"column":61}},"451":{"start":{"line":1111,"column":16},"end":{"line":1111,"column":55}},"452":{"start":{"line":1113,"column":16},"end":{"line":1113,"column":37}},"453":{"start":{"line":1128,"column":8},"end":{"line":1131,"column":9}},"454":{"start":{"line":1129,"column":12},"end":{"line":1129,"column":131}},"455":{"start":{"line":1130,"column":12},"end":{"line":1130,"column":19}},"456":{"start":{"line":1133,"column":8},"end":{"line":1135,"column":11}},"457":{"start":{"line":1134,"column":12},"end":{"line":1134,"column":55}},"458":{"start":{"line":1137,"column":8},"end":{"line":1137,"column":100}},"459":{"start":{"line":1150,"column":8},"end":{"line":1150,"column":55}},"460":{"start":{"line":1151,"column":8},"end":{"line":1151,"column":33}},"461":{"start":{"line":1153,"column":8},"end":{"line":1157,"column":9}},"462":{"start":{"line":1154,"column":12},"end":{"line":1154,"column":146}},"463":{"start":{"line":1156,"column":12},"end":{"line":1156,"column":48}},"464":{"start":{"line":1160,"column":8},"end":{"line":1161,"column":77}},"465":{"start":{"line":1163,"column":8},"end":{"line":1163,"column":39}},"466":{"start":{"line":1165,"column":8},"end":{"line":1165,"column":46}},"467":{"start":{"line":1166,"column":8},"end":{"line":1166,"column":69}},"468":{"start":{"line":1168,"column":8},"end":{"line":1170,"column":11}},"469":{"start":{"line":1169,"column":12},"end":{"line":1169,"column":58}},"470":{"start":{"line":1173,"column":8},"end":{"line":1173,"column":68}},"471":{"start":{"line":1183,"column":8},"end":{"line":1185,"column":9}},"472":{"start":{"line":1184,"column":12},"end":{"line":1184,"column":128}},"473":{"start":{"line":1187,"column":8},"end":{"line":1192,"column":69}},"474":{"start":{"line":1193,"column":8},"end":{"line":1193,"column":34}},"475":{"start":{"line":1194,"column":8},"end":{"line":1194,"column":29}},"476":{"start":{"line":1205,"column":8},"end":{"line":1207,"column":9}},"477":{"start":{"line":1206,"column":12},"end":{"line":1206,"column":138}},"478":{"start":{"line":1209,"column":8},"end":{"line":1211,"column":11}},"479":{"start":{"line":1210,"column":12},"end":{"line":1210,"column":52}},"480":{"start":{"line":1213,"column":8},"end":{"line":1213,"column":100}},"481":{"start":{"line":1223,"column":8},"end":{"line":1226,"column":9}},"482":{"start":{"line":1224,"column":12},"end":{"line":1224,"column":31}},"483":{"start":{"line":1225,"column":12},"end":{"line":1225,"column":28}},"484":{"start":{"line":1228,"column":8},"end":{"line":1239,"column":9}},"485":{"start":{"line":1229,"column":12},"end":{"line":1236,"column":15}},"486":{"start":{"line":1230,"column":16},"end":{"line":1235,"column":17}},"487":{"start":{"line":1231,"column":20},"end":{"line":1231,"column":66}},"488":{"start":{"line":1234,"column":20},"end":{"line":1234,"column":81}},"489":{"start":{"line":1234,"column":39},"end":{"line":1234,"column":79}},"490":{"start":{"line":1237,"column":12},"end":{"line":1237,"column":34}},"491":{"start":{"line":1238,"column":12},"end":{"line":1238,"column":19}},"492":{"start":{"line":1241,"column":8},"end":{"line":1249,"column":9}},"493":{"start":{"line":1242,"column":12},"end":{"line":1247,"column":82}},"494":{"start":{"line":1248,"column":12},"end":{"line":1248,"column":106}},"495":{"start":{"line":1251,"column":8},"end":{"line":1256,"column":69}},"496":{"start":{"line":1257,"column":8},"end":{"line":1257,"column":34}},"497":{"start":{"line":1258,"column":8},"end":{"line":1258,"column":29}},"498":{"start":{"line":1267,"column":8},"end":{"line":1267,"column":34}},"499":{"start":{"line":1268,"column":8},"end":{"line":1275,"column":9}},"500":{"start":{"line":1269,"column":12},"end":{"line":1273,"column":13}},"501":{"start":{"line":1270,"column":16},"end":{"line":1270,"column":71}},"502":{"start":{"line":1272,"column":16},"end":{"line":1272,"column":48}},"503":{"start":{"line":1274,"column":12},"end":{"line":1274,"column":87}},"504":{"start":{"line":1277,"column":8},"end":{"line":1299,"column":9}},"505":{"start":{"line":1278,"column":12},"end":{"line":1278,"column":118}},"506":{"start":{"line":1280,"column":12},"end":{"line":1280,"column":38}},"507":{"start":{"line":1282,"column":12},"end":{"line":1298,"column":13}},"508":{"start":{"line":1283,"column":16},"end":{"line":1290,"column":17}},"509":{"start":{"line":1284,"column":20},"end":{"line":1284,"column":68}},"510":{"start":{"line":1285,"column":20},"end":{"line":1285,"column":60}},"511":{"start":{"line":1286,"column":20},"end":{"line":1288,"column":23}},"512":{"start":{"line":1287,"column":24},"end":{"line":1287,"column":56}},"513":{"start":{"line":1289,"column":20},"end":{"line":1289,"column":99}},"514":{"start":{"line":1292,"column":16},"end":{"line":1292,"column":64}},"515":{"start":{"line":1293,"column":16},"end":{"line":1293,"column":56}},"516":{"start":{"line":1294,"column":16},"end":{"line":1296,"column":19}},"517":{"start":{"line":1295,"column":20},"end":{"line":1295,"column":52}},"518":{"start":{"line":1297,"column":16},"end":{"line":1297,"column":95}},"519":{"start":{"line":1308,"column":8},"end":{"line":1308,"column":70}},"520":{"start":{"line":1309,"column":8},"end":{"line":1323,"column":9}},"521":{"start":{"line":1311,"column":12},"end":{"line":1315,"column":13}},"522":{"start":{"line":1312,"column":16},"end":{"line":1312,"column":71}},"523":{"start":{"line":1314,"column":16},"end":{"line":1314,"column":53}},"524":{"start":{"line":1316,"column":12},"end":{"line":1316,"column":55}},"525":{"start":{"line":1318,"column":12},"end":{"line":1318,"column":74}},"526":{"start":{"line":1319,"column":12},"end":{"line":1319,"column":41}},"527":{"start":{"line":1320,"column":12},"end":{"line":1320,"column":52}},"528":{"start":{"line":1322,"column":12},"end":{"line":1322,"column":55}},"529":{"start":{"line":1325,"column":8},"end":{"line":1344,"column":9}},"530":{"start":{"line":1326,"column":12},"end":{"line":1336,"column":13}},"531":{"start":{"line":1327,"column":16},"end":{"line":1329,"column":19}},"532":{"start":{"line":1328,"column":20},"end":{"line":1328,"column":52}},"533":{"start":{"line":1330,"column":16},"end":{"line":1330,"column":42}},"534":{"start":{"line":1332,"column":16},"end":{"line":1332,"column":120}},"535":{"start":{"line":1333,"column":16},"end":{"line":1333,"column":55}},"536":{"start":{"line":1334,"column":16},"end":{"line":1334,"column":67}},"537":{"start":{"line":1335,"column":16},"end":{"line":1335,"column":37}},"538":{"start":{"line":1337,"column":15},"end":{"line":1344,"column":9}},"539":{"start":{"line":1338,"column":12},"end":{"line":1338,"column":60}},"540":{"start":{"line":1339,"column":12},"end":{"line":1339,"column":52}},"541":{"start":{"line":1340,"column":12},"end":{"line":1342,"column":15}},"542":{"start":{"line":1341,"column":16},"end":{"line":1341,"column":48}},"543":{"start":{"line":1343,"column":12},"end":{"line":1343,"column":91}},"544":{"start":{"line":1355,"column":8},"end":{"line":1357,"column":9}},"545":{"start":{"line":1356,"column":12},"end":{"line":1356,"column":96}},"546":{"start":{"line":1359,"column":8},"end":{"line":1362,"column":10}},"547":{"start":{"line":1364,"column":8},"end":{"line":1366,"column":9}},"548":{"start":{"line":1365,"column":12},"end":{"line":1365,"column":68}},"549":{"start":{"line":1368,"column":8},"end":{"line":1368,"column":33}},"550":{"start":{"line":1378,"column":8},"end":{"line":1384,"column":9}},"551":{"start":{"line":1380,"column":12},"end":{"line":1380,"column":90}},"552":{"start":{"line":1383,"column":12},"end":{"line":1383,"column":39}},"553":{"start":{"line":1397,"column":8},"end":{"line":1397,"column":16}},"554":{"start":{"line":1398,"column":8},"end":{"line":1409,"column":9}},"555":{"start":{"line":1400,"column":12},"end":{"line":1400,"column":106}},"556":{"start":{"line":1401,"column":12},"end":{"line":1401,"column":38}},"557":{"start":{"line":1402,"column":12},"end":{"line":1402,"column":52}},"558":{"start":{"line":1403,"column":12},"end":{"line":1403,"column":52}},"559":{"start":{"line":1404,"column":12},"end":{"line":1408,"column":13}},"560":{"start":{"line":1405,"column":16},"end":{"line":1407,"column":17}},"561":{"start":{"line":1406,"column":20},"end":{"line":1406,"column":57}},"562":{"start":{"line":1410,"column":8},"end":{"line":1412,"column":9}},"563":{"start":{"line":1411,"column":12},"end":{"line":1411,"column":39}},"564":{"start":{"line":1416,"column":8},"end":{"line":1430,"column":11}},"565":{"start":{"line":1417,"column":12},"end":{"line":1425,"column":13}},"566":{"start":{"line":1418,"column":16},"end":{"line":1423,"column":86}},"567":{"start":{"line":1424,"column":16},"end":{"line":1424,"column":88}},"568":{"start":{"line":1426,"column":12},"end":{"line":1428,"column":15}},"569":{"start":{"line":1427,"column":16},"end":{"line":1427,"column":65}},"570":{"start":{"line":1429,"column":12},"end":{"line":1429,"column":98}},"571":{"start":{"line":1435,"column":8},"end":{"line":1435,"column":50}},"572":{"start":{"line":1438,"column":8},"end":{"line":1440,"column":9}},"573":{"start":{"line":1439,"column":12},"end":{"line":1439,"column":44}},"574":{"start":{"line":1443,"column":8},"end":{"line":1445,"column":9}},"575":{"start":{"line":1444,"column":12},"end":{"line":1444,"column":58}},"576":{"start":{"line":1447,"column":8},"end":{"line":1447,"column":31}},"577":{"start":{"line":1451,"column":0},"end":{"line":1451,"column":32}}},"branchMap":{"1":{"line":51,"type":"binary-expr","locations":[{"start":{"line":51,"column":23},"end":{"line":51,"column":30}},{"start":{"line":51,"column":34},"end":{"line":51,"column":36}}]},"2":{"line":56,"type":"binary-expr","locations":[{"start":{"line":56,"column":20},"end":{"line":56,"column":37}},{"start":{"line":56,"column":42},"end":{"line":56,"column":75}}]},"3":{"line":56,"type":"cond-expr","locations":[{"start":{"line":56,"column":66},"end":{"line":56,"column":69}},{"start":{"line":56,"column":72},"end":{"line":56,"column":75}}]},"4":{"line":57,"type":"binary-expr","locations":[{"start":{"line":57,"column":20},"end":{"line":57,"column":37}},{"start":{"line":57,"column":41},"end":{"line":57,"column":52}}]},"5":{"line":59,"type":"if","locations":[{"start":{"line":59,"column":8},"end":{"line":59,"column":8}},{"start":{"line":59,"column":8},"end":{"line":59,"column":8}}]},"6":{"line":59,"type":"binary-expr","locations":[{"start":{"line":59,"column":12},"end":{"line":59,"column":54}},{"start":{"line":59,"column":58},"end":{"line":59,"column":75}}]},"7":{"line":64,"type":"binary-expr","locations":[{"start":{"line":64,"column":20},"end":{"line":64,"column":37}},{"start":{"line":64,"column":41},"end":{"line":64,"column":60}}]},"8":{"line":67,"type":"binary-expr","locations":[{"start":{"line":67,"column":23},"end":{"line":67,"column":45}},{"start":{"line":67,"column":49},"end":{"line":67,"column":66}}]},"9":{"line":177,"type":"if","locations":[{"start":{"line":177,"column":8},"end":{"line":177,"column":8}},{"start":{"line":177,"column":8},"end":{"line":177,"column":8}}]},"10":{"line":191,"type":"if","locations":[{"start":{"line":191,"column":8},"end":{"line":191,"column":8}},{"start":{"line":191,"column":8},"end":{"line":191,"column":8}}]},"11":{"line":195,"type":"if","locations":[{"start":{"line":195,"column":8},"end":{"line":195,"column":8}},{"start":{"line":195,"column":8},"end":{"line":195,"column":8}}]},"12":{"line":198,"type":"if","locations":[{"start":{"line":198,"column":12},"end":{"line":198,"column":12}},{"start":{"line":198,"column":12},"end":{"line":198,"column":12}}]},"13":{"line":198,"type":"binary-expr","locations":[{"start":{"line":198,"column":16},"end":{"line":198,"column":37}},{"start":{"line":198,"column":41},"end":{"line":198,"column":61}}]},"14":{"line":200,"type":"if","locations":[{"start":{"line":200,"column":20},"end":{"line":200,"column":20}},{"start":{"line":200,"column":20},"end":{"line":200,"column":20}}]},"15":{"line":201,"type":"binary-expr","locations":[{"start":{"line":201,"column":77},"end":{"line":201,"column":88}},{"start":{"line":201,"column":92},"end":{"line":201,"column":95}}]},"16":{"line":209,"type":"if","locations":[{"start":{"line":209,"column":15},"end":{"line":209,"column":15}},{"start":{"line":209,"column":15},"end":{"line":209,"column":15}}]},"17":{"line":220,"type":"if","locations":[{"start":{"line":220,"column":15},"end":{"line":220,"column":15}},{"start":{"line":220,"column":15},"end":{"line":220,"column":15}}]},"18":{"line":222,"type":"if","locations":[{"start":{"line":222,"column":12},"end":{"line":222,"column":12}},{"start":{"line":222,"column":12},"end":{"line":222,"column":12}}]},"19":{"line":249,"type":"binary-expr","locations":[{"start":{"line":249,"column":11},"end":{"line":249,"column":41}},{"start":{"line":249,"column":45},"end":{"line":249,"column":63}}]},"20":{"line":273,"type":"if","locations":[{"start":{"line":273,"column":8},"end":{"line":273,"column":8}},{"start":{"line":273,"column":8},"end":{"line":273,"column":8}}]},"21":{"line":280,"type":"if","locations":[{"start":{"line":280,"column":8},"end":{"line":280,"column":8}},{"start":{"line":280,"column":8},"end":{"line":280,"column":8}}]},"22":{"line":289,"type":"binary-expr","locations":[{"start":{"line":289,"column":21},"end":{"line":289,"column":33}},{"start":{"line":289,"column":37},"end":{"line":289,"column":56}},{"start":{"line":289,"column":60},"end":{"line":289,"column":72}}]},"23":{"line":291,"type":"if","locations":[{"start":{"line":291,"column":8},"end":{"line":291,"column":8}},{"start":{"line":291,"column":8},"end":{"line":291,"column":8}}]},"24":{"line":291,"type":"binary-expr","locations":[{"start":{"line":291,"column":12},"end":{"line":291,"column":18}},{"start":{"line":291,"column":22},"end":{"line":291,"column":39}}]},"25":{"line":306,"type":"binary-expr","locations":[{"start":{"line":306,"column":21},"end":{"line":306,"column":29}},{"start":{"line":306,"column":33},"end":{"line":306,"column":35}}]},"26":{"line":309,"type":"binary-expr","locations":[{"start":{"line":309,"column":27},"end":{"line":309,"column":84}},{"start":{"line":309,"column":88},"end":{"line":309,"column":93}}]},"27":{"line":309,"type":"binary-expr","locations":[{"start":{"line":309,"column":28},"end":{"line":309,"column":45}},{"start":{"line":309,"column":49},"end":{"line":309,"column":51}}]},"28":{"line":310,"type":"if","locations":[{"start":{"line":310,"column":8},"end":{"line":310,"column":8}},{"start":{"line":310,"column":8},"end":{"line":310,"column":8}}]},"29":{"line":310,"type":"binary-expr","locations":[{"start":{"line":310,"column":12},"end":{"line":310,"column":29}},{"start":{"line":310,"column":33},"end":{"line":310,"column":50}},{"start":{"line":310,"column":54},"end":{"line":310,"column":77}}]},"30":{"line":312,"type":"if","locations":[{"start":{"line":312,"column":15},"end":{"line":312,"column":15}},{"start":{"line":312,"column":15},"end":{"line":312,"column":15}}]},"31":{"line":312,"type":"binary-expr","locations":[{"start":{"line":312,"column":19},"end":{"line":312,"column":36}},{"start":{"line":312,"column":41},"end":{"line":312,"column":71}},{"start":{"line":312,"column":75},"end":{"line":312,"column":93}}]},"32":{"line":314,"type":"binary-expr","locations":[{"start":{"line":314,"column":32},"end":{"line":314,"column":54}},{"start":{"line":314,"column":58},"end":{"line":314,"column":65}}]},"33":{"line":317,"type":"if","locations":[{"start":{"line":317,"column":8},"end":{"line":317,"column":8}},{"start":{"line":317,"column":8},"end":{"line":317,"column":8}}]},"34":{"line":317,"type":"binary-expr","locations":[{"start":{"line":317,"column":12},"end":{"line":317,"column":42}},{"start":{"line":317,"column":46},"end":{"line":317,"column":69}}]},"35":{"line":318,"type":"if","locations":[{"start":{"line":318,"column":12},"end":{"line":318,"column":12}},{"start":{"line":318,"column":12},"end":{"line":318,"column":12}}]},"36":{"line":318,"type":"binary-expr","locations":[{"start":{"line":318,"column":16},"end":{"line":318,"column":31}},{"start":{"line":318,"column":35},"end":{"line":318,"column":50}}]},"37":{"line":328,"type":"switch","locations":[{"start":{"line":329,"column":12},"end":{"line":331,"column":23}},{"start":{"line":332,"column":12},"end":{"line":337,"column":23}},{"start":{"line":338,"column":12},"end":{"line":347,"column":23}},{"start":{"line":348,"column":12},"end":{"line":353,"column":23}}]},"38":{"line":367,"type":"if","locations":[{"start":{"line":367,"column":8},"end":{"line":367,"column":8}},{"start":{"line":367,"column":8},"end":{"line":367,"column":8}}]},"39":{"line":372,"type":"if","locations":[{"start":{"line":372,"column":8},"end":{"line":372,"column":8}},{"start":{"line":372,"column":8},"end":{"line":372,"column":8}}]},"40":{"line":372,"type":"binary-expr","locations":[{"start":{"line":372,"column":12},"end":{"line":372,"column":32}},{"start":{"line":372,"column":36},"end":{"line":372,"column":72}}]},"41":{"line":381,"type":"if","locations":[{"start":{"line":381,"column":12},"end":{"line":381,"column":12}},{"start":{"line":381,"column":12},"end":{"line":381,"column":12}}]},"42":{"line":389,"type":"if","locations":[{"start":{"line":389,"column":8},"end":{"line":389,"column":8}},{"start":{"line":389,"column":8},"end":{"line":389,"column":8}}]},"43":{"line":394,"type":"if","locations":[{"start":{"line":394,"column":12},"end":{"line":394,"column":12}},{"start":{"line":394,"column":12},"end":{"line":394,"column":12}}]},"44":{"line":398,"type":"if","locations":[{"start":{"line":398,"column":16},"end":{"line":398,"column":16}},{"start":{"line":398,"column":16},"end":{"line":398,"column":16}}]},"45":{"line":404,"type":"if","locations":[{"start":{"line":404,"column":12},"end":{"line":404,"column":12}},{"start":{"line":404,"column":12},"end":{"line":404,"column":12}}]},"46":{"line":422,"type":"if","locations":[{"start":{"line":422,"column":12},"end":{"line":422,"column":12}},{"start":{"line":422,"column":12},"end":{"line":422,"column":12}}]},"47":{"line":445,"type":"cond-expr","locations":[{"start":{"line":445,"column":52},"end":{"line":445,"column":71}},{"start":{"line":445,"column":74},"end":{"line":445,"column":86}}]},"48":{"line":447,"type":"if","locations":[{"start":{"line":447,"column":8},"end":{"line":447,"column":8}},{"start":{"line":447,"column":8},"end":{"line":447,"column":8}}]},"49":{"line":465,"type":"binary-expr","locations":[{"start":{"line":465,"column":32},"end":{"line":465,"column":58}},{"start":{"line":465,"column":62},"end":{"line":465,"column":76}}]},"50":{"line":470,"type":"if","locations":[{"start":{"line":470,"column":12},"end":{"line":470,"column":12}},{"start":{"line":470,"column":12},"end":{"line":470,"column":12}}]},"51":{"line":470,"type":"binary-expr","locations":[{"start":{"line":470,"column":16},"end":{"line":470,"column":28}},{"start":{"line":470,"column":32},"end":{"line":470,"column":48}},{"start":{"line":470,"column":52},"end":{"line":470,"column":101}}]},"52":{"line":473,"type":"binary-expr","locations":[{"start":{"line":473,"column":11},"end":{"line":473,"column":39}},{"start":{"line":473,"column":43},"end":{"line":473,"column":59}}]},"53":{"line":488,"type":"if","locations":[{"start":{"line":488,"column":8},"end":{"line":488,"column":8}},{"start":{"line":488,"column":8},"end":{"line":488,"column":8}}]},"54":{"line":488,"type":"binary-expr","locations":[{"start":{"line":488,"column":12},"end":{"line":488,"column":27}},{"start":{"line":488,"column":31},"end":{"line":488,"column":37}},{"start":{"line":488,"column":41},"end":{"line":488,"column":54}}]},"55":{"line":492,"type":"binary-expr","locations":[{"start":{"line":492,"column":20},"end":{"line":492,"column":25}},{"start":{"line":492,"column":29},"end":{"line":492,"column":31}}]},"56":{"line":499,"type":"if","locations":[{"start":{"line":499,"column":12},"end":{"line":499,"column":12}},{"start":{"line":499,"column":12},"end":{"line":499,"column":12}}]},"57":{"line":501,"type":"if","locations":[{"start":{"line":501,"column":16},"end":{"line":501,"column":16}},{"start":{"line":501,"column":16},"end":{"line":501,"column":16}}]},"58":{"line":523,"type":"if","locations":[{"start":{"line":523,"column":8},"end":{"line":523,"column":8}},{"start":{"line":523,"column":8},"end":{"line":523,"column":8}}]},"59":{"line":535,"type":"if","locations":[{"start":{"line":535,"column":8},"end":{"line":535,"column":8}},{"start":{"line":535,"column":8},"end":{"line":535,"column":8}}]},"60":{"line":538,"type":"if","locations":[{"start":{"line":538,"column":8},"end":{"line":538,"column":8}},{"start":{"line":538,"column":8},"end":{"line":538,"column":8}}]},"61":{"line":541,"type":"if","locations":[{"start":{"line":541,"column":8},"end":{"line":541,"column":8}},{"start":{"line":541,"column":8},"end":{"line":541,"column":8}}]},"62":{"line":554,"type":"if","locations":[{"start":{"line":554,"column":8},"end":{"line":554,"column":8}},{"start":{"line":554,"column":8},"end":{"line":554,"column":8}}]},"63":{"line":560,"type":"if","locations":[{"start":{"line":560,"column":8},"end":{"line":560,"column":8}},{"start":{"line":560,"column":8},"end":{"line":560,"column":8}}]},"64":{"line":560,"type":"binary-expr","locations":[{"start":{"line":560,"column":12},"end":{"line":560,"column":16}},{"start":{"line":560,"column":20},"end":{"line":560,"column":36}}]},"65":{"line":564,"type":"if","locations":[{"start":{"line":564,"column":8},"end":{"line":564,"column":8}},{"start":{"line":564,"column":8},"end":{"line":564,"column":8}}]},"66":{"line":569,"type":"binary-expr","locations":[{"start":{"line":569,"column":27},"end":{"line":569,"column":55}},{"start":{"line":569,"column":59},"end":{"line":569,"column":100}},{"start":{"line":569,"column":104},"end":{"line":569,"column":109}}]},"67":{"line":569,"type":"binary-expr","locations":[{"start":{"line":569,"column":67},"end":{"line":569,"column":89}},{"start":{"line":569,"column":93},"end":{"line":569,"column":95}}]},"68":{"line":570,"type":"if","locations":[{"start":{"line":570,"column":8},"end":{"line":570,"column":8}},{"start":{"line":570,"column":8},"end":{"line":570,"column":8}}]},"69":{"line":574,"type":"if","locations":[{"start":{"line":574,"column":8},"end":{"line":574,"column":8}},{"start":{"line":574,"column":8},"end":{"line":574,"column":8}}]},"70":{"line":591,"type":"if","locations":[{"start":{"line":591,"column":8},"end":{"line":591,"column":8}},{"start":{"line":591,"column":8},"end":{"line":591,"column":8}}]},"71":{"line":591,"type":"binary-expr","locations":[{"start":{"line":591,"column":12},"end":{"line":591,"column":26}},{"start":{"line":591,"column":30},"end":{"line":591,"column":46}}]},"72":{"line":593,"type":"if","locations":[{"start":{"line":593,"column":15},"end":{"line":593,"column":15}},{"start":{"line":593,"column":15},"end":{"line":593,"column":15}}]},"73":{"line":593,"type":"binary-expr","locations":[{"start":{"line":593,"column":19},"end":{"line":593,"column":89}},{"start":{"line":593,"column":93},"end":{"line":593,"column":109}}]},"74":{"line":622,"type":"if","locations":[{"start":{"line":622,"column":8},"end":{"line":622,"column":8}},{"start":{"line":622,"column":8},"end":{"line":622,"column":8}}]},"75":{"line":649,"type":"binary-expr","locations":[{"start":{"line":649,"column":20},"end":{"line":649,"column":36}},{"start":{"line":649,"column":40},"end":{"line":649,"column":42}}]},"76":{"line":669,"type":"binary-expr","locations":[{"start":{"line":669,"column":32},"end":{"line":669,"column":58}},{"start":{"line":669,"column":62},"end":{"line":669,"column":76}}]},"77":{"line":682,"type":"if","locations":[{"start":{"line":682,"column":8},"end":{"line":682,"column":8}},{"start":{"line":682,"column":8},"end":{"line":682,"column":8}}]},"78":{"line":686,"type":"binary-expr","locations":[{"start":{"line":686,"column":45},"end":{"line":686,"column":72}},{"start":{"line":686,"column":76},"end":{"line":686,"column":78}}]},"79":{"line":688,"type":"if","locations":[{"start":{"line":688,"column":8},"end":{"line":688,"column":8}},{"start":{"line":688,"column":8},"end":{"line":688,"column":8}}]},"80":{"line":693,"type":"if","locations":[{"start":{"line":693,"column":8},"end":{"line":693,"column":8}},{"start":{"line":693,"column":8},"end":{"line":693,"column":8}}]},"81":{"line":693,"type":"binary-expr","locations":[{"start":{"line":693,"column":12},"end":{"line":693,"column":30}},{"start":{"line":693,"column":34},"end":{"line":693,"column":61}}]},"82":{"line":699,"type":"if","locations":[{"start":{"line":699,"column":8},"end":{"line":699,"column":8}},{"start":{"line":699,"column":8},"end":{"line":699,"column":8}}]},"83":{"line":705,"type":"if","locations":[{"start":{"line":705,"column":8},"end":{"line":705,"column":8}},{"start":{"line":705,"column":8},"end":{"line":705,"column":8}}]},"84":{"line":719,"type":"if","locations":[{"start":{"line":719,"column":8},"end":{"line":719,"column":8}},{"start":{"line":719,"column":8},"end":{"line":719,"column":8}}]},"85":{"line":724,"type":"if","locations":[{"start":{"line":724,"column":8},"end":{"line":724,"column":8}},{"start":{"line":724,"column":8},"end":{"line":724,"column":8}}]},"86":{"line":728,"type":"if","locations":[{"start":{"line":728,"column":8},"end":{"line":728,"column":8}},{"start":{"line":728,"column":8},"end":{"line":728,"column":8}}]},"87":{"line":728,"type":"binary-expr","locations":[{"start":{"line":728,"column":12},"end":{"line":728,"column":30}},{"start":{"line":728,"column":34},"end":{"line":728,"column":61}}]},"88":{"line":731,"type":"binary-expr","locations":[{"start":{"line":731,"column":16},"end":{"line":731,"column":19}},{"start":{"line":731,"column":23},"end":{"line":731,"column":25}}]},"89":{"line":750,"type":"binary-expr","locations":[{"start":{"line":750,"column":25},"end":{"line":750,"column":33}},{"start":{"line":750,"column":37},"end":{"line":750,"column":39}}]},"90":{"line":751,"type":"binary-expr","locations":[{"start":{"line":751,"column":31},"end":{"line":751,"column":50}},{"start":{"line":751,"column":54},"end":{"line":751,"column":81}},{"start":{"line":751,"column":85},"end":{"line":751,"column":104}},{"start":{"line":751,"column":108},"end":{"line":751,"column":110}}]},"91":{"line":753,"type":"binary-expr","locations":[{"start":{"line":753,"column":38},"end":{"line":753,"column":55}},{"start":{"line":753,"column":59},"end":{"line":753,"column":61}}]},"92":{"line":753,"type":"binary-expr","locations":[{"start":{"line":753,"column":74},"end":{"line":753,"column":76}},{"start":{"line":753,"column":80},"end":{"line":753,"column":90}},{"start":{"line":753,"column":94},"end":{"line":753,"column":96}},{"start":{"line":753,"column":100},"end":{"line":753,"column":102}}]},"93":{"line":755,"type":"if","locations":[{"start":{"line":755,"column":8},"end":{"line":755,"column":8}},{"start":{"line":755,"column":8},"end":{"line":755,"column":8}}]},"94":{"line":759,"type":"if","locations":[{"start":{"line":759,"column":8},"end":{"line":759,"column":8}},{"start":{"line":759,"column":8},"end":{"line":759,"column":8}}]},"95":{"line":759,"type":"binary-expr","locations":[{"start":{"line":759,"column":12},"end":{"line":759,"column":31}},{"start":{"line":759,"column":35},"end":{"line":759,"column":71}}]},"96":{"line":765,"type":"if","locations":[{"start":{"line":765,"column":8},"end":{"line":765,"column":8}},{"start":{"line":765,"column":8},"end":{"line":765,"column":8}}]},"97":{"line":770,"type":"if","locations":[{"start":{"line":770,"column":12},"end":{"line":770,"column":12}},{"start":{"line":770,"column":12},"end":{"line":770,"column":12}}]},"98":{"line":770,"type":"binary-expr","locations":[{"start":{"line":770,"column":16},"end":{"line":770,"column":37}},{"start":{"line":770,"column":41},"end":{"line":770,"column":78}}]},"99":{"line":776,"type":"if","locations":[{"start":{"line":776,"column":12},"end":{"line":776,"column":12}},{"start":{"line":776,"column":12},"end":{"line":776,"column":12}}]},"100":{"line":782,"type":"binary-expr","locations":[{"start":{"line":782,"column":61},"end":{"line":782,"column":78}},{"start":{"line":782,"column":82},"end":{"line":782,"column":84}}]},"101":{"line":787,"type":"if","locations":[{"start":{"line":787,"column":8},"end":{"line":787,"column":8}},{"start":{"line":787,"column":8},"end":{"line":787,"column":8}}]},"102":{"line":801,"type":"if","locations":[{"start":{"line":801,"column":8},"end":{"line":801,"column":8}},{"start":{"line":801,"column":8},"end":{"line":801,"column":8}}]},"103":{"line":801,"type":"binary-expr","locations":[{"start":{"line":801,"column":12},"end":{"line":801,"column":23}},{"start":{"line":801,"column":27},"end":{"line":801,"column":73}}]},"104":{"line":808,"type":"if","locations":[{"start":{"line":808,"column":8},"end":{"line":808,"column":8}},{"start":{"line":808,"column":8},"end":{"line":808,"column":8}}]},"105":{"line":808,"type":"binary-expr","locations":[{"start":{"line":808,"column":12},"end":{"line":808,"column":38}},{"start":{"line":808,"column":42},"end":{"line":808,"column":88}}]},"106":{"line":813,"type":"if","locations":[{"start":{"line":813,"column":8},"end":{"line":813,"column":8}},{"start":{"line":813,"column":8},"end":{"line":813,"column":8}}]},"107":{"line":813,"type":"binary-expr","locations":[{"start":{"line":813,"column":12},"end":{"line":813,"column":31}},{"start":{"line":813,"column":35},"end":{"line":813,"column":77}}]},"108":{"line":819,"type":"if","locations":[{"start":{"line":819,"column":8},"end":{"line":819,"column":8}},{"start":{"line":819,"column":8},"end":{"line":819,"column":8}}]},"109":{"line":819,"type":"binary-expr","locations":[{"start":{"line":819,"column":12},"end":{"line":819,"column":30}},{"start":{"line":819,"column":34},"end":{"line":819,"column":75}}]},"110":{"line":820,"type":"if","locations":[{"start":{"line":820,"column":12},"end":{"line":820,"column":12}},{"start":{"line":820,"column":12},"end":{"line":820,"column":12}}]},"111":{"line":823,"type":"if","locations":[{"start":{"line":823,"column":12},"end":{"line":823,"column":12}},{"start":{"line":823,"column":12},"end":{"line":823,"column":12}}]},"112":{"line":828,"type":"cond-expr","locations":[{"start":{"line":828,"column":87},"end":{"line":828,"column":107}},{"start":{"line":828,"column":110},"end":{"line":828,"column":112}}]},"113":{"line":832,"type":"binary-expr","locations":[{"start":{"line":832,"column":18},"end":{"line":832,"column":78}},{"start":{"line":832,"column":82},"end":{"line":832,"column":86}}]},"114":{"line":832,"type":"binary-expr","locations":[{"start":{"line":832,"column":19},"end":{"line":832,"column":29}},{"start":{"line":832,"column":33},"end":{"line":832,"column":46}},{"start":{"line":832,"column":50},"end":{"line":832,"column":52}}]},"115":{"line":833,"type":"if","locations":[{"start":{"line":833,"column":8},"end":{"line":833,"column":8}},{"start":{"line":833,"column":8},"end":{"line":833,"column":8}}]},"116":{"line":834,"type":"switch","locations":[{"start":{"line":835,"column":16},"end":{"line":835,"column":28}},{"start":{"line":836,"column":16},"end":{"line":838,"column":26}},{"start":{"line":839,"column":16},"end":{"line":839,"column":28}},{"start":{"line":840,"column":16},"end":{"line":842,"column":26}}]},"117":{"line":846,"type":"if","locations":[{"start":{"line":846,"column":8},"end":{"line":846,"column":8}},{"start":{"line":846,"column":8},"end":{"line":846,"column":8}}]},"118":{"line":846,"type":"binary-expr","locations":[{"start":{"line":846,"column":12},"end":{"line":846,"column":15}},{"start":{"line":846,"column":19},"end":{"line":846,"column":50}}]},"119":{"line":850,"type":"binary-expr","locations":[{"start":{"line":850,"column":20},"end":{"line":850,"column":64}},{"start":{"line":850,"column":68},"end":{"line":850,"column":72}}]},"120":{"line":850,"type":"binary-expr","locations":[{"start":{"line":850,"column":21},"end":{"line":850,"column":33}},{"start":{"line":850,"column":37},"end":{"line":850,"column":46}},{"start":{"line":850,"column":50},"end":{"line":850,"column":52}}]},"121":{"line":852,"type":"binary-expr","locations":[{"start":{"line":852,"column":21},"end":{"line":852,"column":34}},{"start":{"line":852,"column":38},"end":{"line":852,"column":42}}]},"122":{"line":853,"type":"if","locations":[{"start":{"line":853,"column":8},"end":{"line":853,"column":8}},{"start":{"line":853,"column":8},"end":{"line":853,"column":8}}]},"123":{"line":854,"type":"if","locations":[{"start":{"line":854,"column":12},"end":{"line":854,"column":12}},{"start":{"line":854,"column":12},"end":{"line":854,"column":12}}]},"124":{"line":860,"type":"if","locations":[{"start":{"line":860,"column":12},"end":{"line":860,"column":12}},{"start":{"line":860,"column":12},"end":{"line":860,"column":12}}]},"125":{"line":860,"type":"binary-expr","locations":[{"start":{"line":860,"column":16},"end":{"line":860,"column":35}},{"start":{"line":860,"column":40},"end":{"line":860,"column":57}},{"start":{"line":860,"column":61},"end":{"line":860,"column":85}}]},"126":{"line":866,"type":"binary-expr","locations":[{"start":{"line":866,"column":20},"end":{"line":866,"column":65}},{"start":{"line":866,"column":69},"end":{"line":866,"column":73}}]},"127":{"line":866,"type":"binary-expr","locations":[{"start":{"line":866,"column":21},"end":{"line":866,"column":33}},{"start":{"line":866,"column":37},"end":{"line":866,"column":53}}]},"128":{"line":867,"type":"if","locations":[{"start":{"line":867,"column":8},"end":{"line":867,"column":8}},{"start":{"line":867,"column":8},"end":{"line":867,"column":8}}]},"129":{"line":867,"type":"binary-expr","locations":[{"start":{"line":867,"column":12},"end":{"line":867,"column":17}},{"start":{"line":867,"column":21},"end":{"line":867,"column":43}}]},"130":{"line":883,"type":"if","locations":[{"start":{"line":883,"column":8},"end":{"line":883,"column":8}},{"start":{"line":883,"column":8},"end":{"line":883,"column":8}}]},"131":{"line":883,"type":"binary-expr","locations":[{"start":{"line":883,"column":12},"end":{"line":883,"column":30}},{"start":{"line":883,"column":34},"end":{"line":883,"column":75}}]},"132":{"line":884,"type":"if","locations":[{"start":{"line":884,"column":12},"end":{"line":884,"column":12}},{"start":{"line":884,"column":12},"end":{"line":884,"column":12}}]},"133":{"line":887,"type":"if","locations":[{"start":{"line":887,"column":12},"end":{"line":887,"column":12}},{"start":{"line":887,"column":12},"end":{"line":887,"column":12}}]},"134":{"line":891,"type":"cond-expr","locations":[{"start":{"line":891,"column":30},"end":{"line":891,"column":50}},{"start":{"line":891,"column":53},"end":{"line":891,"column":55}}]},"135":{"line":898,"type":"if","locations":[{"start":{"line":898,"column":8},"end":{"line":898,"column":8}},{"start":{"line":898,"column":8},"end":{"line":898,"column":8}}]},"136":{"line":915,"type":"if","locations":[{"start":{"line":915,"column":8},"end":{"line":915,"column":8}},{"start":{"line":915,"column":8},"end":{"line":915,"column":8}}]},"137":{"line":951,"type":"if","locations":[{"start":{"line":951,"column":8},"end":{"line":951,"column":8}},{"start":{"line":951,"column":8},"end":{"line":951,"column":8}}]},"138":{"line":956,"type":"if","locations":[{"start":{"line":956,"column":8},"end":{"line":956,"column":8}},{"start":{"line":956,"column":8},"end":{"line":956,"column":8}}]},"139":{"line":972,"type":"if","locations":[{"start":{"line":972,"column":8},"end":{"line":972,"column":8}},{"start":{"line":972,"column":8},"end":{"line":972,"column":8}}]},"140":{"line":991,"type":"if","locations":[{"start":{"line":991,"column":8},"end":{"line":991,"column":8}},{"start":{"line":991,"column":8},"end":{"line":991,"column":8}}]},"141":{"line":996,"type":"if","locations":[{"start":{"line":996,"column":8},"end":{"line":996,"column":8}},{"start":{"line":996,"column":8},"end":{"line":996,"column":8}}]},"142":{"line":997,"type":"if","locations":[{"start":{"line":997,"column":12},"end":{"line":997,"column":12}},{"start":{"line":997,"column":12},"end":{"line":997,"column":12}}]},"143":{"line":1009,"type":"if","locations":[{"start":{"line":1009,"column":8},"end":{"line":1009,"column":8}},{"start":{"line":1009,"column":8},"end":{"line":1009,"column":8}}]},"144":{"line":1009,"type":"binary-expr","locations":[{"start":{"line":1009,"column":12},"end":{"line":1009,"column":24}},{"start":{"line":1009,"column":28},"end":{"line":1009,"column":51}},{"start":{"line":1009,"column":56},"end":{"line":1009,"column":85}},{"start":{"line":1009,"column":89},"end":{"line":1009,"column":112}}]},"145":{"line":1016,"type":"if","locations":[{"start":{"line":1016,"column":8},"end":{"line":1016,"column":8}},{"start":{"line":1016,"column":8},"end":{"line":1016,"column":8}}]},"146":{"line":1021,"type":"if","locations":[{"start":{"line":1021,"column":8},"end":{"line":1021,"column":8}},{"start":{"line":1021,"column":8},"end":{"line":1021,"column":8}}]},"147":{"line":1026,"type":"if","locations":[{"start":{"line":1026,"column":8},"end":{"line":1026,"column":8}},{"start":{"line":1026,"column":8},"end":{"line":1026,"column":8}}]},"148":{"line":1031,"type":"if","locations":[{"start":{"line":1031,"column":8},"end":{"line":1031,"column":8}},{"start":{"line":1031,"column":8},"end":{"line":1031,"column":8}}]},"149":{"line":1036,"type":"if","locations":[{"start":{"line":1036,"column":8},"end":{"line":1036,"column":8}},{"start":{"line":1036,"column":8},"end":{"line":1036,"column":8}}]},"150":{"line":1041,"type":"if","locations":[{"start":{"line":1041,"column":8},"end":{"line":1041,"column":8}},{"start":{"line":1041,"column":8},"end":{"line":1041,"column":8}}]},"151":{"line":1046,"type":"if","locations":[{"start":{"line":1046,"column":8},"end":{"line":1046,"column":8}},{"start":{"line":1046,"column":8},"end":{"line":1046,"column":8}}]},"152":{"line":1051,"type":"if","locations":[{"start":{"line":1051,"column":8},"end":{"line":1051,"column":8}},{"start":{"line":1051,"column":8},"end":{"line":1051,"column":8}}]},"153":{"line":1056,"type":"if","locations":[{"start":{"line":1056,"column":8},"end":{"line":1056,"column":8}},{"start":{"line":1056,"column":8},"end":{"line":1056,"column":8}}]},"154":{"line":1058,"type":"binary-expr","locations":[{"start":{"line":1058,"column":35},"end":{"line":1058,"column":51}},{"start":{"line":1058,"column":55},"end":{"line":1058,"column":56}}]},"155":{"line":1071,"type":"if","locations":[{"start":{"line":1071,"column":8},"end":{"line":1071,"column":8}},{"start":{"line":1071,"column":8},"end":{"line":1071,"column":8}}]},"156":{"line":1087,"type":"if","locations":[{"start":{"line":1087,"column":8},"end":{"line":1087,"column":8}},{"start":{"line":1087,"column":8},"end":{"line":1087,"column":8}}]},"157":{"line":1088,"type":"if","locations":[{"start":{"line":1088,"column":12},"end":{"line":1088,"column":12}},{"start":{"line":1088,"column":12},"end":{"line":1088,"column":12}}]},"158":{"line":1099,"type":"if","locations":[{"start":{"line":1099,"column":12},"end":{"line":1099,"column":12}},{"start":{"line":1099,"column":12},"end":{"line":1099,"column":12}}]},"159":{"line":1100,"type":"binary-expr","locations":[{"start":{"line":1100,"column":69},"end":{"line":1100,"column":80}},{"start":{"line":1100,"column":84},"end":{"line":1100,"column":87}}]},"160":{"line":1108,"type":"if","locations":[{"start":{"line":1108,"column":12},"end":{"line":1108,"column":12}},{"start":{"line":1108,"column":12},"end":{"line":1108,"column":12}}]},"161":{"line":1128,"type":"if","locations":[{"start":{"line":1128,"column":8},"end":{"line":1128,"column":8}},{"start":{"line":1128,"column":8},"end":{"line":1128,"column":8}}]},"162":{"line":1153,"type":"if","locations":[{"start":{"line":1153,"column":8},"end":{"line":1153,"column":8}},{"start":{"line":1153,"column":8},"end":{"line":1153,"column":8}}]},"163":{"line":1183,"type":"if","locations":[{"start":{"line":1183,"column":8},"end":{"line":1183,"column":8}},{"start":{"line":1183,"column":8},"end":{"line":1183,"column":8}}]},"164":{"line":1205,"type":"if","locations":[{"start":{"line":1205,"column":8},"end":{"line":1205,"column":8}},{"start":{"line":1205,"column":8},"end":{"line":1205,"column":8}}]},"165":{"line":1223,"type":"if","locations":[{"start":{"line":1223,"column":8},"end":{"line":1223,"column":8}},{"start":{"line":1223,"column":8},"end":{"line":1223,"column":8}}]},"166":{"line":1223,"type":"binary-expr","locations":[{"start":{"line":1223,"column":12},"end":{"line":1223,"column":21}},{"start":{"line":1223,"column":25},"end":{"line":1223,"column":54}}]},"167":{"line":1228,"type":"if","locations":[{"start":{"line":1228,"column":8},"end":{"line":1228,"column":8}},{"start":{"line":1228,"column":8},"end":{"line":1228,"column":8}}]},"168":{"line":1230,"type":"if","locations":[{"start":{"line":1230,"column":16},"end":{"line":1230,"column":16}},{"start":{"line":1230,"column":16},"end":{"line":1230,"column":16}}]},"169":{"line":1230,"type":"binary-expr","locations":[{"start":{"line":1230,"column":20},"end":{"line":1230,"column":27}},{"start":{"line":1230,"column":31},"end":{"line":1230,"column":61}}]},"170":{"line":1241,"type":"if","locations":[{"start":{"line":1241,"column":8},"end":{"line":1241,"column":8}},{"start":{"line":1241,"column":8},"end":{"line":1241,"column":8}}]},"171":{"line":1268,"type":"if","locations":[{"start":{"line":1268,"column":8},"end":{"line":1268,"column":8}},{"start":{"line":1268,"column":8},"end":{"line":1268,"column":8}}]},"172":{"line":1269,"type":"if","locations":[{"start":{"line":1269,"column":12},"end":{"line":1269,"column":12}},{"start":{"line":1269,"column":12},"end":{"line":1269,"column":12}}]},"173":{"line":1269,"type":"binary-expr","locations":[{"start":{"line":1269,"column":16},"end":{"line":1269,"column":35}},{"start":{"line":1269,"column":39},"end":{"line":1269,"column":56}},{"start":{"line":1269,"column":60},"end":{"line":1269,"column":101}}]},"174":{"line":1277,"type":"if","locations":[{"start":{"line":1277,"column":8},"end":{"line":1277,"column":8}},{"start":{"line":1277,"column":8},"end":{"line":1277,"column":8}}]},"175":{"line":1282,"type":"if","locations":[{"start":{"line":1282,"column":12},"end":{"line":1282,"column":12}},{"start":{"line":1282,"column":12},"end":{"line":1282,"column":12}}]},"176":{"line":1309,"type":"if","locations":[{"start":{"line":1309,"column":8},"end":{"line":1309,"column":8}},{"start":{"line":1309,"column":8},"end":{"line":1309,"column":8}}]},"177":{"line":1311,"type":"if","locations":[{"start":{"line":1311,"column":12},"end":{"line":1311,"column":12}},{"start":{"line":1311,"column":12},"end":{"line":1311,"column":12}}]},"178":{"line":1311,"type":"binary-expr","locations":[{"start":{"line":1311,"column":16},"end":{"line":1311,"column":35}},{"start":{"line":1311,"column":39},"end":{"line":1311,"column":56}},{"start":{"line":1311,"column":60},"end":{"line":1311,"column":94}}]},"179":{"line":1325,"type":"if","locations":[{"start":{"line":1325,"column":8},"end":{"line":1325,"column":8}},{"start":{"line":1325,"column":8},"end":{"line":1325,"column":8}}]},"180":{"line":1325,"type":"binary-expr","locations":[{"start":{"line":1325,"column":12},"end":{"line":1325,"column":44}},{"start":{"line":1325,"column":48},"end":{"line":1325,"column":76}}]},"181":{"line":1326,"type":"if","locations":[{"start":{"line":1326,"column":12},"end":{"line":1326,"column":12}},{"start":{"line":1326,"column":12},"end":{"line":1326,"column":12}}]},"182":{"line":1337,"type":"if","locations":[{"start":{"line":1337,"column":15},"end":{"line":1337,"column":15}},{"start":{"line":1337,"column":15},"end":{"line":1337,"column":15}}]},"183":{"line":1355,"type":"if","locations":[{"start":{"line":1355,"column":8},"end":{"line":1355,"column":8}},{"start":{"line":1355,"column":8},"end":{"line":1355,"column":8}}]},"184":{"line":1364,"type":"if","locations":[{"start":{"line":1364,"column":8},"end":{"line":1364,"column":8}},{"start":{"line":1364,"column":8},"end":{"line":1364,"column":8}}]},"185":{"line":1378,"type":"if","locations":[{"start":{"line":1378,"column":8},"end":{"line":1378,"column":8}},{"start":{"line":1378,"column":8},"end":{"line":1378,"column":8}}]},"186":{"line":1398,"type":"if","locations":[{"start":{"line":1398,"column":8},"end":{"line":1398,"column":8}},{"start":{"line":1398,"column":8},"end":{"line":1398,"column":8}}]},"187":{"line":1405,"type":"if","locations":[{"start":{"line":1405,"column":16},"end":{"line":1405,"column":16}},{"start":{"line":1405,"column":16},"end":{"line":1405,"column":16}}]},"188":{"line":1410,"type":"if","locations":[{"start":{"line":1410,"column":8},"end":{"line":1410,"column":8}},{"start":{"line":1410,"column":8},"end":{"line":1410,"column":8}}]},"189":{"line":1417,"type":"if","locations":[{"start":{"line":1417,"column":12},"end":{"line":1417,"column":12}},{"start":{"line":1417,"column":12},"end":{"line":1417,"column":12}}]},"190":{"line":1435,"type":"binary-expr","locations":[{"start":{"line":1435,"column":30},"end":{"line":1435,"column":43}},{"start":{"line":1435,"column":47},"end":{"line":1435,"column":49}}]},"191":{"line":1438,"type":"if","locations":[{"start":{"line":1438,"column":8},"end":{"line":1438,"column":8}},{"start":{"line":1438,"column":8},"end":{"line":1438,"column":8}}]},"192":{"line":1443,"type":"if","locations":[{"start":{"line":1443,"column":8},"end":{"line":1443,"column":8}},{"start":{"line":1443,"column":8},"end":{"line":1443,"column":8}}]}},"code":["'use strict';","","const packageInfo = require('../../package.json');","const EventEmitter = require('events').EventEmitter;","const net = require('net');","const tls = require('tls');","const os = require('os');","const crypto = require('crypto');","const DataStream = require('./data-stream');","const PassThrough = require('stream').PassThrough;","const shared = require('../shared');","","// default timeout values in ms","const CONNECTION_TIMEOUT = 2 * 60 * 1000; // how much to wait for the connection to be established","const SOCKET_TIMEOUT = 10 * 60 * 1000; // how much to wait for socket inactivity before disconnecting the client","const GREETING_TIMEOUT = 30 * 1000; // how much to wait after connection is established but SMTP greeting is not receieved","","/**"," * Generates a SMTP connection object"," *"," * Optional options object takes the following possible properties:"," *"," *  * **port** - is the port to connect to (defaults to 587 or 465)"," *  * **host** - is the hostname or IP address to connect to (defaults to 'localhost')"," *  * **secure** - use SSL"," *  * **ignoreTLS** - ignore server support for STARTTLS"," *  * **requireTLS** - forces the client to use STARTTLS"," *  * **name** - the name of the client server"," *  * **localAddress** - outbound address to bind to (see: http://nodejs.org/api/net.html#net_net_connect_options_connectionlistener)"," *  * **greetingTimeout** - Time to wait in ms until greeting message is received from the server (defaults to 10000)"," *  * **connectionTimeout** - how many milliseconds to wait for the connection to establish"," *  * **socketTimeout** - Time of inactivity until the connection is closed (defaults to 1 hour)"," *  * **lmtp** - if true, uses LMTP instead of SMTP protocol"," *  * **logger** - bunyan compatible logger interface"," *  * **debug** - if true pass SMTP traffic to the logger"," *  * **tls** - options for createCredentials"," *  * **socket** - existing socket to use instead of creating a new one (see: http://nodejs.org/api/net.html#net_class_net_socket)"," *  * **secured** - boolean indicates that the provided socket has already been upgraded to tls"," *"," * @constructor"," * @namespace SMTP Client module"," * @param {Object} [options] Option properties"," */","class SMTPConnection extends EventEmitter {","    constructor(options) {","        super(options);","","        this.id = crypto.randomBytes(8).toString('base64').replace(/\\W/g, '');","        this.stage = 'init';","","        this.options = options || {};","","        this.secureConnection = !!this.options.secure;","        this.alreadySecured = !!this.options.secured;","","        this.port = this.options.port || (this.secureConnection ? 465 : 587);","        this.host = this.options.host || 'localhost';","","        if (typeof this.options.secure === 'undefined' && this.port === 465) {","            // if secure option is not set but port is 465, then default to secure","            this.secureConnection = true;","        }","","        this.name = this.options.name || this._getHostname();","","        this.logger = shared.getLogger(this.options, {","            component: this.options.component || 'smtp-connection',","            sid: this.id","        });","","        /**","         * Expose version nr, just for the reference","         * @type {String}","         */","        this.version = packageInfo.version;","","        /**","         * If true, then the user is authenticated","         * @type {Boolean}","         */","        this.authenticated = false;","","        /**","         * If set to true, this instance is no longer active","         * @private","         */","        this.destroyed = false;","","        /**","         * Defines if the current connection is secure or not. If not,","         * STARTTLS can be used if available","         * @private","         */","        this.secure = !!this.secureConnection;","","        /**","         * Store incomplete messages coming from the server","         * @private","         */","        this._remainder = '';","","        /**","         * Unprocessed responses from the server","         * @type {Array}","         */","        this._responseQueue = [];","","        this.lastServerResponse = false;","","        /**","         * The socket connecting to the server","         * @publick","         */","        this._socket = false;","","        /**","         * Lists supported auth mechanisms","         * @private","         */","        this._supportedAuth = [];","","        /**","         * Includes current envelope (from, to)","         * @private","         */","        this._envelope = false;","","        /**","         * Lists supported extensions","         * @private","         */","        this._supportedExtensions = [];","","        /**","         * Defines the maximum allowed size for a single message","         * @private","         */","        this._maxAllowedSize = 0;","","        /**","         * Function queue to run if a data chunk comes from the server","         * @private","         */","        this._responseActions = [];","        this._recipientQueue = [];","","        /**","         * Timeout variable for waiting the greeting","         * @private","         */","        this._greetingTimeout = false;","","        /**","         * Timeout variable for waiting the connection to start","         * @private","         */","        this._connectionTimeout = false;","","        /**","         * If the socket is deemed already closed","         * @private","         */","        this._destroyed = false;","","        /**","         * If the socket is already being closed","         * @private","         */","        this._closing = false;","    }","","    /**","     * Creates a connection to a SMTP server and sets up connection","     * listener","     */","    connect(connectCallback) {","        if (typeof connectCallback === 'function') {","            this.once('connect', () => {","                this.logger.debug({","                    tnx: 'smtp'","                }, 'SMTP handshake finished');","                connectCallback();","            });","        }","","        let opts = {","            port: this.port,","            host: this.host","        };","","        if (this.options.localAddress) {","            opts.localAddress = this.options.localAddress;","        }","","        if (this.options.connection) {","            // connection is already opened","            this._socket = this.options.connection;","            if (this.secureConnection && !this.alreadySecured) {","                setImmediate(() => this._upgradeConnection(err => {","                    if (err) {","                        this._onError(new Error('Error initiating TLS - ' + (err.message || err)), 'ETLS', false, 'CONN');","                        return;","                    }","                    this._onConnect();","                }));","            } else {","                setImmediate(() => this._onConnect());","            }","        } else if (this.options.socket) {","            // socket object is set up but not yet connected","            this._socket = this.options.socket;","            try {","                this._socket.connect(this.port, this.host, () => {","                    this._socket.setKeepAlive(true);","                    this._onConnect();","                });","            } catch (E) {","                return setImmediate(() => this._onError(E, 'ECONNECTION', false, 'CONN'));","            }","        } else if (this.secureConnection) {","            // connect using tls","            if (this.options.tls) {","                Object.keys(this.options.tls).forEach(key => {","                    opts[key] = this.options.tls[key];","                });","            }","            try {","                this._socket = tls.connect(this.port, this.host, opts, () => {","                    this._socket.setKeepAlive(true);","                    this._onConnect();","                });","            } catch (E) {","                return setImmediate(() => this._onError(E, 'ECONNECTION', false, 'CONN'));","            }","        } else {","            // connect using plaintext","            try {","                this._socket = net.connect(opts, () => {","                    this._socket.setKeepAlive(true);","                    this._onConnect();","                });","            } catch (E) {","                return setImmediate(() => this._onError(E, 'ECONNECTION', false, 'CONN'));","            }","        }","","        this._connectionTimeout = setTimeout(() => {","            this._onError('Connection timeout', 'ETIMEDOUT', false, 'CONN');","        }, this.options.connectionTimeout || CONNECTION_TIMEOUT);","","        this._socket.on('error', err => {","            this._onError(err, 'ECONNECTION', false, 'CONN');","        });","    }","","    /**","     * Sends QUIT","     */","    quit() {","        this._sendCommand('QUIT');","        this._responseActions.push(this.close);","    }","","    /**","     * Closes the connection to the server","     */","    close() {","        clearTimeout(this._connectionTimeout);","        clearTimeout(this._greetingTimeout);","        this._responseActions = [];","","        // allow to run this function only once","        if (this._closing) {","            return;","        }","        this._closing = true;","","        let closeMethod = 'end';","","        if (this.stage === 'init') {","            // Close the socket immediately when connection timed out","            closeMethod = 'destroy';","        }","","        this.logger.debug({","            tnx: 'smtp'","        }, 'Closing connection to the server using \"%s\"', closeMethod);","","        let socket = this._socket && this._socket.socket || this._socket;","","        if (socket && !socket.destroyed) {","            try {","                this._socket[closeMethod]();","            } catch (E) {","                // just ignore","            }","        }","","        this._destroy();","    }","","    /**","     * Authenticate user","     */","    login(authData, callback) {","        this._auth = authData || {};","","        // Select SASL authentication method","        this._authMethod = (this._auth.method || '').toString().trim().toUpperCase() || false;","        if (!this._authMethod && this._auth.oauth2 && !this._auth.credentials) {","            this._authMethod = 'XOAUTH2';","        } else if (!this._authMethod || (this._authMethod === 'XOAUTH2' && !this._auth.oauth2)) {","            // use first supported","            this._authMethod = (this._supportedAuth[0] || 'PLAIN').toUpperCase().trim();","        }","","        if (this._authMethod !== 'XOAUTH2' && !this._auth.credentials) {","            if (this._auth.user && this._auth.pass) {","                this._auth.credentials = {","                    user: this._auth.user,","                    pass: this._auth.pass","                };","            } else {","                return callback(this._formatError('Missing credentials for \"' + this._authMethod + '\"', 'EAUTH', false, 'API'));","            }","        }","","        switch (this._authMethod) {","            case 'XOAUTH2':","                this._handleXOauth2Token(false, callback);","                return;","            case 'LOGIN':","                this._responseActions.push(str => {","                    this._actionAUTH_LOGIN_USER(str, callback);","                });","                this._sendCommand('AUTH LOGIN');","                return;","            case 'PLAIN':","                this._responseActions.push(str => {","                    this._actionAUTHComplete(str, callback);","                });","                this._sendCommand('AUTH PLAIN ' + new Buffer(","                    //this._auth.user+'\\u0000'+","                    '\\u0000' + // skip authorization identity as it causes problems with some servers","                    this._auth.credentials.user + '\\u0000' +","                    this._auth.credentials.pass, 'utf-8').toString('base64'));","                return;","            case 'CRAM-MD5':","                this._responseActions.push(str => {","                    this._actionAUTH_CRAM_MD5(str, callback);","                });","                this._sendCommand('AUTH CRAM-MD5');","                return;","        }","","        return callback(this._formatError('Unknown authentication method \"' + this._authMethod + '\"', 'EAUTH', false, 'API'));","    }","","    /**","     * Sends a message","     *","     * @param {Object} envelope Envelope object, {from: addr, to: [addr]}","     * @param {Object} message String, Buffer or a Stream","     * @param {Function} callback Callback to return once sending is completed","     */","    send(envelope, message, done) {","        if (!message) {","            return done(this._formatError('Empty message', 'EMESSAGE', false, 'API'));","        }","","        // reject larger messages than allowed","        if (this._maxAllowedSize && envelope.size > this._maxAllowedSize) {","            return setImmediate(() => {","                done(this._formatError('Message size larger than allowed ' + this._maxAllowedSize, 'EMESSAGE', false, 'MAIL FROM'));","            });","        }","","        // ensure that callback is only called once","        let returned = false;","        let callback = function () {","            if (returned) {","                return;","            }","            returned = true;","","            done(...arguments);","        };","","        if (typeof message.on === 'function') {","            message.on('error', err => callback(this._formatError(err, 'ESTREAM', false, 'API')));","        }","","        this._setEnvelope(envelope, (err, info) => {","            if (err) {","                return callback(err);","            }","            let stream = this._createSendStream((err, str) => {","                if (err) {","                    return callback(err);","                }","                info.response = str;","                return callback(null, info);","            });","            if (typeof message.pipe === 'function') {","                message.pipe(stream);","            } else {","                stream.write(message);","                stream.end();","            }","","        });","    }","","    /**","     * Resets connection state","     *","     * @param {Function} callback Callback to return once connection is reset","     */","    reset(callback) {","        this._sendCommand('RSET');","        this._responseActions.push(str => {","            if (str.charAt(0) !== '2') {","                return callback(this._formatError('Could not reset session state:\\n' + str, 'EPROTOCOL', str, 'RSET'));","            }","            this._envelope = false;","            return callback(null, true);","        });","    }","","    /**","     * Connection listener that is run when the connection to","     * the server is opened","     *","     * @event","     */","    _onConnect() {","        clearTimeout(this._connectionTimeout);","","        this.logger.info({","            tnx: 'network',","            localAddress: this._socket.localAddress,","            localPort: this._socket.localPort,","            remoteAddress: this._socket.remoteAddress,","            remotePort: this._socket.remotePort","        }, '%s established to %s:%s', this.secure ? 'Secure connection' : 'Connection', this._socket.remoteAddress, this._socket.remotePort);","","        if (this._destroyed) {","            // Connection was established after we already had canceled it","            this.close();","            return;","        }","","        this.stage = 'connected';","","        // clear existing listeners for the socket","        this._socket.removeAllListeners('data');","        this._socket.removeAllListeners('timeout');","        this._socket.removeAllListeners('close');","        this._socket.removeAllListeners('end');","","        this._socket.on('data', chunk => this._onData(chunk));","        this._socket.once('close', errored => this._onClose(errored));","        this._socket.once('end', () => this._onEnd());","","        this._socket.setTimeout(this.options.socketTimeout || SOCKET_TIMEOUT);","        this._socket.on('timeout', () => this._onTimeout());","","        this._greetingTimeout = setTimeout(() => {","            // if still waiting for greeting, give up","            if (this._socket && !this._destroyed && this._responseActions[0] === this._actionGreeting) {","                this._onError('Greeting never received', 'ETIMEDOUT', false, 'CONN');","            }","        }, this.options.greetingTimeout || GREETING_TIMEOUT);","","        this._responseActions.push(this._actionGreeting);","","        // we have a 'data' listener set up so resume socket if it was paused","        this._socket.resume();","    }","","    /**","     * 'data' listener for data coming from the server","     *","     * @event","     * @param {Buffer} chunk Data chunk coming from the server","     */","    _onData(chunk) {","        if (this._destroyed || !chunk || !chunk.length) {","            return;","        }","","        let data = (chunk || '').toString('binary');","        let lines = (this._remainder + data).split(/\\r?\\n/);","        let lastline;","","        this._remainder = lines.pop();","","        for (let i = 0, len = lines.length; i < len; i++) {","            if (this._responseQueue.length) {","                lastline = this._responseQueue[this._responseQueue.length - 1];","                if (/^\\d+\\-/.test(lastline.split('\\n').pop())) {","                    this._responseQueue[this._responseQueue.length - 1] += '\\n' + lines[i];","                    continue;","                }","            }","            this._responseQueue.push(lines[i]);","        }","","        this._processResponse();","    }","","    /**","     * 'error' listener for the socket","     *","     * @event","     * @param {Error} err Error object","     * @param {String} type Error name","     */","    _onError(err, type, data, command) {","        clearTimeout(this._connectionTimeout);","        clearTimeout(this._greetingTimeout);","","        if (this._destroyed) {","            // just ignore, already closed","            // this might happen when a socket is canceled because of reached timeout","            // but the socket timeout error itself receives only after","            return;","        }","","        err = this._formatError(err, type, data, command);","","        let entry = {","            err","        };","        if (type) {","            entry.errorType = type;","        }","        if (data) {","            entry.errorData = data;","        }","        if (command) {","            entry.command = command;","        }","","        this.logger.error(data, err.message);","","        this.emit('error', err);","        this.close();","    }","","    _formatError(message, type, response, command) {","        let err;","","        if (/Error\\]$/i.test(Object.prototype.toString.call(message))) {","            err = message;","        } else {","            err = new Error(message);","        }","","        if (type && type !== 'Error') {","            err.code = type;","        }","","        if (response) {","            err.response = response;","            err.message += ': ' + response;","        }","","        let responseCode = typeof response === 'string' && Number((response.match(/^\\d+/) || [])[0]) || false;","        if (responseCode) {","            err.responseCode = responseCode;","        }","","        if (command) {","            err.command = command;","        }","","        return err;","    }","","    /**","     * 'close' listener for the socket","     *","     * @event","     */","    _onClose() {","        this.logger.info({","            tnx: 'network'","        }, 'Connection closed');","","        if (this.upgrading && !this._destroyed) {","            return this._onError(new Error('Connection closed unexpectedly'), 'ETLS', false, 'CONN');","        } else if (![this._actionGreeting, this.close].includes(this._responseActions[0]) && !this._destroyed) {","            return this._onError(new Error('Connection closed unexpectedly'), 'ECONNECTION', false, 'CONN');","        }","","        this._destroy();","    }","","    /**","     * 'end' listener for the socket","     *","     * @event","     */","    _onEnd() {","        this._destroy();","    }","","    /**","     * 'timeout' listener for the socket","     *","     * @event","     */","    _onTimeout() {","        return this._onError(new Error('Timeout'), 'ETIMEDOUT', false, 'CONN');","    }","","    /**","     * Destroys the client, emits 'end'","     */","    _destroy() {","        if (this._destroyed) {","            return;","        }","        this._destroyed = true;","        this.emit('end');","    }","","    /**","     * Upgrades the connection to TLS","     *","     * @param {Function} callback Callback function to run when the connection","     *        has been secured","     */","    _upgradeConnection(callback) {","        // do not remove all listeners or it breaks node v0.10 as there's","        // apparently a 'finish' event set that would be cleared as well","","        // we can safely keep 'error', 'end', 'close' etc. events","        this._socket.removeAllListeners('data'); // incoming data is going to be gibberish from this point onwards","        this._socket.removeAllListeners('timeout'); // timeout will be re-set for the new socket object","","        let socketPlain = this._socket;","        let opts = {","            socket: this._socket,","            host: this.host","        };","","        Object.keys(this.options.tls || {}).forEach(key => {","            opts[key] = this.options.tls[key];","        });","","        this.upgrading = true;","        this._socket = tls.connect(opts, () => {","            this.secure = true;","            this.upgrading = false;","            this._socket.on('data', chunk => this._onData(chunk));","","            socketPlain.removeAllListeners('close');","            socketPlain.removeAllListeners('end');","","            return callback(null, true);","        });","","        this._socket.on('error', err => this._onError(err, 'ESOCKET', false, 'CONN'));","        this._socket.once('close', errored => this._onClose(errored));","        this._socket.once('end', () => this._onEnd());","","        this._socket.setTimeout(this.options.socketTimeout || SOCKET_TIMEOUT); // 10 min.","        this._socket.on('timeout', () => this._onTimeout());","","        // resume in case the socket was paused","        socketPlain.resume();","    }","","    /**","     * Processes queued responses from the server","     *","     * @param {Boolean} force If true, ignores _processing flag","     */","    _processResponse() {","        if (!this._responseQueue.length) {","            return false;","        }","","        let str = this.lastServerResponse = (this._responseQueue.shift() || '').toString();","","        if (/^\\d+\\-/.test(str.split('\\n').pop())) {","            // keep waiting for the final part of multiline response","            return;","        }","","        if (this.options.debug || this.options.transactionLog) {","            this.logger.debug({","                tnx: 'server'","            }, str.replace(/\\r?\\n$/, ''));","        }","","        if (!str.trim()) { // skip unexpected empty lines","            setImmediate(() => this._processResponse(true));","        }","","        let action = this._responseActions.shift();","","        if (typeof action === 'function') {","            action.call(this, str);","            setImmediate(() => this._processResponse(true));","        } else {","            return this._onError(new Error('Unexpected Response'), 'EPROTOCOL', str, 'CONN');","        }","    }","","    /**","     * Send a command to the server, append \\r\\n","     *","     * @param {String} str String to be sent to the server","     */","    _sendCommand(str) {","        if (this._destroyed) {","            // Connection already closed, can't send any more data","            return;","        }","","        if (this._socket.destroyed) {","            return this.close();","        }","","        if (this.options.debug || this.options.transactionLog) {","            this.logger.debug({","                tnx: 'client'","            }, (str || '').toString().replace(/\\r?\\n$/, ''));","        }","","        this._socket.write(new Buffer(str + '\\r\\n', 'utf-8'));","    }","","    /**","     * Initiates a new message by submitting envelope data, starting with","     * MAIL FROM: command","     *","     * @param {Object} envelope Envelope object in the form of","     *        {from:'...', to:['...']}","     *        or","     *        {from:{address:'...',name:'...'}, to:[address:'...',name:'...']}","     */","    _setEnvelope(envelope, callback) {","        let args = [];","        let useSmtpUtf8 = false;","","        this._envelope = envelope || {};","        this._envelope.from = (this._envelope.from && this._envelope.from.address || this._envelope.from || '').toString().trim();","","        this._envelope.to = [].concat(this._envelope.to || []).map(to => (to && to.address || to || '').toString().trim());","","        if (!this._envelope.to.length) {","            return callback(this._formatError('No recipients defined', 'EENVELOPE', false, 'API'));","        }","","        if (this._envelope.from && /[\\r\\n<>]/.test(this._envelope.from)) {","            return callback(this._formatError('Invalid sender ' + JSON.stringify(this._envelope.from), 'EENVELOPE', false, 'API'));","        }","","        // check if the sender address uses only ASCII characters,","        // otherwise require usage of SMTPUTF8 extension","        if (/[\\x80-\\uFFFF]/.test(this._envelope.from)) {","            useSmtpUtf8 = true;","        }","","        for (let i = 0, len = this._envelope.to.length; i < len; i++) {","            if (!this._envelope.to[i] || /[\\r\\n<>]/.test(this._envelope.to[i])) {","                return callback(this._formatError('Invalid recipient ' + JSON.stringify(this._envelope.to[i]), 'EENVELOPE', false, 'API'));","            }","","            // check if the recipients addresses use only ASCII characters,","            // otherwise require usage of SMTPUTF8 extension","            if (/[\\x80-\\uFFFF]/.test(this._envelope.to[i])) {","                useSmtpUtf8 = true;","            }","        }","","        // clone the recipients array for latter manipulation","        this._envelope.rcptQueue = JSON.parse(JSON.stringify(this._envelope.to || []));","        this._envelope.rejected = [];","        this._envelope.rejectedErrors = [];","        this._envelope.accepted = [];","","        if (this._envelope.dsn) {","            try {","                this._envelope.dsn = this._setDsnEnvelope(this._envelope.dsn);","            } catch (err) {","                return callback(this._formatError('Invalid DSN ' + err.message, 'EENVELOPE', false, 'API'));","            }","        }","","        this._responseActions.push(str => {","            this._actionMAIL(str, callback);","        });","","        // If the server supports SMTPUTF8 and the envelope includes an internationalized","        // email address then append SMTPUTF8 keyword to the MAIL FROM command","        if (useSmtpUtf8 && this._supportedExtensions.includes('SMTPUTF8')) {","            args.push('SMTPUTF8');","            this._usingSmtpUtf8 = true;","        }","","        // If the server supports 8BITMIME and the message might contain non-ascii bytes","        // then append the 8BITMIME keyword to the MAIL FROM command","        if (this._envelope.use8BitMime && this._supportedExtensions.includes('8BITMIME')) {","            args.push('BODY=8BITMIME');","            this._using8BitMime = true;","        }","","        if (this._envelope.size && this._supportedExtensions.includes('SIZE')) {","            args.push('SIZE=' + this._envelope.size);","        }","","        // If the server supports DSN and the envelope includes an DSN prop","        // then append DSN params to the MAIL FROM command","        if (this._envelope.dsn && this._supportedExtensions.includes('DSN')) {","            if (this._envelope.dsn.ret) {","                args.push('RET=' + shared.encodeXText(this._envelope.dsn.ret));","            }","            if (this._envelope.dsn.envid) {","                args.push('ENVID=' + shared.encodeXText(this._envelope.dsn.envid));","            }","        }","","        this._sendCommand('MAIL FROM:<' + (this._envelope.from) + '>' + (args.length ? ' ' + args.join(' ') : ''));","    }","","    _setDsnEnvelope(params) {","        let ret = (params.ret || params.return || '').toString().toUpperCase() || null;","        if (ret) {","            switch (ret) {","                case 'HDRS':","                case 'HEADERS':","                    ret = 'HDRS';","                    break;","                case 'FULL':","                case 'BODY':","                    ret = 'full';","                    break;","            }","        }","","        if (ret && !['FULL', 'HDRS'].includes(ret)) {","            throw new Error('ret: ' + JSON.stringify(ret));","        }","","        let envid = (params.envid || params.id || '').toString() || null;","","        let notify = params.notify || null;","        if (notify) {","            if (typeof notify === 'string') {","                notify = notify.split(',');","            }","            notify = notify.map(n => n.trim().toUpperCase());","            let validNotify = ['NEVER', 'SUCCESS', 'FAILURE', 'DELAY'];","            let invaliNotify = notify.filter(n => !validNotify.includes(n));","            if (invaliNotify.length || (notify.length > 1 && notify.includes('NEVER'))) {","                throw new Error('notify: ' + JSON.stringify(notify.join(',')));","            }","            notify = notify.join(',');","        }","","        let orcpt = (params.orcpt || params.recipient).toString() || null;","        if (orcpt && orcpt.indexOf(';') < 0) {","            orcpt = 'rfc822;' + orcpt;","        }","","        return {","            ret,","            envid,","            notify,","            orcpt","        };","    }","","    _getDsnRcptToArgs() {","        let args = [];","        // If the server supports DSN and the envelope includes an DSN prop","        // then append DSN params to the RCPT TO command","        if (this._envelope.dsn && this._supportedExtensions.includes('DSN')) {","            if (this._envelope.dsn.notify) {","                args.push('NOTIFY=' + shared.encodeXText(this._envelope.dsn.notify));","            }","            if (this._envelope.dsn.orcpt) {","                args.push('ORCPT=' + shared.encodeXText(this._envelope.dsn.orcpt));","            }","        }","        return (args.length ? ' ' + args.join(' ') : '');","    }","","    _createSendStream(callback) {","        let dataStream = new DataStream();","        let logStream;","","        if (this.options.lmtp) {","            this._envelope.accepted.forEach((recipient, i) => {","                let final = i === this._envelope.accepted.length - 1;","                this._responseActions.push(str => {","                    this._actionLMTPStream(recipient, final, str, callback);","                });","            });","        } else {","            this._responseActions.push(str => {","                this._actionSMTPStream(str, callback);","            });","        }","","        dataStream.pipe(this._socket, {","            end: false","        });","","        if (this.options.debug) {","            logStream = new PassThrough();","            logStream.on('readable', () => {","                let chunk;","                while ((chunk = logStream.read())) {","                    this.logger.debug({","                        tnx: 'message'","                    }, chunk.toString('binary').replace(/\\r?\\n$/, ''));","                }","            });","            dataStream.pipe(logStream);","        }","","        dataStream.once('end', () => {","            this.logger.info({","                tnx: 'message',","                inByteCount: dataStream.inByteCount,","                outByteCount: dataStream.outByteCount","            }, '<%s bytes encoded mime message (source size %s bytes)>', dataStream.outByteCount, dataStream.inByteCount);","        });","","        return dataStream;","    }","","    /** ACTIONS **/","","    /**","     * Will be run after the connection is created and the server sends","     * a greeting. If the incoming message starts with 220 initiate","     * SMTP session by sending EHLO command","     *","     * @param {String} str Message from the server","     */","    _actionGreeting(str) {","        clearTimeout(this._greetingTimeout);","","        if (str.substr(0, 3) !== '220') {","            this._onError(new Error('Invalid greeting from server:\\n' + str), 'EPROTOCOL', str, 'CONN');","            return;","        }","","        if (this.options.lmtp) {","            this._responseActions.push(this._actionLHLO);","            this._sendCommand('LHLO ' + this.name);","        } else {","            this._responseActions.push(this._actionEHLO);","            this._sendCommand('EHLO ' + this.name);","        }","    }","","    /**","     * Handles server response for LHLO command. If it yielded in","     * error, emit 'error', otherwise treat this as an EHLO response","     *","     * @param {String} str Message from the server","     */","    _actionLHLO(str) {","        if (str.charAt(0) !== '2') {","            this._onError(new Error('Invalid response for LHLO:\\n' + str), 'EPROTOCOL', str, 'LHLO');","            return;","        }","","        this._actionEHLO(str);","    }","","    /**","     * Handles server response for EHLO command. If it yielded in","     * error, try HELO instead, otherwise initiate TLS negotiation","     * if STARTTLS is supported by the server or move into the","     * authentication phase.","     *","     * @param {String} str Message from the server","     */","    _actionEHLO(str) {","        let match;","","        if (str.substr(0, 3) === '421') {","            this._onError(new Error('Server terminates connection:\\n' + str), 'ECONNECTION', str, 'EHLO');","            return;","        }","","        if (str.charAt(0) !== '2') {","            if (this.options.requireTLS) {","                this._onError(new Error('EHLO failed but HELO does not support required STARTTLS:\\n' + str), 'ECONNECTION', str, 'EHLO');","                return;","            }","","            // Try HELO instead","            this._responseActions.push(this._actionHELO);","            this._sendCommand('HELO ' + this.name);","            return;","        }","","        // Detect if the server supports STARTTLS","        if (!this.secure && !this.options.ignoreTLS && (/[ \\-]STARTTLS\\b/mi.test(str) || this.options.requireTLS)) {","            this._sendCommand('STARTTLS');","            this._responseActions.push(this._actionSTARTTLS);","            return;","        }","","        // Detect if the server supports SMTPUTF8","        if (/[ \\-]SMTPUTF8\\b/mi.test(str)) {","            this._supportedExtensions.push('SMTPUTF8');","        }","","        // Detect if the server supports DSN","        if (/[ \\-]DSN\\b/mi.test(str)) {","            this._supportedExtensions.push('DSN');","        }","","        // Detect if the server supports 8BITMIME","        if (/[ \\-]8BITMIME\\b/mi.test(str)) {","            this._supportedExtensions.push('8BITMIME');","        }","","        // Detect if the server supports PIPELINING","        if (/[ \\-]PIPELINING\\b/mi.test(str)) {","            this._supportedExtensions.push('PIPELINING');","        }","","        // Detect if the server supports PLAIN auth","        if (/AUTH(?:(\\s+|=)[^\\n]*\\s+|\\s+|=)PLAIN/i.test(str)) {","            this._supportedAuth.push('PLAIN');","        }","","        // Detect if the server supports LOGIN auth","        if (/AUTH(?:(\\s+|=)[^\\n]*\\s+|\\s+|=)LOGIN/i.test(str)) {","            this._supportedAuth.push('LOGIN');","        }","","        // Detect if the server supports CRAM-MD5 auth","        if (/AUTH(?:(\\s+|=)[^\\n]*\\s+|\\s+|=)CRAM-MD5/i.test(str)) {","            this._supportedAuth.push('CRAM-MD5');","        }","","        // Detect if the server supports XOAUTH2 auth","        if (/AUTH(?:(\\s+|=)[^\\n]*\\s+|\\s+|=)XOAUTH2/i.test(str)) {","            this._supportedAuth.push('XOAUTH2');","        }","","        // Detect if the server supports SIZE extensions (and the max allowed size)","        if ((match = str.match(/[ \\-]SIZE(?:[ \\t]+(\\d+))?/mi))) {","            this._supportedExtensions.push('SIZE');","            this._maxAllowedSize = Number(match[1]) || 0;","        }","","        this.emit('connect');","    }","","    /**","     * Handles server response for HELO command. If it yielded in","     * error, emit 'error', otherwise move into the authentication phase.","     *","     * @param {String} str Message from the server","     */","    _actionHELO(str) {","        if (str.charAt(0) !== '2') {","            this._onError(new Error('Invalid response for EHLO/HELO:\\n' + str), 'EPROTOCOL', str, 'HELO');","            return;","        }","","        this.emit('connect');","    }","","    /**","     * Handles server response for STARTTLS command. If there's an error","     * try HELO instead, otherwise initiate TLS upgrade. If the upgrade","     * succeedes restart the EHLO","     *","     * @param {String} str Message from the server","     */","    _actionSTARTTLS(str) {","        if (str.charAt(0) !== '2') {","            if (this.options.opportunisticTLS) {","                this.logger.info({","                    tnx: 'smtp'","                }, 'Failed STARTTLS upgrade, continuing unencrypted');","                return this.emit('connect');","            }","            this._onError(new Error('Error upgrading connection with STARTTLS'), 'ETLS', str, 'STARTTLS');","            return;","        }","","        this._upgradeConnection((err, secured) => {","            if (err) {","                this._onError(new Error('Error initiating TLS - ' + (err.message || err)), 'ETLS', false, 'STARTTLS');","                return;","            }","","            this.logger.info({","                tnx: 'smtp'","            }, 'Connection upgraded with STARTTLS');","","            if (secured) {","                // restart session","                this._responseActions.push(this._actionEHLO);","                this._sendCommand('EHLO ' + this.name);","            } else {","                this.emit('connect');","            }","        });","    }","","    /**","     * Handle the response for AUTH LOGIN command. We are expecting","     * '334 VXNlcm5hbWU6' (base64 for 'Username:'). Data to be sent as","     * response needs to be base64 encoded username. We do not need","     * exact match but settle with 334 response in general as some","     * hosts invalidly use a longer message than VXNlcm5hbWU6","     *","     * @param {String} str Message from the server","     */","    _actionAUTH_LOGIN_USER(str, callback) {","        if (!/^334[ \\-]/.test(str)) { // expecting '334 VXNlcm5hbWU6'","            callback(this._formatError('Invalid login sequence while waiting for \"334 VXNlcm5hbWU6\"', 'EAUTH', str, 'AUTH LOGIN'));","            return;","        }","","        this._responseActions.push(str => {","            this._actionAUTH_LOGIN_PASS(str, callback);","        });","","        this._sendCommand(new Buffer(this._auth.credentials.user + '', 'utf-8').toString('base64'));","    }","","    /**","     * Handle the response for AUTH CRAM-MD5 command. We are expecting","     * '334 <challenge string>'. Data to be sent as response needs to be","     * base64 decoded challenge string, MD5 hashed using the password as","     * a HMAC key, prefixed by the username and a space, and finally all","     * base64 encoded again.","     *","     * @param {String} str Message from the server","     */","    _actionAUTH_CRAM_MD5(str, callback) {","        let challengeMatch = str.match(/^334\\s+(.+)$/);","        let challengeString = '';","","        if (!challengeMatch) {","            return callback(this._formatError('Invalid login sequence while waiting for server challenge string', 'EAUTH', str, 'AUTH CRAM-MD5'));","        } else {","            challengeString = challengeMatch[1];","        }","","        // Decode from base64","        let base64decoded = new Buffer(challengeString, 'base64').toString('ascii'),","            hmac_md5 = crypto.createHmac('md5', this._auth.credentials.pass);","","        hmac_md5.update(base64decoded);","","        let hex_hmac = hmac_md5.digest('hex');","        let prepended = this._auth.credentials.user + ' ' + hex_hmac;","","        this._responseActions.push(str => {","            this._actionAUTH_CRAM_MD5_PASS(str, callback);","        });","","","        this._sendCommand(new Buffer(prepended).toString('base64'));","    }","","    /**","     * Handles the response to CRAM-MD5 authentication, if there's no error,","     * the user can be considered logged in. Start waiting for a message to send","     *","     * @param {String} str Message from the server","     */","    _actionAUTH_CRAM_MD5_PASS(str, callback) {","        if (!str.match(/^235\\s+/)) {","            return callback(this._formatError('Invalid login sequence while waiting for \"235\"', 'EAUTH', str, 'AUTH CRAM-MD5'));","        }","","        this.logger.info({","            tnx: 'smtp',","            username: this._auth.user,","            action: 'authenticated',","            method: this._authMethod","        }, 'User %s authenticated', JSON.stringify(this._auth.user));","        this.authenticated = true;","        callback(null, true);","    }","","    /**","     * Handle the response for AUTH LOGIN command. We are expecting","     * '334 UGFzc3dvcmQ6' (base64 for 'Password:'). Data to be sent as","     * response needs to be base64 encoded password.","     *","     * @param {String} str Message from the server","     */","    _actionAUTH_LOGIN_PASS(str, callback) {","        if (!/^334[ \\-]/.test(str)) { // expecting '334 UGFzc3dvcmQ6'","            return callback(this._formatError('Invalid login sequence while waiting for \"334 UGFzc3dvcmQ6\"', 'EAUTH', str, 'AUTH LOGIN'));","        }","","        this._responseActions.push(str => {","            this._actionAUTHComplete(str, callback);","        });","","        this._sendCommand(new Buffer(this._auth.credentials.pass + '', 'utf-8').toString('base64'));","    }","","    /**","     * Handles the response for authentication, if there's no error,","     * the user can be considered logged in. Start waiting for a message to send","     *","     * @param {String} str Message from the server","     */","    _actionAUTHComplete(str, isRetry, callback) {","        if (!callback && typeof isRetry === 'function') {","            callback = isRetry;","            isRetry = false;","        }","","        if (str.substr(0, 3) === '334') {","            this._responseActions.push(str => {","                if (isRetry || this._authMethod !== 'XOAUTH2') {","                    this._actionAUTHComplete(str, true, callback);","                } else {","                    // fetch a new OAuth2 access token","                    setImmediate(() => this._handleXOauth2Token(true, callback));","                }","            });","            this._sendCommand('');","            return;","        }","","        if (str.charAt(0) !== '2') {","            this.logger.info({","                tnx: 'smtp',","                username: this._auth.user,","                action: 'authfail',","                method: this._authMethod","            }, 'User %s failed to authenticate', JSON.stringify(this._auth.user));","            return callback(this._formatError('Invalid login', 'EAUTH', str, 'AUTH ' + this._authMethod));","        }","","        this.logger.info({","            tnx: 'smtp',","            username: this._auth.user,","            action: 'authenticated',","            method: this._authMethod","        }, 'User %s authenticated', JSON.stringify(this._auth.user));","        this.authenticated = true;","        callback(null, true);","    }","","    /**","     * Handle response for a MAIL FROM: command","     *","     * @param {String} str Message from the server","     */","    _actionMAIL(str, callback) {","        let message, curRecipient;","        if (Number(str.charAt(0)) !== 2) {","            if (this._usingSmtpUtf8 && /^550 /.test(str) && /[\\x80-\\uFFFF]/.test(this._envelope.from)) {","                message = 'Internationalized mailbox name not allowed';","            } else {","                message = 'Mail command failed';","            }","            return callback(this._formatError(message, 'EENVELOPE', str, 'MAIL FROM'));","        }","","        if (!this._envelope.rcptQueue.length) {","            return callback(this._formatError('Can\\'t send mail - no recipients defined', 'EENVELOPE', false, 'API'));","        } else {","            this._recipientQueue = [];","","            if (this._supportedExtensions.includes('PIPELINING')) {","                while (this._envelope.rcptQueue.length) {","                    curRecipient = this._envelope.rcptQueue.shift();","                    this._recipientQueue.push(curRecipient);","                    this._responseActions.push(str => {","                        this._actionRCPT(str, callback);","                    });","                    this._sendCommand('RCPT TO:<' + curRecipient + '>' + this._getDsnRcptToArgs());","                }","            } else {","                curRecipient = this._envelope.rcptQueue.shift();","                this._recipientQueue.push(curRecipient);","                this._responseActions.push(str => {","                    this._actionRCPT(str, callback);","                });","                this._sendCommand('RCPT TO:<' + curRecipient + '>' + this._getDsnRcptToArgs());","            }","        }","    }","","    /**","     * Handle response for a RCPT TO: command","     *","     * @param {String} str Message from the server","     */","    _actionRCPT(str, callback) {","        let message, err, curRecipient = this._recipientQueue.shift();","        if (Number(str.charAt(0)) !== 2) {","            // this is a soft error","            if (this._usingSmtpUtf8 && /^553 /.test(str) && /[\\x80-\\uFFFF]/.test(curRecipient)) {","                message = 'Internationalized mailbox name not allowed';","            } else {","                message = 'Recipient command failed';","            }","            this._envelope.rejected.push(curRecipient);","            // store error for the failed recipient","            err = this._formatError(message, 'EENVELOPE', str, 'RCPT TO');","            err.recipient = curRecipient;","            this._envelope.rejectedErrors.push(err);","        } else {","            this._envelope.accepted.push(curRecipient);","        }","","        if (!this._envelope.rcptQueue.length && !this._recipientQueue.length) {","            if (this._envelope.rejected.length < this._envelope.to.length) {","                this._responseActions.push(str => {","                    this._actionDATA(str, callback);","                });","                this._sendCommand('DATA');","            } else {","                err = this._formatError('Can\\'t send mail - all recipients were rejected', 'EENVELOPE', str, 'RCPT TO');","                err.rejected = this._envelope.rejected;","                err.rejectedErrors = this._envelope.rejectedErrors;","                return callback(err);","            }","        } else if (this._envelope.rcptQueue.length) {","            curRecipient = this._envelope.rcptQueue.shift();","            this._recipientQueue.push(curRecipient);","            this._responseActions.push(str => {","                this._actionRCPT(str, callback);","            });","            this._sendCommand('RCPT TO:<' + curRecipient + '>' + this._getDsnRcptToArgs());","        }","    }","","    /**","     * Handle response for a DATA command","     *","     * @param {String} str Message from the server","     */","    _actionDATA(str, callback) {","        // response should be 354 but according to this issue https://github.com/eleith/emailjs/issues/24","        // some servers might use 250 instead, so lets check for 2 or 3 as the first digit","        if (!/^[23]/.test(str)) {","            return callback(this._formatError('Data command failed', 'EENVELOPE', str, 'DATA'));","        }","","        let response = {","            accepted: this._envelope.accepted,","            rejected: this._envelope.rejected","        };","","        if (this._envelope.rejectedErrors.length) {","            response.rejectedErrors = this._envelope.rejectedErrors;","        }","","        callback(null, response);","    }","","    /**","     * Handle response for a DATA stream when using SMTP","     * We expect a single response that defines if the sending succeeded or failed","     *","     * @param {String} str Message from the server","     */","    _actionSMTPStream(str, callback) {","        if (Number(str.charAt(0)) !== 2) {","            // Message failed","            return callback(this._formatError('Message failed', 'EMESSAGE', str, 'DATA'));","        } else {","            // Message sent succesfully","            return callback(null, str);","        }","    }","","    /**","     * Handle response for a DATA stream","     * We expect a separate response for every recipient. All recipients can either","     * succeed or fail separately","     *","     * @param {String} recipient The recipient this response applies to","     * @param {Boolean} final Is this the final recipient?","     * @param {String} str Message from the server","     */","    _actionLMTPStream(recipient, final, str, callback) {","        let err;","        if (Number(str.charAt(0)) !== 2) {","            // Message failed","            err = this._formatError('Message failed for recipient ' + recipient, 'EMESSAGE', str, 'DATA');","            err.recipient = recipient;","            this._envelope.rejected.push(recipient);","            this._envelope.rejectedErrors.push(err);","            for (let i = 0, len = this._envelope.accepted.length; i < len; i++) {","                if (this._envelope.accepted[i] === recipient) {","                    this._envelope.accepted.splice(i, 1);","                }","            }","        }","        if (final) {","            return callback(null, str);","        }","    }","","    _handleXOauth2Token(isRetry, callback) {","        this._auth.oauth2.getToken(isRetry, (err, accessToken) => {","            if (err) {","                this.logger.info({","                    tnx: 'smtp',","                    username: this._auth.user,","                    action: 'authfail',","                    method: this._authMethod","                }, 'User %s failed to authenticate', JSON.stringify(this._auth.user));","                return callback(this._formatError(err, 'EAUTH', false, 'AUTH XOAUTH2'));","            }","            this._responseActions.push(str => {","                this._actionAUTHComplete(str, isRetry, callback);","            });","            this._sendCommand('AUTH XOAUTH2 ' + this._auth.oauth2.buildXOAuth2Token(accessToken));","        });","    }","","    _getHostname() {","        // defaul hostname is machine hostname or [IP]","        let defaultHostname = os.hostname() || '';","","        // ignore if not FQDN","        if (defaultHostname.indexOf('.') < 0) {","            defaultHostname = '[127.0.0.1]';","        }","","        // IP should be enclosed in []","        if (defaultHostname.match(/^\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}$/)) {","            defaultHostname = '[' + defaultHostname + ']';","        }","","        return defaultHostname;","    }","}","","module.exports = SMTPConnection;",""],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"14":1,"15":1,"16":1,"46":0,"48":0,"49":0,"51":0,"53":0,"54":0,"56":0,"57":0,"59":0,"61":0,"64":0,"66":0,"75":0,"81":0,"87":0,"94":0,"100":0,"106":0,"108":0,"114":0,"120":0,"126":0,"132":0,"138":0,"144":0,"145":0,"151":0,"157":0,"163":0,"169":0,"177":0,"178":0,"179":0,"182":0,"186":0,"191":0,"192":0,"195":0,"197":0,"198":0,"199":0,"200":0,"201":0,"202":0,"204":0,"207":0,"209":0,"211":0,"212":0,"213":0,"214":0,"215":0,"218":0,"220":0,"222":0,"223":0,"224":0,"227":0,"228":0,"229":0,"230":0,"233":0,"237":0,"238":0,"239":0,"240":0,"243":0,"247":0,"248":0,"251":0,"252":0,"260":0,"261":0,"268":0,"269":0,"270":0,"273":0,"274":0,"276":0,"278":0,"280":0,"282":0,"285":0,"289":0,"291":0,"292":0,"293":0,"299":0,"306":0,"309":0,"310":0,"311":0,"312":0,"314":0,"317":0,"318":0,"319":0,"324":0,"328":0,"330":0,"331":0,"333":0,"334":0,"336":0,"337":0,"339":0,"340":0,"342":0,"347":0,"349":0,"350":0,"352":0,"353":0,"356":0,"367":0,"368":0,"372":0,"373":0,"374":0,"379":0,"380":0,"381":0,"382":0,"384":0,"386":0,"389":0,"390":0,"393":0,"394":0,"395":0,"397":0,"398":0,"399":0,"401":0,"402":0,"404":0,"405":0,"407":0,"408":0,"420":0,"421":0,"422":0,"423":0,"425":0,"426":0,"437":0,"439":0,"447":0,"449":0,"450":0,"453":0,"456":0,"457":0,"458":0,"459":0,"461":0,"462":0,"463":0,"465":0,"466":0,"468":0,"470":0,"471":0,"475":0,"478":0,"488":0,"489":0,"492":0,"493":0,"494":0,"496":0,"498":0,"499":0,"500":0,"501":0,"502":0,"503":0,"506":0,"509":0,"520":0,"521":0,"523":0,"527":0,"530":0,"532":0,"535":0,"536":0,"538":0,"539":0,"541":0,"542":0,"545":0,"547":0,"548":0,"552":0,"554":0,"555":0,"557":0,"560":0,"561":0,"564":0,"565":0,"566":0,"569":0,"570":0,"571":0,"574":0,"575":0,"578":0,"587":0,"591":0,"592":0,"593":0,"594":0,"597":0,"606":0,"615":0,"622":0,"623":0,"625":0,"626":0,"640":0,"641":0,"643":0,"644":0,"649":0,"650":0,"653":0,"654":0,"655":0,"656":0,"657":0,"659":0,"660":0,"662":0,"665":0,"666":0,"667":0,"669":0,"670":0,"673":0,"682":0,"683":0,"686":0,"688":0,"690":0,"693":0,"694":0,"699":0,"700":0,"703":0,"705":0,"706":0,"707":0,"709":0,"719":0,"721":0,"724":0,"725":0,"728":0,"729":0,"734":0,"747":0,"748":0,"750":0,"751":0,"753":0,"755":0,"756":0,"759":0,"760":0,"765":0,"766":0,"769":0,"770":0,"771":0,"776":0,"777":0,"782":0,"783":0,"784":0,"785":0,"787":0,"788":0,"789":0,"791":0,"795":0,"796":0,"801":0,"802":0,"803":0,"808":0,"809":0,"810":0,"813":0,"814":0,"819":0,"820":0,"821":0,"823":0,"824":0,"828":0,"832":0,"833":0,"834":0,"837":0,"838":0,"841":0,"842":0,"846":0,"847":0,"850":0,"852":0,"853":0,"854":0,"855":0,"857":0,"858":0,"859":0,"860":0,"861":0,"863":0,"866":0,"867":0,"868":0,"871":0,"880":0,"883":0,"884":0,"885":0,"887":0,"888":0,"891":0,"895":0,"896":0,"898":0,"899":0,"900":0,"901":0,"902":0,"906":0,"907":0,"911":0,"915":0,"916":0,"917":0,"918":0,"919":0,"920":0,"925":0,"928":0,"929":0,"936":0,"949":0,"951":0,"952":0,"953":0,"956":0,"957":0,"958":0,"960":0,"961":0,"972":0,"973":0,"974":0,"977":0,"989":0,"991":0,"992":0,"993":0,"996":0,"997":0,"998":0,"999":0,"1003":0,"1004":0,"1005":0,"1009":0,"1010":0,"1011":0,"1012":0,"1016":0,"1017":0,"1021":0,"1022":0,"1026":0,"1027":0,"1031":0,"1032":0,"1036":0,"1037":0,"1041":0,"1042":0,"1046":0,"1047":0,"1051":0,"1052":0,"1056":0,"1057":0,"1058":0,"1061":0,"1071":0,"1072":0,"1073":0,"1076":0,"1087":0,"1088":0,"1089":0,"1092":0,"1094":0,"1095":0,"1098":0,"1099":0,"1100":0,"1101":0,"1104":0,"1108":0,"1110":0,"1111":0,"1113":0,"1128":0,"1129":0,"1130":0,"1133":0,"1134":0,"1137":0,"1150":0,"1151":0,"1153":0,"1154":0,"1156":0,"1160":0,"1163":0,"1165":0,"1166":0,"1168":0,"1169":0,"1173":0,"1183":0,"1184":0,"1187":0,"1193":0,"1194":0,"1205":0,"1206":0,"1209":0,"1210":0,"1213":0,"1223":0,"1224":0,"1225":0,"1228":0,"1229":0,"1230":0,"1231":0,"1234":0,"1237":0,"1238":0,"1241":0,"1242":0,"1248":0,"1251":0,"1257":0,"1258":0,"1267":0,"1268":0,"1269":0,"1270":0,"1272":0,"1274":0,"1277":0,"1278":0,"1280":0,"1282":0,"1283":0,"1284":0,"1285":0,"1286":0,"1287":0,"1289":0,"1292":0,"1293":0,"1294":0,"1295":0,"1297":0,"1308":0,"1309":0,"1311":0,"1312":0,"1314":0,"1316":0,"1318":0,"1319":0,"1320":0,"1322":0,"1325":0,"1326":0,"1327":0,"1328":0,"1330":0,"1332":0,"1333":0,"1334":0,"1335":0,"1337":0,"1338":0,"1339":0,"1340":0,"1341":0,"1343":0,"1355":0,"1356":0,"1359":0,"1364":0,"1365":0,"1368":0,"1378":0,"1380":0,"1383":0,"1397":0,"1398":0,"1400":0,"1401":0,"1402":0,"1403":0,"1404":0,"1405":0,"1406":0,"1410":0,"1411":0,"1416":0,"1417":0,"1418":0,"1424":0,"1426":0,"1427":0,"1429":0,"1435":0,"1438":0,"1439":0,"1443":0,"1444":0,"1447":0,"1451":1}},"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/smtp-connection/data-stream.js":{"path":"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/smtp-connection/data-stream.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0,0,0,0],"8":[0,0],"9":[0,0],"10":[0,0,0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0]},"f":{"1":0,"2":0,"3":0},"fnMap":{"1":{"name":"(anonymous_1)","line":14,"loc":{"start":{"line":14,"column":15},"end":{"line":14,"column":25}}},"2":{"name":"(anonymous_2)","line":29,"loc":{"start":{"line":29,"column":14},"end":{"line":29,"column":38}}},"3":{"name":"(anonymous_3)","line":97,"loc":{"start":{"line":97,"column":10},"end":{"line":97,"column":17}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":33}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":35}},"3":{"start":{"line":15,"column":8},"end":{"line":15,"column":23}},"4":{"start":{"line":17,"column":8},"end":{"line":17,"column":37}},"5":{"start":{"line":18,"column":8},"end":{"line":18,"column":27}},"6":{"start":{"line":20,"column":8},"end":{"line":20,"column":29}},"7":{"start":{"line":21,"column":8},"end":{"line":21,"column":30}},"8":{"start":{"line":22,"column":8},"end":{"line":22,"column":30}},"9":{"start":{"line":30,"column":8},"end":{"line":30,"column":24}},"10":{"start":{"line":31,"column":8},"end":{"line":31,"column":25}},"11":{"start":{"line":32,"column":8},"end":{"line":32,"column":32}},"12":{"start":{"line":33,"column":8},"end":{"line":33,"column":16}},"13":{"start":{"line":35,"column":8},"end":{"line":37,"column":9}},"14":{"start":{"line":36,"column":12},"end":{"line":36,"column":26}},"15":{"start":{"line":39,"column":8},"end":{"line":41,"column":9}},"16":{"start":{"line":40,"column":12},"end":{"line":40,"column":38}},"17":{"start":{"line":43,"column":8},"end":{"line":43,"column":41}},"18":{"start":{"line":45,"column":8},"end":{"line":73,"column":9}},"19":{"start":{"line":46,"column":12},"end":{"line":72,"column":13}},"20":{"start":{"line":47,"column":16},"end":{"line":56,"column":17}},"21":{"start":{"line":51,"column":20},"end":{"line":51,"column":54}},"22":{"start":{"line":52,"column":20},"end":{"line":52,"column":37}},"23":{"start":{"line":53,"column":20},"end":{"line":53,"column":49}},"24":{"start":{"line":54,"column":20},"end":{"line":54,"column":47}},"25":{"start":{"line":55,"column":20},"end":{"line":55,"column":36}},"26":{"start":{"line":57,"column":19},"end":{"line":72,"column":13}},"27":{"start":{"line":58,"column":16},"end":{"line":71,"column":17}},"28":{"start":{"line":62,"column":20},"end":{"line":68,"column":21}},"29":{"start":{"line":63,"column":24},"end":{"line":63,"column":54}},"30":{"start":{"line":64,"column":24},"end":{"line":64,"column":41}},"31":{"start":{"line":65,"column":24},"end":{"line":65,"column":51}},"32":{"start":{"line":67,"column":24},"end":{"line":67,"column":38}},"33":{"start":{"line":69,"column":20},"end":{"line":69,"column":52}},"34":{"start":{"line":70,"column":20},"end":{"line":70,"column":36}},"35":{"start":{"line":75,"column":8},"end":{"line":88,"column":9}},"36":{"start":{"line":77,"column":12},"end":{"line":81,"column":13}},"37":{"start":{"line":78,"column":16},"end":{"line":78,"column":43}},"38":{"start":{"line":79,"column":16},"end":{"line":79,"column":33}},"39":{"start":{"line":80,"column":16},"end":{"line":80,"column":39}},"40":{"start":{"line":83,"column":12},"end":{"line":83,"column":42}},"41":{"start":{"line":84,"column":12},"end":{"line":84,"column":55}},"42":{"start":{"line":86,"column":12},"end":{"line":86,"column":46}},"43":{"start":{"line":87,"column":12},"end":{"line":87,"column":29}},"44":{"start":{"line":90,"column":8},"end":{"line":90,"column":48}},"45":{"start":{"line":91,"column":8},"end":{"line":91,"column":15}},"46":{"start":{"line":98,"column":8},"end":{"line":98,"column":16}},"47":{"start":{"line":99,"column":8},"end":{"line":105,"column":9}},"48":{"start":{"line":100,"column":12},"end":{"line":100,"column":38}},"49":{"start":{"line":101,"column":15},"end":{"line":105,"column":9}},"50":{"start":{"line":102,"column":12},"end":{"line":102,"column":40}},"51":{"start":{"line":104,"column":12},"end":{"line":104,"column":42}},"52":{"start":{"line":106,"column":8},"end":{"line":106,"column":40}},"53":{"start":{"line":107,"column":8},"end":{"line":107,"column":23}},"54":{"start":{"line":108,"column":8},"end":{"line":108,"column":15}},"55":{"start":{"line":113,"column":0},"end":{"line":113,"column":28}}},"branchMap":{"1":{"line":17,"type":"binary-expr","locations":[{"start":{"line":17,"column":23},"end":{"line":17,"column":30}},{"start":{"line":17,"column":34},"end":{"line":17,"column":36}}]},"2":{"line":35,"type":"if","locations":[{"start":{"line":35,"column":8},"end":{"line":35,"column":8}},{"start":{"line":35,"column":8},"end":{"line":35,"column":8}}]},"3":{"line":35,"type":"binary-expr","locations":[{"start":{"line":35,"column":12},"end":{"line":35,"column":18}},{"start":{"line":35,"column":22},"end":{"line":35,"column":35}}]},"4":{"line":39,"type":"if","locations":[{"start":{"line":39,"column":8},"end":{"line":39,"column":8}},{"start":{"line":39,"column":8},"end":{"line":39,"column":8}}]},"5":{"line":46,"type":"if","locations":[{"start":{"line":46,"column":12},"end":{"line":46,"column":12}},{"start":{"line":46,"column":12},"end":{"line":46,"column":12}}]},"6":{"line":47,"type":"if","locations":[{"start":{"line":47,"column":16},"end":{"line":47,"column":16}},{"start":{"line":47,"column":16},"end":{"line":47,"column":16}}]},"7":{"line":48,"type":"binary-expr","locations":[{"start":{"line":48,"column":21},"end":{"line":48,"column":22}},{"start":{"line":48,"column":26},"end":{"line":48,"column":47}},{"start":{"line":49,"column":21},"end":{"line":49,"column":23}},{"start":{"line":49,"column":28},"end":{"line":49,"column":42}},{"start":{"line":49,"column":46},"end":{"line":49,"column":68}}]},"8":{"line":57,"type":"if","locations":[{"start":{"line":57,"column":19},"end":{"line":57,"column":19}},{"start":{"line":57,"column":19},"end":{"line":57,"column":19}}]},"9":{"line":58,"type":"if","locations":[{"start":{"line":58,"column":16},"end":{"line":58,"column":16}},{"start":{"line":58,"column":16},"end":{"line":58,"column":16}}]},"10":{"line":59,"type":"binary-expr","locations":[{"start":{"line":59,"column":21},"end":{"line":59,"column":22}},{"start":{"line":59,"column":26},"end":{"line":59,"column":47}},{"start":{"line":60,"column":21},"end":{"line":60,"column":23}},{"start":{"line":60,"column":27},"end":{"line":60,"column":49}}]},"11":{"line":62,"type":"if","locations":[{"start":{"line":62,"column":20},"end":{"line":62,"column":20}},{"start":{"line":62,"column":20},"end":{"line":62,"column":20}}]},"12":{"line":75,"type":"if","locations":[{"start":{"line":75,"column":8},"end":{"line":75,"column":8}},{"start":{"line":75,"column":8},"end":{"line":75,"column":8}}]},"13":{"line":77,"type":"if","locations":[{"start":{"line":77,"column":12},"end":{"line":77,"column":12}},{"start":{"line":77,"column":12},"end":{"line":77,"column":12}}]},"14":{"line":99,"type":"if","locations":[{"start":{"line":99,"column":8},"end":{"line":99,"column":8}},{"start":{"line":99,"column":8},"end":{"line":99,"column":8}}]},"15":{"line":101,"type":"if","locations":[{"start":{"line":101,"column":15},"end":{"line":101,"column":15}},{"start":{"line":101,"column":15},"end":{"line":101,"column":15}}]}},"code":["'use strict';","","const stream = require('stream');","const Transform = stream.Transform;","","/**"," * Escapes dots in the beginning of lines. Ends the stream with <CR><LF>.<CR><LF>"," * Also makes sure that only <CR><LF> sequences are used for linebreaks"," *"," * @param {Object} options Stream options"," */","class DataStream extends Transform {","","    constructor(options) {","        super(options);","        // init Transform","        this.options = options || {};","        this._curLine = '';","","        this.inByteCount = 0;","        this.outByteCount = 0;","        this.lastByte = false;","","    }","","    /**","     * Escapes dots","     */","    _transform(chunk, encoding, done) {","        let chunks = [];","        let chunklen = 0;","        let i, len, lastPos = 0;","        let buf;","","        if (!chunk || !chunk.length) {","            return done();","        }","","        if (typeof chunk === 'string') {","            chunk = new Buffer(chunk);","        }","","        this.inByteCount += chunk.length;","","        for (i = 0, len = chunk.length; i < len; i++) {","            if (chunk[i] === 0x2E) { // .","                if (","                    (i && chunk[i - 1] === 0x0A) ||","                    (!i && (!this.lastByte || this.lastByte === 0x0A))","                ) {","                    buf = chunk.slice(lastPos, i + 1);","                    chunks.push(buf);","                    chunks.push(new Buffer('.'));","                    chunklen += buf.length + 1;","                    lastPos = i + 1;","                }","            } else if (chunk[i] === 0x0A) { // .","                if (","                    (i && chunk[i - 1] !== 0x0D) ||","                    (!i && this.lastByte !== 0x0D)","                ) {","                    if (i > lastPos) {","                        buf = chunk.slice(lastPos, i);","                        chunks.push(buf);","                        chunklen += buf.length + 2;","                    } else {","                        chunklen += 2;","                    }","                    chunks.push(new Buffer('\\r\\n'));","                    lastPos = i + 1;","                }","            }","        }","","        if (chunklen) {","            // add last piece","            if (lastPos < chunk.length) {","                buf = chunk.slice(lastPos);","                chunks.push(buf);","                chunklen += buf.length;","            }","","            this.outByteCount += chunklen;","            this.push(Buffer.concat(chunks, chunklen));","        } else {","            this.outByteCount += chunk.length;","            this.push(chunk);","        }","","        this.lastByte = chunk[chunk.length - 1];","        done();","    }","","    /**","     * Finalizes the stream with a dot on a single line","     */","    _flush(done) {","        let buf;","        if (this.lastByte === 0x0A) {","            buf = new Buffer('.\\r\\n');","        } else if (this.lastByte === 0x0D) {","            buf = new Buffer('\\n.\\r\\n');","        } else {","            buf = new Buffer('\\r\\n.\\r\\n');","        }","        this.outByteCount += buf.length;","        this.push(buf);","        done();","    }","","}","","module.exports = DataStream;",""],"l":{"3":1,"4":1,"15":0,"17":0,"18":0,"20":0,"21":0,"22":0,"30":0,"31":0,"32":0,"33":0,"35":0,"36":0,"39":0,"40":0,"43":0,"45":0,"46":0,"47":0,"51":0,"52":0,"53":0,"54":0,"55":0,"57":0,"58":0,"62":0,"63":0,"64":0,"65":0,"67":0,"69":0,"70":0,"75":0,"77":0,"78":0,"79":0,"80":0,"83":0,"84":0,"86":0,"87":0,"90":0,"91":0,"98":0,"99":0,"100":0,"101":0,"102":0,"104":0,"106":0,"107":0,"108":0,"113":1}},"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/xoauth2/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/xoauth2/index.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0,0],"18":[0,0],"19":[0,0,0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},"fnMap":{"1":{"name":"(anonymous_1)","line":37,"loc":{"start":{"line":37,"column":15},"end":{"line":37,"column":33}}},"2":{"name":"(anonymous_2)","line":79,"loc":{"start":{"line":79,"column":12},"end":{"line":79,"column":30}}},"3":{"name":"(anonymous_3)","line":123,"loc":{"start":{"line":123,"column":15},"end":{"line":123,"column":38}}},"4":{"name":"(anonymous_4)","line":140,"loc":{"start":{"line":140,"column":17},"end":{"line":140,"column":28}}},"5":{"name":"(anonymous_5)","line":214,"loc":{"start":{"line":214,"column":21},"end":{"line":214,"column":35}}},"6":{"name":"(anonymous_6)","line":236,"loc":{"start":{"line":236,"column":15},"end":{"line":236,"column":48}}},"7":{"name":"(anonymous_7)","line":279,"loc":{"start":{"line":279,"column":15},"end":{"line":279,"column":22}}},"8":{"name":"(anonymous_8)","line":296,"loc":{"start":{"line":296,"column":16},"end":{"line":296,"column":26}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":40}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":34}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":33}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":36}},"5":{"start":{"line":38,"column":8},"end":{"line":38,"column":16}},"6":{"start":{"line":40,"column":8},"end":{"line":40,"column":37}},"7":{"start":{"line":42,"column":8},"end":{"line":49,"column":9}},"8":{"start":{"line":43,"column":12},"end":{"line":45,"column":13}},"9":{"start":{"line":44,"column":16},"end":{"line":44,"column":142}},"10":{"start":{"line":44,"column":42},"end":{"line":44,"column":140}},"11":{"start":{"line":47,"column":12},"end":{"line":47,"column":117}},"12":{"start":{"line":48,"column":12},"end":{"line":48,"column":81}},"13":{"start":{"line":51,"column":8},"end":{"line":55,"column":11}},"14":{"start":{"line":57,"column":8},"end":{"line":57,"column":127}},"15":{"start":{"line":59,"column":8},"end":{"line":59,"column":104}},"16":{"start":{"line":60,"column":8},"end":{"line":60,"column":70}},"17":{"start":{"line":61,"column":8},"end":{"line":61,"column":68}},"18":{"start":{"line":63,"column":8},"end":{"line":63,"column":61}},"19":{"start":{"line":65,"column":8},"end":{"line":70,"column":9}},"20":{"start":{"line":66,"column":12},"end":{"line":66,"column":48}},"21":{"start":{"line":68,"column":12},"end":{"line":68,"column":73}},"22":{"start":{"line":69,"column":12},"end":{"line":69,"column":73}},"23":{"start":{"line":80,"column":8},"end":{"line":82,"column":9}},"24":{"start":{"line":81,"column":12},"end":{"line":81,"column":52}},"25":{"start":{"line":84,"column":8},"end":{"line":100,"column":10}},"26":{"start":{"line":85,"column":12},"end":{"line":98,"column":13}},"27":{"start":{"line":86,"column":16},"end":{"line":91,"column":83}},"28":{"start":{"line":93,"column":16},"end":{"line":97,"column":75}},"29":{"start":{"line":99,"column":12},"end":{"line":99,"column":30}},"30":{"start":{"line":102,"column":8},"end":{"line":112,"column":9}},"31":{"start":{"line":103,"column":12},"end":{"line":109,"column":15}},"32":{"start":{"line":104,"column":16},"end":{"line":107,"column":17}},"33":{"start":{"line":105,"column":20},"end":{"line":105,"column":51}},"34":{"start":{"line":106,"column":20},"end":{"line":106,"column":48}},"35":{"start":{"line":108,"column":16},"end":{"line":108,"column":51}},"36":{"start":{"line":111,"column":12},"end":{"line":111,"column":49}},"37":{"start":{"line":124,"column":8},"end":{"line":124,"column":39}},"38":{"start":{"line":125,"column":8},"end":{"line":125,"column":52}},"39":{"start":{"line":126,"column":8},"end":{"line":126,"column":67}},"40":{"start":{"line":128,"column":8},"end":{"line":132,"column":11}},"41":{"start":{"line":141,"column":8},"end":{"line":141,"column":23}},"42":{"start":{"line":142,"column":8},"end":{"line":172,"column":9}},"43":{"start":{"line":144,"column":12},"end":{"line":144,"column":52}},"44":{"start":{"line":145,"column":12},"end":{"line":152,"column":15}},"45":{"start":{"line":154,"column":12},"end":{"line":157,"column":14}},"46":{"start":{"line":161,"column":12},"end":{"line":163,"column":13}},"47":{"start":{"line":162,"column":16},"end":{"line":162,"column":86}},"48":{"start":{"line":166,"column":12},"end":{"line":171,"column":14}},"49":{"start":{"line":174,"column":8},"end":{"line":176,"column":11}},"50":{"start":{"line":175,"column":12},"end":{"line":175,"column":61}},"51":{"start":{"line":178,"column":8},"end":{"line":205,"column":11}},"52":{"start":{"line":179,"column":12},"end":{"line":179,"column":21}},"53":{"start":{"line":181,"column":12},"end":{"line":183,"column":13}},"54":{"start":{"line":182,"column":16},"end":{"line":182,"column":39}},"55":{"start":{"line":185,"column":12},"end":{"line":189,"column":13}},"56":{"start":{"line":186,"column":16},"end":{"line":186,"column":51}},"57":{"start":{"line":188,"column":16},"end":{"line":188,"column":35}},"58":{"start":{"line":191,"column":12},"end":{"line":193,"column":13}},"59":{"start":{"line":192,"column":16},"end":{"line":192,"column":78}},"60":{"start":{"line":195,"column":12},"end":{"line":197,"column":13}},"61":{"start":{"line":196,"column":16},"end":{"line":196,"column":55}},"62":{"start":{"line":199,"column":12},"end":{"line":202,"column":13}},"63":{"start":{"line":200,"column":16},"end":{"line":200,"column":69}},"64":{"start":{"line":201,"column":16},"end":{"line":201,"column":56}},"65":{"start":{"line":204,"column":12},"end":{"line":204,"column":58}},"66":{"start":{"line":215,"column":8},"end":{"line":220,"column":10}},"67":{"start":{"line":221,"column":8},"end":{"line":221,"column":77}},"68":{"start":{"line":237,"column":8},"end":{"line":237,"column":29}},"69":{"start":{"line":239,"column":8},"end":{"line":239,"column":24}},"70":{"start":{"line":240,"column":8},"end":{"line":240,"column":25}},"71":{"start":{"line":242,"column":8},"end":{"line":246,"column":11}},"72":{"start":{"line":248,"column":8},"end":{"line":254,"column":11}},"73":{"start":{"line":249,"column":12},"end":{"line":249,"column":22}},"74":{"start":{"line":250,"column":12},"end":{"line":253,"column":13}},"75":{"start":{"line":251,"column":16},"end":{"line":251,"column":35}},"76":{"start":{"line":252,"column":16},"end":{"line":252,"column":41}},"77":{"start":{"line":256,"column":8},"end":{"line":262,"column":11}},"78":{"start":{"line":257,"column":12},"end":{"line":259,"column":13}},"79":{"start":{"line":258,"column":16},"end":{"line":258,"column":23}},"80":{"start":{"line":260,"column":12},"end":{"line":260,"column":28}},"81":{"start":{"line":261,"column":12},"end":{"line":261,"column":33}},"82":{"start":{"line":264,"column":8},"end":{"line":270,"column":11}},"83":{"start":{"line":265,"column":12},"end":{"line":267,"column":13}},"84":{"start":{"line":266,"column":16},"end":{"line":266,"column":23}},"85":{"start":{"line":268,"column":12},"end":{"line":268,"column":28}},"86":{"start":{"line":269,"column":12},"end":{"line":269,"column":67}},"87":{"start":{"line":280,"column":8},"end":{"line":282,"column":9}},"88":{"start":{"line":281,"column":12},"end":{"line":281,"column":36}},"89":{"start":{"line":284,"column":8},"end":{"line":287,"column":28}},"90":{"start":{"line":297,"column":8},"end":{"line":300,"column":54}},"91":{"start":{"line":300,"column":21},"end":{"line":300,"column":42}},"92":{"start":{"line":301,"column":8},"end":{"line":301,"column":102}},"93":{"start":{"line":302,"column":8},"end":{"line":302,"column":59}},"94":{"start":{"line":306,"column":0},"end":{"line":306,"column":25}}},"branchMap":{"1":{"line":40,"type":"binary-expr","locations":[{"start":{"line":40,"column":23},"end":{"line":40,"column":30}},{"start":{"line":40,"column":34},"end":{"line":40,"column":36}}]},"2":{"line":42,"type":"if","locations":[{"start":{"line":42,"column":8},"end":{"line":42,"column":8}},{"start":{"line":42,"column":8},"end":{"line":42,"column":8}}]},"3":{"line":42,"type":"binary-expr","locations":[{"start":{"line":42,"column":12},"end":{"line":42,"column":19}},{"start":{"line":42,"column":23},"end":{"line":42,"column":44}}]},"4":{"line":43,"type":"if","locations":[{"start":{"line":43,"column":12},"end":{"line":43,"column":12}},{"start":{"line":43,"column":12},"end":{"line":43,"column":12}}]},"5":{"line":43,"type":"binary-expr","locations":[{"start":{"line":43,"column":16},"end":{"line":43,"column":35}},{"start":{"line":43,"column":39},"end":{"line":43,"column":52}}]},"6":{"line":47,"type":"binary-expr","locations":[{"start":{"line":47,"column":58},"end":{"line":47,"column":100}},{"start":{"line":47,"column":104},"end":{"line":47,"column":105}}]},"7":{"line":48,"type":"binary-expr","locations":[{"start":{"line":48,"column":49},"end":{"line":48,"column":70}},{"start":{"line":48,"column":74},"end":{"line":48,"column":80}}]},"8":{"line":54,"type":"binary-expr","locations":[{"start":{"line":54,"column":23},"end":{"line":54,"column":45}},{"start":{"line":54,"column":49},"end":{"line":54,"column":57}}]},"9":{"line":57,"type":"cond-expr","locations":[{"start":{"line":57,"column":88},"end":{"line":57,"column":118}},{"start":{"line":57,"column":121},"end":{"line":57,"column":126}}]},"10":{"line":59,"type":"binary-expr","locations":[{"start":{"line":59,"column":33},"end":{"line":59,"column":55}},{"start":{"line":59,"column":59},"end":{"line":59,"column":103}}]},"11":{"line":60,"type":"binary-expr","locations":[{"start":{"line":60,"column":37},"end":{"line":60,"column":63}},{"start":{"line":60,"column":67},"end":{"line":60,"column":69}}]},"12":{"line":61,"type":"binary-expr","locations":[{"start":{"line":61,"column":36},"end":{"line":61,"column":61}},{"start":{"line":61,"column":65},"end":{"line":61,"column":67}}]},"13":{"line":63,"type":"binary-expr","locations":[{"start":{"line":63,"column":27},"end":{"line":63,"column":51}},{"start":{"line":63,"column":55},"end":{"line":63,"column":60}}]},"14":{"line":65,"type":"if","locations":[{"start":{"line":65,"column":8},"end":{"line":65,"column":8}},{"start":{"line":65,"column":8},"end":{"line":65,"column":8}}]},"15":{"line":65,"type":"binary-expr","locations":[{"start":{"line":65,"column":12},"end":{"line":65,"column":32}},{"start":{"line":65,"column":36},"end":{"line":65,"column":64}}]},"16":{"line":68,"type":"binary-expr","locations":[{"start":{"line":68,"column":35},"end":{"line":68,"column":63}},{"start":{"line":68,"column":67},"end":{"line":68,"column":68}}]},"17":{"line":69,"type":"binary-expr","locations":[{"start":{"line":69,"column":27},"end":{"line":69,"column":34}},{"start":{"line":69,"column":39},"end":{"line":69,"column":66}},{"start":{"line":69,"column":71},"end":{"line":69,"column":72}}]},"18":{"line":80,"type":"if","locations":[{"start":{"line":80,"column":8},"end":{"line":80,"column":8}},{"start":{"line":80,"column":8},"end":{"line":80,"column":8}}]},"19":{"line":80,"type":"binary-expr","locations":[{"start":{"line":80,"column":12},"end":{"line":80,"column":18}},{"start":{"line":80,"column":22},"end":{"line":80,"column":38}},{"start":{"line":80,"column":43},"end":{"line":80,"column":56}},{"start":{"line":80,"column":60},"end":{"line":80,"column":85}}]},"20":{"line":85,"type":"if","locations":[{"start":{"line":85,"column":12},"end":{"line":85,"column":12}},{"start":{"line":85,"column":12},"end":{"line":85,"column":12}}]},"21":{"line":102,"type":"if","locations":[{"start":{"line":102,"column":8},"end":{"line":102,"column":8}},{"start":{"line":102,"column":8},"end":{"line":102,"column":8}}]},"22":{"line":104,"type":"if","locations":[{"start":{"line":104,"column":16},"end":{"line":104,"column":16}},{"start":{"line":104,"column":16},"end":{"line":104,"column":16}}]},"23":{"line":104,"type":"binary-expr","locations":[{"start":{"line":104,"column":20},"end":{"line":104,"column":24}},{"start":{"line":104,"column":28},"end":{"line":104,"column":39}}]},"24":{"line":106,"type":"binary-expr","locations":[{"start":{"line":106,"column":35},"end":{"line":106,"column":42}},{"start":{"line":106,"column":46},"end":{"line":106,"column":47}}]},"25":{"line":125,"type":"binary-expr","locations":[{"start":{"line":125,"column":27},"end":{"line":125,"column":42}},{"start":{"line":125,"column":46},"end":{"line":125,"column":47}}]},"26":{"line":126,"type":"binary-expr","locations":[{"start":{"line":126,"column":23},"end":{"line":126,"column":30}},{"start":{"line":126,"column":34},"end":{"line":126,"column":61}},{"start":{"line":126,"column":65},"end":{"line":126,"column":66}}]},"27":{"line":130,"type":"binary-expr","locations":[{"start":{"line":130,"column":25},"end":{"line":130,"column":36}},{"start":{"line":130,"column":40},"end":{"line":130,"column":42}}]},"28":{"line":142,"type":"if","locations":[{"start":{"line":142,"column":8},"end":{"line":142,"column":8}},{"start":{"line":142,"column":8},"end":{"line":142,"column":8}}]},"29":{"line":147,"type":"binary-expr","locations":[{"start":{"line":147,"column":23},"end":{"line":147,"column":41}},{"start":{"line":147,"column":45},"end":{"line":147,"column":71}}]},"30":{"line":161,"type":"if","locations":[{"start":{"line":161,"column":12},"end":{"line":161,"column":12}},{"start":{"line":161,"column":12},"end":{"line":161,"column":12}}]},"31":{"line":167,"type":"binary-expr","locations":[{"start":{"line":167,"column":27},"end":{"line":167,"column":48}},{"start":{"line":167,"column":52},"end":{"line":167,"column":54}}]},"32":{"line":168,"type":"binary-expr","locations":[{"start":{"line":168,"column":31},"end":{"line":168,"column":56}},{"start":{"line":168,"column":60},"end":{"line":168,"column":62}}]},"33":{"line":181,"type":"if","locations":[{"start":{"line":181,"column":12},"end":{"line":181,"column":12}},{"start":{"line":181,"column":12},"end":{"line":181,"column":12}}]},"34":{"line":191,"type":"if","locations":[{"start":{"line":191,"column":12},"end":{"line":191,"column":12}},{"start":{"line":191,"column":12},"end":{"line":191,"column":12}}]},"35":{"line":191,"type":"binary-expr","locations":[{"start":{"line":191,"column":16},"end":{"line":191,"column":21}},{"start":{"line":191,"column":25},"end":{"line":191,"column":49}}]},"36":{"line":195,"type":"if","locations":[{"start":{"line":195,"column":12},"end":{"line":195,"column":12}},{"start":{"line":195,"column":12},"end":{"line":195,"column":12}}]},"37":{"line":199,"type":"if","locations":[{"start":{"line":199,"column":12},"end":{"line":199,"column":12}},{"start":{"line":199,"column":12},"end":{"line":199,"column":12}}]},"38":{"line":216,"type":"binary-expr","locations":[{"start":{"line":216,"column":23},"end":{"line":216,"column":40}},{"start":{"line":216,"column":44},"end":{"line":216,"column":46}}]},"39":{"line":217,"type":"binary-expr","locations":[{"start":{"line":217,"column":30},"end":{"line":217,"column":41}},{"start":{"line":217,"column":45},"end":{"line":217,"column":61}}]},"40":{"line":257,"type":"if","locations":[{"start":{"line":257,"column":12},"end":{"line":257,"column":12}},{"start":{"line":257,"column":12},"end":{"line":257,"column":12}}]},"41":{"line":265,"type":"if","locations":[{"start":{"line":265,"column":12},"end":{"line":265,"column":12}},{"start":{"line":265,"column":12},"end":{"line":265,"column":12}}]},"42":{"line":280,"type":"if","locations":[{"start":{"line":280,"column":8},"end":{"line":280,"column":8}},{"start":{"line":280,"column":8},"end":{"line":280,"column":8}}]}},"code":["'use strict';","","const Stream = require('stream').Stream;","const fetch = require('../fetch');","const crypto = require('crypto');","const shared = require('../shared');","","/**"," * XOAUTH2 access_token generator for Gmail."," * Create client ID for web applications in Google API console to use it."," * See Offline Access for receiving the needed refreshToken for an user"," * https://developers.google.com/accounts/docs/OAuth2WebServer#offline"," *"," * Usage for generating access tokens with a custom method using provisionCallback:"," * provisionCallback(user, renew, callback)"," *   * user is the username to get the token for"," *   * renew is a boolean that if true indicates that existing token failed and needs to be renewed"," *   * callback is the callback to run with (error, accessToken [, expires])"," *     * accessToken is a string"," *     * expires is an optional expire time in milliseconds"," * If provisionCallback is used, then Nodemailer does not try to attempt generating the token by itself"," *"," * @constructor"," * @param {Object} options Client information for token generation"," * @param {String} options.user User e-mail address"," * @param {String} options.clientId Client ID value"," * @param {String} options.clientSecret Client secret value"," * @param {String} options.refreshToken Refresh token for an user"," * @param {String} options.accessUrl Endpoint for token generation, defaults to 'https://accounts.google.com/o/oauth2/token'"," * @param {String} options.accessToken An existing valid accessToken"," * @param {String} options.privateKey Private key for JSW"," * @param {Number} options.expires Optional Access Token expire time in ms"," * @param {Number} options.timeout Optional TTL for Access Token in seconds"," * @param {Function} options.provisionCallback Function to run when a new access token is required"," */","class XOAuth2 extends Stream {","    constructor(options, logger) {","        super();","","        this.options = options || {};","","        if (options && options.serviceClient) {","            if (!options.privateKey || !options.user) {","                return setImmediate(() => this.emit('error', new Error('Options \"privateKey\" and \"user\" are required for service account!')));","            }","","            let serviceRequestTimeout = Math.min(Math.max(Number(this.options.serviceRequestTimeout) || 0, 0), 3600);","            this.options.serviceRequestTimeout = serviceRequestTimeout || 5 * 60;","        }","","        this.logger = shared.getLogger({","            logger","        }, {","            component: this.options.component || 'OAuth2'","        });","","        this.provisionCallback = typeof this.options.provisionCallback === 'function' ? this.options.provisionCallback : false;","","        this.options.accessUrl = this.options.accessUrl || 'https://accounts.google.com/o/oauth2/token';","        this.options.customHeaders = this.options.customHeaders || {};","        this.options.customParams = this.options.customParams || {};","","        this.accessToken = this.options.accessToken || false;","","        if (this.options.expires && Number(this.options.expires)) {","            this.expires = this.options.expires;","        } else {","            let timeout = Math.max(Number(this.options.timeout) || 0, 0);","            this.expires = timeout && (Date.now() + timeout * 1000) || 0;","        }","    }","","    /**","     * Returns or generates (if previous has expired) a XOAuth2 token","     *","     * @param {Boolean} renew If false then use cached access token (if available)","     * @param {Function} callback Callback function with error object and token string","     */","    getToken(renew, callback) {","        if (!renew && this.accessToken && (!this.expires || this.expires > Date.now())) {","            return callback(null, this.accessToken);","        }","","        let generateCallback = (...args) => {","            if (args[0]) {","                this.logger.error({","                    err: args[0],","                    tnx: 'OAUTH2',","                    user: this.options.user,","                    action: 'renew'","                }, 'Failed generating new Access Token for %s', this.options.user);","            } else {","                this.logger.info({","                    tnx: 'OAUTH2',","                    user: this.options.user,","                    action: 'renew'","                }, 'Generated new Access Token for %s', this.options.user);","            }","            callback(...args);","        };","","        if (this.provisionCallback) {","            this.provisionCallback(this.options.user, !!renew, (err, accessToken, expires) => {","                if (!err && accessToken) {","                    this.accessToken = accessToken;","                    this.expires = expires || 0;","                }","                generateCallback(err, accessToken);","            });","        } else {","            this.generateToken(generateCallback);","        }","    }","","    /**","     * Updates token values","     *","     * @param {String} accessToken New access token","     * @param {Number} timeout Access token lifetime in seconds","     *","     * Emits 'token': { user: User email-address, accessToken: the new accessToken, timeout: TTL in seconds}","     */","    updateToken(accessToken, timeout) {","        this.accessToken = accessToken;","        timeout = Math.max(Number(timeout) || 0, 0);","        this.expires = timeout && Date.now() + timeout * 1000 || 0;","","        this.emit('token', {","            user: this.options.user,","            accessToken: accessToken || '',","            expires: this.expires","        });","    }","","    /**","     * Generates a new XOAuth2 token with the credentials provided at initialization","     *","     * @param {Function} callback Callback function with error object and token string","     */","    generateToken(callback) {","        let urlOptions;","        if (this.options.serviceClient) {","            // service account - https://developers.google.com/identity/protocols/OAuth2ServiceAccount","            let iat = Math.floor(Date.now() / 1000); // unix time","            let token = this.jwtSignRS256({","                iss: this.options.serviceClient,","                scope: this.options.scope || 'https://mail.google.com/',","                sub: this.options.user,","                aud: this.options.accessUrl,","                iat,","                exp: iat + this.options.serviceRequestTimeout","            });","","            urlOptions = {","                grant_type: 'urn:ietf:params:oauth:grant-type:jwt-bearer',","                assertion: token","            };","","        } else {","","            if (!this.options.refreshToken) {","                return callback(new Error('Can\\'t create new access token for user'));","            }","","            // web app - https://developers.google.com/identity/protocols/OAuth2WebServer","            urlOptions = {","                client_id: this.options.clientId || '',","                client_secret: this.options.clientSecret || '',","                refresh_token: this.options.refreshToken,","                grant_type: 'refresh_token'","            };","        }","","        Object.keys(this.options.customParams).forEach(key => {","            urlOptions[key] = this.options.customParams[key];","        });","","        this.postRequest(this.options.accessUrl, urlOptions, this.options, (error, body) => {","            let data;","","            if (error) {","                return callback(error);","            }","","            try {","                data = JSON.parse(body.toString());","            } catch (E) {","                return callback(E);","            }","","            if (!data || typeof data !== 'object') {","                return callback(new Error('Invalid authentication response'));","            }","","            if (data.error) {","                return callback(new Error(data.error));","            }","","            if (data.access_token) {","                this.updateToken(data.access_token, data.expires_in);","                return callback(null, this.accessToken);","            }","","            return callback(new Error('No access token'));","        });","    }","","    /**","     * Converts an access_token and user id into a base64 encoded XOAuth2 token","     *","     * @param {String} [accessToken] Access token string","     * @return {String} Base64 encoded token for IMAP or SMTP login","     */","    buildXOAuth2Token(accessToken) {","        let authData = [","            'user=' + (this.options.user || ''),","            'auth=Bearer ' + (accessToken || this.accessToken),","            '',","            ''","        ];","        return new Buffer(authData.join('\\x01'), 'utf-8').toString('base64');","    }","","    /**","     * Custom POST request handler.","     * This is only needed to keep paths short in Windows  usually this module","     * is a dependency of a dependency and if it tries to require something","     * like the request module the paths get way too long to handle for Windows.","     * As we do only a simple POST request we do not actually require complicated","     * logic support (no redirects, no nothing) anyway.","     *","     * @param {String} url Url to POST to","     * @param {String|Buffer} payload Payload to POST","     * @param {Function} callback Callback function with (err, buff)","     */","    postRequest(url, payload, params, callback) {","        let returned = false;","","        let chunks = [];","        let chunklen = 0;","","        let req = fetch(url, {","            method: 'post',","            headers: params.customHeaders,","            body: payload","        });","","        req.on('readable', () => {","            let chunk;","            while ((chunk = req.read()) !== null) {","                chunks.push(chunk);","                chunklen += chunk.length;","            }","        });","","        req.once('error', err => {","            if (returned) {","                return;","            }","            returned = true;","            return callback(err);","        });","","        req.once('end', () => {","            if (returned) {","                return;","            }","            returned = true;","            return callback(null, Buffer.concat(chunks, chunklen));","        });","    }","","    /**","     * Encodes a buffer or a string into Base64url format","     *","     * @param {Buffer|String} data The data to convert","     * @return {String} The encoded string","     */","    toBase64URL(data) {","        if (typeof data === 'string') {","            data = new Buffer(data);","        }","","        return data.toString('base64').","        replace(/=+/g, ''). // remove '='s","        replace(/\\+/g, '-'). // '+'  '-'","        replace(/\\//g, '_'); // '/'  '_'","    }","","    /**","     * Creates a JSON Web Token signed with RS256 (SHA256 + RSA)","     *","     * @param {Object} payload The payload to include in the generated token","     * @return {String} The generated and signed token","     */","    jwtSignRS256(payload) {","        payload = [","            '{\"alg\":\"RS256\",\"typ\":\"JWT\"}',","            JSON.stringify(payload)","        ].map(val => this.toBase64URL(val)).join('.');","        let signature = crypto.createSign('RSA-SHA256').update(payload).sign(this.options.privateKey);","        return payload + '.' + this.toBase64URL(signature);","    }","}","","module.exports = XOAuth2;",""],"l":{"3":1,"4":1,"5":1,"6":1,"38":0,"40":0,"42":0,"43":0,"44":0,"47":0,"48":0,"51":0,"57":0,"59":0,"60":0,"61":0,"63":0,"65":0,"66":0,"68":0,"69":0,"80":0,"81":0,"84":0,"85":0,"86":0,"93":0,"99":0,"102":0,"103":0,"104":0,"105":0,"106":0,"108":0,"111":0,"124":0,"125":0,"126":0,"128":0,"141":0,"142":0,"144":0,"145":0,"154":0,"161":0,"162":0,"166":0,"174":0,"175":0,"178":0,"179":0,"181":0,"182":0,"185":0,"186":0,"188":0,"191":0,"192":0,"195":0,"196":0,"199":0,"200":0,"201":0,"204":0,"215":0,"221":0,"237":0,"239":0,"240":0,"242":0,"248":0,"249":0,"250":0,"251":0,"252":0,"256":0,"257":0,"258":0,"260":0,"261":0,"264":0,"265":0,"266":0,"268":0,"269":0,"280":0,"281":0,"284":0,"297":0,"300":0,"301":0,"302":0,"306":1}},"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/well-known/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/well-known/index.js","s":{"1":1,"2":1,"3":1,"4":41,"5":41,"6":41,"7":15,"8":41,"9":13,"10":1,"11":69,"12":1,"13":69,"14":69,"15":69,"16":242,"17":178,"18":69,"19":1,"20":0,"21":0},"b":{"1":[41,32],"2":[41,31],"3":[178,64],"4":[0,0]},"f":{"1":69,"2":69,"3":0},"fnMap":{"1":{"name":"normalizeKey","line":20,"loc":{"start":{"line":20,"column":0},"end":{"line":20,"column":27}}},"2":{"name":"normalizeService","line":24,"loc":{"start":{"line":24,"column":0},"end":{"line":24,"column":35}}},"3":{"name":"(anonymous_3)","line":44,"loc":{"start":{"line":44,"column":17},"end":{"line":44,"column":32}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":44}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":22}},"3":{"start":{"line":6,"column":0},"end":{"line":18,"column":3}},"4":{"start":{"line":7,"column":4},"end":{"line":7,"column":32}},"5":{"start":{"line":9,"column":4},"end":{"line":9,"column":62}},"6":{"start":{"line":11,"column":4},"end":{"line":13,"column":7}},"7":{"start":{"line":12,"column":8},"end":{"line":12,"column":68}},"8":{"start":{"line":15,"column":4},"end":{"line":17,"column":7}},"9":{"start":{"line":16,"column":8},"end":{"line":16,"column":69}},"10":{"start":{"line":20,"column":0},"end":{"line":22,"column":1}},"11":{"start":{"line":21,"column":4},"end":{"line":21,"column":61}},"12":{"start":{"line":24,"column":0},"end":{"line":35,"column":1}},"13":{"start":{"line":25,"column":4},"end":{"line":25,"column":40}},"14":{"start":{"line":26,"column":4},"end":{"line":26,"column":22}},"15":{"start":{"line":28,"column":4},"end":{"line":32,"column":7}},"16":{"start":{"line":29,"column":8},"end":{"line":31,"column":9}},"17":{"start":{"line":30,"column":12},"end":{"line":30,"column":41}},"18":{"start":{"line":34,"column":4},"end":{"line":34,"column":20}},"19":{"start":{"line":44,"column":0},"end":{"line":47,"column":2}},"20":{"start":{"line":45,"column":4},"end":{"line":45,"column":45}},"21":{"start":{"line":46,"column":4},"end":{"line":46,"column":36}}},"branchMap":{"1":{"line":11,"type":"binary-expr","locations":[{"start":{"line":11,"column":14},"end":{"line":11,"column":29}},{"start":{"line":11,"column":33},"end":{"line":11,"column":35}}]},"2":{"line":15,"type":"binary-expr","locations":[{"start":{"line":15,"column":14},"end":{"line":15,"column":29}},{"start":{"line":15,"column":33},"end":{"line":15,"column":35}}]},"3":{"line":29,"type":"if","locations":[{"start":{"line":29,"column":8},"end":{"line":29,"column":8}},{"start":{"line":29,"column":8},"end":{"line":29,"column":8}}]},"4":{"line":46,"type":"binary-expr","locations":[{"start":{"line":46,"column":11},"end":{"line":46,"column":26}},{"start":{"line":46,"column":30},"end":{"line":46,"column":35}}]}},"code":["'use strict';","","const services = require('./services.json');","const normalized = {};","","Object.keys(services).forEach(key => {","    let service = services[key];","","    normalized[normalizeKey(key)] = normalizeService(service);","","    [].concat(service.aliases || []).forEach(alias => {","        normalized[normalizeKey(alias)] = normalizeService(service);","    });","","    [].concat(service.domains || []).forEach(domain => {","        normalized[normalizeKey(domain)] = normalizeService(service);","    });","});","","function normalizeKey(key) {","    return key.replace(/[^a-zA-Z0-9.\\-]/g, '').toLowerCase();","}","","function normalizeService(service) {","    let filter = ['domains', 'aliases'];","    let response = {};","","    Object.keys(service).forEach(key => {","        if (filter.indexOf(key) < 0) {","            response[key] = service[key];","        }","    });","","    return response;","}","","/**"," * Resolves SMTP config for given key. Key can be a name (like 'Gmail'), alias (like 'Google Mail') or"," * an email address (like 'test@googlemail.com')."," *"," * @param {String} key [description]"," * @returns {Object} SMTP config or false if not found"," */","module.exports = function (key) {","    key = normalizeKey(key.split('@').pop());","    return normalized[key] || false;","};",""],"l":{"3":1,"4":1,"6":1,"7":41,"9":41,"11":41,"12":15,"15":41,"16":13,"20":1,"21":69,"24":1,"25":69,"26":69,"28":69,"29":242,"30":178,"34":69,"44":1,"45":0,"46":0}},"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/smtp-transport/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/smtp-transport/index.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0],"47":[0,0],"48":[0,0],"49":[0,0],"50":[0,0],"51":[0,0],"52":[0,0],"53":[0,0],"54":[0,0],"55":[0,0],"56":[0,0],"57":[0,0],"58":[0,0],"59":[0,0],"60":[0,0],"61":[0,0],"62":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"fnMap":{"1":{"name":"(anonymous_1)","line":17,"loc":{"start":{"line":17,"column":15},"end":{"line":17,"column":25}}},"2":{"name":"(anonymous_2)","line":68,"loc":{"start":{"line":68,"column":13},"end":{"line":68,"column":33}}},"3":{"name":"(anonymous_3)","line":73,"loc":{"start":{"line":73,"column":11},"end":{"line":73,"column":22}}},"4":{"name":"(anonymous_4)","line":135,"loc":{"start":{"line":135,"column":8},"end":{"line":135,"column":25}}},"5":{"name":"(anonymous_5)","line":270,"loc":{"start":{"line":270,"column":10},"end":{"line":270,"column":21}}},"6":{"name":"(anonymous_6)","line":363,"loc":{"start":{"line":363,"column":9},"end":{"line":363,"column":12}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":39}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":53}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":43}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":36}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":38}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":50}},"7":{"start":{"line":18,"column":8},"end":{"line":18,"column":16}},"8":{"start":{"line":20,"column":8},"end":{"line":20,"column":32}},"9":{"start":{"line":21,"column":8},"end":{"line":25,"column":9}},"10":{"start":{"line":22,"column":12},"end":{"line":24,"column":14}},"11":{"start":{"line":27,"column":8},"end":{"line":27,"column":20}},"12":{"start":{"line":28,"column":8},"end":{"line":28,"column":38}},"13":{"start":{"line":30,"column":8},"end":{"line":32,"column":9}},"14":{"start":{"line":31,"column":12},"end":{"line":31,"column":47}},"15":{"start":{"line":34,"column":8},"end":{"line":37,"column":9}},"16":{"start":{"line":35,"column":12},"end":{"line":35,"column":61}},"17":{"start":{"line":36,"column":12},"end":{"line":36,"column":49}},"18":{"start":{"line":39,"column":8},"end":{"line":44,"column":10}},"19":{"start":{"line":46,"column":8},"end":{"line":48,"column":11}},"20":{"start":{"line":51,"column":8},"end":{"line":51,"column":58}},"21":{"start":{"line":53,"column":8},"end":{"line":53,"column":27}},"22":{"start":{"line":54,"column":8},"end":{"line":54,"column":83}},"23":{"start":{"line":56,"column":8},"end":{"line":58,"column":9}},"24":{"start":{"line":57,"column":12},"end":{"line":57,"column":41}},"25":{"start":{"line":70,"column":8},"end":{"line":70,"column":57}},"26":{"start":{"line":70,"column":34},"end":{"line":70,"column":55}},"27":{"start":{"line":74,"column":8},"end":{"line":76,"column":9}},"28":{"start":{"line":75,"column":12},"end":{"line":75,"column":29}},"29":{"start":{"line":78,"column":8},"end":{"line":78,"column":28}},"30":{"start":{"line":79,"column":8},"end":{"line":79,"column":26}},"31":{"start":{"line":81,"column":8},"end":{"line":86,"column":9}},"32":{"start":{"line":82,"column":12},"end":{"line":85,"column":15}},"33":{"start":{"line":83,"column":16},"end":{"line":83,"column":31}},"34":{"start":{"line":84,"column":16},"end":{"line":84,"column":55}},"35":{"start":{"line":88,"column":8},"end":{"line":93,"column":9}},"36":{"start":{"line":89,"column":12},"end":{"line":92,"column":15}},"37":{"start":{"line":90,"column":16},"end":{"line":90,"column":31}},"38":{"start":{"line":91,"column":16},"end":{"line":91,"column":46}},"39":{"start":{"line":95,"column":8},"end":{"line":97,"column":9}},"40":{"start":{"line":96,"column":12},"end":{"line":96,"column":25}},"41":{"start":{"line":99,"column":8},"end":{"line":126,"column":9}},"42":{"start":{"line":102,"column":20},"end":{"line":104,"column":21}},"43":{"start":{"line":103,"column":24},"end":{"line":103,"column":37}},"44":{"start":{"line":105,"column":20},"end":{"line":105,"column":68}},"45":{"start":{"line":106,"column":20},"end":{"line":106,"column":129}},"46":{"start":{"line":107,"column":20},"end":{"line":107,"column":82}},"47":{"start":{"line":107,"column":48},"end":{"line":107,"column":80}},"48":{"start":{"line":108,"column":20},"end":{"line":108,"column":71}},"49":{"start":{"line":108,"column":46},"end":{"line":108,"column":69}},"50":{"start":{"line":109,"column":20},"end":{"line":114,"column":22}},"51":{"start":{"line":117,"column":16},"end":{"line":125,"column":18}},"52":{"start":{"line":136,"column":8},"end":{"line":262,"column":11}},"53":{"start":{"line":137,"column":12},"end":{"line":139,"column":13}},"54":{"start":{"line":138,"column":16},"end":{"line":138,"column":37}},"55":{"start":{"line":141,"column":12},"end":{"line":141,"column":33}},"56":{"start":{"line":142,"column":12},"end":{"line":142,"column":39}},"57":{"start":{"line":143,"column":12},"end":{"line":159,"column":13}},"58":{"start":{"line":145,"column":16},"end":{"line":152,"column":180}},"59":{"start":{"line":155,"column":16},"end":{"line":155,"column":56}},"60":{"start":{"line":156,"column":16},"end":{"line":158,"column":19}},"61":{"start":{"line":157,"column":20},"end":{"line":157,"column":54}},"62":{"start":{"line":161,"column":12},"end":{"line":161,"column":57}},"63":{"start":{"line":163,"column":12},"end":{"line":170,"column":15}},"64":{"start":{"line":164,"column":16},"end":{"line":166,"column":17}},"65":{"start":{"line":165,"column":20},"end":{"line":165,"column":27}},"66":{"start":{"line":167,"column":16},"end":{"line":167,"column":32}},"67":{"start":{"line":168,"column":16},"end":{"line":168,"column":35}},"68":{"start":{"line":169,"column":16},"end":{"line":169,"column":37}},"69":{"start":{"line":172,"column":12},"end":{"line":189,"column":15}},"70":{"start":{"line":173,"column":16},"end":{"line":175,"column":17}},"71":{"start":{"line":174,"column":20},"end":{"line":174,"column":27}},"72":{"start":{"line":176,"column":16},"end":{"line":176,"column":32}},"73":{"start":{"line":177,"column":16},"end":{"line":188,"column":33}},"74":{"start":{"line":178,"column":20},"end":{"line":180,"column":21}},"75":{"start":{"line":179,"column":24},"end":{"line":179,"column":31}},"76":{"start":{"line":182,"column":20},"end":{"line":182,"column":67}},"77":{"start":{"line":183,"column":20},"end":{"line":186,"column":21}},"78":{"start":{"line":185,"column":24},"end":{"line":185,"column":42}},"79":{"start":{"line":187,"column":20},"end":{"line":187,"column":34}},"80":{"start":{"line":191,"column":12},"end":{"line":232,"column":14}},"81":{"start":{"line":192,"column":16},"end":{"line":192,"column":58}},"82":{"start":{"line":193,"column":16},"end":{"line":193,"column":57}},"83":{"start":{"line":195,"column":16},"end":{"line":195,"column":62}},"84":{"start":{"line":196,"column":16},"end":{"line":198,"column":17}},"85":{"start":{"line":197,"column":20},"end":{"line":197,"column":87}},"86":{"start":{"line":200,"column":16},"end":{"line":202,"column":17}},"87":{"start":{"line":201,"column":20},"end":{"line":201,"column":49}},"88":{"start":{"line":204,"column":16},"end":{"line":207,"column":83}},"89":{"start":{"line":209,"column":16},"end":{"line":231,"column":19}},"90":{"start":{"line":210,"column":20},"end":{"line":210,"column":39}},"91":{"start":{"line":211,"column":20},"end":{"line":217,"column":21}},"92":{"start":{"line":212,"column":24},"end":{"line":215,"column":76}},"93":{"start":{"line":216,"column":24},"end":{"line":216,"column":45}},"94":{"start":{"line":218,"column":20},"end":{"line":221,"column":22}},"95":{"start":{"line":222,"column":20},"end":{"line":222,"column":47}},"96":{"start":{"line":223,"column":20},"end":{"line":230,"column":21}},"97":{"start":{"line":224,"column":24},"end":{"line":224,"column":52}},"98":{"start":{"line":226,"column":24},"end":{"line":229,"column":78}},"99":{"start":{"line":234,"column":12},"end":{"line":261,"column":15}},"100":{"start":{"line":235,"column":16},"end":{"line":237,"column":17}},"101":{"start":{"line":236,"column":20},"end":{"line":236,"column":27}},"102":{"start":{"line":239,"column":16},"end":{"line":239,"column":56}},"103":{"start":{"line":241,"column":16},"end":{"line":260,"column":17}},"104":{"start":{"line":242,"column":20},"end":{"line":257,"column":23}},"105":{"start":{"line":243,"column":24},"end":{"line":245,"column":25}},"106":{"start":{"line":244,"column":28},"end":{"line":244,"column":61}},"107":{"start":{"line":246,"column":24},"end":{"line":248,"column":25}},"108":{"start":{"line":247,"column":28},"end":{"line":247,"column":35}},"109":{"start":{"line":249,"column":24},"end":{"line":249,"column":40}},"110":{"start":{"line":251,"column":24},"end":{"line":254,"column":25}},"111":{"start":{"line":252,"column":28},"end":{"line":252,"column":47}},"112":{"start":{"line":253,"column":28},"end":{"line":253,"column":49}},"113":{"start":{"line":256,"column":24},"end":{"line":256,"column":38}},"114":{"start":{"line":259,"column":20},"end":{"line":259,"column":34}},"115":{"start":{"line":271,"column":8},"end":{"line":271,"column":20}},"116":{"start":{"line":273,"column":8},"end":{"line":277,"column":9}},"117":{"start":{"line":274,"column":12},"end":{"line":276,"column":15}},"118":{"start":{"line":275,"column":16},"end":{"line":275,"column":67}},"119":{"start":{"line":279,"column":8},"end":{"line":355,"column":11}},"120":{"start":{"line":280,"column":12},"end":{"line":282,"column":13}},"121":{"start":{"line":281,"column":16},"end":{"line":281,"column":37}},"122":{"start":{"line":284,"column":12},"end":{"line":284,"column":39}},"123":{"start":{"line":285,"column":12},"end":{"line":299,"column":13}},"124":{"start":{"line":286,"column":16},"end":{"line":293,"column":180}},"125":{"start":{"line":295,"column":16},"end":{"line":295,"column":56}},"126":{"start":{"line":296,"column":16},"end":{"line":298,"column":19}},"127":{"start":{"line":297,"column":20},"end":{"line":297,"column":54}},"128":{"start":{"line":301,"column":12},"end":{"line":301,"column":57}},"129":{"start":{"line":302,"column":12},"end":{"line":302,"column":33}},"130":{"start":{"line":304,"column":12},"end":{"line":311,"column":15}},"131":{"start":{"line":305,"column":16},"end":{"line":307,"column":17}},"132":{"start":{"line":306,"column":20},"end":{"line":306,"column":27}},"133":{"start":{"line":308,"column":16},"end":{"line":308,"column":32}},"134":{"start":{"line":309,"column":16},"end":{"line":309,"column":35}},"135":{"start":{"line":310,"column":16},"end":{"line":310,"column":37}},"136":{"start":{"line":313,"column":12},"end":{"line":319,"column":15}},"137":{"start":{"line":314,"column":16},"end":{"line":316,"column":17}},"138":{"start":{"line":315,"column":20},"end":{"line":315,"column":27}},"139":{"start":{"line":317,"column":16},"end":{"line":317,"column":32}},"140":{"start":{"line":318,"column":16},"end":{"line":318,"column":64}},"141":{"start":{"line":321,"column":12},"end":{"line":328,"column":14}},"142":{"start":{"line":322,"column":16},"end":{"line":324,"column":17}},"143":{"start":{"line":323,"column":20},"end":{"line":323,"column":27}},"144":{"start":{"line":325,"column":16},"end":{"line":325,"column":32}},"145":{"start":{"line":326,"column":16},"end":{"line":326,"column":34}},"146":{"start":{"line":327,"column":16},"end":{"line":327,"column":44}},"147":{"start":{"line":330,"column":12},"end":{"line":354,"column":15}},"148":{"start":{"line":331,"column":16},"end":{"line":333,"column":17}},"149":{"start":{"line":332,"column":20},"end":{"line":332,"column":27}},"150":{"start":{"line":335,"column":16},"end":{"line":335,"column":48}},"151":{"start":{"line":337,"column":16},"end":{"line":353,"column":17}},"152":{"start":{"line":338,"column":20},"end":{"line":350,"column":23}},"153":{"start":{"line":339,"column":24},"end":{"line":341,"column":25}},"154":{"start":{"line":340,"column":28},"end":{"line":340,"column":35}},"155":{"start":{"line":343,"column":24},"end":{"line":347,"column":25}},"156":{"start":{"line":344,"column":28},"end":{"line":344,"column":44}},"157":{"start":{"line":345,"column":28},"end":{"line":345,"column":47}},"158":{"start":{"line":346,"column":28},"end":{"line":346,"column":49}},"159":{"start":{"line":349,"column":24},"end":{"line":349,"column":35}},"160":{"start":{"line":352,"column":20},"end":{"line":352,"column":31}},"161":{"start":{"line":357,"column":8},"end":{"line":357,"column":23}},"162":{"start":{"line":364,"column":8},"end":{"line":366,"column":9}},"163":{"start":{"line":365,"column":12},"end":{"line":365,"column":50}},"164":{"start":{"line":367,"column":8},"end":{"line":367,"column":27}},"165":{"start":{"line":372,"column":0},"end":{"line":372,"column":31}}},"branchMap":{"1":{"line":20,"type":"binary-expr","locations":[{"start":{"line":20,"column":18},"end":{"line":20,"column":25}},{"start":{"line":20,"column":29},"end":{"line":20,"column":31}}]},"2":{"line":21,"type":"if","locations":[{"start":{"line":21,"column":8},"end":{"line":21,"column":8}},{"start":{"line":21,"column":8},"end":{"line":21,"column":8}}]},"3":{"line":30,"type":"if","locations":[{"start":{"line":30,"column":8},"end":{"line":30,"column":8}},{"start":{"line":30,"column":8},"end":{"line":30,"column":8}}]},"4":{"line":34,"type":"if","locations":[{"start":{"line":34,"column":8},"end":{"line":34,"column":8}},{"start":{"line":34,"column":8},"end":{"line":34,"column":8}}]},"5":{"line":36,"type":"binary-expr","locations":[{"start":{"line":36,"column":22},"end":{"line":36,"column":29}},{"start":{"line":36,"column":33},"end":{"line":36,"column":48}}]},"6":{"line":43,"type":"binary-expr","locations":[{"start":{"line":43,"column":12},"end":{"line":43,"column":19}},{"start":{"line":43,"column":23},"end":{"line":43,"column":41}}]},"7":{"line":47,"type":"binary-expr","locations":[{"start":{"line":47,"column":23},"end":{"line":47,"column":45}},{"start":{"line":47,"column":49},"end":{"line":47,"column":65}}]},"8":{"line":56,"type":"if","locations":[{"start":{"line":56,"column":8},"end":{"line":56,"column":8}},{"start":{"line":56,"column":8},"end":{"line":56,"column":8}}]},"9":{"line":74,"type":"if","locations":[{"start":{"line":74,"column":8},"end":{"line":74,"column":8}},{"start":{"line":74,"column":8},"end":{"line":74,"column":8}}]},"10":{"line":81,"type":"if","locations":[{"start":{"line":81,"column":8},"end":{"line":81,"column":8}},{"start":{"line":81,"column":8},"end":{"line":81,"column":8}}]},"11":{"line":81,"type":"binary-expr","locations":[{"start":{"line":81,"column":12},"end":{"line":81,"column":29}},{"start":{"line":81,"column":33},"end":{"line":81,"column":70}}]},"12":{"line":88,"type":"if","locations":[{"start":{"line":88,"column":8},"end":{"line":88,"column":8}},{"start":{"line":88,"column":8},"end":{"line":88,"column":8}}]},"13":{"line":88,"type":"binary-expr","locations":[{"start":{"line":88,"column":12},"end":{"line":88,"column":20}},{"start":{"line":88,"column":24},"end":{"line":88,"column":52}}]},"14":{"line":95,"type":"if","locations":[{"start":{"line":95,"column":8},"end":{"line":95,"column":8}},{"start":{"line":95,"column":8},"end":{"line":95,"column":8}}]},"15":{"line":99,"type":"switch","locations":[{"start":{"line":100,"column":12},"end":{"line":115,"column":17}},{"start":{"line":116,"column":12},"end":{"line":125,"column":18}}]},"16":{"line":99,"type":"binary-expr","locations":[{"start":{"line":99,"column":17},"end":{"line":99,"column":30}},{"start":{"line":99,"column":34},"end":{"line":99,"column":36}}]},"17":{"line":102,"type":"if","locations":[{"start":{"line":102,"column":20},"end":{"line":102,"column":20}},{"start":{"line":102,"column":20},"end":{"line":102,"column":20}}]},"18":{"line":102,"type":"binary-expr","locations":[{"start":{"line":102,"column":24},"end":{"line":102,"column":41}},{"start":{"line":102,"column":45},"end":{"line":102,"column":59}}]},"19":{"line":106,"type":"binary-expr","locations":[{"start":{"line":106,"column":47},"end":{"line":106,"column":58}},{"start":{"line":106,"column":62},"end":{"line":106,"column":100}},{"start":{"line":106,"column":104},"end":{"line":106,"column":128}}]},"20":{"line":121,"type":"binary-expr","locations":[{"start":{"line":121,"column":30},"end":{"line":121,"column":43}},{"start":{"line":121,"column":47},"end":{"line":121,"column":49}}]},"21":{"line":124,"type":"binary-expr","locations":[{"start":{"line":124,"column":28},"end":{"line":124,"column":72}},{"start":{"line":124,"column":76},"end":{"line":124,"column":81}}]},"22":{"line":124,"type":"binary-expr","locations":[{"start":{"line":124,"column":29},"end":{"line":124,"column":44}},{"start":{"line":124,"column":48},"end":{"line":124,"column":50}}]},"23":{"line":137,"type":"if","locations":[{"start":{"line":137,"column":12},"end":{"line":137,"column":12}},{"start":{"line":137,"column":12},"end":{"line":137,"column":12}}]},"24":{"line":143,"type":"if","locations":[{"start":{"line":143,"column":12},"end":{"line":143,"column":12}},{"start":{"line":143,"column":12},"end":{"line":143,"column":12}}]},"25":{"line":143,"type":"binary-expr","locations":[{"start":{"line":143,"column":16},"end":{"line":143,"column":29}},{"start":{"line":143,"column":33},"end":{"line":143,"column":57}}]},"26":{"line":149,"type":"binary-expr","locations":[{"start":{"line":149,"column":30},"end":{"line":149,"column":42}},{"start":{"line":149,"column":46},"end":{"line":149,"column":48}}]},"27":{"line":150,"type":"binary-expr","locations":[{"start":{"line":150,"column":30},"end":{"line":150,"column":42}},{"start":{"line":150,"column":46},"end":{"line":150,"column":48}}]},"28":{"line":152,"type":"binary-expr","locations":[{"start":{"line":152,"column":140},"end":{"line":152,"column":152}},{"start":{"line":152,"column":156},"end":{"line":152,"column":158}}]},"29":{"line":152,"type":"binary-expr","locations":[{"start":{"line":152,"column":160},"end":{"line":152,"column":172}},{"start":{"line":152,"column":176},"end":{"line":152,"column":178}}]},"30":{"line":164,"type":"if","locations":[{"start":{"line":164,"column":16},"end":{"line":164,"column":16}},{"start":{"line":164,"column":16},"end":{"line":164,"column":16}}]},"31":{"line":173,"type":"if","locations":[{"start":{"line":173,"column":16},"end":{"line":173,"column":16}},{"start":{"line":173,"column":16},"end":{"line":173,"column":16}}]},"32":{"line":178,"type":"if","locations":[{"start":{"line":178,"column":20},"end":{"line":178,"column":20}},{"start":{"line":178,"column":20},"end":{"line":178,"column":20}}]},"33":{"line":183,"type":"if","locations":[{"start":{"line":183,"column":20},"end":{"line":183,"column":20}},{"start":{"line":183,"column":20},"end":{"line":183,"column":20}}]},"34":{"line":183,"type":"binary-expr","locations":[{"start":{"line":183,"column":24},"end":{"line":183,"column":34}},{"start":{"line":183,"column":38},"end":{"line":183,"column":56}},{"start":{"line":183,"column":60},"end":{"line":183,"column":88}}]},"35":{"line":195,"type":"binary-expr","locations":[{"start":{"line":195,"column":43},"end":{"line":195,"column":54}},{"start":{"line":195,"column":58},"end":{"line":195,"column":60}}]},"36":{"line":196,"type":"if","locations":[{"start":{"line":196,"column":16},"end":{"line":196,"column":16}},{"start":{"line":196,"column":16},"end":{"line":196,"column":16}}]},"37":{"line":200,"type":"if","locations":[{"start":{"line":200,"column":16},"end":{"line":200,"column":16}},{"start":{"line":200,"column":16},"end":{"line":200,"column":16}}]},"38":{"line":211,"type":"if","locations":[{"start":{"line":211,"column":20},"end":{"line":211,"column":20}},{"start":{"line":211,"column":20},"end":{"line":211,"column":20}}]},"39":{"line":235,"type":"if","locations":[{"start":{"line":235,"column":16},"end":{"line":235,"column":16}},{"start":{"line":235,"column":16},"end":{"line":235,"column":16}}]},"40":{"line":241,"type":"if","locations":[{"start":{"line":241,"column":16},"end":{"line":241,"column":16}},{"start":{"line":241,"column":16},"end":{"line":241,"column":16}}]},"41":{"line":243,"type":"if","locations":[{"start":{"line":243,"column":24},"end":{"line":243,"column":24}},{"start":{"line":243,"column":24},"end":{"line":243,"column":24}}]},"42":{"line":243,"type":"binary-expr","locations":[{"start":{"line":243,"column":28},"end":{"line":243,"column":32}},{"start":{"line":243,"column":36},"end":{"line":243,"column":54}},{"start":{"line":243,"column":58},"end":{"line":243,"column":69}}]},"43":{"line":246,"type":"if","locations":[{"start":{"line":246,"column":24},"end":{"line":246,"column":24}},{"start":{"line":246,"column":24},"end":{"line":246,"column":24}}]},"44":{"line":251,"type":"if","locations":[{"start":{"line":251,"column":24},"end":{"line":251,"column":24}},{"start":{"line":251,"column":24},"end":{"line":251,"column":24}}]},"45":{"line":273,"type":"if","locations":[{"start":{"line":273,"column":8},"end":{"line":273,"column":8}},{"start":{"line":273,"column":8},"end":{"line":273,"column":8}}]},"46":{"line":273,"type":"binary-expr","locations":[{"start":{"line":273,"column":12},"end":{"line":273,"column":21}},{"start":{"line":273,"column":25},"end":{"line":273,"column":54}}]},"47":{"line":280,"type":"if","locations":[{"start":{"line":280,"column":12},"end":{"line":280,"column":12}},{"start":{"line":280,"column":12},"end":{"line":280,"column":12}}]},"48":{"line":285,"type":"if","locations":[{"start":{"line":285,"column":12},"end":{"line":285,"column":12}},{"start":{"line":285,"column":12},"end":{"line":285,"column":12}}]},"49":{"line":285,"type":"binary-expr","locations":[{"start":{"line":285,"column":16},"end":{"line":285,"column":29}},{"start":{"line":285,"column":33},"end":{"line":285,"column":57}}]},"50":{"line":290,"type":"binary-expr","locations":[{"start":{"line":290,"column":30},"end":{"line":290,"column":42}},{"start":{"line":290,"column":46},"end":{"line":290,"column":48}}]},"51":{"line":291,"type":"binary-expr","locations":[{"start":{"line":291,"column":30},"end":{"line":291,"column":42}},{"start":{"line":291,"column":46},"end":{"line":291,"column":48}}]},"52":{"line":293,"type":"binary-expr","locations":[{"start":{"line":293,"column":140},"end":{"line":293,"column":152}},{"start":{"line":293,"column":156},"end":{"line":293,"column":158}}]},"53":{"line":293,"type":"binary-expr","locations":[{"start":{"line":293,"column":160},"end":{"line":293,"column":172}},{"start":{"line":293,"column":176},"end":{"line":293,"column":178}}]},"54":{"line":305,"type":"if","locations":[{"start":{"line":305,"column":16},"end":{"line":305,"column":16}},{"start":{"line":305,"column":16},"end":{"line":305,"column":16}}]},"55":{"line":314,"type":"if","locations":[{"start":{"line":314,"column":16},"end":{"line":314,"column":16}},{"start":{"line":314,"column":16},"end":{"line":314,"column":16}}]},"56":{"line":322,"type":"if","locations":[{"start":{"line":322,"column":16},"end":{"line":322,"column":16}},{"start":{"line":322,"column":16},"end":{"line":322,"column":16}}]},"57":{"line":331,"type":"if","locations":[{"start":{"line":331,"column":16},"end":{"line":331,"column":16}},{"start":{"line":331,"column":16},"end":{"line":331,"column":16}}]},"58":{"line":337,"type":"if","locations":[{"start":{"line":337,"column":16},"end":{"line":337,"column":16}},{"start":{"line":337,"column":16},"end":{"line":337,"column":16}}]},"59":{"line":339,"type":"if","locations":[{"start":{"line":339,"column":24},"end":{"line":339,"column":24}},{"start":{"line":339,"column":24},"end":{"line":339,"column":24}}]},"60":{"line":343,"type":"if","locations":[{"start":{"line":343,"column":24},"end":{"line":343,"column":24}},{"start":{"line":343,"column":24},"end":{"line":343,"column":24}}]},"61":{"line":364,"type":"if","locations":[{"start":{"line":364,"column":8},"end":{"line":364,"column":8}},{"start":{"line":364,"column":8},"end":{"line":364,"column":8}}]},"62":{"line":364,"type":"binary-expr","locations":[{"start":{"line":364,"column":12},"end":{"line":364,"column":21}},{"start":{"line":364,"column":25},"end":{"line":364,"column":41}}]}},"code":["'use strict';","","const EventEmitter = require('events');","const SMTPConnection = require('../smtp-connection');","const wellKnown = require('../well-known');","const shared = require('../shared');","const XOAuth2 = require('../xoauth2');","const packageData = require('../../package.json');","","/**"," * Creates a SMTP transport object for Nodemailer"," *"," * @constructor"," * @param {Object} options Connection options"," */","class SMTPTransport extends EventEmitter {","    constructor(options) {","        super();","","        options = options || {};","        if (typeof options === 'string') {","            options = {","                url: options","            };","        }","","        let urlData;","        let service = options.service;","","        if (typeof options.getSocket === 'function') {","            this.getSocket = options.getSocket;","        }","","        if (options.url) {","            urlData = shared.parseConnectionUrl(options.url);","            service = service || urlData.service;","        }","","        this.options = shared.assign(","            false, // create new object","            options, // regular options","            urlData, // url options","            service && wellKnown(service) // wellknown options","        );","","        this.logger = shared.getLogger(this.options, {","            component: this.options.component || 'smtp-transport'","        });","","        // temporary object","        let connection = new SMTPConnection(this.options);","","        this.name = 'SMTP';","        this.version = packageData.version + '[client:' + connection.version + ']';","","        if (this.options.auth) {","            this.auth = this.getAuth({});","        }","    }","","    /**","     * Placeholder function for creating proxy sockets. This method immediatelly returns","     * without a socket","     *","     * @param {Object} options Connection options","     * @param {Function} callback Callback function to run with the socket keys","     */","    getSocket(options, callback) {","        // return immediatelly","        return setImmediate(() => callback(null, false));","    }","","    getAuth(authOpts) {","        if (!authOpts) {","            return this.auth;","        }","","        let hasAuth = false;","        let authData = {};","","        if (this.options.auth && typeof this.options.auth === 'object') {","            Object.keys(this.options.auth).forEach(key => {","                hasAuth = true;","                authData[key] = this.options.auth[key];","            });","        }","","        if (authOpts && typeof authOpts === 'object') {","            Object.keys(authOpts).forEach(key => {","                hasAuth = true;","                authData[key] = authOpts[key];","            });","        }","","        if (!hasAuth) {","            return false;","        }","","        switch ((authData.type || '').toString().toUpperCase()) {","            case 'OAUTH2':","                {","                    if (!authData.service && !authData.user) {","                        return false;","                    }","                    let oauth2 = new XOAuth2(authData, this.logger);","                    oauth2.provisionCallback = this.mailer && this.mailer.get('oauth2_provision_cb') || oauth2.provisionCallback;","                    oauth2.on('token', token => this.mailer.emit('token', token));","                    oauth2.on('error', err => this.emit('error', err));","                    return {","                        type: 'OAUTH2',","                        user: authData.user,","                        oauth2,","                        method: 'XOAUTH2'","                    };","                }","            default:","                return {","                    type: 'LOGIN',","                    user: authData.user,","                    credentials: {","                        user: authData.user || '',","                        pass: authData.pass","                    },","                    method: (authData.method || '').trim().toUpperCase() || false","                };","        }","    }","","    /**","     * Sends an e-mail using the selected settings","     *","     * @param {Object} mail Mail object","     * @param {Function} callback Callback function","     */","    send(mail, callback) {","        this.getSocket(this.options, (err, socketOptions) => {","            if (err) {","                return callback(err);","            }","","            let returned = false;","            let options = this.options;","            if (socketOptions && socketOptions.connection) {","","                this.logger.info({","                    tnx: 'proxy',","                    remoteAddress: socketOptions.connection.remoteAddress,","                    remotePort: socketOptions.connection.remotePort,","                    destHost: options.host || '',","                    destPort: options.port || '',","                    action: 'connected'","                }, 'Using proxied socket from %s:%s to %s:%s', socketOptions.connection.remoteAddress, socketOptions.connection.remotePort, options.host || '', options.port || '');","","                // only copy options if we need to modify it","                options = shared.assign(false, options);","                Object.keys(socketOptions).forEach(key => {","                    options[key] = socketOptions[key];","                });","            }","","            let connection = new SMTPConnection(options);","","            connection.once('error', err => {","                if (returned) {","                    return;","                }","                returned = true;","                connection.close();","                return callback(err);","            });","","            connection.once('end', () => {","                if (returned) {","                    return;","                }","                returned = true;","                setTimeout(() => {","                    if (returned) {","                        return;","                    }","                    // still have not returned, this means we have an unexpected connection close","                    let err = new Error('Unexpected socket close');","                    if (connection && connection._socket && connection._socket.upgrading) {","                        // starttls connection errors","                        err.code = 'ETLS';","                    }","                    callback(err);","                }, 1000).unref();","            });","","            let sendMessage = () => {","                let envelope = mail.message.getEnvelope();","                let messageId = mail.message.messageId();","","                let recipients = [].concat(envelope.to || []);","                if (recipients.length > 3) {","                    recipients.push('...and ' + recipients.splice(2).length + ' more');","                }","","                if (mail.data.dsn) {","                    envelope.dsn = mail.data.dsn;","                }","","                this.logger.info({","                    tnx: 'send',","                    messageId","                }, 'Sending message %s to <%s>', messageId, recipients.join(', '));","","                connection.send(envelope, mail.message.createReadStream(), (err, info) => {","                    connection.close();","                    if (err) {","                        this.logger.error({","                            err,","                            tnx: 'send'","                        }, 'Send error for %s: %s', messageId, err.message);","                        return callback(err);","                    }","                    info.envelope = {","                        from: envelope.from,","                        to: envelope.to","                    };","                    info.messageId = messageId;","                    try {","                        return callback(null, info);","                    } catch (E) {","                        this.logger.error({","                            err: E,","                            tnx: 'callback'","                        }, 'Callback error for %s: %s', messageId, E.message);","                    }","                });","            };","","            connection.connect(() => {","                if (returned) {","                    return;","                }","","                let auth = this.getAuth(mail.data.auth);","","                if (auth) {","                    connection.login(auth, err => {","                        if (auth && auth !== this.auth && auth.oauth2) {","                            auth.oauth2.removeAllListeners();","                        }","                        if (returned) {","                            return;","                        }","                        returned = true;","","                        if (err) {","                            connection.close();","                            return callback(err);","                        }","","                        sendMessage();","                    });","                } else {","                    sendMessage();","                }","            });","        });","    }","","    /**","     * Verifies SMTP configuration","     *","     * @param {Function} callback Callback function","     */","    verify(callback) {","        let promise;","","        if (!callback && typeof Promise === 'function') {","            promise = new Promise((resolve, reject) => {","                callback = shared.callbackPromise(resolve, reject);","            });","        }","","        this.getSocket(this.options, (err, socketOptions) => {","            if (err) {","                return callback(err);","            }","","            let options = this.options;","            if (socketOptions && socketOptions.connection) {","                this.logger.info({","                    tnx: 'proxy',","                    remoteAddress: socketOptions.connection.remoteAddress,","                    remotePort: socketOptions.connection.remotePort,","                    destHost: options.host || '',","                    destPort: options.port || '',","                    action: 'connected'","                }, 'Using proxied socket from %s:%s to %s:%s', socketOptions.connection.remoteAddress, socketOptions.connection.remotePort, options.host || '', options.port || '');","","                options = shared.assign(false, options);","                Object.keys(socketOptions).forEach(key => {","                    options[key] = socketOptions[key];","                });","            }","","            let connection = new SMTPConnection(options);","            let returned = false;","","            connection.once('error', err => {","                if (returned) {","                    return;","                }","                returned = true;","                connection.close();","                return callback(err);","            });","","            connection.once('end', () => {","                if (returned) {","                    return;","                }","                returned = true;","                return callback(new Error('Connection closed'));","            });","","            let finalize = () => {","                if (returned) {","                    return;","                }","                returned = true;","                connection.quit();","                return callback(null, true);","            };","","            connection.connect(() => {","                if (returned) {","                    return;","                }","","                let authData = this.getAuth({});","","                if (authData) {","                    connection.login(authData, err => {","                        if (returned) {","                            return;","                        }","","                        if (err) {","                            returned = true;","                            connection.close();","                            return callback(err);","                        }","","                        finalize();","                    });","                } else {","                    finalize();","                }","            });","        });","","        return promise;","    }","","    /**","     * Releases resources","     */","    close() {","        if (this.auth && this.auth.oauth2) {","            this.auth.oauth2.removeAllListeners();","        }","        this.emit('close');","    }","}","","// expose to the world","module.exports = SMTPTransport;",""],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"18":0,"20":0,"21":0,"22":0,"27":0,"28":0,"30":0,"31":0,"34":0,"35":0,"36":0,"39":0,"46":0,"51":0,"53":0,"54":0,"56":0,"57":0,"70":0,"74":0,"75":0,"78":0,"79":0,"81":0,"82":0,"83":0,"84":0,"88":0,"89":0,"90":0,"91":0,"95":0,"96":0,"99":0,"102":0,"103":0,"105":0,"106":0,"107":0,"108":0,"109":0,"117":0,"136":0,"137":0,"138":0,"141":0,"142":0,"143":0,"145":0,"155":0,"156":0,"157":0,"161":0,"163":0,"164":0,"165":0,"167":0,"168":0,"169":0,"172":0,"173":0,"174":0,"176":0,"177":0,"178":0,"179":0,"182":0,"183":0,"185":0,"187":0,"191":0,"192":0,"193":0,"195":0,"196":0,"197":0,"200":0,"201":0,"204":0,"209":0,"210":0,"211":0,"212":0,"216":0,"218":0,"222":0,"223":0,"224":0,"226":0,"234":0,"235":0,"236":0,"239":0,"241":0,"242":0,"243":0,"244":0,"246":0,"247":0,"249":0,"251":0,"252":0,"253":0,"256":0,"259":0,"271":0,"273":0,"274":0,"275":0,"279":0,"280":0,"281":0,"284":0,"285":0,"286":0,"295":0,"296":0,"297":0,"301":0,"302":0,"304":0,"305":0,"306":0,"308":0,"309":0,"310":0,"313":0,"314":0,"315":0,"317":0,"318":0,"321":0,"322":0,"323":0,"325":0,"326":0,"327":0,"330":0,"331":0,"332":0,"335":0,"337":0,"338":0,"339":0,"340":0,"343":0,"344":0,"345":0,"346":0,"349":0,"352":0,"357":0,"364":0,"365":0,"367":0,"372":1}},"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/sendmail-transport/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/sendmail-transport/index.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"(anonymous_1)","line":22,"loc":{"start":{"line":22,"column":15},"end":{"line":22,"column":25}}},"2":{"name":"(anonymous_2)","line":62,"loc":{"start":{"line":62,"column":8},"end":{"line":62,"column":21}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":45}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":50}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":42}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":36}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":36}},"6":{"start":{"line":23,"column":8},"end":{"line":23,"column":32}},"7":{"start":{"line":26,"column":8},"end":{"line":26,"column":28}},"8":{"start":{"line":28,"column":8},"end":{"line":28,"column":37}},"9":{"start":{"line":30,"column":8},"end":{"line":30,"column":31}},"10":{"start":{"line":31,"column":8},"end":{"line":31,"column":43}},"11":{"start":{"line":33,"column":8},"end":{"line":33,"column":31}},"12":{"start":{"line":34,"column":8},"end":{"line":34,"column":26}},"13":{"start":{"line":35,"column":8},"end":{"line":35,"column":30}},"14":{"start":{"line":37,"column":8},"end":{"line":39,"column":11}},"15":{"start":{"line":41,"column":8},"end":{"line":53,"column":9}},"16":{"start":{"line":42,"column":12},"end":{"line":52,"column":13}},"17":{"start":{"line":43,"column":16},"end":{"line":43,"column":36}},"18":{"start":{"line":44,"column":19},"end":{"line":52,"column":13}},"19":{"start":{"line":45,"column":16},"end":{"line":47,"column":17}},"20":{"start":{"line":46,"column":20},"end":{"line":46,"column":45}},"21":{"start":{"line":48,"column":16},"end":{"line":50,"column":17}},"22":{"start":{"line":49,"column":20},"end":{"line":49,"column":45}},"23":{"start":{"line":51,"column":16},"end":{"line":51,"column":125}},"24":{"start":{"line":64,"column":8},"end":{"line":64,"column":36}},"25":{"start":{"line":66,"column":8},"end":{"line":66,"column":72}},"26":{"start":{"line":67,"column":8},"end":{"line":67,"column":49}},"27":{"start":{"line":68,"column":8},"end":{"line":68,"column":17}},"28":{"start":{"line":69,"column":8},"end":{"line":69,"column":21}},"29":{"start":{"line":70,"column":8},"end":{"line":70,"column":21}},"30":{"start":{"line":71,"column":8},"end":{"line":71,"column":22}},"31":{"start":{"line":73,"column":8},"end":{"line":78,"column":9}},"32":{"start":{"line":75,"column":12},"end":{"line":75,"column":64}},"33":{"start":{"line":77,"column":12},"end":{"line":77,"column":97}},"34":{"start":{"line":80,"column":8},"end":{"line":97,"column":10}},"35":{"start":{"line":81,"column":12},"end":{"line":84,"column":13}},"36":{"start":{"line":83,"column":16},"end":{"line":83,"column":23}},"37":{"start":{"line":85,"column":12},"end":{"line":85,"column":28}},"38":{"start":{"line":86,"column":12},"end":{"line":96,"column":13}},"39":{"start":{"line":87,"column":16},"end":{"line":95,"column":17}},"40":{"start":{"line":88,"column":20},"end":{"line":88,"column":37}},"41":{"start":{"line":90,"column":20},"end":{"line":94,"column":23}},"42":{"start":{"line":99,"column":8},"end":{"line":108,"column":9}},"43":{"start":{"line":100,"column":12},"end":{"line":100,"column":52}},"44":{"start":{"line":102,"column":12},"end":{"line":106,"column":72}},"45":{"start":{"line":107,"column":12},"end":{"line":107,"column":31}},"46":{"start":{"line":110,"column":8},"end":{"line":175,"column":9}},"47":{"start":{"line":111,"column":12},"end":{"line":118,"column":15}},"48":{"start":{"line":112,"column":16},"end":{"line":116,"column":89}},"49":{"start":{"line":117,"column":16},"end":{"line":117,"column":30}},"50":{"start":{"line":120,"column":12},"end":{"line":137,"column":15}},"51":{"start":{"line":121,"column":16},"end":{"line":123,"column":17}},"52":{"start":{"line":122,"column":20},"end":{"line":122,"column":38}},"53":{"start":{"line":124,"column":16},"end":{"line":124,"column":24}},"54":{"start":{"line":125,"column":16},"end":{"line":129,"column":17}},"55":{"start":{"line":126,"column":20},"end":{"line":126,"column":100}},"56":{"start":{"line":128,"column":20},"end":{"line":128,"column":73}},"57":{"start":{"line":131,"column":16},"end":{"line":135,"column":87}},"58":{"start":{"line":136,"column":16},"end":{"line":136,"column":30}},"59":{"start":{"line":138,"column":12},"end":{"line":138,"column":45}},"60":{"start":{"line":140,"column":12},"end":{"line":147,"column":15}},"61":{"start":{"line":141,"column":16},"end":{"line":145,"column":100}},"62":{"start":{"line":146,"column":16},"end":{"line":146,"column":30}},"63":{"start":{"line":149,"column":12},"end":{"line":149,"column":58}},"64":{"start":{"line":150,"column":12},"end":{"line":152,"column":13}},"65":{"start":{"line":151,"column":16},"end":{"line":151,"column":83}},"66":{"start":{"line":153,"column":12},"end":{"line":156,"column":79}},"67":{"start":{"line":158,"column":12},"end":{"line":158,"column":71}},"68":{"start":{"line":159,"column":12},"end":{"line":159,"column":63}},"69":{"start":{"line":161,"column":12},"end":{"line":169,"column":15}},"70":{"start":{"line":162,"column":16},"end":{"line":166,"column":92}},"71":{"start":{"line":167,"column":16},"end":{"line":167,"column":40}},"72":{"start":{"line":168,"column":16},"end":{"line":168,"column":30}},"73":{"start":{"line":171,"column":12},"end":{"line":171,"column":76}},"74":{"start":{"line":171,"column":46},"end":{"line":171,"column":74}},"75":{"start":{"line":172,"column":12},"end":{"line":172,"column":62}},"76":{"start":{"line":174,"column":12},"end":{"line":174,"column":65}},"77":{"start":{"line":180,"column":0},"end":{"line":180,"column":35}}},"branchMap":{"1":{"line":23,"type":"binary-expr","locations":[{"start":{"line":23,"column":18},"end":{"line":23,"column":25}},{"start":{"line":23,"column":29},"end":{"line":23,"column":31}}]},"2":{"line":28,"type":"binary-expr","locations":[{"start":{"line":28,"column":23},"end":{"line":28,"column":30}},{"start":{"line":28,"column":34},"end":{"line":28,"column":36}}]},"3":{"line":38,"type":"binary-expr","locations":[{"start":{"line":38,"column":23},"end":{"line":38,"column":45}},{"start":{"line":38,"column":49},"end":{"line":38,"column":59}}]},"4":{"line":41,"type":"if","locations":[{"start":{"line":41,"column":8},"end":{"line":41,"column":8}},{"start":{"line":41,"column":8},"end":{"line":41,"column":8}}]},"5":{"line":42,"type":"if","locations":[{"start":{"line":42,"column":12},"end":{"line":42,"column":12}},{"start":{"line":42,"column":12},"end":{"line":42,"column":12}}]},"6":{"line":44,"type":"if","locations":[{"start":{"line":44,"column":19},"end":{"line":44,"column":19}},{"start":{"line":44,"column":19},"end":{"line":44,"column":19}}]},"7":{"line":45,"type":"if","locations":[{"start":{"line":45,"column":16},"end":{"line":45,"column":16}},{"start":{"line":45,"column":16},"end":{"line":45,"column":16}}]},"8":{"line":48,"type":"if","locations":[{"start":{"line":48,"column":16},"end":{"line":48,"column":16}},{"start":{"line":48,"column":16},"end":{"line":48,"column":16}}]},"9":{"line":51,"type":"binary-expr","locations":[{"start":{"line":51,"column":76},"end":{"line":51,"column":91}},{"start":{"line":51,"column":95},"end":{"line":51,"column":97}}]},"10":{"line":66,"type":"binary-expr","locations":[{"start":{"line":66,"column":23},"end":{"line":66,"column":41}},{"start":{"line":66,"column":45},"end":{"line":66,"column":71}}]},"11":{"line":73,"type":"if","locations":[{"start":{"line":73,"column":8},"end":{"line":73,"column":8}},{"start":{"line":73,"column":8},"end":{"line":73,"column":8}}]},"12":{"line":77,"type":"cond-expr","locations":[{"start":{"line":77,"column":49},"end":{"line":77,"column":70}},{"start":{"line":77,"column":73},"end":{"line":77,"column":75}}]},"13":{"line":81,"type":"if","locations":[{"start":{"line":81,"column":12},"end":{"line":81,"column":12}},{"start":{"line":81,"column":12},"end":{"line":81,"column":12}}]},"14":{"line":86,"type":"if","locations":[{"start":{"line":86,"column":12},"end":{"line":86,"column":12}},{"start":{"line":86,"column":12},"end":{"line":86,"column":12}}]},"15":{"line":87,"type":"if","locations":[{"start":{"line":87,"column":16},"end":{"line":87,"column":16}},{"start":{"line":87,"column":16},"end":{"line":87,"column":16}}]},"16":{"line":91,"type":"binary-expr","locations":[{"start":{"line":91,"column":34},"end":{"line":91,"column":52}},{"start":{"line":91,"column":56},"end":{"line":91,"column":82}}]},"17":{"line":110,"type":"if","locations":[{"start":{"line":110,"column":8},"end":{"line":110,"column":8}},{"start":{"line":110,"column":8},"end":{"line":110,"column":8}}]},"18":{"line":121,"type":"if","locations":[{"start":{"line":121,"column":16},"end":{"line":121,"column":16}},{"start":{"line":121,"column":16},"end":{"line":121,"column":16}}]},"19":{"line":125,"type":"if","locations":[{"start":{"line":125,"column":16},"end":{"line":125,"column":16}},{"start":{"line":125,"column":16},"end":{"line":125,"column":16}}]},"20":{"line":149,"type":"binary-expr","locations":[{"start":{"line":149,"column":39},"end":{"line":149,"column":50}},{"start":{"line":149,"column":54},"end":{"line":149,"column":56}}]},"21":{"line":150,"type":"if","locations":[{"start":{"line":150,"column":12},"end":{"line":150,"column":12}},{"start":{"line":150,"column":12},"end":{"line":150,"column":12}}]},"22":{"line":158,"type":"cond-expr","locations":[{"start":{"line":158,"column":40},"end":{"line":158,"column":55}},{"start":{"line":158,"column":58},"end":{"line":158,"column":70}}]}},"code":["'use strict';","","const spawn = require('child_process').spawn;","const packageData = require('../../package.json');","const LeWindows = require('./le-windows');","const LeUnix = require('./le-unix');","const shared = require('../shared');","","/**"," * Generates a Transport object for Sendmail"," *"," * Possible options can be the following:"," *"," *  * **path** optional path to sendmail binary"," *  * **newline** either 'windows' or 'unix'"," *  * **args** an array of arguments for the sendmail binary"," *"," * @constructor"," * @param {Object} optional config parameter for the AWS Sendmail service"," */","class SendmailTransport {","    constructor(options) {","        options = options || {};","","        // use a reference to spawn for mocking purposes","        this._spawn = spawn;","","        this.options = options || {};","","        this.name = 'Sendmail';","        this.version = packageData.version;","","        this.path = 'sendmail';","        this.args = false;","        this.winbreak = false;","","        this.logger = shared.getLogger(this.options, {","            component: this.options.component || 'sendmail'","        });","","        if (options) {","            if (typeof options === 'string') {","                this.path = options;","            } else if (typeof options === 'object') {","                if (options.path) {","                    this.path = options.path;","                }","                if (Array.isArray(options.args)) {","                    this.args = options.args;","                }","                this.winbreak = ['win', 'windows', 'dos', '\\r\\n'].includes((options.newline || '').toString().toLowerCase());","            }","        }","    }","","    /**","     * <p>Compiles a mailcomposer message and forwards it to handler that sends it.</p>","     *","     * @param {Object} emailMessage MailComposer object","     * @param {Function} callback Callback function to run when the sending is completed","     */","    send(mail, done) {","        // Sendmail strips this header line by itself","        mail.message.keepBcc = true;","","        let envelope = mail.data.envelope || mail.message.getEnvelope();","        let messageId = mail.message.messageId();","        let args;","        let sendmail;","        let returned;","        let transform;","","        if (this.args) {","            // force -i to keep single dots","            args = ['-i'].concat(this.args).concat(envelope.to);","        } else {","            args = ['-i'].concat(envelope.from ? ['-f', envelope.from] : []).concat(envelope.to);","        }","","        let callback = err => {","            if (returned) {","                // ignore any additional responses, already done","                return;","            }","            returned = true;","            if (typeof done === 'function') {","                if (err) {","                    return done(err);","                } else {","                    return done(null, {","                        envelope: mail.data.envelope || mail.message.getEnvelope(),","                        messageId,","                        response: 'Messages queued for delivery'","                    });","                }","            }","        };","","        try {","            sendmail = this._spawn(this.path, args);","        } catch (E) {","            this.logger.error({","                err: E,","                tnx: 'spawn',","                messageId","            }, 'Error occurred while spawning sendmail. %s', E.message);","            return callback(E);","        }","","        if (sendmail) {","            sendmail.on('error', err => {","                this.logger.error({","                    err,","                    tnx: 'spawn',","                    messageId","                }, 'Error occurred when sending message %s. %s', messageId, err.message);","                callback(err);","            });","","            sendmail.once('exit', code => {","                if (!code) {","                    return callback();","                }","                let err;","                if (code === 127) {","                    err = new Error('Sendmail command not found, process exited with code ' + code);","                } else {","                    err = new Error('Sendmail exited with code ' + code);","                }","","                this.logger.error({","                    err,","                    tnx: 'stdin',","                    messageId","                }, 'Error sending message %s to sendmail. %s', messageId, err.message);","                callback(err);","            });","            sendmail.once('close', callback);","","            sendmail.stdin.on('error', err => {","                this.logger.error({","                    err,","                    tnx: 'stdin',","                    messageId","                }, 'Error occurred when piping message %s to sendmail. %s', messageId, err.message);","                callback(err);","            });","","            let recipients = [].concat(envelope.to || []);","            if (recipients.length > 3) {","                recipients.push('...and ' + recipients.splice(2).length + ' more');","            }","            this.logger.info({","                tnx: 'send',","                messageId","            }, 'Sending message %s to <%s>', messageId, recipients.join(', '));","","            transform = this.winbreak ? new LeWindows() : new LeUnix();","            let sourceStream = mail.message.createReadStream();","","            transform.once('error', err => {","                this.logger.error({","                    err,","                    tnx: 'stdin',","                    messageId","                }, 'Error occurred when generating message %s. %s', messageId, err.message);","                sendmail.kill('SIGINT'); // do not deliver the message","                callback(err);","            });","","            sourceStream.once('error', err => transform.emit('error', err));","            sourceStream.pipe(transform).pipe(sendmail.stdin);","        } else {","            return callback(new Error('sendmail was not found'));","        }","","    }","}","","module.exports = SendmailTransport;",""],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"23":0,"26":0,"28":0,"30":0,"31":0,"33":0,"34":0,"35":0,"37":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"48":0,"49":0,"51":0,"64":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"73":0,"75":0,"77":0,"80":0,"81":0,"83":0,"85":0,"86":0,"87":0,"88":0,"90":0,"99":0,"100":0,"102":0,"107":0,"110":0,"111":0,"112":0,"117":0,"120":0,"121":0,"122":0,"124":0,"125":0,"126":0,"128":0,"131":0,"136":0,"138":0,"140":0,"141":0,"146":0,"149":0,"150":0,"151":0,"153":0,"158":0,"159":0,"161":0,"162":0,"167":0,"168":0,"171":0,"172":0,"174":0,"180":1}},"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/sendmail-transport/le-windows.js":{"path":"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/sendmail-transport/le-windows.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0,0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"(anonymous_1)","line":13,"loc":{"start":{"line":13,"column":15},"end":{"line":13,"column":25}}},"2":{"name":"(anonymous_2)","line":23,"loc":{"start":{"line":23,"column":14},"end":{"line":23,"column":38}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":33}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":35}},"3":{"start":{"line":14,"column":8},"end":{"line":14,"column":23}},"4":{"start":{"line":16,"column":8},"end":{"line":16,"column":37}},"5":{"start":{"line":17,"column":8},"end":{"line":17,"column":30}},"6":{"start":{"line":24,"column":8},"end":{"line":24,"column":16}},"7":{"start":{"line":25,"column":8},"end":{"line":25,"column":24}},"8":{"start":{"line":27,"column":8},"end":{"line":41,"column":9}},"9":{"start":{"line":28,"column":12},"end":{"line":40,"column":13}},"10":{"start":{"line":29,"column":16},"end":{"line":39,"column":17}},"11":{"start":{"line":33,"column":20},"end":{"line":36,"column":21}},"12":{"start":{"line":34,"column":24},"end":{"line":34,"column":54}},"13":{"start":{"line":35,"column":24},"end":{"line":35,"column":39}},"14":{"start":{"line":37,"column":20},"end":{"line":37,"column":50}},"15":{"start":{"line":38,"column":20},"end":{"line":38,"column":36}},"16":{"start":{"line":43,"column":8},"end":{"line":48,"column":9}},"17":{"start":{"line":44,"column":12},"end":{"line":44,"column":39}},"18":{"start":{"line":45,"column":12},"end":{"line":45,"column":27}},"19":{"start":{"line":46,"column":15},"end":{"line":48,"column":9}},"20":{"start":{"line":47,"column":12},"end":{"line":47,"column":29}},"21":{"start":{"line":50,"column":8},"end":{"line":50,"column":48}},"22":{"start":{"line":51,"column":8},"end":{"line":51,"column":15}},"23":{"start":{"line":55,"column":0},"end":{"line":55,"column":27}}},"branchMap":{"1":{"line":16,"type":"binary-expr","locations":[{"start":{"line":16,"column":23},"end":{"line":16,"column":30}},{"start":{"line":16,"column":34},"end":{"line":16,"column":36}}]},"2":{"line":28,"type":"if","locations":[{"start":{"line":28,"column":12},"end":{"line":28,"column":12}},{"start":{"line":28,"column":12},"end":{"line":28,"column":12}}]},"3":{"line":29,"type":"if","locations":[{"start":{"line":29,"column":16},"end":{"line":29,"column":16}},{"start":{"line":29,"column":16},"end":{"line":29,"column":16}}]},"4":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":21},"end":{"line":30,"column":22}},{"start":{"line":30,"column":26},"end":{"line":30,"column":47}},{"start":{"line":31,"column":21},"end":{"line":31,"column":23}},{"start":{"line":31,"column":27},"end":{"line":31,"column":49}}]},"5":{"line":33,"type":"if","locations":[{"start":{"line":33,"column":20},"end":{"line":33,"column":20}},{"start":{"line":33,"column":20},"end":{"line":33,"column":20}}]},"6":{"line":43,"type":"if","locations":[{"start":{"line":43,"column":8},"end":{"line":43,"column":8}},{"start":{"line":43,"column":8},"end":{"line":43,"column":8}}]},"7":{"line":43,"type":"binary-expr","locations":[{"start":{"line":43,"column":12},"end":{"line":43,"column":19}},{"start":{"line":43,"column":23},"end":{"line":43,"column":45}}]},"8":{"line":46,"type":"if","locations":[{"start":{"line":46,"column":15},"end":{"line":46,"column":15}},{"start":{"line":46,"column":15},"end":{"line":46,"column":15}}]}},"code":["'use strict';","","const stream = require('stream');","const Transform = stream.Transform;","","/**"," * Ensures that only <CR><LF> sequences are used for linebreaks"," *"," * @param {Object} options Stream options"," */","class LeWindows extends Transform {","","    constructor(options) {","        super(options);","        // init Transform","        this.options = options || {};","        this.lastByte = false;","    }","","    /**","     * Escapes dots","     */","    _transform(chunk, encoding, done) {","        let buf;","        let lastPos = 0;","","        for (let i = 0, len = chunk.length; i < len; i++) {","            if (chunk[i] === 0x0A) { // \\n","                if (","                    (i && chunk[i - 1] !== 0x0D) ||","                    (!i && this.lastByte !== 0x0D)","                ) {","                    if (i > lastPos) {","                        buf = chunk.slice(lastPos, i);","                        this.push(buf);","                    }","                    this.push(new Buffer('\\r\\n'));","                    lastPos = i + 1;","                }","            }","        }","","        if (lastPos && lastPos < chunk.length) {","            buf = chunk.slice(lastPos);","            this.push(buf);","        } else if (!lastPos) {","            this.push(chunk);","        }","","        this.lastByte = chunk[chunk.length - 1];","        done();","    }","}","","module.exports = LeWindows;",""],"l":{"3":1,"4":1,"14":0,"16":0,"17":0,"24":0,"25":0,"27":0,"28":0,"29":0,"33":0,"34":0,"35":0,"37":0,"38":0,"43":0,"44":0,"45":0,"46":0,"47":0,"50":0,"51":0,"55":1}},"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/sendmail-transport/le-unix.js":{"path":"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/sendmail-transport/le-unix.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"(anonymous_1)","line":13,"loc":{"start":{"line":13,"column":15},"end":{"line":13,"column":25}}},"2":{"name":"(anonymous_2)","line":22,"loc":{"start":{"line":22,"column":14},"end":{"line":22,"column":38}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":33}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":35}},"3":{"start":{"line":14,"column":8},"end":{"line":14,"column":23}},"4":{"start":{"line":16,"column":8},"end":{"line":16,"column":37}},"5":{"start":{"line":23,"column":8},"end":{"line":23,"column":16}},"6":{"start":{"line":24,"column":8},"end":{"line":24,"column":24}},"7":{"start":{"line":26,"column":8},"end":{"line":32,"column":9}},"8":{"start":{"line":27,"column":12},"end":{"line":31,"column":13}},"9":{"start":{"line":28,"column":16},"end":{"line":28,"column":46}},"10":{"start":{"line":29,"column":16},"end":{"line":29,"column":32}},"11":{"start":{"line":30,"column":16},"end":{"line":30,"column":31}},"12":{"start":{"line":33,"column":8},"end":{"line":38,"column":9}},"13":{"start":{"line":34,"column":12},"end":{"line":34,"column":39}},"14":{"start":{"line":35,"column":12},"end":{"line":35,"column":27}},"15":{"start":{"line":36,"column":15},"end":{"line":38,"column":9}},"16":{"start":{"line":37,"column":12},"end":{"line":37,"column":29}},"17":{"start":{"line":39,"column":8},"end":{"line":39,"column":15}},"18":{"start":{"line":43,"column":0},"end":{"line":43,"column":27}}},"branchMap":{"1":{"line":16,"type":"binary-expr","locations":[{"start":{"line":16,"column":23},"end":{"line":16,"column":30}},{"start":{"line":16,"column":34},"end":{"line":16,"column":36}}]},"2":{"line":27,"type":"if","locations":[{"start":{"line":27,"column":12},"end":{"line":27,"column":12}},{"start":{"line":27,"column":12},"end":{"line":27,"column":12}}]},"3":{"line":33,"type":"if","locations":[{"start":{"line":33,"column":8},"end":{"line":33,"column":8}},{"start":{"line":33,"column":8},"end":{"line":33,"column":8}}]},"4":{"line":33,"type":"binary-expr","locations":[{"start":{"line":33,"column":12},"end":{"line":33,"column":19}},{"start":{"line":33,"column":23},"end":{"line":33,"column":45}}]},"5":{"line":36,"type":"if","locations":[{"start":{"line":36,"column":15},"end":{"line":36,"column":15}},{"start":{"line":36,"column":15},"end":{"line":36,"column":15}}]}},"code":["'use strict';","","const stream = require('stream');","const Transform = stream.Transform;","","/**"," * Ensures that only <LF> is used for linebreaks"," *"," * @param {Object} options Stream options"," */","class LeWindows extends Transform {","","    constructor(options) {","        super(options);","        // init Transform","        this.options = options || {};","    }","","    /**","     * Escapes dots","     */","    _transform(chunk, encoding, done) {","        let buf;","        let lastPos = 0;","","        for (let i = 0, len = chunk.length; i < len; i++) {","            if (chunk[i] === 0x0D) { // \\n","                buf = chunk.slice(lastPos, i);","                lastPos = i + 1;","                this.push(buf);","            }","        }","        if (lastPos && lastPos < chunk.length) {","            buf = chunk.slice(lastPos);","            this.push(buf);","        } else if (!lastPos) {","            this.push(chunk);","        }","        done();","    }","}","","module.exports = LeWindows;",""],"l":{"3":1,"4":1,"14":0,"16":0,"23":0,"24":0,"26":0,"27":0,"28":0,"29":0,"30":0,"33":0,"34":0,"35":0,"36":0,"37":0,"39":0,"43":1}},"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/stream-transport/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/stream-transport/index.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"(anonymous_1)","line":20,"loc":{"start":{"line":20,"column":15},"end":{"line":20,"column":25}}},"2":{"name":"(anonymous_2)","line":41,"loc":{"start":{"line":41,"column":8},"end":{"line":41,"column":21}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":50}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":56}},"5":{"start":{"line":21,"column":8},"end":{"line":21,"column":32}},"6":{"start":{"line":23,"column":8},"end":{"line":23,"column":37}},"7":{"start":{"line":25,"column":8},"end":{"line":25,"column":38}},"8":{"start":{"line":26,"column":8},"end":{"line":26,"column":43}},"9":{"start":{"line":28,"column":8},"end":{"line":30,"column":11}},"10":{"start":{"line":32,"column":8},"end":{"line":32,"column":117}},"11":{"start":{"line":43,"column":8},"end":{"line":43,"column":36}},"12":{"start":{"line":45,"column":8},"end":{"line":45,"column":72}},"13":{"start":{"line":46,"column":8},"end":{"line":46,"column":49}},"14":{"start":{"line":48,"column":8},"end":{"line":48,"column":54}},"15":{"start":{"line":49,"column":8},"end":{"line":51,"column":9}},"16":{"start":{"line":50,"column":12},"end":{"line":50,"column":79}},"17":{"start":{"line":52,"column":8},"end":{"line":55,"column":133}},"18":{"start":{"line":57,"column":8},"end":{"line":116,"column":11}},"19":{"start":{"line":59,"column":12},"end":{"line":59,"column":29}},"20":{"start":{"line":60,"column":12},"end":{"line":60,"column":23}},"21":{"start":{"line":61,"column":12},"end":{"line":61,"column":26}},"22":{"start":{"line":63,"column":12},"end":{"line":75,"column":13}},"23":{"start":{"line":64,"column":16},"end":{"line":64,"column":75}},"24":{"start":{"line":65,"column":16},"end":{"line":65,"column":63}},"25":{"start":{"line":66,"column":16},"end":{"line":66,"column":54}},"26":{"start":{"line":67,"column":16},"end":{"line":67,"column":75}},"27":{"start":{"line":67,"column":48},"end":{"line":67,"column":73}},"28":{"start":{"line":69,"column":16},"end":{"line":73,"column":83}},"29":{"start":{"line":74,"column":16},"end":{"line":74,"column":31}},"30":{"start":{"line":77,"column":12},"end":{"line":90,"column":13}},"31":{"start":{"line":78,"column":16},"end":{"line":84,"column":19}},"32":{"start":{"line":79,"column":20},"end":{"line":83,"column":85}},"33":{"start":{"line":85,"column":16},"end":{"line":89,"column":19}},"34":{"start":{"line":92,"column":12},"end":{"line":92,"column":28}},"35":{"start":{"line":93,"column":12},"end":{"line":93,"column":29}},"36":{"start":{"line":94,"column":12},"end":{"line":100,"column":15}},"37":{"start":{"line":95,"column":16},"end":{"line":95,"column":26}},"38":{"start":{"line":96,"column":16},"end":{"line":99,"column":17}},"39":{"start":{"line":97,"column":20},"end":{"line":97,"column":39}},"40":{"start":{"line":98,"column":20},"end":{"line":98,"column":45}},"41":{"start":{"line":102,"column":12},"end":{"line":109,"column":15}},"42":{"start":{"line":103,"column":16},"end":{"line":107,"column":81}},"43":{"start":{"line":108,"column":16},"end":{"line":108,"column":33}},"44":{"start":{"line":111,"column":12},"end":{"line":115,"column":16}},"45":{"start":{"line":111,"column":35},"end":{"line":115,"column":14}},"46":{"start":{"line":120,"column":0},"end":{"line":120,"column":35}}},"branchMap":{"1":{"line":21,"type":"binary-expr","locations":[{"start":{"line":21,"column":18},"end":{"line":21,"column":25}},{"start":{"line":21,"column":29},"end":{"line":21,"column":31}}]},"2":{"line":23,"type":"binary-expr","locations":[{"start":{"line":23,"column":23},"end":{"line":23,"column":30}},{"start":{"line":23,"column":34},"end":{"line":23,"column":36}}]},"3":{"line":29,"type":"binary-expr","locations":[{"start":{"line":29,"column":23},"end":{"line":29,"column":45}},{"start":{"line":29,"column":49},"end":{"line":29,"column":67}}]},"4":{"line":32,"type":"binary-expr","locations":[{"start":{"line":32,"column":68},"end":{"line":32,"column":83}},{"start":{"line":32,"column":87},"end":{"line":32,"column":89}}]},"5":{"line":45,"type":"binary-expr","locations":[{"start":{"line":45,"column":23},"end":{"line":45,"column":41}},{"start":{"line":45,"column":45},"end":{"line":45,"column":71}}]},"6":{"line":48,"type":"binary-expr","locations":[{"start":{"line":48,"column":35},"end":{"line":48,"column":46}},{"start":{"line":48,"column":50},"end":{"line":48,"column":52}}]},"7":{"line":49,"type":"if","locations":[{"start":{"line":49,"column":8},"end":{"line":49,"column":8}},{"start":{"line":49,"column":8},"end":{"line":49,"column":8}}]},"8":{"line":55,"type":"cond-expr","locations":[{"start":{"line":55,"column":112},"end":{"line":55,"column":122}},{"start":{"line":55,"column":125},"end":{"line":55,"column":131}}]},"9":{"line":64,"type":"cond-expr","locations":[{"start":{"line":64,"column":44},"end":{"line":64,"column":59}},{"start":{"line":64,"column":62},"end":{"line":64,"column":74}}]},"10":{"line":77,"type":"if","locations":[{"start":{"line":77,"column":12},"end":{"line":77,"column":12}},{"start":{"line":77,"column":12},"end":{"line":77,"column":12}}]},"11":{"line":86,"type":"binary-expr","locations":[{"start":{"line":86,"column":30},"end":{"line":86,"column":48}},{"start":{"line":86,"column":52},"end":{"line":86,"column":78}}]},"12":{"line":112,"type":"binary-expr","locations":[{"start":{"line":112,"column":26},"end":{"line":112,"column":44}},{"start":{"line":112,"column":48},"end":{"line":112,"column":74}}]}},"code":["'use strict';","","const packageData = require('../../package.json');","const shared = require('../shared');","const LeWindows = require('../sendmail-transport/le-windows');","const LeUnix = require('../sendmail-transport/le-unix');","","/**"," * Generates a Transport object for streaming"," *"," * Possible options can be the following:"," *"," *  * **buffer** if true, then returns the message as a Buffer object instead of a stream"," *  * **newline** either 'windows' or 'unix'"," *"," * @constructor"," * @param {Object} optional config parameter for the AWS Sendmail service"," */","class SendmailTransport {","    constructor(options) {","        options = options || {};","","        this.options = options || {};","","        this.name = 'StreamTransport';","        this.version = packageData.version;","","        this.logger = shared.getLogger(this.options, {","            component: this.options.component || 'stream-transport'","        });","","        this.winbreak = ['win', 'windows', 'dos', '\\r\\n'].includes((options.newline || '').toString().toLowerCase());","    }","","    /**","     * Compiles a mailcomposer message and forwards it to handler that sends it","     *","     * @param {Object} emailMessage MailComposer object","     * @param {Function} callback Callback function to run when the sending is completed","     */","    send(mail, done) {","        // We probably need this in the output","        mail.message.keepBcc = true;","","        let envelope = mail.data.envelope || mail.message.getEnvelope();","        let messageId = mail.message.messageId();","","        let recipients = [].concat(envelope.to || []);","        if (recipients.length > 3) {","            recipients.push('...and ' + recipients.splice(2).length + ' more');","        }","        this.logger.info({","            tnx: 'send',","            messageId","        }, 'Sending message %s to <%s> using %s line breaks', messageId, recipients.join(', '), this.winbreak ? '<CR><LF>' : '<LF>');","","        setImmediate(() => {","","            let sourceStream;","            let stream;","            let transform;","","            try {","                transform = this.winbreak ? new LeWindows() : new LeUnix();","                sourceStream = mail.message.createReadStream();","                stream = sourceStream.pipe(transform);","                sourceStream.on('error', err => stream.emit('error', err));","            } catch (E) {","                this.logger.error({","                    err: E,","                    tnx: 'send',","                    messageId","                }, 'Creating send stream failed for %s. %s', messageId, E.message);","                return done(E);","            }","","            if (!this.options.buffer) {","                stream.once('error', err => {","                    this.logger.error({","                        err,","                        tnx: 'send',","                        messageId","                    }, 'Failed creating message for %s. %s', messageId, err.message);","                });","                return done(null, {","                    envelope: mail.data.envelope || mail.message.getEnvelope(),","                    messageId,","                    message: stream","                });","            }","","            let chunks = [];","            let chunklen = 0;","            stream.on('readable', () => {","                let chunk;","                while ((chunk = stream.read()) !== null) {","                    chunks.push(chunk);","                    chunklen += chunk.length;","                }","            });","","            stream.once('error', err => {","                this.logger.error({","                    err,","                    tnx: 'send',","                    messageId","                }, 'Failed creating message for %s. %s', messageId, err.message);","                return done(err);","            });","","            stream.on('end', () => done(null, {","                envelope: mail.data.envelope || mail.message.getEnvelope(),","                messageId,","                message: Buffer.concat(chunks, chunklen)","            }));","        });","    }","}","","module.exports = SendmailTransport;",""],"l":{"3":1,"4":1,"5":1,"6":1,"21":0,"23":0,"25":0,"26":0,"28":0,"32":0,"43":0,"45":0,"46":0,"48":0,"49":0,"50":0,"52":0,"57":0,"59":0,"60":0,"61":0,"63":0,"64":0,"65":0,"66":0,"67":0,"69":0,"74":0,"77":0,"78":0,"79":0,"85":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"102":0,"103":0,"108":0,"111":0,"120":1}},"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/json-transport/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/json-transport/index.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0,0],"22":[0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"(anonymous_1)","line":19,"loc":{"start":{"line":19,"column":15},"end":{"line":19,"column":25}}},"2":{"name":"(anonymous_2)","line":38,"loc":{"start":{"line":38,"column":8},"end":{"line":38,"column":21}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":50}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":36}},"3":{"start":{"line":20,"column":8},"end":{"line":20,"column":32}},"4":{"start":{"line":22,"column":8},"end":{"line":22,"column":37}},"5":{"start":{"line":24,"column":8},"end":{"line":24,"column":38}},"6":{"start":{"line":25,"column":8},"end":{"line":25,"column":43}},"7":{"start":{"line":27,"column":8},"end":{"line":29,"column":11}},"8":{"start":{"line":40,"column":8},"end":{"line":40,"column":36}},"9":{"start":{"line":42,"column":8},"end":{"line":42,"column":72}},"10":{"start":{"line":43,"column":8},"end":{"line":43,"column":49}},"11":{"start":{"line":45,"column":8},"end":{"line":45,"column":54}},"12":{"start":{"line":46,"column":8},"end":{"line":48,"column":9}},"13":{"start":{"line":47,"column":12},"end":{"line":47,"column":79}},"14":{"start":{"line":49,"column":8},"end":{"line":52,"column":87}},"15":{"start":{"line":54,"column":8},"end":{"line":106,"column":11}},"16":{"start":{"line":55,"column":12},"end":{"line":105,"column":15}},"17":{"start":{"line":56,"column":16},"end":{"line":63,"column":17}},"18":{"start":{"line":57,"column":20},"end":{"line":61,"column":92}},"19":{"start":{"line":62,"column":20},"end":{"line":62,"column":37}},"20":{"start":{"line":65,"column":16},"end":{"line":65,"column":43}},"21":{"start":{"line":67,"column":16},"end":{"line":75,"column":19}},"22":{"start":{"line":68,"column":20},"end":{"line":74,"column":21}},"23":{"start":{"line":69,"column":24},"end":{"line":73,"column":25}},"24":{"start":{"line":70,"column":28},"end":{"line":70,"column":58}},"25":{"start":{"line":71,"column":31},"end":{"line":73,"column":25}},"26":{"start":{"line":72,"column":28},"end":{"line":72,"column":69}},"27":{"start":{"line":77,"column":16},"end":{"line":80,"column":17}},"28":{"start":{"line":78,"column":20},"end":{"line":78,"column":87}},"29":{"start":{"line":79,"column":20},"end":{"line":79,"column":55}},"30":{"start":{"line":82,"column":16},"end":{"line":89,"column":17}},"31":{"start":{"line":83,"column":20},"end":{"line":88,"column":23}},"32":{"start":{"line":84,"column":24},"end":{"line":87,"column":25}},"33":{"start":{"line":85,"column":28},"end":{"line":85,"column":89}},"34":{"start":{"line":86,"column":28},"end":{"line":86,"column":60}},"35":{"start":{"line":91,"column":16},"end":{"line":98,"column":17}},"36":{"start":{"line":92,"column":20},"end":{"line":97,"column":23}},"37":{"start":{"line":93,"column":24},"end":{"line":96,"column":25}},"38":{"start":{"line":94,"column":28},"end":{"line":94,"column":87}},"39":{"start":{"line":95,"column":28},"end":{"line":95,"column":59}},"40":{"start":{"line":100,"column":16},"end":{"line":104,"column":19}},"41":{"start":{"line":110,"column":0},"end":{"line":110,"column":31}}},"branchMap":{"1":{"line":20,"type":"binary-expr","locations":[{"start":{"line":20,"column":18},"end":{"line":20,"column":25}},{"start":{"line":20,"column":29},"end":{"line":20,"column":31}}]},"2":{"line":22,"type":"binary-expr","locations":[{"start":{"line":22,"column":23},"end":{"line":22,"column":30}},{"start":{"line":22,"column":34},"end":{"line":22,"column":36}}]},"3":{"line":28,"type":"binary-expr","locations":[{"start":{"line":28,"column":23},"end":{"line":28,"column":45}},{"start":{"line":28,"column":49},"end":{"line":28,"column":67}}]},"4":{"line":42,"type":"binary-expr","locations":[{"start":{"line":42,"column":23},"end":{"line":42,"column":41}},{"start":{"line":42,"column":45},"end":{"line":42,"column":71}}]},"5":{"line":45,"type":"binary-expr","locations":[{"start":{"line":45,"column":35},"end":{"line":45,"column":46}},{"start":{"line":45,"column":50},"end":{"line":45,"column":52}}]},"6":{"line":46,"type":"if","locations":[{"start":{"line":46,"column":8},"end":{"line":46,"column":8}},{"start":{"line":46,"column":8},"end":{"line":46,"column":8}}]},"7":{"line":56,"type":"if","locations":[{"start":{"line":56,"column":16},"end":{"line":56,"column":16}},{"start":{"line":56,"column":16},"end":{"line":56,"column":16}}]},"8":{"line":68,"type":"if","locations":[{"start":{"line":68,"column":20},"end":{"line":68,"column":20}},{"start":{"line":68,"column":20},"end":{"line":68,"column":20}}]},"9":{"line":68,"type":"binary-expr","locations":[{"start":{"line":68,"column":24},"end":{"line":68,"column":33}},{"start":{"line":68,"column":37},"end":{"line":68,"column":54}}]},"10":{"line":69,"type":"if","locations":[{"start":{"line":69,"column":24},"end":{"line":69,"column":24}},{"start":{"line":69,"column":24},"end":{"line":69,"column":24}}]},"11":{"line":71,"type":"if","locations":[{"start":{"line":71,"column":31},"end":{"line":71,"column":31}},{"start":{"line":71,"column":31},"end":{"line":71,"column":31}}]},"12":{"line":77,"type":"if","locations":[{"start":{"line":77,"column":16},"end":{"line":77,"column":16}},{"start":{"line":77,"column":16},"end":{"line":77,"column":16}}]},"13":{"line":77,"type":"binary-expr","locations":[{"start":{"line":77,"column":20},"end":{"line":77,"column":34}},{"start":{"line":77,"column":38},"end":{"line":77,"column":77}}]},"14":{"line":82,"type":"if","locations":[{"start":{"line":82,"column":16},"end":{"line":82,"column":16}},{"start":{"line":82,"column":16},"end":{"line":82,"column":16}}]},"15":{"line":82,"type":"binary-expr","locations":[{"start":{"line":82,"column":20},"end":{"line":82,"column":37}},{"start":{"line":82,"column":41},"end":{"line":82,"column":65}}]},"16":{"line":84,"type":"if","locations":[{"start":{"line":84,"column":24},"end":{"line":84,"column":24}},{"start":{"line":84,"column":24},"end":{"line":84,"column":24}}]},"17":{"line":84,"type":"binary-expr","locations":[{"start":{"line":84,"column":28},"end":{"line":84,"column":39}},{"start":{"line":84,"column":43},"end":{"line":84,"column":62}},{"start":{"line":84,"column":66},"end":{"line":84,"column":102}}]},"18":{"line":91,"type":"if","locations":[{"start":{"line":91,"column":16},"end":{"line":91,"column":16}},{"start":{"line":91,"column":16},"end":{"line":91,"column":16}}]},"19":{"line":91,"type":"binary-expr","locations":[{"start":{"line":91,"column":20},"end":{"line":91,"column":36}},{"start":{"line":91,"column":40},"end":{"line":91,"column":63}}]},"20":{"line":93,"type":"if","locations":[{"start":{"line":93,"column":24},"end":{"line":93,"column":24}},{"start":{"line":93,"column":24},"end":{"line":93,"column":24}}]},"21":{"line":93,"type":"binary-expr","locations":[{"start":{"line":93,"column":28},"end":{"line":93,"column":38}},{"start":{"line":93,"column":42},"end":{"line":93,"column":60}},{"start":{"line":93,"column":64},"end":{"line":93,"column":99}}]},"22":{"line":101,"type":"binary-expr","locations":[{"start":{"line":101,"column":30},"end":{"line":101,"column":48}},{"start":{"line":101,"column":52},"end":{"line":101,"column":78}}]}},"code":["'use strict';","","const packageData = require('../../package.json');","const shared = require('../shared');","","/**"," * Generates a Transport object for Sendmail"," *"," * Possible options can be the following:"," *"," *  * **path** optional path to sendmail binary"," *  * **newline** either 'windows' or 'unix'"," *  * **args** an array of arguments for the sendmail binary"," *"," * @constructor"," * @param {Object} optional config parameter for the AWS Sendmail service"," */","class JSONTransport {","    constructor(options) {","        options = options || {};","","        this.options = options || {};","","        this.name = 'StreamTransport';","        this.version = packageData.version;","","        this.logger = shared.getLogger(this.options, {","            component: this.options.component || 'stream-transport'","        });","    }","","    /**","     * <p>Compiles a mailcomposer message and forwards it to handler that sends it.</p>","     *","     * @param {Object} emailMessage MailComposer object","     * @param {Function} callback Callback function to run when the sending is completed","     */","    send(mail, done) {","        // Sendmail strips this header line by itself","        mail.message.keepBcc = true;","","        let envelope = mail.data.envelope || mail.message.getEnvelope();","        let messageId = mail.message.messageId();","","        let recipients = [].concat(envelope.to || []);","        if (recipients.length > 3) {","            recipients.push('...and ' + recipients.splice(2).length + ' more');","        }","        this.logger.info({","            tnx: 'send',","            messageId","        }, 'Composing JSON structure of %s to <%s>', messageId, recipients.join(', '));","","        setImmediate(() => {","            mail.resolveAll((err, data) => {","                if (err) {","                    this.logger.error({","                        err,","                        tnx: 'send',","                        messageId","                    }, 'Failed building JSON structure for %s. %s', messageId, err.message);","                    return done(err);","                }","","                data.messageId = messageId;","","                ['html', 'text', 'watchHtml'].forEach(key => {","                    if (data[key] && data[key].content) {","                        if (typeof data[key].content === 'string') {","                            data[key] = data[key].content;","                        } else if (Buffer.isBuffer(data[key].content)) {","                            data[key] = data[key].content.toString();","                        }","                    }","                });","","                if (data.icalEvent && Buffer.isBuffer(data.icalEvent.content)) {","                    data.icalEvent.content = data.icalEvent.content.toString('base64');","                    data.icalEvent.encoding = 'base64';","                }","","                if (data.alternatives && data.alternatives.length) {","                    data.alternatives.forEach(alternative => {","                        if (alternative && alternative.content && Buffer.isBuffer(alternative.content)) {","                            alternative.content = alternative.content.toString('base64');","                            alternative.encoding = 'base64';","                        }","                    });","                }","","                if (data.attachments && data.attachments.length) {","                    data.attachments.forEach(attachment => {","                        if (attachment && attachment.content && Buffer.isBuffer(attachment.content)) {","                            attachment.content = attachment.content.toString('base64');","                            attachment.encoding = 'base64';","                        }","                    });","                }","","                return done(null, {","                    envelope: mail.data.envelope || mail.message.getEnvelope(),","                    messageId,","                    message: JSON.stringify(data)","                });","            });","        });","    }","}","","module.exports = JSONTransport;",""],"l":{"3":1,"4":1,"20":0,"22":0,"24":0,"25":0,"27":0,"40":0,"42":0,"43":0,"45":0,"46":0,"47":0,"49":0,"54":0,"55":0,"56":0,"57":0,"62":0,"65":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"77":0,"78":0,"79":0,"82":0,"83":0,"84":0,"85":0,"86":0,"91":0,"92":0,"93":0,"94":0,"95":0,"100":0,"110":1}},"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/ses-transport/index.js":{"path":"/home/travis/build/npmtest/node-npmtest-nodemailer/nodemailer/lib/ses-transport/index.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},"fnMap":{"1":{"name":"(anonymous_1)","line":20,"loc":{"start":{"line":20,"column":15},"end":{"line":20,"column":25}}},"2":{"name":"(anonymous_2)","line":61,"loc":{"start":{"line":61,"column":8},"end":{"line":61,"column":25}}},"3":{"name":"(anonymous_3)","line":84,"loc":{"start":{"line":84,"column":20},"end":{"line":84,"column":23}}},"4":{"name":"(anonymous_4)","line":104,"loc":{"start":{"line":104,"column":21},"end":{"line":104,"column":24}}},"5":{"name":"(anonymous_5)","line":131,"loc":{"start":{"line":131,"column":9},"end":{"line":131,"column":12}}},"6":{"name":"(anonymous_6)","line":139,"loc":{"start":{"line":139,"column":10},"end":{"line":139,"column":13}}},"7":{"name":"(anonymous_7)","line":149,"loc":{"start":{"line":149,"column":9},"end":{"line":149,"column":26}}},"8":{"name":"(anonymous_8)","line":259,"loc":{"start":{"line":259,"column":10},"end":{"line":259,"column":21}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":39}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":50}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":36}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":62}},"5":{"start":{"line":21,"column":8},"end":{"line":21,"column":16}},"6":{"start":{"line":22,"column":8},"end":{"line":22,"column":32}},"7":{"start":{"line":24,"column":8},"end":{"line":24,"column":37}},"8":{"start":{"line":25,"column":8},"end":{"line":25,"column":36}},"9":{"start":{"line":27,"column":8},"end":{"line":27,"column":35}},"10":{"start":{"line":28,"column":8},"end":{"line":28,"column":43}},"11":{"start":{"line":30,"column":8},"end":{"line":32,"column":11}},"12":{"start":{"line":35,"column":8},"end":{"line":35,"column":78}},"13":{"start":{"line":36,"column":8},"end":{"line":36,"column":29}},"14":{"start":{"line":39,"column":8},"end":{"line":39,"column":72}},"15":{"start":{"line":40,"column":8},"end":{"line":40,"column":35}},"16":{"start":{"line":41,"column":8},"end":{"line":41,"column":33}},"17":{"start":{"line":42,"column":8},"end":{"line":42,"column":31}},"18":{"start":{"line":44,"column":8},"end":{"line":44,"column":26}},"19":{"start":{"line":46,"column":8},"end":{"line":46,"column":27}},"20":{"start":{"line":48,"column":8},"end":{"line":52,"column":11}},"21":{"start":{"line":49,"column":12},"end":{"line":51,"column":13}},"22":{"start":{"line":50,"column":16},"end":{"line":50,"column":34}},"23":{"start":{"line":62,"column":8},"end":{"line":68,"column":9}},"24":{"start":{"line":63,"column":12},"end":{"line":63,"column":32}},"25":{"start":{"line":64,"column":12},"end":{"line":67,"column":15}},"26":{"start":{"line":70,"column":8},"end":{"line":76,"column":9}},"27":{"start":{"line":71,"column":12},"end":{"line":71,"column":32}},"28":{"start":{"line":72,"column":12},"end":{"line":75,"column":15}},"29":{"start":{"line":78,"column":8},"end":{"line":81,"column":11}},"30":{"start":{"line":79,"column":12},"end":{"line":79,"column":50}},"31":{"start":{"line":79,"column":31},"end":{"line":79,"column":48}},"32":{"start":{"line":80,"column":12},"end":{"line":80,"column":25}},"33":{"start":{"line":85,"column":8},"end":{"line":87,"column":9}},"34":{"start":{"line":86,"column":12},"end":{"line":86,"column":19}},"35":{"start":{"line":89,"column":8},"end":{"line":95,"column":9}},"36":{"start":{"line":90,"column":12},"end":{"line":93,"column":13}},"37":{"start":{"line":91,"column":16},"end":{"line":91,"column":35}},"38":{"start":{"line":92,"column":16},"end":{"line":92,"column":34}},"39":{"start":{"line":94,"column":12},"end":{"line":94,"column":19}},"40":{"start":{"line":97,"column":8},"end":{"line":97,"column":40}},"41":{"start":{"line":98,"column":8},"end":{"line":101,"column":11}},"42":{"start":{"line":99,"column":12},"end":{"line":99,"column":55}},"43":{"start":{"line":99,"column":31},"end":{"line":99,"column":53}},"44":{"start":{"line":100,"column":12},"end":{"line":100,"column":25}},"45":{"start":{"line":105,"column":8},"end":{"line":105,"column":42}},"46":{"start":{"line":107,"column":8},"end":{"line":107,"column":29}},"47":{"start":{"line":108,"column":8},"end":{"line":108,"column":27}},"48":{"start":{"line":110,"column":8},"end":{"line":119,"column":9}},"49":{"start":{"line":112,"column":12},"end":{"line":114,"column":13}},"50":{"start":{"line":113,"column":16},"end":{"line":113,"column":49}},"51":{"start":{"line":116,"column":12},"end":{"line":118,"column":13}},"52":{"start":{"line":117,"column":16},"end":{"line":117,"column":47}},"53":{"start":{"line":121,"column":8},"end":{"line":123,"column":9}},"54":{"start":{"line":122,"column":12},"end":{"line":122,"column":24}},"55":{"start":{"line":125,"column":8},"end":{"line":125,"column":54}},"56":{"start":{"line":126,"column":8},"end":{"line":126,"column":85}},"57":{"start":{"line":126,"column":47},"end":{"line":126,"column":70}},"58":{"start":{"line":127,"column":8},"end":{"line":127,"column":36}},"59":{"start":{"line":128,"column":8},"end":{"line":128,"column":21}},"60":{"start":{"line":132,"column":8},"end":{"line":132,"column":27}},"61":{"start":{"line":133,"column":8},"end":{"line":133,"column":32}},"62":{"start":{"line":140,"column":8},"end":{"line":140,"column":27}},"63":{"start":{"line":150,"column":8},"end":{"line":153,"column":10}},"64":{"start":{"line":154,"column":8},"end":{"line":154,"column":27}},"65":{"start":{"line":155,"column":8},"end":{"line":155,"column":43}},"66":{"start":{"line":157,"column":8},"end":{"line":157,"column":72}},"67":{"start":{"line":158,"column":8},"end":{"line":158,"column":49}},"68":{"start":{"line":160,"column":8},"end":{"line":160,"column":54}},"69":{"start":{"line":161,"column":8},"end":{"line":163,"column":9}},"70":{"start":{"line":162,"column":12},"end":{"line":162,"column":79}},"71":{"start":{"line":164,"column":8},"end":{"line":167,"column":75}},"72":{"start":{"line":169,"column":8},"end":{"line":201,"column":10}},"73":{"start":{"line":172,"column":12},"end":{"line":174,"column":13}},"74":{"start":{"line":173,"column":16},"end":{"line":173,"column":37}},"75":{"start":{"line":175,"column":12},"end":{"line":179,"column":13}},"76":{"start":{"line":176,"column":16},"end":{"line":176,"column":65}},"77":{"start":{"line":178,"column":16},"end":{"line":178,"column":63}},"78":{"start":{"line":181,"column":12},"end":{"line":181,"column":63}},"79":{"start":{"line":182,"column":12},"end":{"line":182,"column":60}},"80":{"start":{"line":183,"column":12},"end":{"line":183,"column":28}},"81":{"start":{"line":184,"column":12},"end":{"line":184,"column":29}},"82":{"start":{"line":186,"column":12},"end":{"line":192,"column":15}},"83":{"start":{"line":187,"column":16},"end":{"line":187,"column":26}},"84":{"start":{"line":188,"column":16},"end":{"line":191,"column":17}},"85":{"start":{"line":189,"column":20},"end":{"line":189,"column":39}},"86":{"start":{"line":190,"column":20},"end":{"line":190,"column":45}},"87":{"start":{"line":194,"column":12},"end":{"line":194,"column":73}},"88":{"start":{"line":194,"column":46},"end":{"line":194,"column":71}},"89":{"start":{"line":196,"column":12},"end":{"line":198,"column":15}},"90":{"start":{"line":197,"column":16},"end":{"line":197,"column":26}},"91":{"start":{"line":200,"column":12},"end":{"line":200,"column":82}},"92":{"start":{"line":200,"column":37},"end":{"line":200,"column":80}},"93":{"start":{"line":203,"column":8},"end":{"line":251,"column":12}},"94":{"start":{"line":203,"column":27},"end":{"line":251,"column":10}},"95":{"start":{"line":204,"column":12},"end":{"line":212,"column":13}},"96":{"start":{"line":205,"column":16},"end":{"line":209,"column":81}},"97":{"start":{"line":210,"column":16},"end":{"line":210,"column":43}},"98":{"start":{"line":211,"column":16},"end":{"line":211,"column":37}},"99":{"start":{"line":214,"column":12},"end":{"line":220,"column":14}},"100":{"start":{"line":222,"column":12},"end":{"line":224,"column":15}},"101":{"start":{"line":223,"column":16},"end":{"line":223,"column":53}},"102":{"start":{"line":226,"column":12},"end":{"line":250,"column":15}},"103":{"start":{"line":227,"column":16},"end":{"line":234,"column":17}},"104":{"start":{"line":228,"column":20},"end":{"line":231,"column":72}},"105":{"start":{"line":232,"column":20},"end":{"line":232,"column":47}},"106":{"start":{"line":233,"column":20},"end":{"line":233,"column":41}},"107":{"start":{"line":236,"column":16},"end":{"line":236,"column":86}},"108":{"start":{"line":237,"column":16},"end":{"line":239,"column":17}},"109":{"start":{"line":238,"column":20},"end":{"line":238,"column":37}},"110":{"start":{"line":241,"column":16},"end":{"line":241,"column":43}},"111":{"start":{"line":242,"column":16},"end":{"line":249,"column":19}},"112":{"start":{"line":260,"column":8},"end":{"line":260,"column":20}},"113":{"start":{"line":262,"column":8},"end":{"line":266,"column":9}},"114":{"start":{"line":263,"column":12},"end":{"line":265,"column":15}},"115":{"start":{"line":264,"column":16},"end":{"line":264,"column":67}},"116":{"start":{"line":268,"column":8},"end":{"line":279,"column":11}},"117":{"start":{"line":275,"column":12},"end":{"line":277,"column":13}},"118":{"start":{"line":276,"column":16},"end":{"line":276,"column":37}},"119":{"start":{"line":278,"column":12},"end":{"line":278,"column":40}},"120":{"start":{"line":281,"column":8},"end":{"line":281,"column":23}},"121":{"start":{"line":285,"column":0},"end":{"line":285,"column":30}}},"branchMap":{"1":{"line":22,"type":"binary-expr","locations":[{"start":{"line":22,"column":18},"end":{"line":22,"column":25}},{"start":{"line":22,"column":29},"end":{"line":22,"column":31}}]},"2":{"line":24,"type":"binary-expr","locations":[{"start":{"line":24,"column":23},"end":{"line":24,"column":30}},{"start":{"line":24,"column":34},"end":{"line":24,"column":36}}]},"3":{"line":31,"type":"binary-expr","locations":[{"start":{"line":31,"column":23},"end":{"line":31,"column":45}},{"start":{"line":31,"column":49},"end":{"line":31,"column":64}}]},"4":{"line":35,"type":"binary-expr","locations":[{"start":{"line":35,"column":30},"end":{"line":35,"column":65}},{"start":{"line":35,"column":69},"end":{"line":35,"column":77}}]},"5":{"line":39,"type":"binary-expr","locations":[{"start":{"line":39,"column":27},"end":{"line":39,"column":59}},{"start":{"line":39,"column":63},"end":{"line":39,"column":71}}]},"6":{"line":49,"type":"if","locations":[{"start":{"line":49,"column":12},"end":{"line":49,"column":12}},{"start":{"line":49,"column":12},"end":{"line":49,"column":12}}]},"7":{"line":62,"type":"if","locations":[{"start":{"line":62,"column":8},"end":{"line":62,"column":8}},{"start":{"line":62,"column":8},"end":{"line":62,"column":8}}]},"8":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":8},"end":{"line":70,"column":8}},{"start":{"line":70,"column":8},"end":{"line":70,"column":8}}]},"9":{"line":85,"type":"if","locations":[{"start":{"line":85,"column":8},"end":{"line":85,"column":8}},{"start":{"line":85,"column":8},"end":{"line":85,"column":8}}]},"10":{"line":85,"type":"binary-expr","locations":[{"start":{"line":85,"column":12},"end":{"line":85,"column":51}},{"start":{"line":85,"column":55},"end":{"line":85,"column":80}}]},"11":{"line":89,"type":"if","locations":[{"start":{"line":89,"column":8},"end":{"line":89,"column":8}},{"start":{"line":89,"column":8},"end":{"line":89,"column":8}}]},"12":{"line":90,"type":"if","locations":[{"start":{"line":90,"column":12},"end":{"line":90,"column":12}},{"start":{"line":90,"column":12},"end":{"line":90,"column":12}}]},"13":{"line":112,"type":"if","locations":[{"start":{"line":112,"column":12},"end":{"line":112,"column":12}},{"start":{"line":112,"column":12},"end":{"line":112,"column":12}}]},"14":{"line":112,"type":"binary-expr","locations":[{"start":{"line":112,"column":16},"end":{"line":112,"column":66}},{"start":{"line":112,"column":71},"end":{"line":112,"column":78}},{"start":{"line":112,"column":82},"end":{"line":112,"column":114}}]},"15":{"line":116,"type":"if","locations":[{"start":{"line":116,"column":12},"end":{"line":116,"column":12}},{"start":{"line":116,"column":12},"end":{"line":116,"column":12}}]},"16":{"line":116,"type":"binary-expr","locations":[{"start":{"line":116,"column":16},"end":{"line":116,"column":65}},{"start":{"line":116,"column":69},"end":{"line":116,"column":98}}]},"17":{"line":121,"type":"if","locations":[{"start":{"line":121,"column":8},"end":{"line":121,"column":8}},{"start":{"line":121,"column":8},"end":{"line":121,"column":8}}]},"18":{"line":157,"type":"binary-expr","locations":[{"start":{"line":157,"column":23},"end":{"line":157,"column":41}},{"start":{"line":157,"column":45},"end":{"line":157,"column":71}}]},"19":{"line":160,"type":"binary-expr","locations":[{"start":{"line":160,"column":35},"end":{"line":160,"column":46}},{"start":{"line":160,"column":50},"end":{"line":160,"column":52}}]},"20":{"line":161,"type":"if","locations":[{"start":{"line":161,"column":8},"end":{"line":161,"column":8}},{"start":{"line":161,"column":8},"end":{"line":161,"column":8}}]},"21":{"line":172,"type":"if","locations":[{"start":{"line":172,"column":12},"end":{"line":172,"column":12}},{"start":{"line":172,"column":12},"end":{"line":172,"column":12}}]},"22":{"line":175,"type":"if","locations":[{"start":{"line":175,"column":12},"end":{"line":175,"column":12}},{"start":{"line":175,"column":12},"end":{"line":175,"column":12}}]},"23":{"line":175,"type":"binary-expr","locations":[{"start":{"line":175,"column":16},"end":{"line":175,"column":42}},{"start":{"line":175,"column":46},"end":{"line":175,"column":92}}]},"24":{"line":204,"type":"if","locations":[{"start":{"line":204,"column":12},"end":{"line":204,"column":12}},{"start":{"line":204,"column":12},"end":{"line":204,"column":12}}]},"25":{"line":222,"type":"binary-expr","locations":[{"start":{"line":222,"column":24},"end":{"line":222,"column":37}},{"start":{"line":222,"column":41},"end":{"line":222,"column":43}}]},"26":{"line":227,"type":"if","locations":[{"start":{"line":227,"column":16},"end":{"line":227,"column":16}},{"start":{"line":227,"column":16},"end":{"line":227,"column":16}}]},"27":{"line":236,"type":"binary-expr","locations":[{"start":{"line":236,"column":29},"end":{"line":236,"column":44}},{"start":{"line":236,"column":48},"end":{"line":236,"column":70}},{"start":{"line":236,"column":74},"end":{"line":236,"column":85}}]},"28":{"line":237,"type":"if","locations":[{"start":{"line":237,"column":16},"end":{"line":237,"column":16}},{"start":{"line":237,"column":16},"end":{"line":237,"column":16}}]},"29":{"line":247,"type":"cond-expr","locations":[{"start":{"line":247,"column":83},"end":{"line":247,"column":114}},{"start":{"line":247,"column":117},"end":{"line":247,"column":119}}]},"30":{"line":262,"type":"if","locations":[{"start":{"line":262,"column":8},"end":{"line":262,"column":8}},{"start":{"line":262,"column":8},"end":{"line":262,"column":8}}]},"31":{"line":262,"type":"binary-expr","locations":[{"start":{"line":262,"column":12},"end":{"line":262,"column":21}},{"start":{"line":262,"column":25},"end":{"line":262,"column":54}}]},"32":{"line":275,"type":"if","locations":[{"start":{"line":275,"column":12},"end":{"line":275,"column":12}},{"start":{"line":275,"column":12},"end":{"line":275,"column":12}}]},"33":{"line":275,"type":"binary-expr","locations":[{"start":{"line":275,"column":16},"end":{"line":275,"column":19}},{"start":{"line":275,"column":23},"end":{"line":275,"column":59}}]}},"code":["'use strict';","","const EventEmitter = require('events');","const packageData = require('../../package.json');","const shared = require('../shared');","const LeWindows = require('../sendmail-transport/le-windows');","","/**"," * Generates a Transport object for Sendmail"," *"," * Possible options can be the following:"," *"," *  * **path** optional path to sendmail binary"," *  * **args** an array of arguments for the sendmail binary"," *"," * @constructor"," * @param {Object} optional config parameter for the AWS Sendmail service"," */","class SESTransport extends EventEmitter {","    constructor(options) {","        super();","        options = options || {};","","        this.options = options || {};","        this.ses = this.options.SES;","","        this.name = 'SESTransport';","        this.version = packageData.version;","","        this.logger = shared.getLogger(this.options, {","            component: this.options.component || 'ses-transport'","        });","","        // parallel sending connections","        this.maxConnections = Number(this.options.maxConnections) || Infinity;","        this.connections = 0;","","        // max messages per second","        this.sendingRate = Number(this.options.sendingRate) || Infinity;","        this.sendingRateTTL = null;","        this.rateInterval = 1000;","        this.rateMessages = [];","","        this.pending = [];","","        this.idling = true;","","        setImmediate(() => {","            if (this.idling) {","                this.emit('idle');","            }","        });","    }","","    /**","     * Schedules a sending of a message","     *","     * @param {Object} emailMessage MailComposer object","     * @param {Function} callback Callback function to run when the sending is completed","     */","    send(mail, callback) {","        if (this.connections >= this.maxConnections) {","            this.idling = false;","            return this.pending.push({","                mail,","                callback","            });","        }","","        if (!this._checkSendingRate()) {","            this.idling = false;","            return this.pending.push({","                mail,","                callback","            });","        }","","        this._send(mail, (...args) => {","            setImmediate(() => callback(...args));","            this._sent();","        });","    }","","    _checkRatedQueue() {","        if (this.connections >= this.maxConnections || !this._checkSendingRate()) {","            return;","        }","","        if (!this.pending.length) {","            if (!this.idling) {","                this.idling = true;","                this.emit('idle');","            }","            return;","        }","","        let next = this.pending.shift();","        this._send(next.mail, (...args) => {","            setImmediate(() => next.callback(...args));","            this._sent();","        });","    }","","    _checkSendingRate() {","        clearTimeout(this.sendingRateTTL);","","        let now = Date.now();","        let oldest = false;","        // delete older messages","        for (let i = this.rateMessages.length - 1; i >= 0; i--) {","","            if (this.rateMessages[i].ts >= now - this.rateInterval && (!oldest || this.rateMessages[i].ts < oldest)) {","                oldest = this.rateMessages[i].ts;","            }","","            if (this.rateMessages[i].ts < now - this.rateInterval && !this.rateMessages[i].pending) {","                this.rateMessages.splice(i, 1);","            }","        }","","        if (this.rateMessages.length < this.sendingRate) {","            return true;","        }","","        let delay = Math.max(oldest + 1001, now + 20);","        this.sendingRateTTL = setTimeout(() => this._checkRatedQueue(), now - delay);","        this.sendingRateTTL.unref();","        return false;","    }","","    _sent() {","        this.connections--;","        this._checkRatedQueue();","    }","","    /**","     * Returns true if there are free slots in the queue","     */","    isIdle() {","        return this.idling;","    }","","    /**","     * Compiles a mailcomposer message and forwards it to SES","     *","     * @param {Object} emailMessage MailComposer object","     * @param {Function} callback Callback function to run when the sending is completed","     */","    _send(mail, callback) {","        let statObject = {","            ts: Date.now(),","            pending: true","        };","        this.connections++;","        this.rateMessages.push(statObject);","","        let envelope = mail.data.envelope || mail.message.getEnvelope();","        let messageId = mail.message.messageId();","","        let recipients = [].concat(envelope.to || []);","        if (recipients.length > 3) {","            recipients.push('...and ' + recipients.splice(2).length + ' more');","        }","        this.logger.info({","            tnx: 'send',","            messageId","        }, 'Sending message %s to <%s>', messageId, recipients.join(', '));","","        let getRawMessage = next => {","","            // do not use Message-ID and Date in DKIM signature","            if (!mail.data._dkim) {","                mail.data._dkim = {};","            }","            if (mail.data._dkim.skipFields && typeof mail.data._dkim.skipFields === 'string') {","                mail.data._dkim.skipFields += ':date:message-id';","            } else {","                mail.data._dkim.skipFields = 'date:message-id';","            }","","            let sourceStream = mail.message.createReadStream();","            let stream = sourceStream.pipe(new LeWindows());","            let chunks = [];","            let chunklen = 0;","","            stream.on('readable', () => {","                let chunk;","                while ((chunk = stream.read()) !== null) {","                    chunks.push(chunk);","                    chunklen += chunk.length;","                }","            });","","            sourceStream.once('error', err => stream.emit('error', err));","","            stream.once('error', err => {","                next(err);","            });","","            stream.once('end', () => next(null, Buffer.concat(chunks, chunklen)));","        };","","        setImmediate(() => getRawMessage((err, raw) => {","            if (err) {","                this.logger.error({","                    err,","                    tnx: 'send',","                    messageId","                }, 'Failed creating message for %s. %s', messageId, err.message);","                statObject.pending = false;","                return callback(err);","            }","","            let sesMessage = {","                RawMessage: { // required","                    Data: raw // required","                },","                Source: envelope.from,","                Destinations: envelope.to","            };","","            Object.keys(mail.data.ses || {}).forEach(key => {","                sesMessage[key] = mail.data.ses[key];","            });","","            this.ses.sendRawEmail(sesMessage, (err, data) => {","                if (err) {","                    this.logger.error({","                        err,","                        tnx: 'send'","                    }, 'Send error for %s: %s', messageId, err.message);","                    statObject.pending = false;","                    return callback(err);","                }","","                let region = this.ses.config && this.ses.config.region || 'us-east-1';","                if (region === 'us-east-1') {","                    region = 'email';","                }","","                statObject.pending = false;","                callback(null, {","                    envelope: {","                        from: envelope.from,","                        to: envelope.to","                    },","                    messageId: '<' + data.MessageId + (!/@/.test(data.MessageId) ? '@' + region + '.amazonses.com' : '') + '>',","                    response: data.MessageId","                });","            });","        }));","    }","","    /**","     * Verifies SES configuration","     *","     * @param {Function} callback Callback function","     */","    verify(callback) {","        let promise;","","        if (!callback && typeof Promise === 'function') {","            promise = new Promise((resolve, reject) => {","                callback = shared.callbackPromise(resolve, reject);","            });","        }","","        this.ses.sendRawEmail({","            RawMessage: { // required","                Data: 'From: invalid@invalid\\r\\nTo: invalid@invalid\\r\\n Subject: Invalid\\r\\n\\r\\nInvalid'","            },","            Source: 'invalid@invalid',","            Destinations: ['invalid@invalid']","        }, err => {","            if (err && err.code !== 'InvalidParameterValue') {","                return callback(err);","            }","            return callback(null, true);","        });","","        return promise;","    }","}","","module.exports = SESTransport;",""],"l":{"3":1,"4":1,"5":1,"6":1,"21":0,"22":0,"24":0,"25":0,"27":0,"28":0,"30":0,"35":0,"36":0,"39":0,"40":0,"41":0,"42":0,"44":0,"46":0,"48":0,"49":0,"50":0,"62":0,"63":0,"64":0,"70":0,"71":0,"72":0,"78":0,"79":0,"80":0,"85":0,"86":0,"89":0,"90":0,"91":0,"92":0,"94":0,"97":0,"98":0,"99":0,"100":0,"105":0,"107":0,"108":0,"110":0,"112":0,"113":0,"116":0,"117":0,"121":0,"122":0,"125":0,"126":0,"127":0,"128":0,"132":0,"133":0,"140":0,"150":0,"154":0,"155":0,"157":0,"158":0,"160":0,"161":0,"162":0,"164":0,"169":0,"172":0,"173":0,"175":0,"176":0,"178":0,"181":0,"182":0,"183":0,"184":0,"186":0,"187":0,"188":0,"189":0,"190":0,"194":0,"196":0,"197":0,"200":0,"203":0,"204":0,"205":0,"210":0,"211":0,"214":0,"222":0,"223":0,"226":0,"227":0,"228":0,"232":0,"233":0,"236":0,"237":0,"238":0,"241":0,"242":0,"260":0,"262":0,"263":0,"264":0,"268":0,"275":0,"276":0,"278":0,"281":0,"285":1}}}